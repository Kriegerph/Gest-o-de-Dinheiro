var s1=Object.create;var am=Object.defineProperty,a1=Object.defineProperties,c1=Object.getOwnPropertyDescriptor,u1=Object.getOwnPropertyDescriptors,l1=Object.getOwnPropertyNames,Kl=Object.getOwnPropertySymbols,d1=Object.getPrototypeOf,cm=Object.prototype.hasOwnProperty,pb=Object.prototype.propertyIsEnumerable;var fb=(n,e,t)=>e in n?am(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,R=(n,e)=>{for(var t in e||={})cm.call(e,t)&&fb(n,t,e[t]);if(Kl)for(var t of Kl(e))pb.call(e,t)&&fb(n,t,e[t]);return n},U=(n,e)=>a1(n,u1(e));var CW=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var um=(n,e)=>{var t={};for(var r in n)cm.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Kl)for(var r of Kl(n))e.indexOf(r)<0&&pb.call(n,r)&&(t[r]=n[r]);return t};var SW=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var h1=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of l1(e))!cm.call(n,i)&&i!==t&&am(n,i,{get:()=>e[i],enumerable:!(r=c1(e,i))||r.enumerable});return n};var AW=(n,e,t)=>(t=n!=null?s1(d1(n)):{},h1(e||!n||!n.__esModule?am(t,"default",{value:n,enumerable:!0}):t,n));var It=null,Ql=!1,fm=1,f1=null,xt=Symbol("SIGNAL");function oe(n){let e=It;return It=n,e}function Jl(){return It}var uc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function lc(n){if(Ql)throw new Error("");if(It===null)return;It.consumerOnSignalRead(n);let e=It.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=It.recomputing;if(r&&(t=e!==void 0?e.nextProducer:It.producers,t!==void 0&&t.producer===n)){It.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===It&&(!r||g1(i,It)))return;let o=hs(It),s={producer:n,consumer:It,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};It.producersTail=s,e!==void 0?e.nextProducer=s:It.producers=s,o&&vb(n,s)}function gb(){fm++}function pm(n){if(!(hs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===fm)){if(!n.producerMustRecompute(n)&&!Xl(n)){hm(n);return}n.producerRecomputeValue(n),hm(n)}}function gm(n){if(n.consumers===void 0)return;let e=Ql;Ql=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||p1(r)}}finally{Ql=e}}function mm(){return It?.consumerAllowSignalWrites!==!1}function p1(n){n.dirty=!0,gm(n),n.consumerMarkedDirty?.(n)}function hm(n){n.dirty=!1,n.lastCleanEpoch=fm}function dc(n){return n&&mb(n),oe(n)}function mb(n){n.producersTail=void 0,n.recomputing=!0}function Zl(n,e){oe(e),n&&yb(n)}function yb(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(hs(n))do t=ym(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Xl(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(pm(t),r!==t.version))return!0}return!1}function hc(n){if(hs(n)){let e=n.producers;for(;e!==void 0;)e=ym(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function vb(n,e){let t=n.consumersTail,r=hs(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)vb(i.producer,i)}function ym(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!hs(e)){let o=e.producers;for(;o!==void 0;)o=ym(o)}return t}function hs(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function vm(n){f1?.(n)}function g1(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function _m(n,e){return Object.is(n,e)}function ed(n,e){let t=Object.create(m1);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(pm(t),lc(t),t.value===Yl)throw t.error;return t.value};return r[xt]=t,vm(t),r}var lm=Symbol("UNSET"),dm=Symbol("COMPUTING"),Yl=Symbol("ERRORED"),m1=U(R({},uc),{value:lm,dirty:!0,error:null,equal:_m,kind:"computed",producerMustRecompute(n){return n.value===lm||n.value===dm},producerRecomputeValue(n){if(n.value===dm)throw new Error("");let e=n.value;n.value=dm;let t=dc(n),r,i=!1;try{r=n.computation(),oe(null),i=e!==lm&&e!==Yl&&r!==Yl&&n.equal(e,r)}catch(o){r=Yl,n.error=o}finally{Zl(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function y1(){throw new Error}var _b=y1;function Eb(n){_b(n)}function Em(n){_b=n}var v1=null;function Im(n,e){let t=Object.create(td);t.value=n,e!==void 0&&(t.equal=e);let r=()=>Ib(t);return r[xt]=t,vm(t),[r,s=>fc(t,s),s=>wb(t,s)]}function Ib(n){return lc(n),n.value}function fc(n,e){mm()||Eb(n),n.equal(n.value,e)||(n.value=e,_1(n))}function wb(n,e){mm()||Eb(n),fc(n,e(n.value))}var td=U(R({},uc),{equal:_m,value:void 0,kind:"signal"});function _1(n){n.version++,gb(),gm(n),v1?.(n)}function wm(n){let e=oe(null);try{return n()}finally{oe(e)}}function ee(n){return typeof n=="function"}function fs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var nd=fs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function so(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var it=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(o){e=o instanceof nd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Db(o)}catch(s){e=e??[],s instanceof nd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new nd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Db(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&so(t,e)}remove(e){let{_finalizers:t}=this;t&&so(t,e),e instanceof n&&e._removeParent(this)}};it.EMPTY=(()=>{let n=new it;return n.closed=!0,n})();var Dm=it.EMPTY;function rd(n){return n instanceof it||n&&"closed"in n&&ee(n.remove)&&ee(n.add)&&ee(n.unsubscribe)}function Db(n){ee(n)?n():n.unsubscribe()}var bn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ps={setTimeout(n,e,...t){let{delegate:r}=ps;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ps;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function id(n){ps.setTimeout(()=>{let{onUnhandledError:e}=bn;if(e)e(n);else throw n})}function pc(){}var Tb=Tm("C",void 0,void 0);function bb(n){return Tm("E",void 0,n)}function Cb(n){return Tm("N",n,void 0)}function Tm(n,e,t){return{kind:n,value:e,error:t}}var ao=null;function gs(n){if(bn.useDeprecatedSynchronousErrorHandling){let e=!ao;if(e&&(ao={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ao;if(ao=null,t)throw r}}else n()}function Sb(n){bn.useDeprecatedSynchronousErrorHandling&&ao&&(ao.errorThrown=!0,ao.error=n)}var co=class extends it{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,rd(e)&&e.add(this)):this.destination=w1}static create(e,t,r){return new Cn(e,t,r)}next(e){this.isStopped?Cm(Cb(e),this):this._next(e)}error(e){this.isStopped?Cm(bb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Cm(Tb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},E1=Function.prototype.bind;function bm(n,e){return E1.call(n,e)}var Sm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){od(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){od(r)}else od(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){od(t)}}},Cn=class extends co{constructor(e,t,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&bn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bm(e.next,o),error:e.error&&bm(e.error,o),complete:e.complete&&bm(e.complete,o)}):i=e}this.destination=new Sm(i)}};function od(n){bn.useDeprecatedSynchronousErrorHandling?Sb(n):id(n)}function I1(n){throw n}function Cm(n,e){let{onStoppedNotification:t}=bn;t&&ps.setTimeout(()=>t(n,e))}var w1={closed:!0,next:pc,error:I1,complete:pc};var ms=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Sn(n){return n}function sd(...n){return Am(n)}function Am(n){return n.length===0?Sn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ne=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=T1(t)?t:new Cn(t,r,i);return gs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Ab(r),new r((i,o)=>{let s=new Cn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ms](){return this}pipe(...t){return Am(t)(this)}toPromise(t){return t=Ab(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Ab(n){var e;return(e=n??bn.Promise)!==null&&e!==void 0?e:Promise}function D1(n){return n&&ee(n.next)&&ee(n.error)&&ee(n.complete)}function T1(n){return n&&n instanceof co||D1(n)&&rd(n)}function b1(n){return ee(n?.lift)}function de(n){return e=>{if(b1(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(n,e,t,r,i){return new Rm(n,e,t,r,i)}var Rm=class extends co{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Rb=fs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=(()=>{class n extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ad(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Rb}next(t){gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){gs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Dm:(this.currentObservers=null,o.push(t),new it(()=>{this.currentObservers=null,so(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ne;return t.source=this,t}}return n.create=(e,t)=>new ad(e,t),n})(),ad=class extends Pe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Dm}};var We=class extends Pe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var gc={now(){return(gc.delegate||Date).now()},delegate:void 0};var mc=class extends Pe{constructor(e=1/0,t=1/0,r=gc){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var cd=class extends it{constructor(e,t){super()}schedule(e,t=0){return this}};var yc={setInterval(n,e,...t){let{delegate:r}=yc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=yc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ys=class extends cd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return yc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&yc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,so(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var vs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};vs.now=gc.now;var _s=class extends vs{constructor(e,t=vs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var vc=new _s(ys);var ud=class extends ys{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ld=class extends _s{};var Nm=new ld(ud);var qt=new ne(n=>n.complete());function Nb(n){return n&&ee(n.schedule)}function Mb(n){return n[n.length-1]}function dd(n){return ee(Mb(n))?n.pop():void 0}function ri(n){return Nb(Mb(n))?n.pop():void 0}function xb(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{l(r.next(d))}catch(f){s(f)}}function c(d){try{l(r.throw(d))}catch(f){s(f)}}function l(d){d.done?o(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function Pb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function uo(n){return this instanceof uo?(this.v=n,this):new uo(n)}function kb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(D){return Promise.resolve(D).then(y,f)}}function a(y,D){r[y]&&(i[y]=function(N){return new Promise(function(A,k){o.push([y,N,A,k])>1||c(y,N)})},D&&(i[y]=D(i[y])))}function c(y,D){try{l(r[y](D))}catch(N){g(o[0][3],N)}}function l(y){y.value instanceof uo?Promise.resolve(y.value.v).then(d,f):g(o[0][2],y)}function d(y){c("next",y)}function f(y){c("throw",y)}function g(y,D){y(D),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Ob(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Pb=="function"?Pb(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var hd=n=>n&&typeof n.length=="number"&&typeof n!="function";function fd(n){return ee(n?.then)}function pd(n){return ee(n[ms])}function gd(n){return Symbol.asyncIterator&&ee(n?.[Symbol.asyncIterator])}function md(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function C1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yd=C1();function vd(n){return ee(n?.[yd])}function _d(n){return kb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield uo(t.read());if(i)return yield uo(void 0);yield yield uo(r)}}finally{t.releaseLock()}})}function Ed(n){return ee(n?.getReader)}function Oe(n){if(n instanceof ne)return n;if(n!=null){if(pd(n))return S1(n);if(hd(n))return A1(n);if(fd(n))return R1(n);if(gd(n))return Fb(n);if(vd(n))return N1(n);if(Ed(n))return M1(n)}throw md(n)}function S1(n){return new ne(e=>{let t=n[ms]();if(ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function A1(n){return new ne(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function R1(n){return new ne(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,id)})}function N1(n){return new ne(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Fb(n){return new ne(e=>{P1(n,e).catch(t=>e.error(t))})}function M1(n){return Fb(_d(n))}function P1(n,e){var t,r,i,o;return xb(this,void 0,void 0,function*(){try{for(t=Ob(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function zt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function ii(n,e=0){return de((t,r)=>{t.subscribe(me(r,i=>zt(r,n,()=>r.next(i),e),()=>zt(r,n,()=>r.complete(),e),i=>zt(r,n,()=>r.error(i),e)))})}function oi(n,e=0){return de((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Lb(n,e){return Oe(n).pipe(oi(e),ii(e))}function Vb(n,e){return Oe(n).pipe(oi(e),ii(e))}function jb(n,e){return new ne(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Ub(n,e){return new ne(t=>{let r;return zt(t,e,()=>{r=n[yd](),zt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function Id(n,e){if(!n)throw new Error("Iterable cannot be null");return new ne(t=>{zt(t,e,()=>{let r=n[Symbol.asyncIterator]();zt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Bb(n,e){return Id(_d(n),e)}function $b(n,e){if(n!=null){if(pd(n))return Lb(n,e);if(hd(n))return jb(n,e);if(fd(n))return Vb(n,e);if(gd(n))return Id(n,e);if(vd(n))return Ub(n,e);if(Ed(n))return Bb(n,e)}throw md(n)}function Te(n,e){return e?$b(n,e):Oe(n)}function re(...n){let e=ri(n);return Te(n,e)}function Mm(n,e){let t=ee(n)?n:()=>n,r=i=>i.error(t());return new ne(e?i=>e.schedule(r,0,i):r)}function wd(n){return!!n&&(n instanceof ne||ee(n.lift)&&ee(n.subscribe))}var Ir=fs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Dd(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Cn({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Ir)}});n.subscribe(o)})}function te(n,e){return de((t,r)=>{let i=0;t.subscribe(me(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:x1}=Array;function k1(n,e){return x1(e)?n(...e):n(e)}function Td(n){return te(e=>k1(n,e))}var{isArray:O1}=Array,{getPrototypeOf:F1,prototype:L1,keys:V1}=Object;function bd(n){if(n.length===1){let e=n[0];if(O1(e))return{args:e,keys:null};if(j1(e)){let t=V1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function j1(n){return n&&typeof n=="object"&&F1(n)===L1}function Cd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Pm(...n){let e=ri(n),t=dd(n),{args:r,keys:i}=bd(n);if(r.length===0)return Te([],e);let o=new ne(U1(r,e,i?s=>Cd(i,s):Sn));return t?o.pipe(Td(t)):o}function U1(n,e,t=Sn){return r=>{Hb(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Hb(e,()=>{let l=Te(n[c],e),d=!1;l.subscribe(me(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Hb(n,e,t){n?zt(t,n,e):e()}function qb(n,e,t,r,i,o,s,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},y=N=>l<r?D(N):c.push(N),D=N=>{o&&e.next(N),l++;let A=!1;Oe(t(N,d++)).subscribe(me(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;c.length&&l<r;){let k=c.shift();s?zt(e,s,()=>D(k)):D(k)}g()}catch(k){e.error(k)}}))};return n.subscribe(me(e,y,()=>{f=!0,g()})),()=>{a?.()}}function wt(n,e,t=1/0){return ee(e)?wt((r,i)=>te((o,s)=>e(r,o,i,s))(Oe(n(r,i))),t):(typeof e=="number"&&(t=e),de((r,i)=>qb(r,i,n,t)))}function Es(n=1/0){return wt(Sn,n)}function zb(){return Es(1)}function Is(...n){return zb()(Te(n,ri(n)))}function _c(n){return new ne(e=>{Oe(n()).subscribe(e)})}function xm(...n){let e=dd(n),{args:t,keys:r}=bd(n),i=new ne(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let f=!1;Oe(t[d]).subscribe(me(o,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||o.next(r?Cd(r,a):a),o.complete())}))}});return e?i.pipe(Td(e)):i}function dn(n,e){return de((t,r)=>{let i=0;t.subscribe(me(r,o=>n.call(e,o,i++)&&r.next(o)))})}function wr(n){return de((e,t)=>{let r=null,i=!1,o;r=e.subscribe(me(t,void 0,void 0,s=>{o=Oe(n(s,wr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Ec(n,e){return ee(e)?wt(n,e,1):wt(n,1)}function B1(n,e=vc){return de((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function c(){let l=s+n,d=e.now();if(d<l){i=this.schedule(void 0,l-d),r.add(i);return}a()}t.subscribe(me(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function km(n){return de((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Dr(n){return n<=0?()=>qt:de((e,t)=>{let r=0;e.subscribe(me(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Gb(n=$1){return de((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function $1(){return new Ir}function Om(n){return de((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Tr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?dn((i,o)=>n(i,o,r)):Sn,Dr(1),t?km(e):Gb(()=>new Ir))}function Sd(n){return n<=0?()=>qt:de((e,t)=>{let r=[];e.subscribe(me(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Wb(n={}){let{connector:e=()=>new Pe,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=c=void 0,d=f=!1},D=()=>{let N=s;y(),N?.unsubscribe()};return de((N,A)=>{l++,!f&&!d&&g();let k=c=c??e();A.add(()=>{l--,l===0&&!f&&!d&&(a=Fm(D,i))}),k.subscribe(A),!s&&l>0&&(s=new Cn({next:H=>k.next(H),error:H=>{f=!0,g(),a=Fm(y,t,H),k.error(H)},complete:()=>{d=!0,g(),a=Fm(y,r),k.complete()}}),Oe(N).subscribe(s))})(o)}}function Fm(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Cn({next:()=>{r.unsubscribe(),n()}});return Oe(e(...t)).subscribe(r)}function ws(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,Wb({connector:()=>new mc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ic(...n){let e=ri(n);return de((t,r)=>{(e?Is(n,t,e):Is(n,t)).subscribe(r)})}function Gt(n,e){return de((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(me(r,c=>{i?.unsubscribe();let l=0,d=o++;Oe(n(c,d)).subscribe(i=me(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ds(n){return de((e,t)=>{Oe(n).subscribe(me(t,()=>t.complete(),pc)),!t.closed&&e.subscribe(t)})}function Dt(n,e,t){let r=ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?de((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(me(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Sn}var Lm;function Ad(){return Lm}function Yn(n){let e=Lm;return Lm=n,e}var Kb=Symbol("NotFound");function Ts(n){return n===Kb||n?.name==="\u0275NotFound"}var si=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Xm=new si("21.0.6");var xd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",L=class extends Error{code;constructor(e,t){super(go(e,t)),this.code=e}};function z1(n){return`NG0${Math.abs(n)}`}function go(n,e){return`${z1(n)}${e?": "+e:""}`}var Sr=globalThis;function ve(n){for(let e in n)if(n[e]===ve)return e;throw Error("")}function Xb(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Cr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Cr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function kd(n,e){return n?e?`${n} ${e}`:n:e||""}var G1=ve({__forward_ref__:ve});function dt(n){return n.__forward_ref__=dt,n.toString=function(){return Cr(this())},n}function yt(n){return ey(n)?n():n}function ey(n){return typeof n=="function"&&n.hasOwnProperty(G1)&&n.__forward_ref__===dt}function V(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function An(n){return{providers:n.providers||[],imports:n.imports||[]}}function Sc(n){return W1(n,Od)}function ty(n){return Sc(n)!==null}function W1(n,e){return n.hasOwnProperty(e)&&n[e]||null}function K1(n){let e=n?.[Od]??null;return e||null}function jm(n){return n&&n.hasOwnProperty(Nd)?n[Nd]:null}var Od=ve({\u0275prov:ve}),Nd=ve({\u0275inj:ve}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=V({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ny(n){return n&&!!n.\u0275providers}var ry=ve({\u0275cmp:ve}),iy=ve({\u0275dir:ve}),oy=ve({\u0275pipe:ve}),sy=ve({\u0275mod:ve}),Dc=ve({\u0275fac:ve}),mo=ve({__NG_ELEMENT_ID__:ve}),Qb=ve({__NG_ENV_ID__:ve});function ay(n){return Fd(n,"@NgModule"),n[sy]||null}function li(n){return Fd(n,"@Component"),n[ry]||null}function cy(n){return Fd(n,"@Directive"),n[iy]||null}function eC(n){return Fd(n,"@Pipe"),n[oy]||null}function Fd(n,e){if(n==null)throw new L(-919,!1)}function Zn(n){return typeof n=="string"?n:n==null?"":String(n)}function tC(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Zn(n)}var nC=ve({ngErrorCode:ve}),Q1=ve({ngErrorMessage:ve}),Y1=ve({ngTokenPath:ve});function uy(n,e){return rC("",-200,e)}function Ld(n,e){throw new L(-201,!1)}function rC(n,e,t){let r=new L(e,n);return r[nC]=e,r[Q1]=n,t&&(r[Y1]=t),r}function J1(n){return n[nC]}var Um;function iC(){return Um}function kt(n){let e=Um;return Um=n,e}function ly(n,e,t){let r=Sc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Ld(n,"")}var Z1={},lo=Z1,Bm="__NG_DI_FLAG__",$m=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=ho(t)||0;try{return this.injector.get(e,r&8?null:lo,r)}catch(i){if(Ts(i))return i;throw i}}};function X1(n,e=0){let t=Ad();if(t===void 0)throw new L(-203,!1);if(t===null)return ly(n,void 0,e);{let r=eF(e),i=t.retrieve(n,r);if(Ts(i)){if(r.optional)return null;throw i}return i}}function Y(n,e=0){return(iC()||X1)(yt(n),e)}function P(n,e){return Y(n,ho(e))}function ho(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function eF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Hm(n){let e=[];for(let t=0;t<n.length;t++){let r=yt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new L(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=tF(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Y(i,o))}else e.push(Y(r))}return e}function oC(n,e){return n[Bm]=e,n.prototype[Bm]=e,n}function tF(n){return n[Bm]}function ai(n,e){let t=n.hasOwnProperty(Dc);return t?n[Dc]:null}function sC(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function aC(n){return n.flat(Number.POSITIVE_INFINITY)}function Vd(n,e){n.forEach(t=>Array.isArray(t)?Vd(t,e):e(t))}function dy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ac(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function cC(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function jd(n,e,t){let r=Cs(n,e);return r>=0?n[r|1]=t:(r=~r,cC(n,r,e,t)),r}function Ud(n,e){let t=Cs(n,e);if(t>=0)return n[t|1]}function Cs(n,e){return nF(n,e,1)}function nF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var di={},Ot=[],Ss=new B(""),hy=new B("",-1),fy=new B(""),Tc=class{get(e,t=lo){if(t===lo){let i=rC("",-201);throw i.name="\u0275NotFound",i}return t}};function Rn(n){return{\u0275providers:n}}function uC(...n){return{\u0275providers:py(!0,n),\u0275fromNgModule:!0}}function py(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Vd(e,s=>{let a=s;Md(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&lC(i,o),t}function lC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];gy(i,o=>{e(o,r)})}}function Md(n,e,t,r){if(n=yt(n),!n)return!1;let i=null,o=jm(n),s=!o&&li(n);if(!o&&!s){let c=n.ngModule;if(o=jm(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Md(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Vd(o.imports,d=>{Md(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&lC(l,e)}if(!a){let l=ai(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ot},i),e({provide:fy,useValue:i,multi:!0},i),e({provide:Ss,useValue:()=>Y(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;gy(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function gy(n,e){for(let t of n)ny(t)&&(t=t.\u0275providers),Array.isArray(t)?gy(t,e):e(t)}var rF=ve({provide:String,useValue:ve});function dC(n){return n!==null&&typeof n=="object"&&rF in n}function iF(n){return!!(n&&n.useExisting)}function oF(n){return!!(n&&n.useFactory)}function fo(n){return typeof n=="function"}function hC(n){return!!n.useClass}var Rc=new B(""),Rd={},Yb={},Vm;function Nc(){return Vm===void 0&&(Vm=new Tc),Vm}var Ke=class{},po=class extends Ke{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,zm(e,s=>this.processProvider(s)),this.records.set(hy,bs(void 0,this)),i.has("environment")&&this.records.set(Ke,bs(void 0,this));let o=this.records.get(Rc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(fy,Ot,{self:!0}))}retrieve(e,t){let r=ho(t)||0;try{return this.get(e,lo,r)}catch(i){if(Ts(i))return i;throw i}}destroy(){wc(this),this._destroyed=!0;let e=oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),oe(e)}}onDestroy(e){return wc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){wc(this);let t=Yn(this),r=kt(void 0),i;try{return e()}finally{Yn(t),kt(r)}}get(e,t=lo,r){if(wc(this),e.hasOwnProperty(Qb))return e[Qb](this);let i=ho(r),o,s=Yn(this),a=kt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let d=lF(e)&&Sc(e);d&&this.injectableDefInScope(d)?l=bs(qm(e),Rd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?Nc():this.parent;return t=i&8&&t===lo?null:t,c.get(e,t)}catch(c){let l=J1(c);throw l===-200||l===-201?new L(l,null):c}finally{kt(a),Yn(s)}}resolveInjectorInitializers(){let e=oe(null),t=Yn(this),r=kt(void 0),i;try{let o=this.get(Ss,Ot,{self:!0});for(let s of o)s()}finally{Yn(t),kt(r),oe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Cr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=yt(e);let t=fo(e)?e:yt(e&&e.provide),r=aF(e);if(!fo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=bs(void 0,Rd,!0),i.factory=()=>Hm(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=oe(null);try{if(t.value===Yb)throw uy(Cr(e));return t.value===Rd&&(t.value=Yb,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&uF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{oe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=yt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function qm(n){let e=Sc(n),t=e!==null?e.factory:ai(n);if(t!==null)return t;if(n instanceof B)throw new L(204,!1);if(n instanceof Function)return sF(n);throw new L(204,!1)}function sF(n){if(n.length>0)throw new L(204,!1);let t=K1(n);return t!==null?()=>t.factory(n):()=>new n}function aF(n){if(dC(n))return bs(void 0,n.useValue);{let e=my(n);return bs(e,Rd)}}function my(n,e,t){let r;if(fo(n)){let i=yt(n);return ai(i)||qm(i)}else if(dC(n))r=()=>yt(n.useValue);else if(oF(n))r=()=>n.useFactory(...Hm(n.deps||[]));else if(iF(n))r=(i,o)=>Y(yt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=yt(n&&(n.useClass||n.provide));if(cF(n))r=()=>new i(...Hm(n.deps));else return ai(i)||qm(i)}return r}function wc(n){if(n.destroyed)throw new L(205,!1)}function bs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function cF(n){return!!n.deps}function uF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function lF(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function zm(n,e){for(let t of n)Array.isArray(t)?zm(t,e):t&&ny(t)?zm(t.\u0275providers,e):e(t)}function ot(n,e){let t;n instanceof po?(wc(n),t=n):t=new $m(n);let r,i=Yn(t),o=kt(void 0);try{return e()}finally{Yn(i),kt(o)}}function fC(){return iC()!==void 0||Ad()!=null}var Nn=0,W=1,J=2,lt=3,hn=4,fn=5,Mc=6,As=7,Tt=8,hi=9,Xn=10,Ne=11,Rs=12,yy=13,yo=14,pn=15,fi=16,vo=17,er=18,Pc=19,vy=20,br=21,Bd=22,xc=23,Jt=24,_o=25,kc=26,Qe=27,pC=1;var pi=7,Oc=8,Eo=9,Ft=10;function tr(n){return Array.isArray(n)&&typeof n[pC]=="object"}function Mn(n){return Array.isArray(n)&&n[pC]===!0}function _y(n){return(n.flags&4)!==0}function gi(n){return n.componentOffset>-1}function Ns(n){return(n.flags&1)===1}function nr(n){return!!n.template}function Ms(n){return(n[J]&512)!==0}function Io(n){return(n[J]&256)===256}var Ey="svg",gC="math";function gn(n){for(;Array.isArray(n);)n=n[Nn];return n}function Iy(n,e){return gn(e[n])}function Pn(n,e){return gn(e[n.index])}function $d(n,e){return n.data[e]}function Fc(n,e){return n[e]}function wy(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function mn(n,e){let t=e[n];return tr(t)?t:t[Nn]}function mC(n){return(n[J]&4)===4}function Hd(n){return(n[J]&128)===128}function yC(n){return Mn(n[lt])}function wo(n,e){return e==null?null:n[e]}function Dy(n){n[vo]=0}function Ty(n){n[J]&1024||(n[J]|=1024,Hd(n)&&Ps(n))}function vC(n,e){for(;n>0;)e=e[yo],n--;return e}function Lc(n){return!!(n[J]&9216||n[Jt]?.dirty)}function qd(n){n[Xn].changeDetectionScheduler?.notify(8),n[J]&64&&(n[J]|=1024),Lc(n)&&Ps(n)}function Ps(n){n[Xn].changeDetectionScheduler?.notify(0);let e=ci(n);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!Hd(e)));)e=ci(e)}function by(n,e){if(Io(n))throw new L(911,!1);n[br]===null&&(n[br]=[]),n[br].push(e)}function _C(n,e){if(n[br]===null)return;let t=n[br].indexOf(e);t!==-1&&n[br].splice(t,1)}function ci(n){let e=n[lt];return Mn(e)?e[lt]:e}function Cy(n){return n[As]??=[]}function Sy(n){return n.cleanup??=[]}function EC(n,e,t,r){let i=Cy(e);i.push(t),n.firstCreatePass&&Sy(n).push(r,i.length-1)}var se={lFrame:OC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Gm=!1;function IC(){return se.lFrame.elementDepthCount}function wC(){se.lFrame.elementDepthCount++}function Ay(){se.lFrame.elementDepthCount--}function zd(){return se.bindingsEnabled}function DC(){return se.skipHydrationRootTNode!==null}function Ry(n){return se.skipHydrationRootTNode===n}function Ny(){se.skipHydrationRootTNode=null}function Z(){return se.lFrame.lView}function st(){return se.lFrame.tView}function TC(n){return se.lFrame.contextLView=n,n[Tt]}function bC(n){return se.lFrame.contextLView=null,n}function at(){let n=My();for(;n!==null&&n.type===64;)n=n.parent;return n}function My(){return se.lFrame.currentTNode}function CC(){let n=se.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function xs(n,e){let t=se.lFrame;t.currentTNode=n,t.isParent=e}function Py(){return se.lFrame.isParent}function SC(){se.lFrame.isParent=!1}function AC(){return se.lFrame.contextLView}function xy(){return Gm}function ky(n){let e=Gm;return Gm=n,e}function mi(){let n=se.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Oy(){return se.lFrame.bindingIndex}function RC(n){return se.lFrame.bindingIndex=n}function Vc(){return se.lFrame.bindingIndex++}function jc(n){let e=se.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function NC(){return se.lFrame.inI18n}function MC(n,e){let t=se.lFrame;t.bindingIndex=t.bindingRootIndex=n,Gd(e)}function PC(){return se.lFrame.currentDirectiveIndex}function Gd(n){se.lFrame.currentDirectiveIndex=n}function xC(n){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Fy(){return se.lFrame.currentQueryIndex}function Wd(n){se.lFrame.currentQueryIndex=n}function dF(n){let e=n[W];return e.type===2?e.declTNode:e.type===1?n[fn]:null}function Ly(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=dF(o),i===null||(o=o[yo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=se.lFrame=kC();return r.currentTNode=e,r.lView=n,!0}function Kd(n){let e=kC(),t=n[W];se.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function kC(){let n=se.lFrame,e=n===null?null:n.child;return e===null?OC(n):e}function OC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function FC(){let n=se.lFrame;return se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Vy=FC;function Qd(){let n=FC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function LC(n){return(se.lFrame.contextLView=vC(n,se.lFrame.contextLView))[Tt]}function rr(){return se.lFrame.selectedIndex}function yi(n){se.lFrame.selectedIndex=n}function Yd(){let n=se.lFrame;return $d(n.tView,n.selectedIndex)}function VC(){se.lFrame.currentNamespace=Ey}function jC(){return se.lFrame.currentNamespace}var UC=!0;function Jd(){return UC}function Uc(n){UC=n}function Wm(n,e=null,t=null,r){let i=jy(n,e,t,r);return i.resolveInjectorInitializers(),i}function jy(n,e=null,t=null,r,i=new Set){let o=[t||Ot,uC(n)];return r=r||(typeof n=="object"?void 0:Cr(n)),new po(o,e||Nc(),r||null,i)}var qe=class n{static THROW_IF_NOT_FOUND=lo;static NULL=new Tc;static create(e,t){if(Array.isArray(e))return Wm({name:""},t,e,"");{let r=e.name??"";return Wm({name:r},e.parent,e.providers,r)}}static \u0275prov=V({token:n,providedIn:"any",factory:()=>Y(hy)});static __NG_ELEMENT_ID__=-1},ct=new B(""),xn=(()=>{class n{static __NG_ELEMENT_ID__=hF;static __NG_ENV_ID__=t=>t}return n})(),Km=class extends xn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Io(this._lView)}onDestroy(e){let t=this._lView;return by(t,e),()=>_C(t,e)}};function hF(){return new Km(Z())}var BC=!1,Ar=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new We(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ne(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),Qm=class extends Pe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,fC()&&(this.destroyRef=P(xn,{optional:!0})??void 0,this.pendingTasks=P(Ar,{optional:!0})??void 0)}emit(e){let t=oe(null);try{super.next(e)}finally{oe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof it&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ve=Qm;function Pd(...n){}function Uy(n){let e,t;function r(){n=Pd;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function By(n){return queueMicrotask(()=>n()),()=>{n=Pd}}var $y="isAngularZone",bc=$y+"_ID",fF=0,xe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ve(!1);onMicrotaskEmpty=new Ve(!1);onStable=new Ve(!1);onError=new Ve(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=BC}=e;if(typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,mF(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get($y)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new L(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,pF,Pd,Pd);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},pF={};function Hy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function gF(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Uy(()=>{n.callbackScheduled=!1,Ym(n),n.isCheckStableRunning=!0,Hy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ym(n)}function mF(n){let e=()=>{gF(n)},t=fF++;n._inner=n._inner.fork({name:"angular",properties:{[$y]:!0,[bc]:t,[bc+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(yF(c))return r.invokeTask(o,s,a,c);try{return Jb(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Zb(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return Jb(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!vF(c)&&e(),Zb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ym(n),Hy(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ym(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Jb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Zb(n){n._nesting--,Hy(n)}var Cc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ve;onMicrotaskEmpty=new Ve;onStable=new Ve;onError=new Ve;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function yF(n){return $C(n,"__ignore_ng_zone__")}function vF(n){return $C(n,"__scheduler_tick__")}function $C(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Jn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Zt=new B("",{factory:()=>{let n=P(xe),e=P(Ke),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Jn),t.handleError(r))})}}}),HC={provide:Ss,useValue:()=>{let n=P(Jn,{optional:!0})},multi:!0};function Xt(n,e){let[t,r,i]=Im(n,e?.equal),o=t,s=o[xt];return o.set=r,o.update=i,o.asReadonly=qC.bind(o),o}function qC(){let n=this[xt];if(n.readonlyFn===void 0){let e=()=>this();e[xt]=n,n.readonlyFn=e}return n.readonlyFn}var Zd=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=_F}return n})();function _F(){return new Zd(Z(),at())}var ui=class{},Bc=new B("",{factory:()=>!0});var qy=new B(""),ks=(()=>{class n{internalPendingTasks=P(Ar);scheduler=P(ui);errorHandler=P(Zt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),zy=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>new Jm})}return n})(),Jm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Zm=class{[xt];constructor(e){this[xt]=e}destroy(){this[xt].destroy()}};function je(n){return wm(n)}function $s(n){return{toString:n}.toString()}var Xd="__parameters__";function CF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function SF(n,e,t){return $s(()=>{let r=CF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,d){let f=c.hasOwnProperty(Xd)?c[Xd]:Object.defineProperty(c,Xd,{value:[]})[Xd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var en=oC(SF("Optional"),8);function AF(n){return typeof n=="function"}function _S(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ah=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},yn=(()=>{let n=()=>ES;return n.ngInherit=!0,n})();function ES(n){return n.type.prototype.ngOnChanges&&(n.setInput=NF),RF}function RF(){let n=wS(this),e=n?.current;if(e){let t=n.previous;if(t===di)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function NF(n,e,t,r,i){let o=this.declaredInputs[r],s=wS(n)||MF(n,{previous:di,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new ah(l&&l.currentValue,t,c===di),_S(n,e,i,t)}var IS="__ngSimpleChanges__";function wS(n){return n[IS]||null}function MF(n,e){return n[IS]=e}var zC=[];var _e=function(n,e=null,t){for(let r=0;r<zC.length;r++){let i=zC[r];i(n,e,t)}},ge=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ge||{});function PF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=ES(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function DS(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function nh(n,e,t){TS(n,e,3,t)}function rh(n,e,t,r){(n[J]&3)===t&&TS(n,e,t,r)}function Gy(n,e){let t=n[J];(t&3)===e&&(t&=16383,t+=1,n[J]=t)}function TS(n,e,t,r){let i=r!==void 0?n[vo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[vo]+=65536),(a<o||o==-1)&&(xF(n,t,e,c),n[vo]=(n[vo]&4294901760)+c+2),c++}function GC(n,e){_e(ge.LifecycleHookStart,n,e);let t=oe(null);try{e.call(n)}finally{oe(t),_e(ge.LifecycleHookEnd,n,e)}}function xF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[J]>>14<n[vo]>>16&&(n[J]&3)===e&&(n[J]+=16384,GC(a,o)):GC(a,o)}var Fs=-1,To=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function kF(n){return(n.flags&8)!==0}function OF(n){return(n.flags&16)!==0}function FF(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];LF(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function bS(n){return n===3||n===4||n===6}function LF(n){return n.charCodeAt(0)===64}function Ls(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?WC(n,t,i,null,e[++r]):WC(n,t,i,null,null))}}return n}function WC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function CS(n){return n!==Fs}function ch(n){return n&32767}function VF(n){return n>>16}function uh(n,e){let t=VF(n),r=e;for(;t>0;)r=r[yo],t--;return r}var tv=!0;function lh(n){let e=tv;return tv=n,e}var jF=256,SS=jF-1,AS=5,UF=0,ir={};function BF(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(mo)&&(r=t[mo]),r==null&&(r=t[mo]=UF++);let i=r&SS,o=1<<i;e.data[n+(i>>AS)]|=o}function dh(n,e){let t=RS(n,e);if(t!==-1)return t;let r=e[W];r.firstCreatePass&&(n.injectorIndex=e.length,Wy(r.data,n),Wy(e,null),Wy(r.blueprint,null));let i=Dv(n,e),o=n.injectorIndex;if(CS(i)){let s=ch(i),a=uh(i,e),c=a[W].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Wy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function RS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Dv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=kS(i),r===null)return Fs;if(t++,i=i[yo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Fs}function nv(n,e,t){BF(n,e,t)}function $F(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(bS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function NS(n,e,t){if(t&8||n!==void 0)return n;Ld(e,"NodeInjector")}function MS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[hi],o=kt(void 0);try{return i?i.get(e,r,t&8):ly(e,r,t&8)}finally{kt(o)}}return NS(r,e,t)}function PS(n,e,t,r=0,i){if(n!==null){if(e[J]&2048&&!(r&2)){let s=GF(n,e,t,r,ir);if(s!==ir)return s}let o=xS(n,e,t,r,ir);if(o!==ir)return o}return MS(e,t,r,i)}function xS(n,e,t,r,i){let o=qF(t);if(typeof o=="function"){if(!Ly(e,n,r))return r&1?NS(i,t,r):MS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Ld(t);else return s}finally{Vy()}}else if(typeof o=="number"){let s=null,a=RS(n,e),c=Fs,l=r&1?e[pn][fn]:null;for((a===-1||r&4)&&(c=a===-1?Dv(n,e):e[a+8],c===Fs||!QC(r,!1)?a=-1:(s=e[W],a=ch(c),e=uh(c,e)));a!==-1;){let d=e[W];if(KC(o,a,d.data)){let f=HF(a,e,t,s,r,l);if(f!==ir)return f}c=e[a+8],c!==Fs&&QC(r,e[W].data[a+8]===l)&&KC(o,a,e)?(s=d,a=ch(c),e=uh(c,e)):a=-1}}return i}function HF(n,e,t,r,i,o){let s=e[W],a=s.data[n+8],c=r==null?gi(a)&&tv:r!=s&&(a.type&3)!==0,l=i&1&&o===a,d=ih(a,s,t,c,l);return d!==null?Gc(e,s,d,a,i):ir}function ih(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,d=o>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let D=s[y];if(y<c&&t===D||y>=c&&D.type===t)return y}if(i){let y=s[c];if(y&&nr(y)&&y.type===t)return c}return null}function Gc(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof To){let a=o;if(a.resolving){let y=tC(s[t]);throw uy(y)}let c=lh(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],d,f=a.injectImpl?kt(a.injectImpl):null,g=Ly(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&PF(t,s[t],e)}finally{f!==null&&kt(f),lh(c),a.resolving=!1,Vy()}}return o}function qF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(mo)?n[mo]:void 0;return typeof e=="number"?e>=0?e&SS:zF:e}function KC(n,e,t){let r=1<<n;return!!(t[e+(n>>AS)]&r)}function QC(n,e){return!(n&2)&&!(n&1&&e)}var Do=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return PS(this._tNode,this._lView,e,ho(r),t)}};function zF(){return new Do(at(),Z())}function bt(n){return $s(()=>{let e=n.prototype.constructor,t=e[Dc]||rv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Dc]||rv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function rv(n){return ey(n)?()=>{let e=rv(yt(n));return e&&e()}:ai(n)}function GF(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!Ms(s);){let a=xS(o,s,t,r|2,ir);if(a!==ir)return a;let c=o.parent;if(!c){let l=s[vy];if(l){let d=l.get(t,ir,r);if(d!==ir)return d}c=kS(s),s=s[yo]}o=c}return i}function kS(n){let e=n[W],t=e.type;return t===2?e.declTNode:t===1?n[fn]:null}function Jc(n){return $F(at(),n)}function WF(){return Hs(at(),Z())}function Hs(n,e){return new Ct(Pn(n,e))}var Ct=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=WF}return n})();function KF(n){return n instanceof Ct?n.nativeElement:n}function QF(){return this._results[Symbol.iterator]()}var hh=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Pe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=aC(e);(this._changesDetected=!sC(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=QF};function OS(n){return(n.flags&128)===128}var Tv=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Tv||{}),FS=new Map,YF=0;function JF(){return YF++}function ZF(n){FS.set(n[Pc],n)}function iv(n){FS.delete(n[Pc])}var YC="__ngContext__";function Vs(n,e){tr(e)?(n[YC]=e[Pc],ZF(e)):n[YC]=e}function LS(n){return jS(n[Rs])}function VS(n){return jS(n[hn])}function jS(n){for(;n!==null&&!Mn(n);)n=n[hn];return n}var XF;function bv(n){XF=n}var Dh=new B("",{factory:()=>eL}),eL="ng";var Th=new B(""),Ao=new B("",{providedIn:"platform",factory:()=>"unknown"});var bh=new B("",{factory:()=>P(ct).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var US=!1,BS=new B("",{factory:()=>US});var tL=(n,e,t,r)=>{};function nL(n,e,t,r){tL(n,e,t,r)}function Cv(n){return(n.flags&32)===32}var rL=()=>null;function $S(n,e,t=!1){return rL(n,e,t)}function HS(n,e){let t=n.contentQueries;if(t!==null){let r=oe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Wd(o),a.contentQueries(2,e[s],s)}}}finally{oe(r)}}}function ov(n,e,t){Wd(0);let r=oe(null);try{e(n,t)}finally{oe(r)}}function Sv(n,e,t){if(_y(e)){let r=oe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{oe(r)}}}var Fn=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Fn||{});var eh;function iL(){if(eh===void 0&&(eh=null,Sr.trustedTypes))try{eh=Sr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return eh}function JC(n){return iL()?.createScriptURL(n)||n}var fh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xd})`}};function qs(n){return n instanceof fh?n.changingThisBreaksApplicationSecurity:n}function Av(n,e){let t=qS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${xd})`)}return t===e}function qS(n){return n instanceof fh&&n.getTypeName()||null}var oL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zS(n){return n=String(n),n.match(oL)?n:"unsafe:"+n}var sL=/^>|^->|<!--|-->|--!>|<!-$/g,aL=/(<|>)/g,cL="\u200B$1\u200B";function uL(n){return n.replace(sL,e=>e.replace(aL,cL))}function lL(n,e){return n.createText(e)}function dL(n,e,t){n.setValue(e,t)}function hL(n,e){return n.createComment(uL(e))}function GS(n,e,t){return n.createElement(e,t)}function ph(n,e,t,r,i){n.insertBefore(e,t,r,i)}function WS(n,e,t){n.appendChild(e,t)}function ZC(n,e,t,r,i){r!==null?ph(n,e,t,r,i):WS(n,e,t)}function fL(n,e,t,r){n.removeChild(null,e,t,r)}function pL(n,e,t){n.setAttribute(e,"style",t)}function gL(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function KS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&FF(n,e,r),i!==null&&gL(n,e,i),o!==null&&pL(n,e,o)}var Ch=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Ch||{});function QS(n){let e=JS();return e?e.sanitize(Ch.URL,n)||"":Av(n,"URL")?qs(n):zS(Zn(n))}function YS(n){let e=JS();if(e)return JC(e.sanitize(Ch.RESOURCE_URL,n)||"");if(Av(n,"ResourceURL"))return JC(qs(n));throw new L(904,!1)}function mL(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?YS:QS}function Rv(n,e,t){return mL(e,t)(n)}function JS(){let n=Z();return n&&n[Xn].sanitizer}function yL(n){return n.ownerDocument}function ZS(n){return n instanceof Function?n():n}function vL(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var XS="ng-template";function _L(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&vL(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Nv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Nv(n){return n.type===4&&n.value!==XS}function EL(n,e,t){let r=n.type===4&&!t?XS:n.value;return e===r}function IL(n,e,t){let r=4,i=n.attrs,o=i!==null?TL(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!kn(r)&&!kn(c))return!1;if(s&&kn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!EL(n,c,t)||c===""&&e.length===1){if(kn(r))return!1;s=!0}}else if(r&8){if(i===null||!_L(n,i,c,t)){if(kn(r))return!1;s=!0}}else{let l=e[++a],d=wL(c,i,Nv(n),t);if(d===-1){if(kn(r))return!1;s=!0;continue}if(l!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(kn(r))return!1;s=!0}}}}return kn(r)||s}function kn(n){return(n&1)===0}function wL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return bL(e,n)}function DL(n,e,t=!1){for(let r=0;r<e.length;r++)if(IL(n,e[r],t))return!0;return!1}function TL(n){for(let e=0;e<n.length;e++){let t=n[e];if(bS(t))return e}return n.length}function bL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function XC(n,e){return n?":not("+e.trim()+")":e}function CL(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!kn(s)&&(e+=XC(o,i),i=""),r=s,o=o||!kn(r);t++}return i!==""&&(e+=XC(o,i)),e}function SL(n){return n.map(CL).join(",")}function AL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!kn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var Lt={};function Mv(n,e,t,r,i,o,s,a,c,l,d){let f=Qe+r,g=f+i,y=RL(f,g),D=typeof l=="function"?l():l;return y[W]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:D,incompleteFirstPass:!1,ssrId:d}}function RL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Lt);return t}function NL(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Mv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Pv(n,e,t,r,i,o,s,a,c,l,d){let f=e.blueprint.slice();return f[Nn]=i,f[J]=r|4|128|8|64|1024,(l!==null||n&&n[J]&2048)&&(f[J]|=2048),Dy(f),f[lt]=f[yo]=n,f[Tt]=t,f[Xn]=s||n&&n[Xn],f[Ne]=a||n&&n[Ne],f[hi]=c||n&&n[hi]||null,f[fn]=o,f[Pc]=JF(),f[Mc]=d,f[vy]=l,f[pn]=e.type==2?n[pn]:f,f}function ML(n,e,t){let r=Pn(e,n),i=NL(t),o=n[Xn].rendererFactory,s=xv(n,Pv(n,i,null,eA(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function eA(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function tA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function xv(n,e){return n[Rs]?n[yy][hn]=e:n[Rs]=e,n[yy]=e,e}function PL(n=1){nA(st(),Z(),rr()+n,!1)}function nA(n,e,t,r){if(!r)if((e[J]&3)===3){let o=n.preOrderCheckHooks;o!==null&&nh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&rh(e,o,0,t)}yi(t)}var Sh=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Sh||{});function sv(n,e,t,r){let i=oe(null);try{let[o,s,a]=n.inputs[t],c=null;(s&Sh.SignalBased)!==0&&(c=e[o][xt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):_S(e,c,o,r)}finally{oe(i)}}var or=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(or||{}),xL;function kv(n,e){return xL(n,e)}var js=new Set,Ah=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ah||{}),Ro=new B(""),eS=new Set;function Zc(n){eS.has(n)||(eS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ov=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),rA=[0,1,2,3],iA=(()=>{class n{ngZone=P(xe);scheduler=P(ui);errorHandler=P(Jn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){P(Ro,{optional:!0})}execute(){let t=this.sequences.size>0;t&&_e(ge.AfterRenderHooksStart),this.executing=!0;for(let r of rA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&_e(ge.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[_o]??=[]).push(t),Ps(r),r[J]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ah.AFTER_NEXT_RENDER,t):t()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),gh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[_o];e&&(this.view[_o]=e.filter(t=>t!==this))}};function Rh(n,e){let t=e?.injector??P(qe);return Zc("NgAfterNextRender"),OL(n,t,e,!0)}function kL(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function OL(n,e,t,r){let i=e.get(Ov);i.impl??=e.get(iA);let o=e.get(Ro,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(xn):null,a=e.get(Zd,null,{optional:!0}),c=new gh(i.impl,kL(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var FL=new B("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:P(Ke)})});function oA(n,e,t){let r=n.get(FL);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function LL(n,e){for(let[t,r]of e)oA(n,r.animateFns)}function tS(n,e,t,r){let i=n?.[kc]?.enter;e!==null&&i&&i.has(t.index)&&LL(r,i)}function Os(n,e,t,r,i,o,s,a){if(i!=null){let c,l=!1;Mn(i)?c=i:tr(i)&&(l=!0,i=i[Nn]);let d=gn(i);n===0&&r!==null?(tS(a,r,o,t),s==null?WS(e,r,d):ph(e,r,d,s||null,!0)):n===1&&r!==null?(tS(a,r,o,t),ph(e,r,d,s||null,!0)):n===2?nS(a,o,t,f=>{fL(e,d,l,f)}):n===3&&nS(a,o,t,()=>{e.destroyNode(d)}),c!=null&&YL(e,n,t,c,o,r,s)}}function VL(n,e){sA(n,e),e[Nn]=null,e[fn]=null}function jL(n,e,t,r,i,o){r[Nn]=i,r[fn]=e,Nh(n,r,t,1,i,o)}function sA(n,e){e[Xn].changeDetectionScheduler?.notify(9),Nh(n,e,e[Ne],2,null,null)}function UL(n){let e=n[Rs];if(!e)return Ky(n[W],n);for(;e;){let t=null;if(tr(e))t=e[Rs];else{let r=e[Ft];r&&(t=r)}if(!t){for(;e&&!e[hn]&&e!==n;)tr(e)&&Ky(e[W],e),e=e[lt];e===null&&(e=n),tr(e)&&Ky(e[W],e),t=e&&e[hn]}e=t}}function Fv(n,e){let t=n[Eo],r=t.indexOf(e);t.splice(r,1)}function aA(n,e){if(Io(e))return;let t=e[Ne];t.destroyNode&&Nh(n,e,t,3,null,null),UL(e)}function Ky(n,e){if(Io(e))return;let t=oe(null);try{e[J]&=-129,e[J]|=256,e[Jt]&&hc(e[Jt]),HL(n,e),$L(n,e),e[W].type===1&&e[Ne].destroy();let r=e[fi];if(r!==null&&Mn(e[lt])){r!==e[lt]&&Fv(r,e);let i=e[er];i!==null&&i.detachView(n)}iv(e)}finally{oe(t)}}function nS(n,e,t,r){let i=n?.[kc];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&js.add(n),oA(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:d}=l();a.push(d)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),BL(n,r)}else n&&js.delete(n),r(!1)},i)}function BL(n,e){let t=n[kc]?.running;if(t){t.then(()=>{n[kc].running=void 0,js.delete(n),e(!0)});return}e(!1)}function $L(n,e){let t=n.cleanup,r=e[As];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[As]=null);let i=e[br];if(i!==null){e[br]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[xc];if(o!==null){e[xc]=null;for(let s of o)s.destroy()}}function HL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof To)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];_e(ge.LifecycleHookStart,a,c);try{c.call(a)}finally{_e(ge.LifecycleHookEnd,a,c)}}else{_e(ge.LifecycleHookStart,i,o);try{o.call(i)}finally{_e(ge.LifecycleHookEnd,i,o)}}}}}function qL(n,e,t){return zL(n,e.parent,t)}function zL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Nn];if(gi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Fn.None||i===Fn.Emulated)return null}return Pn(r,t)}function GL(n,e,t){return KL(n,e,t)}function WL(n,e,t){return n.type&40?Pn(n,t):null}var KL=WL,rS;function Lv(n,e,t,r){let i=qL(n,r,e),o=e[Ne],s=r.parent||e[fn],a=GL(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)ZC(o,i,t[c],a,!1);else ZC(o,i,t,a,!1);rS!==void 0&&rS(o,r,e,t,i)}function Hc(n,e){if(e!==null){let t=e.type;if(t&3)return Pn(e,n);if(t&4)return av(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Hc(n,r);{let i=n[e.index];return Mn(i)?av(-1,i):gn(i)}}else{if(t&128)return Hc(n,e.next);if(t&32)return kv(e,n)()||gn(n[e.index]);{let r=cA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ci(n[pn]);return Hc(i,r)}else return Hc(n,e.next)}}}return null}function cA(n,e){if(e!==null){let r=n[pn][fn],i=e.projection;return r.projection[i]}return null}function av(n,e){let t=Ft+n+1;if(t<e.length){let r=e[t],i=r[W].firstChild;if(i!==null)return Hc(r,i)}return e[pi]}function Vv(n,e,t,r,i,o,s){for(;t!=null;){let a=r[hi];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&Vs(gn(c),r),t.flags|=2),!Cv(t))if(l&8)Vv(n,e,t.child,r,i,o,!1),Os(e,n,a,i,c,t,o,r);else if(l&32){let d=kv(t,r),f;for(;f=d();)Os(e,n,a,i,f,t,o,r);Os(e,n,a,i,c,t,o,r)}else l&16?QL(n,e,r,t,i,o):Os(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function Nh(n,e,t,r,i,o){Vv(t,r,n.firstChild,e,i,o,!1)}function QL(n,e,t,r,i,o){let s=t[pn],c=s[fn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Os(e,n,t[hi],i,d,r,o,t)}else{let l=c,d=s[lt];OS(r)&&(l.flags|=128),Vv(n,e,l,d,i,o,!0)}}function YL(n,e,t,r,i,o,s){let a=r[pi],c=gn(r);a!==c&&Os(e,n,t,o,a,i,s);for(let l=Ft;l<r.length;l++){let d=r[l];Nh(d[W],d,n,e,o,a)}}function JL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:or.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=or.Important),n.setStyle(t,r,i,o))}}function uA(n,e,t,r,i){let o=rr(),s=r&2;try{yi(-1),s&&e.length>Qe&&nA(n,e,Qe,!1);let a=s?ge.TemplateUpdateStart:ge.TemplateCreateStart;_e(a,i,t),t(r,i)}finally{yi(o);let a=s?ge.TemplateUpdateEnd:ge.TemplateCreateEnd;_e(a,i,t)}}function Mh(n,e,t){iV(n,e,t),(t.flags&64)===64&&oV(n,e,t)}function Ph(n,e,t=Pn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function ZL(n,e,t,r){let o=r.get(BS,US)||t===Fn.ShadowDom||t===Fn.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return XL(s),s}function XL(n){eV(n)}var eV=()=>null;function tV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function lA(n,e,t,r,i,o){let s=e[W];if($v(n,s,e,t,r)){gi(n)&&rV(e,n.index);return}n.type&3&&(t=tV(t)),nV(n,e,t,r,i,o)}function nV(n,e,t,r,i,o){if(n.type&3){let s=Pn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function rV(n,e){let t=mn(e,n);t[J]&16||(t[J]|=64)}function iV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;gi(t)&&ML(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||dh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=Gc(e,n,s,t);if(Vs(c,e),o!==null&&uV(e,s-r,c,a,t,o),nr(a)){let l=mn(t.index,e);l[Tt]=Gc(e,n,s,t)}}}function oV(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=PC();try{yi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Gd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&sV(c,l)}}finally{yi(-1),Gd(s)}}function sV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function jv(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];DL(e,o.selectors,!1)&&(r??=[],nr(o)?r.unshift(o):r.push(o))}return r}function aV(n,e,t,r,i,o){let s=Pn(n,e);cV(e[Ne],s,o,n.value,t,r,i)}function cV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Zn(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function uV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];sv(r,t,c,l)}}function Uv(n,e,t,r,i){let o=Qe+t,s=e[W],a=i(s,e,n,r,t);e[o]=a,xs(n,!0);let c=n.type===2;return c?(KS(e[Ne],a,n),(IC()===0||Ns(n))&&Vs(a,e),wC()):Vs(a,e),Jd()&&(!c||!Cv(n))&&Lv(s,e,a,n),n}function Bv(n){let e=n;return Py()?SC():(e=e.parent,xs(e,!1)),e}function lV(n,e){let t=n[hi];if(!t)return;let r;try{r=t.get(Zt,null)}catch{r=null}r?.(e)}function $v(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],d=s[c+1],f=e.data[l];sv(f,t[l],d,i),a=!0}if(o)for(let c of o){let l=t[c],d=e.data[c];sv(d,l,r,i),a=!0}return a}function dV(n,e){let t=mn(e,n),r=t[W];hV(r,t);let i=t[Nn];i!==null&&t[Mc]===null&&(t[Mc]=$S(i,t[hi])),_e(ge.ComponentStart);try{Hv(r,t,t[Tt])}finally{_e(ge.ComponentEnd,t[Tt])}}function hV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Hv(n,e,t){Kd(e);try{let r=n.viewQuery;r!==null&&ov(1,r,t);let i=n.template;i!==null&&uA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[er]?.finishViewCreation(n),n.staticContentQueries&&HS(n,e),n.staticViewQueries&&ov(2,n.viewQuery,t);let o=n.components;o!==null&&fV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[J]&=-5,Qd()}}function fV(n,e){for(let t=0;t<e.length;t++)dV(n,e[t])}function pV(n,e,t,r){let i=oe(null);try{let o=e.tView,a=n[J]&4096?4096:16,c=Pv(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[fi]=l;let d=n[er];return d!==null&&(c[er]=d.createEmbeddedView(o)),Hv(o,c,t),c}finally{oe(i)}}function iS(n,e){return!e||e.firstChild===null||OS(n)}function Wc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(gn(o)),Mn(o)&&dA(o,r);let s=t.type;if(s&8)Wc(n,e,t.child,r);else if(s&32){let a=kv(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=cA(e,t);if(Array.isArray(a))r.push(...a);else{let c=ci(e[pn]);Wc(c[W],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function dA(n,e){for(let t=Ft;t<n.length;t++){let r=n[t],i=r[W].firstChild;i!==null&&Wc(r[W],r,i,e)}n[pi]!==n[Nn]&&e.push(n[pi])}function hA(n){if(n[_o]!==null){for(let e of n[_o])e.impl.addSequence(e);n[_o].length=0}}var fA=[];function gV(n){return n[Jt]??mV(n)}function mV(n){let e=fA.pop()??Object.create(vV);return e.lView=n,e}function yV(n){n.lView[Jt]!==n&&(n.lView=null,fA.push(n))}var vV=U(R({},uc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ps(n.lView)},consumerOnSignalRead(){this.lView[Jt]=this}});function _V(n){let e=n[Jt]??Object.create(EV);return e.lView=n,e}var EV=U(R({},uc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ci(n.lView);for(;e&&!pA(e[W]);)e=ci(e);e&&Ty(e)},consumerOnSignalRead(){this.lView[Jt]=this}});function pA(n){return n.type!==2}function gA(n){if(n[xc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[xc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[J]&8192)}}var IV=100;function mA(n,e=0){let r=n[Xn].rendererFactory,i=!1;i||r.begin?.();try{wV(n,e)}finally{i||r.end?.()}}function wV(n,e){let t=xy();try{ky(!0),cv(n,e);let r=0;for(;Lc(n);){if(r===IV)throw new L(103,!1);r++,cv(n,1)}}finally{ky(t)}}function DV(n,e,t,r){if(Io(e))return;let i=e[J],o=!1,s=!1;Kd(e);let a=!0,c=null,l=null;o||(pA(n)?(l=gV(e),c=dc(l)):Jl()===null?(a=!1,l=_V(e),c=dc(l)):e[Jt]&&(hc(e[Jt]),e[Jt]=null));try{Dy(e),RC(n.bindingStartIndex),t!==null&&uA(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let y=n.preOrderCheckHooks;y!==null&&nh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&rh(e,y,0,null),Gy(e,0)}if(s||TV(e),gA(e),yA(e,0),n.contentQueries!==null&&HS(n,e),!o)if(d){let y=n.contentCheckHooks;y!==null&&nh(e,y)}else{let y=n.contentHooks;y!==null&&rh(e,y,1),Gy(e,1)}CV(n,e);let f=n.components;f!==null&&_A(e,f,0);let g=n.viewQuery;if(g!==null&&ov(2,g,r),!o)if(d){let y=n.viewCheckHooks;y!==null&&nh(e,y)}else{let y=n.viewHooks;y!==null&&rh(e,y,2),Gy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Bd]){for(let y of e[Bd])y();e[Bd]=null}o||(hA(e),e[J]&=-73)}catch(d){throw o||Ps(e),d}finally{l!==null&&(Zl(l,c),a&&yV(l)),Qd()}}function yA(n,e){for(let t=LS(n);t!==null;t=VS(t))for(let r=Ft;r<t.length;r++){let i=t[r];vA(i,e)}}function TV(n){for(let e=LS(n);e!==null;e=VS(e)){if(!(e[J]&2))continue;let t=e[Eo];for(let r=0;r<t.length;r++){let i=t[r];Ty(i)}}}function bV(n,e,t){_e(ge.ComponentStart);let r=mn(e,n);try{vA(r,t)}finally{_e(ge.ComponentEnd,r[Tt])}}function vA(n,e){Hd(n)&&cv(n,e)}function cv(n,e){let r=n[W],i=n[J],o=n[Jt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Xl(o)),s||=!1,o&&(o.dirty=!1),n[J]&=-9217,s)DV(r,n,r.template,n[Tt]);else if(i&8192){let a=oe(null);try{gA(n),yA(n,1);let c=r.components;c!==null&&_A(n,c,1),hA(n)}finally{oe(a)}}}function _A(n,e,t){for(let r=0;r<e.length;r++)bV(n,e[r],t)}function CV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)yi(~i);else{let o=i,s=t[++r],a=t[++r];MC(s,o);let c=e[o];_e(ge.HostBindingsUpdateStart,c);try{a(2,c)}finally{_e(ge.HostBindingsUpdateEnd,c)}}}}finally{yi(-1)}}function qv(n,e){let t=xy()?64:1088;for(n[Xn].changeDetectionScheduler?.notify(e);n;){n[J]|=t;let r=ci(n);if(Ms(n)&&!r)return n;n=r}return null}function EA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function SV(n,e,t,r=!0){let i=e[W];if(AV(i,e,n,t),r){let s=av(t,n),a=e[Ne],c=a.parentNode(n[pi]);c!==null&&jL(i,n[fn],a,e,c,s)}let o=e[Mc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function uv(n,e){if(n.length<=Ft)return;let t=Ft+e,r=n[t];if(r){let i=r[fi];i!==null&&i!==n&&Fv(i,r),e>0&&(n[t-1][hn]=r[hn]);let o=Ac(n,Ft+e);VL(r[W],r);let s=o[er];s!==null&&s.detachView(o[W]),r[lt]=null,r[hn]=null,r[J]&=-129}return r}function AV(n,e,t,r){let i=Ft+r,o=t.length;r>0&&(t[i-1][hn]=e),r<o-Ft?(e[hn]=t[i],dy(t,Ft+r,e)):(t.push(e),e[hn]=null),e[lt]=t;let s=e[fi];s!==null&&t!==s&&IA(s,e);let a=e[er];a!==null&&a.insertView(n),qd(e),e[J]|=128}function IA(n,e){let t=n[Eo],r=e[lt];if(tr(r))n[J]|=2;else{let i=r[lt][pn];e[pn]!==i&&(n[J]|=2)}t===null?n[Eo]=[e]:t.push(e)}var vi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[W];return Wc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Tt]}set context(e){this._lView[Tt]=e}get destroyed(){return Io(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[lt];if(Mn(e)){let t=e[Oc],r=t?t.indexOf(this):-1;r>-1&&(uv(e,r),Ac(t,r))}this._attachedToViewContainer=!1}aA(this._lView[W],this._lView)}onDestroy(e){by(this._lView,e)}markForCheck(){qv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){qd(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,mA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ms(this._lView),t=this._lView[fi];t!==null&&!e&&Fv(t,this._lView),sA(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=e;let t=Ms(this._lView),r=this._lView[fi];r!==null&&!t&&IA(r,this._lView),qd(this._lView)}};var _i=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=RV;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=pV(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new vi(o)}}return n})();function RV(){return xh(at(),Z())}function xh(n,e){return n.type&4?new _i(e,n,Hs(n,e)):null}function kh(n,e,t,r,i){let o=n.data[e];if(o===null)o=NV(n,e,t,r,i),NC()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=CC();o.injectorIndex=s===null?-1:s.injectorIndex}return xs(o,!0),o}function NV(n,e,t,r,i){let o=My(),s=Py(),a=s?o:o&&o.parent,c=n.data[e]=PV(n,a,t,e,r,i);return MV(n,c,o,s),c}function MV(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function PV(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return DC()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var xV=()=>null;function oS(n,e){return xV(n,e)}var wA=class{},Oh=class{},lv=class{resolveComponentFactory(e){throw new L(917,!1)}},Xc=class{static NULL=new lv},bo=class{},vn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>kV()}return n})();function kV(){let n=Z(),e=at(),t=mn(e.index,n);return(tr(t)?t:n)[Ne]}var DA=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>null})}return n})();var oh={},dv=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,oh,r);return i!==oh||t===oh?i:this.parentInjector.get(e,t,r)}};function mh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=kd(i,a);else if(o==2){let c=a,l=e[++s];r=kd(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function $(n,e=0){let t=Z();if(t===null)return Y(n,e);let r=at();return PS(r,t,yt(n),e)}function TA(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let d of s)if(d.resolveHostDirectives!==null){[a,c,l]=d.resolveHostDirectives(s);break}LV(n,e,t,a,o,c,l)}o!==null&&r!==null&&OV(t,r,o)}function OV(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new L(-301,!1);r.push(e[i],o)}}function FV(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function LV(n,e,t,r,i,o,s){let a=r.length,c=null;for(let g=0;g<a;g++){let y=r[g];c===null&&nr(y)&&(c=y,FV(n,t,g)),nv(dh(t,e),n,y.type)}HV(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,d=!1,f=tA(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=Ls(t.mergedAttrs,y.hostAttrs),jV(n,t,e,f,y),$V(f,y,i),s!==null&&s.has(y)){let[N,A]=s.get(y);t.directiveToIndex.set(y.type,[f,N+t.directiveStart,A+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,f);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let D=y.type.prototype;!l&&(D.ngOnChanges||D.ngOnInit||D.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!d&&(D.ngOnChanges||D.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}VV(n,t,o)}function VV(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))sS(0,e,i,r),sS(1,e,i,r),cS(e,r,!1);else{let o=t.get(i);aS(0,e,o,r),aS(1,e,o,r),cS(e,r,!0)}}}function sS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),bA(e,o)}}function aS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),bA(e,s)}}function bA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function cS(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Nv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let d of l)if(d===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let d=0;d<l.length;d+=2)if(l[d]===e){s??=[],s.push(l[d+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function jV(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ai(i.type,!0)),s=new To(o,nr(i),$,null);n.blueprint[r]=s,t[r]=s,UV(n,e,r,tA(n,t,i.hostVars,Lt),i)}function UV(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;BV(s)!=a&&s.push(a),s.push(t,r,o)}}function BV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function $V(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;nr(e)&&(t[""]=n)}}function HV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function zv(n,e,t,r,i,o,s,a){let c=e[W],l=c.consts,d=wo(l,s),f=kh(c,n,t,r,d);return o&&TA(c,e,f,wo(l,a),i),f.mergedAttrs=Ls(f.mergedAttrs,f.attrs),f.attrs!==null&&mh(f,f.attrs,!1),f.mergedAttrs!==null&&mh(f,f.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,f),f}function Gv(n,e){DS(n,e),_y(e)&&n.queries.elementEnd(e)}function qV(n,e,t,r,i,o){let s=e.consts,a=wo(s,i),c=kh(e,n,t,r,a);if(c.mergedAttrs=Ls(c.mergedAttrs,c.attrs),o!=null){let l=wo(s,o);c.localNames=[];for(let d=0;d<l.length;d+=2)c.localNames.push(l[d],-1)}return c.attrs!==null&&mh(c,c.attrs,!1),c.mergedAttrs!==null&&mh(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Wv(n){return SA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function CA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function SA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function eu(n,e,t){return n[e]=t}function Ln(n,e,t){if(t===Lt)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Kc(n,e,t,r){let i=Ln(n,e,t);return Ln(n,e+1,r)||i}function AA(n,e,t,r,i){let o=Kc(n,e,t,r);return Ln(n,e+2,i)||o}function zV(n,e,t,r,i,o){let s=Kc(n,e,t,r);return Kc(n,e+2,i,o)||s}function sh(n,e,t){return function r(i){let o=gi(n)?mn(n.index,e):e;qv(o,5);let s=e[Tt],a=uS(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=uS(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function uS(n,e,t,r){let i=oe(null);try{return _e(ge.OutputStart,e,t),t(r)!==!1}catch(o){return lV(n,o),!1}finally{_e(ge.OutputEnd,e,t),oe(i)}}function RA(n,e,t,r,i,o,s,a){let c=Ns(n),l=!1,d=null;if(!r&&c&&(d=WV(e,t,o,n.index)),d!==null){let f=d.__ngLastListenerFn__||d;f.__ngNextListenerFn__=s,d.__ngLastListenerFn__=s,l=!0}else{let f=Pn(n,t),g=r?r(f):f;nL(t,g,o,a);let y=i.listen(g,o,a);if(!GV(o)){let D=r?N=>r(gn(N[n.index])):n.index;NA(D,e,t,o,a,y,!1)}}return l}function GV(n){return n.startsWith("animation")||n.startsWith("transition")}function WV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[As],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function NA(n,e,t,r,i,o,s){let a=e.firstCreatePass?Sy(e):null,c=Cy(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function lS(n,e,t,r,i,o){let s=e[t],a=e[W],l=a.data[t].outputs[r],f=s[l].subscribe(o);NA(n.index,a,e,i,o,f,!0)}var hv=Symbol("BINDING");var yh=class extends Xc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=li(e);return new Us(t,this.ngModule)}};function KV(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Sh.SignalBased)!==0};return i&&(o.transform=i),o})}function QV(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function YV(n,e,t){let r=e instanceof Ke?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new dv(t,r):t}function JV(n){let e=n.get(bo,null);if(e===null)throw new L(407,!1);let t=n.get(DA,null),r=n.get(ui,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function ZV(n,e){let t=MA(n);return GS(e,t,t==="svg"?Ey:t==="math"?gC:null)}function MA(n){return(n.selectors[0][0]||"div").toLowerCase()}var Us=class extends Oh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=KV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=QV(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=SL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){_e(ge.DynamicComponentStart);let a=oe(null);try{let c=this.componentDef,l=XV(r,c,s,o),d=YV(c,i||this.ngModule,e),f=JV(d),g=f.rendererFactory.createRenderer(null,c),y=r?ZL(g,r,c.encapsulation,d):ZV(c,g),D=s?.some(dS)||o?.some(k=>typeof k!="function"&&k.bindings.some(dS)),N=Pv(null,l,null,512|eA(c),null,null,f,g,d,null,$S(y,d,!0));N[Qe]=y,Kd(N);let A=null;try{let k=zv(Qe,N,2,"#host",()=>l.directiveRegistry,!0,0);KS(g,y,k),Vs(y,N),Mh(l,N,k),Sv(l,k,N),Gv(l,k),t!==void 0&&tj(k,this.ngContentSelectors,t),A=mn(k.index,N),N[Tt]=A[Tt],Hv(l,N,null)}catch(k){throw A!==null&&iv(A),iv(N),k}finally{_e(ge.DynamicComponentEnd),Qd()}return new vh(this.componentType,N,!!D)}finally{oe(a)}}};function XV(n,e,t,r){let i=n?["ng-version","21.0.6"]:AL(e.selectors[0]),o=null,s=null,a=0;if(t)for(let d of t)a+=d[hv].requiredVars,d.create&&(d.targetIdx=0,(o??=[]).push(d)),d.update&&(d.targetIdx=0,(s??=[]).push(d));if(r)for(let d=0;d<r.length;d++){let f=r[d];if(typeof f!="function")for(let g of f.bindings){a+=g[hv].requiredVars;let y=d+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let c=[e];if(r)for(let d of r){let f=typeof d=="function"?d:d.type,g=cy(f);c.push(g)}return Mv(0,null,ej(o,s),1,a,c,null,null,null,[i],null)}function ej(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function dS(n){let e=n[hv].kind;return e==="input"||e==="twoWay"}var vh=class extends wA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=$d(t[W],Qe),this.location=Hs(this._tNode,t),this.instance=mn(this._tNode.index,t)[Tt],this.hostView=this.changeDetectorRef=new vi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=$v(r,i[W],i,e,t);this.previousInputValues.set(e,t);let s=mn(r.index,i);qv(s,1)}get injector(){return new Do(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tj(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Rr=(()=>{class n{static __NG_ELEMENT_ID__=nj}return n})();function nj(){let n=at();return xA(n,Z())}var rj=Rr,PA=class extends rj{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Hs(this._hostTNode,this._hostLView)}get injector(){return new Do(this._hostTNode,this._hostLView)}get parentInjector(){let e=Dv(this._hostTNode,this._hostLView);if(CS(e)){let t=uh(e,this._hostLView),r=ch(e),i=t[W].data[r+8];return new Do(i,t)}else return new Do(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=hS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ft}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=oS(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,iS(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!AF(e),l;if(c)l=t;else{let A=t||{};l=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef,s=A.directives,a=A.bindings}let d=c?e:new Us(li(e)),f=r||this.parentInjector;if(!o&&d.ngModule==null){let k=(c?f:this.parentInjector).get(Ke,null);k&&(o=k)}let g=li(d.componentType??{}),y=oS(this._lContainer,g?.id??null),D=y?.firstChild??null,N=d.create(f,i,D,o,s,a);return this.insertImpl(N.hostView,l,iS(this._hostTNode,y)),N}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(yC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[lt],l=new PA(c,c[fn],c[lt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return SV(s,i,o,r),e.attachToViewContainerRef(),dy(Qy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=hS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=uv(this._lContainer,t);r&&(Ac(Qy(this._lContainer),t),aA(r[W],r))}detach(e){let t=this._adjustIndex(e,-1),r=uv(this._lContainer,t);return r&&Ac(Qy(this._lContainer),t)!=null?new vi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function hS(n){return n[Oc]}function Qy(n){return n[Oc]||(n[Oc]=[])}function xA(n,e){let t,r=e[n.index];return Mn(r)?t=r:(t=EA(r,e,null,n),e[n.index]=t,xv(e,t)),oj(t,e,n,r),new PA(t,n,e)}function ij(n,e){let t=n[Ne],r=t.createComment(""),i=Pn(e,n),o=t.parentNode(i);return ph(t,o,r,t.nextSibling(i),!1),r}var oj=cj,sj=()=>!1;function aj(n,e,t){return sj(n,e,t)}function cj(n,e,t,r){if(n[pi])return;let i;t.type&8?i=gn(r):i=ij(e,t),n[pi]=i}var fv=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},pv=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Kv(e,t).matches!==null&&this.queries[t].setDirty()}},gv=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=mj(e):this.predicate=e}},mv=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},yv=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,uj(t,o)),this.matchTNodeWithReadOption(e,t,ih(t,e,o,!1,!1))}else r===_i?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ih(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ct||i===Rr||i===_i&&t.type&4)this.addMatch(t.index,-2);else{let o=ih(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function uj(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function lj(n,e){return n.type&11?Hs(n,e):n.type&4?xh(n,e):null}function dj(n,e,t,r){return t===-1?lj(e,n):t===-2?hj(n,e,r):Gc(n,n[W],t,e)}function hj(n,e,t){if(t===Ct)return Hs(e,n);if(t===_i)return xh(e,n);if(t===Rr)return xA(e,n)}function kA(n,e,t,r){let i=e[er].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=o[l];a.push(dj(e,d,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function vv(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=kA(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],d=e[-c];for(let f=Ft;f<d.length;f++){let g=d[f];g[fi]===g[lt]&&vv(g[W],g,l,r)}if(d[Eo]!==null){let f=d[Eo];for(let g=0;g<f.length;g++){let y=f[g];vv(y[W],y,l,r)}}}}}return r}function fj(n,e){return n[er].queries[e].queryList}function pj(n,e,t){let r=new hh((t&4)===4);return EC(n,e,r,r.destroy),(e[er]??=new pv).queries.push(new fv(r))-1}function gj(n,e,t,r){let i=st();if(i.firstCreatePass){let o=at();yj(i,new gv(e,t,r),o.index),vj(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return pj(i,Z(),t)}function mj(n){return n.split(",").map(e=>e.trim())}function yj(n,e,t){n.queries===null&&(n.queries=new mv),n.queries.track(new yv(e,t))}function vj(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Kv(n,e){return n.queries.getByIndex(e)}function _j(n,e){let t=n[W],r=Kv(t,e);return r.crossesNgTemplate?vv(t,n,e,[]):kA(t,n,r,e)}var Co=class{},Fh=class{};var _h=class extends Co{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new yh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=ay(e);this._bootstrapComponents=ZS(o.bootstrap),this._r3Injector=jy(e,t,[{provide:Co,useValue:this},{provide:Xc,useValue:this.componentFactoryResolver},...r],Cr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Eh=class extends Fh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new _h(this.moduleType,e,[])}};var Qc=class extends Co{injector;componentFactoryResolver=new yh(this);instance=null;constructor(e){super();let t=new po([...e.providers,{provide:Co,useValue:this},{provide:Xc,useValue:this.componentFactoryResolver}],e.parent||Nc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function tu(n,e,t=null){return new Qc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Ej=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=py(!1,t.type),i=r.length>0?tu([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=V({token:n,providedIn:"environment",factory:()=>new n(Y(Ke))})}return n})();function Qv(n){return $s(()=>{let e=OA(n),t=U(R({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Tv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Ej).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Fn.Emulated,styles:n.styles||Ot,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Zc("NgStandalone"),FA(t);let r=n.dependencies;return t.directiveDefs=fS(r,Ij),t.pipeDefs=fS(r,eC),t.id=Tj(t),t})}function Ij(n){return li(n)||cy(n)}function sr(n){return $s(()=>({type:n.type,bootstrap:n.bootstrap||Ot,declarations:n.declarations||Ot,imports:n.imports||Ot,exports:n.exports||Ot,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function wj(n,e){if(n==null)return di;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Sh.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function Dj(n){if(n==null)return di;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function he(n){return $s(()=>{let e=OA(n);return FA(e),e})}function zs(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function OA(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||di,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Ot,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:wj(n.inputs,e),outputs:Dj(n.outputs),debugInfo:null}}function FA(n){n.features?.forEach(e=>e(n))}function fS(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function Tj(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function bj(n){return Object.getPrototypeOf(n.prototype).constructor}function ze(n){let e=bj(n.type),t=!0,r=[n];for(;e;){let i;if(nr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new L(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Yy(n.inputs),s.declaredInputs=Yy(n.declaredInputs),s.outputs=Yy(n.outputs);let a=i.hostBindings;a&&Nj(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&Aj(n,c),l&&Rj(n,l),Cj(n,i),Xb(n.outputs,i.outputs),nr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ze&&(t=!1)}}e=Object.getPrototypeOf(e)}Sj(r)}function Cj(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Sj(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ls(i.hostAttrs,t=Ls(t,i.hostAttrs))}}function Yy(n){return n===di?{}:n===Ot?[]:n}function Aj(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Rj(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function Nj(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Mj(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Ls(n.mergedAttrs,n.attrs);let d=n.tView=Mv(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),d.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),xs(n,!1);let c=xj(t,e,n,r);Jd()&&Lv(t,e,c,n),Vs(c,e);let l=EA(c,e,c,n);e[r+Qe]=l,xv(e,l),aj(l,n,e)}function Pj(n,e,t,r,i,o,s,a,c,l,d){let f=t+Qe,g;return e.firstCreatePass?(g=kh(e,f,4,s||null,a||null),zd()&&TA(e,n,g,wo(e.consts,l),jv),DS(e,g)):g=e.data[f],Mj(g,n,e,t,r,i,o,c),Ns(g)&&Mh(e,n,g),l!=null&&Ph(n,g,d),g}function LA(n,e,t,r,i,o,s,a){let c=Z(),l=st(),d=wo(l.consts,o);return Pj(c,l,n,e,t,r,i,d,void 0,s,a),LA}var xj=kj;function kj(n,e,t,r){return Uc(!0),e[Ne].createComment("")}var Yv=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function VA(n){return typeof n=="function"&&n[xt]!==void 0}function Jv(n){return VA(n)&&typeof n.set=="function"}var Zv=new B("");function Nr(n){return!!n&&typeof n.then=="function"}function Lh(n){return!!n&&typeof n.subscribe=="function"}var jA=new B("");var Xv=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=P(jA,{optional:!0})??[];injector=P(qe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=ot(this.injector,i);if(Nr(o))t.push(o);else if(Lh(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Vh=new B("");function UA(){Em(()=>{let n="";throw new L(600,n)})}function BA(n){return n.isBoundToModule}var Oj=10;var Ei=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(Zt);afterRenderManager=P(Ov);zonelessEnabled=P(Bc);rootEffectScheduler=P(zy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Pe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(Ar);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(te(t=>!t))}constructor(){P(Ro,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=P(Ke);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=qe.NULL){return this._injector.get(xe).run(()=>{_e(ge.BootstrapComponentStart);let s=t instanceof Oh;if(!this._injector.get(Xv).done){let D="";throw new L(405,D)}let c;s?c=t:c=this._injector.get(Xc).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=BA(c)?void 0:this._injector.get(Co),d=r||c.selector,f=c.create(i,[],d,l),g=f.location.nativeElement,y=f.injector.get(Zv,null);return y?.registerApplication(g),f.onDestroy(()=>{this.detachView(f.hostView),qc(this.components,f),y?.unregisterApplication(g)}),this._loadComponent(f),_e(ge.BootstrapComponentEnd,f),f})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){_e(ge.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ah.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw _e(ge.ChangeDetectionEnd),new L(101,!1);let t=oe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,oe(t),this.afterTick.next(),_e(ge.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(bo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Oj;){_e(ge.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{_e(ge.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Lc(i))continue;let o=r&&!this.zonelessEnabled?0:1;mA(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Lc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;qc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Vh,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>qc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new L(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ii(n,e,t,r){let i=Z(),o=Vc();if(Ln(i,o,e)){let s=st(),a=Yd();aV(a,i,n,e,t,r)}return Ii}var bJ=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function $A(n,e,t){let r=Z(),i=Vc();if(Ln(r,i,e)){let o=st(),s=Yd();lA(s,r,n,e,r[Ne],t)}return $A}function _v(n,e,t,r,i){$v(e,n,t,i?"class":"style",r)}function e_(n,e,t,r){let i=Z(),o=i[W],s=n+Qe,a=o.firstCreatePass?zv(s,i,2,e,jv,zd(),t,r):o.data[s];if(Uv(a,i,n,e,qA),Ns(a)){let c=i[W];Mh(c,i,a),Sv(c,a,i)}return r!=null&&Ph(i,a),e_}function t_(){let n=st(),e=at(),t=Bv(e);return n.firstCreatePass&&Gv(n,t),Ry(t)&&Ny(),Ay(),t.classesWithoutHost!=null&&kF(t)&&_v(n,t,Z(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&OF(t)&&_v(n,t,Z(),t.stylesWithoutHost,!1),t_}function jh(n,e,t,r){return e_(n,e,t,r),t_(),jh}function n_(n,e,t,r){let i=Z(),o=i[W],s=n+Qe,a=o.firstCreatePass?qV(s,o,2,e,t,r):o.data[s];return Uv(a,i,n,e,qA),r!=null&&Ph(i,a),n_}function r_(){let n=at(),e=Bv(n);return Ry(e)&&Ny(),Ay(),r_}function HA(n,e,t,r){return n_(n,e,t,r),r_(),HA}var qA=(n,e,t,r,i)=>(Uc(!0),GS(e[Ne],r,jC()));function zA(n,e,t){let r=Z(),i=r[W],o=n+Qe,s=i.firstCreatePass?zv(o,r,8,"ng-container",jv,zd(),e,t):i.data[o];if(Uv(s,r,n,"ng-container",Fj),Ns(s)){let a=r[W];Mh(a,r,s),Sv(a,s,r)}return t!=null&&Ph(r,s),zA}function GA(){let n=st(),e=at(),t=Bv(e);return n.firstCreatePass&&Gv(n,t),GA}var Fj=(n,e,t,r,i)=>(Uc(!0),hL(e[Ne],""));function Lj(){return Z()}var $c=void 0;function Vj(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var jj=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$c,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$c,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",$c,$c,$c],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Vj],zc={};function i_(n,e,t){typeof e!="string"&&(t=e,e=n[Me.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),zc[e]=n,t&&(zc[e][Me.ExtraData]=t)}function Vt(n){let e=Uj(n),t=pS(e);if(t)return t;let r=e.split("-")[0];if(t=pS(r),t)return t;if(r==="en")return jj;throw new L(701,!1)}function pS(n){return n in zc||(zc[n]=Sr.ng&&Sr.ng.common&&Sr.ng.common.locales&&Sr.ng.common.locales[n]),zc[n]}var Me=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Me||{});function Uj(n){return n.toLowerCase().replace(/_/g,"-")}var nu="en-US",Bj="USD";var $j=nu;function WA(n){typeof n=="string"&&($j=n.toLowerCase().replace(/_/g,"-"))}function Vn(n,e,t){let r=Z(),i=st(),o=at();return QA(i,r,r[Ne],o,n,e,t),Vn}function KA(n,e,t){let r=Z(),i=st(),o=at();return(o.type&3||t)&&RA(o,i,r,t,r[Ne],n,e,sh(o,r,e)),KA}function QA(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=sh(r,e,o),RA(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],d=r.hostDirectiveOutputs?.[i];if(d&&d.length)for(let f=0;f<d.length;f+=2){let g=d[f],y=d[f+1];c??=sh(r,e,o),lS(r,e,g,y,i,c)}if(l&&l.length)for(let f of l)c??=sh(r,e,o),lS(r,e,f,i,i,c)}}function Hj(n=1){return LC(n)}function Uh(n,e,t,r){return gj(n,e,t,r),Uh}function o_(n){let e=Z(),t=st(),r=Fy();Wd(r+1);let i=Kv(t,r);if(n.dirty&&mC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=_j(e,r);n.reset(o,KF),n.notifyOnChanges()}return!0}return!1}function s_(){return fj(Z(),Fy())}function qj(n){let e=AC();return Fc(e,Qe+n)}function th(n,e){return n<<17|e<<2}function So(n){return n>>17&32767}function zj(n){return(n&2)==2}function Gj(n,e){return n&131071|e<<17}function Ev(n){return n|2}function Bs(n){return(n&131068)>>2}function Jy(n,e){return n&-131069|e<<2}function Wj(n){return(n&1)===1}function Iv(n){return n|1}function Kj(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=So(s),c=Bs(s);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Cs(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=So(n[a+1]);n[r+1]=th(g,a),g!==0&&(n[g+1]=Jy(n[g+1],r)),n[a+1]=Gj(n[a+1],r)}else n[r+1]=th(a,0),a!==0&&(n[a+1]=Jy(n[a+1],r)),a=r;else n[r+1]=th(c,0),a===0?a=r:n[c+1]=Jy(n[c+1],r),c=r;l&&(n[r+1]=Ev(n[r+1])),gS(n,d,r,!0),gS(n,d,r,!1),Qj(e,d,n,r,o),s=th(a,c),o?e.classBindings=s:e.styleBindings=s}function Qj(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Cs(o,e)>=0&&(t[r+1]=Iv(t[r+1]))}function gS(n,e,t,r){let i=n[t+1],o=e===null,s=r?So(i):Bs(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];Yj(c,e)&&(a=!0,n[s+1]=r?Iv(l):Ev(l)),s=r?So(l):Bs(l)}a&&(n[t+1]=r?Ev(i):Iv(i))}function Yj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Cs(n,e)>=0:!1}var On={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Jj(n){return n.substring(On.key,On.keyEnd)}function Zj(n){return Xj(n),YA(n,JA(n,0,On.textEnd))}function YA(n,e){let t=On.textEnd;return t===e?-1:(e=On.keyEnd=eU(n,On.key=e,t),JA(n,e,t))}function Xj(n){On.key=0,On.keyEnd=0,On.value=0,On.valueEnd=0,On.textEnd=n.length}function JA(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function eU(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ZA(n,e,t){return XA(n,e,t,!1),ZA}function ru(n,e){return XA(n,e,null,!0),ru}function tU(n){rU(uU,nU,n,!0)}function nU(n,e){for(let t=Zj(e);t>=0;t=YA(e,t))jd(n,Jj(e),!0)}function XA(n,e,t,r){let i=Z(),o=st(),s=jc(2);if(o.firstUpdatePass&&t0(o,n,s,r),e!==Lt&&Ln(i,s,e)){let a=o.data[rr()];n0(o,a,i,i[Ne],n,i[s+1]=dU(e,t),r,s)}}function rU(n,e,t,r){let i=st(),o=jc(2);i.firstUpdatePass&&t0(i,null,o,r);let s=Z();if(t!==Lt&&Ln(s,o,t)){let a=i.data[rr()];if(r0(a,r)&&!e0(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=kd(c,t||"")),_v(i,a,s,t,r)}else lU(i,a,s,s[Ne],s[o+1],s[o+1]=cU(n,e,t),r,o)}}function e0(n,e){return e>=n.expandoStartIndex}function t0(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[rr()],s=e0(n,t);r0(o,r)&&e===null&&!s&&(e=!1),e=iU(i,o,e,r),Kj(i,o,e,t,s,r)}}function iU(n,e,t,r){let i=xC(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Zy(null,n,e,t,r),t=Yc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Zy(i,n,e,t,r),o===null){let c=oU(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Zy(null,n,e,c[1],r),c=Yc(c,e.attrs,r),sU(n,e,r,c))}else o=aU(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function oU(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Bs(r)!==0)return n[So(r)]}function sU(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[So(i)]=r}function aU(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Yc(r,s,t)}return Yc(r,e.attrs,t)}function Zy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Yc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Yc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),jd(n,s,t?!0:e[++o]))}return n===void 0?null:n}function cU(n,e,t){if(t==null||t==="")return Ot;let r=[],i=qs(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function uU(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&jd(n,r,t)}function lU(n,e,t,r,i,o,s,a){i===Lt&&(i=Ot);let c=0,l=0,d=0<i.length?i[0]:null,f=0<o.length?o[0]:null;for(;d!==null||f!==null;){let g=c<i.length?i[c+1]:void 0,y=l<o.length?o[l+1]:void 0,D=null,N;d===f?(c+=2,l+=2,g!==y&&(D=f,N=y)):f===null||d!==null&&d<f?(c+=2,D=d):(l+=2,D=f,N=y),D!==null&&n0(n,e,t,r,D,N,s,a),d=c<i.length?i[c]:null,f=l<o.length?o[l]:null}}function n0(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=Wj(l)?mS(c,e,t,i,Bs(l),s):void 0;if(!Ih(d)){Ih(o)||zj(l)&&(o=mS(c,null,t,i,a,s));let f=Iy(rr(),t);JL(r,s,f,i,o)}}function mS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===Lt&&(g=f?Ot:void 0);let y=f?Ud(g,r):d===r?g:void 0;if(l&&!Ih(y)&&(y=Ud(c,r)),Ih(y)&&(a=y,s))return a;let D=n[i+1];i=s?So(D):Bs(D)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Ud(c,r))}return a}function Ih(n){return n!==void 0}function dU(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Cr(qs(n)))),n}function r0(n,e){return(n.flags&(e?8:16))!==0}function hU(n,e=""){let t=Z(),r=st(),i=n+Qe,o=r.firstCreatePass?kh(r,i,1,e,null):r.data[i],s=fU(r,t,o,e,n);t[i]=s,Jd()&&Lv(r,t,s,o),xs(o,!1)}var fU=(n,e,t,r,i)=>(Uc(!0),lL(e[Ne],r));function pU(n,e,t,r=""){return Ln(n,Vc(),t)?e+Zn(t)+r:Lt}function gU(n,e,t,r,i,o=""){let s=Oy(),a=Kc(n,s,t,i);return jc(2),a?e+Zn(t)+r+Zn(i)+o:Lt}function mU(n,e,t,r,i,o,s,a=""){let c=Oy(),l=AA(n,c,t,i,s);return jc(3),l?e+Zn(t)+r+Zn(i)+o+Zn(s)+a:Lt}function i0(n){return a_("",n),i0}function a_(n,e,t){let r=Z(),i=pU(r,n,e,t);return i!==Lt&&c_(r,rr(),i),a_}function o0(n,e,t,r,i){let o=Z(),s=gU(o,n,e,t,r,i);return s!==Lt&&c_(o,rr(),s),o0}function s0(n,e,t,r,i,o,s){let a=Z(),c=mU(a,n,e,t,r,i,o,s);return c!==Lt&&c_(a,rr(),c),s0}function c_(n,e,t){let r=Iy(e,n);dL(n[Ne],r,t)}function a0(n,e,t){Jv(e)&&(e=e());let r=Z(),i=Vc();if(Ln(r,i,e)){let o=st(),s=Yd();lA(s,r,n,e,r[Ne],t)}return a0}function yU(n,e){let t=Jv(n);return t&&n.set(e),t}function c0(n,e){let t=Z(),r=st(),i=at();return QA(r,t,t[Ne],i,n,e),c0}function yS(n,e,t){let r=st();r.firstCreatePass&&u0(e,r.data,r.blueprint,nr(n),t)}function u0(n,e,t,r,i){if(n=yt(n),Array.isArray(n))for(let o=0;o<n.length;o++)u0(n[o],e,t,r,i);else{let o=st(),s=Z(),a=at(),c=fo(n)?n:yt(n.provide),l=my(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(fo(n)||!n.multi){let y=new To(l,i,$,null),D=ev(c,e,i?d:d+g,f);D===-1?(nv(dh(a,s),o,c),Xy(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[D]=y,s[D]=y)}else{let y=ev(c,e,d+g,f),D=ev(c,e,d,d+g),N=y>=0&&t[y],A=D>=0&&t[D];if(i&&!A||!i&&!N){nv(dh(a,s),o,c);let k=EU(i?_U:vU,t.length,i,r,l,n);!i&&A&&(t[D].providerFactory=k),Xy(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),s.push(k)}else{let k=l0(t[i?D:y],l,!i&&r);Xy(o,n,y>-1?y:D,k)}!i&&r&&A&&t[D].componentProviders++}}}function Xy(n,e,t,r){let i=fo(e),o=hC(e);if(i||o){let c=(o?yt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function l0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function ev(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function vU(n,e,t,r,i){return wv(this.multi,[])}function _U(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Gc(r,r[W],this.providerFactory.index,i);s=c.slice(0,a),wv(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],wv(o,s);return s}function wv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function EU(n,e,t,r,i,o){let s=new To(n,t,$,null);return s.multi=[],s.index=e,s.componentProviders=0,l0(s,i,r&&!t),s}function jt(n,e){return t=>{t.providersResolver=(r,i)=>yS(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>yS(r,i?i(e):e,!0))}}function IU(n,e,t,r){return d0(Z(),mi(),n,e,t,r)}function wU(n,e,t,r,i){return h0(Z(),mi(),n,e,t,r,i)}function DU(n,e,t,r,i,o){return bU(Z(),mi(),n,e,t,r,i,o)}function TU(n,e,t,r,i,o,s){return CU(Z(),mi(),n,e,t,r,i,o,s)}function iu(n,e){let t=n[e];return t===Lt?void 0:t}function d0(n,e,t,r,i,o){let s=e+t;return Ln(n,s,i)?eu(n,s+1,o?r.call(o,i):r(i)):iu(n,s+1)}function h0(n,e,t,r,i,o,s){let a=e+t;return Kc(n,a,i,o)?eu(n,a+2,s?r.call(s,i,o):r(i,o)):iu(n,a+2)}function bU(n,e,t,r,i,o,s,a){let c=e+t;return AA(n,c,i,o,s)?eu(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):iu(n,c+3)}function CU(n,e,t,r,i,o,s,a,c){let l=e+t;return zV(n,l,i,o,s,a)?eu(n,l+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):iu(n,l+4)}function SU(n,e,t,r,i,o){let s=e+t,a=!1;for(let c=0;c<i.length;c++)Ln(n,s++,i[c])&&(a=!0);return a?eu(n,s,r.apply(o,i)):iu(n,s)}function AU(n,e){let t=st(),r,i=n+Qe;t.firstCreatePass?(r=RU(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ai(r.type,!0)),s,a=kt($);try{let c=lh(!1),l=o();return lh(c),wy(t,Z(),i,l),l}finally{kt(a)}}function RU(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function NU(n,e,t){let r=n+Qe,i=Z(),o=Fc(i,r);return u_(i,r)?d0(i,mi(),e,o.transform,t,o):o.transform(t)}function MU(n,e,t,r){let i=n+Qe,o=Z(),s=Fc(o,i);return u_(o,i)?h0(o,mi(),e,s.transform,t,r,s):s.transform(t,r)}function PU(n,e,t){let r=n+Qe,i=Z(),o=Fc(i,r);return u_(i,r)?SU(i,mi(),e,o.transform,t,o):o.transform.apply(o,t)}function u_(n,e){return n[W].data[e].pure}function xU(n,e){return xh(n,e)}var wh=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},l_=(()=>{class n{compileModuleSync(t){return new Eh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=ay(t),o=ZS(i.declarations).reduce((s,a)=>{let c=li(a);return c&&s.push(new Us(c)),s},[]);return new wh(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var f0=(()=>{class n{applicationErrorHandler=P(Zt);appRef=P(Ei);taskService=P(Ar);ngZone=P(xe);zonelessEnabled=P(Bc);tracing=P(Ro,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new it;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(bc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(qy,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?By:Uy;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(bc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,By(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function p0(){return[{provide:ui,useExisting:f0},{provide:xe,useClass:Cc},{provide:Bc,useValue:!0}]}function kU(){return typeof $localize<"u"&&$localize.locale||nu}var No=new B("",{factory:()=>P(No,{optional:!0,skipSelf:!0})||kU()}),d_=new B("",{factory:()=>Bj});function Gs(n,e){return ed(n,e?.equal)}var _0=Symbol("InputSignalNode#UNSET"),WU=U(R({},td),{transformFn:void 0,applyValueToInputSignal(n,e){fc(n,e)}});function E0(n,e){let t=Object.create(WU);t.value=n,t.transformFn=e?.transform;function r(){if(lc(t),t.value===_0){let i=null;throw new L(-950,i)}return t.value}return r[xt]=t,r}var $h=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Jc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function g0(n,e){return E0(n,e)}function KU(n){return E0(_0,n)}var I0=(g0.required=KU,g0);var h_=new B(""),QU=new B("");function ou(n){return!n.moduleRef}function YU(n){let e=ou(n)?n.r3Injector:n.moduleRef.injector,t=e.get(xe);return t.run(()=>{ou(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Zt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),ou(n)){let o=()=>e.destroy(),s=n.platformInjector.get(h_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(h_);s.add(o),n.moduleRef.onDestroy(()=>{qc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return ZU(r,t,()=>{let o=e.get(Ar),s=o.add(),a=e.get(Xv);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(No,nu);if(WA(c||nu),!e.get(QU,!0))return ou(n)?e.get(Ei):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ou(n)){let d=e.get(Ei);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return JU?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var JU;function ZU(n,e,t){try{let r=t();return Nr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Bh=null;function XU(n=[],e){return qe.create({name:e,providers:[{provide:Rc,useValue:"platform"},{provide:h_,useValue:new Set([()=>Bh=null])},...n]})}function e2(n=[]){if(Bh)return Bh;let e=XU(n);return Bh=e,UA(),t2(e),e}function t2(n){let e=n.get(Th,null);ot(n,()=>{e?.forEach(t=>t())})}function y_(){return!1}var ar=(()=>{class n{static __NG_ELEMENT_ID__=n2}return n})();function n2(n){return r2(at(),Z(),(n&16)===16)}function r2(n,e,t){if(gi(n)&&!t){let r=mn(n.index,e);return new vi(r,r)}else if(n.type&175){let r=e[pn];return new vi(r,e)}return null}var f_=class{constructor(){}supports(e){return Wv(e)}create(e){return new p_(e)}},i2=(n,e)=>e,p_=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||i2}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<m0(r,i,o)?t:r,a=m0(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,D=y+g;d<=D&&D<l&&(o[g]=y+1)}let f=s.previousIndex;o[f]=d-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Wv(e))throw new L(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,CA(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new g_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Hh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Hh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},g_=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},m_=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Hh=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new m_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function m0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function y0(){return new v_([new f_])}var v_=(()=>{class n{factories;static \u0275prov=V({token:n,providedIn:"root",factory:y0});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=P(n,{optional:!0,skipSelf:!0});return n.create(t,r||y0())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new L(901,!1)}}return n})();function w0(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;_e(ge.BootstrapApplicationStart);try{let o=i?.injector??e2(r),s=[p0(),HC,...t||[]],a=new Qc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return YU({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{_e(ge.BootstrapApplicationEnd)}}function wi(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var D0=null;function _n(){return D0}function __(n){D0??=n}var su=class{},qh=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>P(T0),providedIn:"platform"})}return n})();var T0=(()=>{class n extends qh{_location;_history;_doc=P(ct);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _n().getBaseHref(this._doc)}onPopState(t){let r=_n().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=_n().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function S0(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function b0(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Di(n){return n&&n[0]!=="?"?`?${n}`:n}var Ws=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>P(s2),providedIn:"root"})}return n})(),o2=new B(""),s2=(()=>{class n extends Ws{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(ct).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return S0(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Di(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Di(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Di(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Y(qh),Y(o2,8))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ks=(()=>{class n{_subject=new Pe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=u2(b0(C0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Di(r))}normalize(t){return n.stripTrailingSlash(c2(this._basePath,C0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Di(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Di(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Di;static joinWithSlash=S0;static stripTrailingSlash=b0;static \u0275fac=function(r){return new(r||n)(Y(Ws))};static \u0275prov=V({token:n,factory:()=>a2(),providedIn:"root"})}return n})();function a2(){return new Ks(Y(Ws))}function c2(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function C0(n){return n.replace(/\/index.html$/,"")}function u2(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var k0={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KGS:[void 0,"\u20C0"],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XCG:["Cg."],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},ef=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(ef||{});var St=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(St||{}),Ee=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Ee||{}),Wt=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(Wt||{}),_t={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function O0(n){return Vt(n)[Me.LocaleId]}function F0(n,e,t){let r=Vt(n),i=[r[Me.DayPeriodsFormat],r[Me.DayPeriodsStandalone]],o=En(i,e);return En(o,t)}function L0(n,e,t){let r=Vt(n),i=[r[Me.DaysFormat],r[Me.DaysStandalone]],o=En(i,e);return En(o,t)}function V0(n,e,t){let r=Vt(n),i=[r[Me.MonthsFormat],r[Me.MonthsStandalone]],o=En(i,e);return En(o,t)}function j0(n,e){let r=Vt(n)[Me.Eras];return En(r,e)}function au(n,e){let t=Vt(n);return En(t[Me.DateFormat],e)}function cu(n,e){let t=Vt(n);return En(t[Me.TimeFormat],e)}function uu(n,e){let r=Vt(n)[Me.DateTimeFormat];return En(r,e)}function Un(n,e){let t=Vt(n),r=t[Me.NumberSymbols][e];if(typeof r>"u"){if(e===_t.CurrencyDecimal)return t[Me.NumberSymbols][_t.Decimal];if(e===_t.CurrencyGroup)return t[Me.NumberSymbols][_t.Group]}return r}function A_(n,e){return Vt(n)[Me.NumberFormats][e]}function l2(n){return Vt(n)[Me.Currencies]}function U0(n){if(!n[Me.ExtraData])throw new L(2303,!1)}function B0(n){let e=Vt(n);return U0(e),(e[Me.ExtraData][2]||[]).map(r=>typeof r=="string"?E_(r):[E_(r[0]),E_(r[1])])}function $0(n,e,t){let r=Vt(n);U0(r);let i=[r[Me.ExtraData][0],r[Me.ExtraData][1]],o=En(i,e)||[];return En(o,t)||[]}function En(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new L(2304,!1)}function E_(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}function H0(n,e,t="en"){let r=l2(t)[n]||k0[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var d2=2;function q0(n){let e,t=k0[n];return t&&(e=t[2]),typeof e=="number"?e:d2}var h2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,zh={},f2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function z0(n,e,t,r){let i=w2(n);e=Mr(t,e)||e;let s=[],a;for(;e;)if(a=f2.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=W0(r,c),i=I2(i,r));let l="";return s.forEach(d=>{let f=_2(d);l+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Yh(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Mr(n,e){let t=O0(n);if(zh[t]??={},zh[t][e])return zh[t][e];let r="";switch(e){case"shortDate":r=au(n,Wt.Short);break;case"mediumDate":r=au(n,Wt.Medium);break;case"longDate":r=au(n,Wt.Long);break;case"fullDate":r=au(n,Wt.Full);break;case"shortTime":r=cu(n,Wt.Short);break;case"mediumTime":r=cu(n,Wt.Medium);break;case"longTime":r=cu(n,Wt.Long);break;case"fullTime":r=cu(n,Wt.Full);break;case"short":let i=Mr(n,"shortTime"),o=Mr(n,"shortDate");r=Gh(uu(n,Wt.Short),[i,o]);break;case"medium":let s=Mr(n,"mediumTime"),a=Mr(n,"mediumDate");r=Gh(uu(n,Wt.Medium),[s,a]);break;case"long":let c=Mr(n,"longTime"),l=Mr(n,"longDate");r=Gh(uu(n,Wt.Long),[c,l]);break;case"full":let d=Mr(n,"fullTime"),f=Mr(n,"fullDate");r=Gh(uu(n,Wt.Full),[d,f]);break}return r&&(zh[t][e]=r),r}function Gh(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function jn(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function p2(n,e){return jn(n,3).substring(0,e)}function Ye(n,e,t=0,r=!1,i=!1){return function(o,s){let a=g2(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return p2(a,e);let c=Un(s,_t.MinusSign);return jn(a,e,c,r,i)}}function g2(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new L(2301,!1)}}function Ce(n,e,t=St.Format,r=!1){return function(i,o){return m2(i,o,n,e,t,r)}}function m2(n,e,t,r,i,o){switch(t){case 2:return V0(e,i,r)[n.getMonth()];case 1:return L0(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=B0(e),d=$0(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[y,D]=g,N=s>=y.hours&&a>=y.minutes,A=s<D.hours||s===D.hours&&a<D.minutes;if(y.hours<D.hours){if(N&&A)return!0}else if(N||A)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return F0(e,i,r)[s<12?0:1];case 3:return j0(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new L(2302,!1)}}function Wh(n){return function(e,t,r){let i=-1*r,o=Un(t,_t.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+jn(s,2,o)+jn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+jn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+jn(s,2,o)+":"+jn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+jn(s,2,o)+":"+jn(Math.abs(i%60),2,o);default:throw new L(2310,!1)}}}var y2=0,Qh=4;function v2(n){let e=Yh(n,y2,1).getDay();return Yh(n,0,1+(e<=Qh?Qh:Qh+7)-e)}function G0(n){let e=n.getDay(),t=e===0?-3:Qh-e;return Yh(n.getFullYear(),n.getMonth(),n.getDate()+t)}function I_(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=G0(t),s=v2(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return jn(i,n,Un(r,_t.MinusSign))}}function Kh(n,e=!1){return function(t,r){let o=G0(t).getFullYear();return jn(o,n,Un(r,_t.MinusSign),e)}}var w_={};function _2(n){if(w_[n])return w_[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ce(3,Ee.Abbreviated);break;case"GGGG":e=Ce(3,Ee.Wide);break;case"GGGGG":e=Ce(3,Ee.Narrow);break;case"y":e=Ye(0,1,0,!1,!0);break;case"yy":e=Ye(0,2,0,!0,!0);break;case"yyy":e=Ye(0,3,0,!1,!0);break;case"yyyy":e=Ye(0,4,0,!1,!0);break;case"Y":e=Kh(1);break;case"YY":e=Kh(2,!0);break;case"YYY":e=Kh(3);break;case"YYYY":e=Kh(4);break;case"M":case"L":e=Ye(1,1,1);break;case"MM":case"LL":e=Ye(1,2,1);break;case"MMM":e=Ce(2,Ee.Abbreviated);break;case"MMMM":e=Ce(2,Ee.Wide);break;case"MMMMM":e=Ce(2,Ee.Narrow);break;case"LLL":e=Ce(2,Ee.Abbreviated,St.Standalone);break;case"LLLL":e=Ce(2,Ee.Wide,St.Standalone);break;case"LLLLL":e=Ce(2,Ee.Narrow,St.Standalone);break;case"w":e=I_(1);break;case"ww":e=I_(2);break;case"W":e=I_(1,!0);break;case"d":e=Ye(2,1);break;case"dd":e=Ye(2,2);break;case"c":case"cc":e=Ye(7,1);break;case"ccc":e=Ce(1,Ee.Abbreviated,St.Standalone);break;case"cccc":e=Ce(1,Ee.Wide,St.Standalone);break;case"ccccc":e=Ce(1,Ee.Narrow,St.Standalone);break;case"cccccc":e=Ce(1,Ee.Short,St.Standalone);break;case"E":case"EE":case"EEE":e=Ce(1,Ee.Abbreviated);break;case"EEEE":e=Ce(1,Ee.Wide);break;case"EEEEE":e=Ce(1,Ee.Narrow);break;case"EEEEEE":e=Ce(1,Ee.Short);break;case"a":case"aa":case"aaa":e=Ce(0,Ee.Abbreviated);break;case"aaaa":e=Ce(0,Ee.Wide);break;case"aaaaa":e=Ce(0,Ee.Narrow);break;case"b":case"bb":case"bbb":e=Ce(0,Ee.Abbreviated,St.Standalone,!0);break;case"bbbb":e=Ce(0,Ee.Wide,St.Standalone,!0);break;case"bbbbb":e=Ce(0,Ee.Narrow,St.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ce(0,Ee.Abbreviated,St.Format,!0);break;case"BBBB":e=Ce(0,Ee.Wide,St.Format,!0);break;case"BBBBB":e=Ce(0,Ee.Narrow,St.Format,!0);break;case"h":e=Ye(3,1,-12);break;case"hh":e=Ye(3,2,-12);break;case"H":e=Ye(3,1);break;case"HH":e=Ye(3,2);break;case"m":e=Ye(4,1);break;case"mm":e=Ye(4,2);break;case"s":e=Ye(5,1);break;case"ss":e=Ye(5,2);break;case"S":e=Ye(6,1);break;case"SS":e=Ye(6,2);break;case"SSS":e=Ye(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Wh(0);break;case"ZZZZZ":e=Wh(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Wh(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Wh(2);break;default:return null}return w_[n]=e,e}function W0(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function E2(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function I2(n,e,t){let i=n.getTimezoneOffset(),o=W0(e,i);return E2(n,-1*(o-i))}function w2(n){if(A0(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Yh(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(h2))return D2(r)}let e=new Date(n);if(!A0(e))throw new L(2311,!1);return e}function D2(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function A0(n){return n instanceof Date&&!isNaN(n.valueOf())}var T2=/^(\d+)?\.((\d+)(-(\d+))?)?$/,R0=22,Jh=".",lu="0",b2=";",C2=",",D_="#",N0="\xA4";function K0(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=Un(t,_t.Infinity);else{let l=A2(n);s&&(l=S2(l));let d=e.minInt,f=e.minFrac,g=e.maxFrac;if(o){let H=o.match(T2);if(H===null)throw new L(2306,!1);let ie=H[1],Fe=H[3],Ae=H[5];ie!=null&&(d=T_(ie)),Fe!=null&&(f=T_(Fe)),Ae!=null?g=T_(Ae):Fe!=null&&f>g&&(g=f)}R2(l,f,g);let y=l.digits,D=l.integerLen,N=l.exponent,A=[];for(c=y.every(H=>!H);D<d;D++)y.unshift(0);for(;D<0;D++)y.unshift(0);D>0?A=y.splice(D,y.length):(A=y,y=[0]);let k=[];for(y.length>=e.lgSize&&k.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)k.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&k.unshift(y.join("")),a=k.join(Un(t,r)),A.length&&(a+=Un(t,i)+A.join("")),N&&(a+=Un(t,_t.Exponential)+"+"+N)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function Q0(n,e,t,r,i){let o=A_(e,ef.Currency),s=J0(o,Un(e,_t.MinusSign));return s.minFrac=q0(r),s.maxFrac=s.minFrac,K0(n,s,e,_t.CurrencyGroup,_t.CurrencyDecimal,i).replace(N0,t).replace(N0,"").trim()}function Y0(n,e,t){let r=A_(e,ef.Decimal),i=J0(r,Un(e,_t.MinusSign));return K0(n,i,e,_t.Group,_t.Decimal,t)}function J0(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(b2),i=r[0],o=r[1],s=i.indexOf(Jh)!==-1?i.split(Jh):[i.substring(0,i.lastIndexOf(lu)+1),i.substring(i.lastIndexOf(lu)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(D_));for(let d=0;d<c.length;d++){let f=c.charAt(d);f===lu?t.minFrac=t.maxFrac=d+1:f===D_?t.maxFrac=d+1:t.posSuf+=f}let l=a.split(C2);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let d=i.length-t.posPre.length-t.posSuf.length,f=o.indexOf(D_);t.negPre=o.substring(0,f).replace(/'/g,""),t.negSuf=o.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function S2(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function A2(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Jh))>-1&&(e=e.replace(Jh,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===lu;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===lu;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>R0&&(r=r.splice(0,R0-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function R2(n,e,t){if(e>t)throw new L(2307,!1);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let f=s;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let f=1;f<s;f++)r[f]=0}if(a>=5)if(s-1<0){for(let f=0;f>s;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+n.integerLen,d=r.reduceRight(function(f,g,y,D){return g=g+f,D[y]=g<10?g:g-10,c&&(D[y]===0&&y>=l?D.pop():c=!1),g>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function T_(n){let e=parseInt(n);if(isNaN(e))throw new L(2305,!1);return e}var b_=/\s+/,M0=[],N2=(()=>{class n{_ngEl;_renderer;initialClasses=M0;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(b_):M0}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(b_):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(b_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)($(Ct),$(vn))};static \u0275dir=he({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Zh=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Z0=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Zh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),P0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);P0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)($(Rr),$(_i),$(v_))};static \u0275dir=he({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function P0(n,e){n.context.$implicit=e.item}var M2=(()=>{class n{_viewContainer;_context=new Xh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){x0(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){x0(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)($(Rr),$(_i))};static \u0275dir=he({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Xh=class{$implicit=null;ngIf=null};function x0(n,e){if(n&&!n.createEmbeddedView)throw new L(2020,!1)}function tf(n,e){return new L(2100,!1)}var C_=class{createSubscription(e,t,r){return je(()=>e.subscribe({next:t,error:r}))}dispose(e){je(()=>e.unsubscribe())}},S_=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},P2=new S_,x2=new C_,k2=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=P(Zt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Nr(t))return P2;if(Lh(t))return x2;throw tf(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)($(ar,16))};static \u0275pipe=zs({name:"async",type:n,pure:!1})}return n})();var O2="mediumDate",X0=new B(""),eR=new B(""),F2=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??O2,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return z0(t,s,o||this.locale,a)}catch(s){throw tf(n,s.message)}}static \u0275fac=function(r){return new(r||n)($(No,16),$(X0,24),$(eR,24))};static \u0275pipe=zs({name:"date",type:n,pure:!0})}return n})();var L2=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!tR(t))return null;i||=this._locale;try{let o=nR(t);return Y0(o,i,r)}catch(o){throw tf(n,o.message)}}static \u0275fac=function(r){return new(r||n)($(No,16))};static \u0275pipe=zs({name:"number",type:n,pure:!0})}return n})();var V2=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!tR(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=H0(a,i==="symbol"?"wide":"narrow",s):a=i);try{let c=nR(t);return Q0(c,s,a,r,o)}catch(c){throw tf(n,c.message)}}static \u0275fac=function(r){return new(r||n)($(No,16),$(d_,16))};static \u0275pipe=zs({name:"currency",type:n,pure:!0})}return n})();function tR(n){return!(n==null||n===""||n!==n)}function nR(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new L(2309,!1);return n}var rR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=sr({type:n});static \u0275inj=An({})}return n})();function R_(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var du=class{};function jie(n,e,t){return i_(n,e,t)}var iR="browser";var hu=class{_doc;constructor(e){this._doc=e}manager},nf=(()=>{class n extends hu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Y(ct))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),sf=new B(""),x_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof nf));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof nf);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new L(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Y(sf),Y(xe))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),N_="ng-app-id";function oR(n){for(let e of n)e.remove()}function sR(n,e){let t=e.createElement("style");return t.textContent=n,t}function U2(n,e,t,r){let i=n.head?.querySelectorAll(`style[${N_}="${e}"],link[${N_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(N_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function P_(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var k_=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,U2(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,sR);r?.forEach(i=>this.addUsage(i,this.external,P_))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(oR(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])oR(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,sR(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,P_(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Y(ct),Y(Dh),Y(bh,8),Y(Ao))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),M_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},O_=/%COMP%/g;var cR="%COMP%",B2=`_nghost-${cR}`,$2=`_ngcontent-${cR}`,H2=!0,q2=new B("",{factory:()=>H2});function z2(n){return $2.replace(O_,n)}function G2(n){return B2.replace(O_,n)}function uR(n,e){return e.map(t=>t.replace(O_,n))}var F_=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,o,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.defaultRenderer=new fu(t,s,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof of?i.applyToHost(t):i instanceof pu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.tracingService;switch(r.encapsulation){case Fn.Emulated:o=new of(c,l,r,this.appId,d,s,a,f);break;case Fn.ShadowDom:return new rf(c,t,r,s,a,this.nonce,f,l);case Fn.ExperimentalIsolatedShadowDom:return new rf(c,t,r,s,a,this.nonce,f);default:o=new pu(c,l,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Y(x_),Y(k_),Y(Dh),Y(q2),Y(ct),Y(xe),Y(bh),Y(Ro,8))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),fu=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(M_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(aR(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(aR(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new L(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=M_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=M_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(or.DashCase|or.Important)?e.style.setProperty(t,r,i&or.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&or.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=_n().getGlobalEventTarget(this.doc,e),!e))throw new L(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function aR(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var rf=class extends fu{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,c){super(e,i,o,a),this.hostEl=t,this.sharedStylesHost=c,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=uR(r.id,l);for(let f of l){let g=document.createElement("style");s&&g.setAttribute("nonce",s),g.textContent=f,this.shadowRoot.appendChild(g)}let d=r.getExternalStyles?.();if(d)for(let f of d){let g=P_(f,i);s&&g.setAttribute("nonce",s),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},pu=class extends fu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=c?uR(c,l):l,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&js.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},of=class extends pu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=z2(l),this.hostAttr=G2(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var af=class n extends su{supportsDOMEvents=!0;static makeCurrent(){__(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=W2();return t==null?null:K2(t)}resetBaseElement(){gu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return R_(document.cookie,e)}},gu=null;function W2(){return gu=gu||document.head.querySelector("base"),gu?gu.getAttribute("href"):null}function K2(n){return new URL(n,document.baseURI).pathname}var Q2=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),lR=["alt","control","meta","shift"],Y2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},J2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},dR=(()=>{class n extends hu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_n().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),lR.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=Y2[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),lR.forEach(s=>{if(s!==i){let a=J2[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Y(ct))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function Z2(n,e,t){let r=R({rootComponent:n,platformRef:t?.platformRef},X2(e));return w0(r)}function X2(n){return{appProviders:[...iB,...n?.providers??[]],platformProviders:rB}}function eB(){af.makeCurrent()}function tB(){return new Jn}function nB(){return bv(document),document}var rB=[{provide:Ao,useValue:iR},{provide:Th,useValue:eB,multi:!0},{provide:ct,useFactory:nB}];var iB=[{provide:Rc,useValue:"root"},{provide:Jn,useFactory:tB},{provide:sf,useClass:nf,multi:!0},{provide:sf,useClass:dR,multi:!0},F_,k_,x_,{provide:bo,useExisting:F_},{provide:du,useClass:Q2},[]];var hR=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Y(ct))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var X="primary",Au=Symbol("RouteTitle"),B_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ko(n){return new B_(n)}function IR(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ff(n){return new Promise((e,t)=>{n.pipe(Tr()).subscribe({next:r=>e(r),error:r=>t(r)})})}function aB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!cr(n[t],e[t]))return!1;return!0}function cr(n,e){let t=n?$_(n):void 0,r=e?$_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!wR(n[i],e[i]))return!1;return!0}function $_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function DR(n){return n.length>0?n[n.length-1]:null}function Fo(n){return wd(n)?n:Nr(n)?Te(Promise.resolve(n)):re(n)}function TR(n){return wd(n)?ff(n):Promise.resolve(n)}var cB={exact:CR,subset:SR},bR={exact:uB,subset:lB,ignored:()=>!0};function fR(n,e,t){return cB[t.paths](n.root,e.root,t.matrixParams)&&bR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function uB(n,e){return cr(n,e)}function CR(n,e,t){if(!Po(n.segments,e.segments)||!lf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!CR(n.children[r],e.children[r],t))return!1;return!0}function lB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wR(n[t],e[t]))}function SR(n,e,t){return AR(n,e,e.segments,t)}function AR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Po(i,t)||e.hasChildren()||!lf(i,t,r))}else if(n.segments.length===t.length){if(!Po(n.segments,t)||!lf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!SR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Po(n.segments,i)||!lf(n.segments,i,r)||!n.children[X]?!1:AR(n.children[X],e,o,r)}}function lf(n,e,t){return e.every((r,i)=>bR[t](n[i].parameters,r.parameters))}var $n=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ye([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ko(this.queryParams),this._queryParamMap}toString(){return fB.serialize(this)}},ye=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return df(this)}},Ti=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ko(this.parameters),this._parameterMap}toString(){return NR(this)}};function dB(n,e){return Po(n,e)&&n.every((t,r)=>cr(t.parameters,e[r].parameters))}function Po(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function hB(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===X&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==X&&(t=t.concat(e(i,r)))}),t}var Ru=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>new bi,providedIn:"root"})}return n})(),bi=class{parse(e){let t=new q_(e);return new $n(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${mu(e.root,!0)}`,r=mB(e.queryParams),i=typeof e.fragment=="string"?`#${pB(e.fragment)}`:"";return`${t}${r}${i}`}},fB=new bi;function df(n){return n.segments.map(e=>NR(e)).join("/")}function mu(n,e){if(!n.hasChildren())return df(n);if(e){let t=n.children[X]?mu(n.children[X],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${mu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=hB(n,(r,i)=>i===X?[mu(n.children[X],!1)]:[`${i}:${mu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[X]!=null?`${df(n)}/${t[0]}`:`${df(n)}/(${t.join("//")})`}}function RR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cf(n){return RR(n).replace(/%3B/gi,";")}function pB(n){return encodeURI(n)}function H_(n){return RR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hf(n){return decodeURIComponent(n)}function pR(n){return hf(n.replace(/\+/g,"%20"))}function NR(n){return`${H_(n.path)}${gB(n.parameters)}`}function gB(n){return Object.entries(n).map(([e,t])=>`;${H_(e)}=${H_(t)}`).join("")}function mB(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${cf(t)}=${cf(i)}`).join("&"):`${cf(t)}=${cf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var yB=/^[^\/()?;#]+/;function L_(n){let e=n.match(yB);return e?e[0]:""}var vB=/^[^\/()?;=#]+/;function _B(n){let e=n.match(vB);return e?e[0]:""}var EB=/^[^=?&#]+/;function IB(n){let e=n.match(EB);return e?e[0]:""}var wB=/^[^&#]+/;function DB(n){let e=n.match(wB);return e?e[0]:""}var q_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ye([],{}):new ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[X]=new ye(e,t)),r}parseSegment(){let e=L_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(e),new Ti(hf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=_B(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=L_(this.remaining);i&&(r=i,this.capture(r))}e[hf(t)]=hf(r)}parseQueryParam(e){let t=IB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=DB(this.remaining);s&&(r=s,this.capture(r))}let i=pR(t),o=pR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=L_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new L(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();t[o??X]=Object.keys(s).length===1&&s[X]?s[X]:new ye([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new L(4011,!1)}};function MR(n){return n.segments.length>0?new ye([],{[X]:n}):n}function PR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=PR(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new ye(n.segments,e);return TB(t)}function TB(n){if(n.numberOfChildren===1&&n.children[X]){let e=n.children[X];return new ye(n.segments.concat(e.segments),e.children)}return n}function Ci(n){return n instanceof $n}function xR(n,e,t=null,r=null,i=new bi){let o=kR(n);return OR(o,e,t,r,i)}function kR(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new ye(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=MR(r);return e??i}function OR(n,e,t,r,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return V_(o,o,o,t,r,i);let s=bB(e);if(s.toRoot())return V_(o,o,new ye([],{}),t,r,i);let a=CB(s,o,n),c=a.processChildren?vu(a.segmentGroup,a.index,s.commands):LR(a.segmentGroup,a.index,s.commands);return V_(o,a.segmentGroup,c,t,r,i)}function pf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Iu(n){return typeof n=="object"&&n!=null&&n.outlets}function gR(n,e,t){n||="\u0275";let r=new $n;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function V_(n,e,t,r,i,o){let s={};for(let[l,d]of Object.entries(r??{}))s[l]=Array.isArray(d)?d.map(f=>gR(l,f,o)):gR(l,d,o);let a;n===e?a=t:a=FR(n,e,t);let c=MR(PR(a));return new $n(c,s,i)}function FR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=FR(o,e,t)}),new ye(n.segments,r)}var gf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&pf(r[0]))throw new L(4003,!1);let i=r.find(Iu);if(i&&i!==DR(r))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function bB(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new gf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new gf(t,e,r)}var Ys=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function CB(n,e,t){if(n.isAbsolute)return new Ys(e,!0,0);if(!t)return new Ys(e,!1,NaN);if(t.parent===null)return new Ys(t,!0,0);let r=pf(n.commands[0])?0:1,i=t.segments.length-1+r;return SB(t,i,n.numberOfDoubleDots)}function SB(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new L(4005,!1);i=r.segments.length}return new Ys(r,!1,i-o)}function AB(n){return Iu(n[0])?n[0].outlets:{[X]:n}}function LR(n,e,t){if(n??=new ye([],{}),n.segments.length===0&&n.hasChildren())return vu(n,e,t);let r=RB(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new ye(n.segments.slice(0,r.pathIndex),{});return o.children[X]=new ye(n.segments.slice(r.pathIndex),n.children),vu(o,0,i)}else return r.match&&i.length===0?new ye(n.segments,{}):r.match&&!n.hasChildren()?z_(n,e,t):r.match?vu(n,0,i):z_(n,e,t)}function vu(n,e,t){if(t.length===0)return new ye(n.segments,{});{let r=AB(t),i={};if(Object.keys(r).some(o=>o!==X)&&n.children[X]&&n.numberOfChildren===1&&n.children[X].segments.length===0){let o=vu(n.children[X],e,t);return new ye(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=LR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ye(n.segments,i)}}function RB(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Iu(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!yR(c,l,s))return o;r+=2}else{if(!yR(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function z_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Iu(o)){let c=NB(o.outlets);return new ye(r,c)}if(i===0&&pf(t[0])){let c=n.segments[e];r.push(new Ti(c.path,mR(t[0]))),i++;continue}let s=Iu(o)?o.outlets[X]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&pf(a)?(r.push(new Ti(s,mR(a))),i+=2):(r.push(new Ti(s,{})),i++)}return new ye(r,{})}function NB(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=z_(new ye([],{}),0,r))}),e}function mR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function yR(n,e,t){return n==t.path&&cr(e,t.parameters)}var _u="imperative",ht=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ht||{}),nn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Oo=class extends nn{type=ht.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Hn=class extends nn{urlAfterRedirects;type=ht.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ut=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Ut||{}),wu=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(wu||{}),ur=class extends nn{reason;code;type=ht.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Pr=class extends nn{reason;code;type=ht.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Zs=class extends nn{error;target;type=ht.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Du=class extends nn{urlAfterRedirects;state;type=ht.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mf=class extends nn{urlAfterRedirects;state;type=ht.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yf=class extends nn{urlAfterRedirects;state;shouldActivate;type=ht.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},vf=class extends nn{urlAfterRedirects;state;type=ht.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_f=class extends nn{urlAfterRedirects;state;type=ht.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ef=class{route;type=ht.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},If=class{route;type=ht.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},wf=class{snapshot;type=ht.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Df=class{snapshot;type=ht.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tf=class{snapshot;type=ht.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bf=class{snapshot;type=ht.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Tu=class{},Xs=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function MB(n){return!(n instanceof Tu)&&!(n instanceof Xs)}function PB(n,e){return n.providers&&!n._injector&&(n._injector=tu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Bn(n){return n.outlet||X}function xB(n,e){let t=n.filter(r=>Bn(r)===e);return t.push(...n.filter(r=>Bn(r)!==e)),t}function na(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Cf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return na(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new ra(this.rootInjector)}},ra=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Cf(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Y(Ke))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Sf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=G_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=G_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=W_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return W_(e,this._root).map(t=>t.value)}};function G_(n,e){if(n===e.value)return e;for(let t of e.children){let r=G_(n,t);if(r)return r}return null}function W_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=W_(n,t);if(r.length)return r.unshift(e),r}return[]}var tn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Qs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var bu=class extends Sf{snapshot;constructor(e,t){super(e),this.snapshot=t,X_(this,e)}toString(){return this.snapshot.toString()}};function VR(n){let e=kB(n),t=new We([new Ti("",{})]),r=new We({}),i=new We({}),o=new We({}),s=new We(""),a=new xr(t,r,o,s,i,X,n,e.root);return a.snapshot=e.root,new bu(new tn(a,[]),e)}function kB(n){let e={},t={},r={},o=new xo([],e,r,"",t,X,n,null,{});return new Cu("",new tn(o,[]))}var xr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(te(l=>l[Au]))??re(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>ko(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>ko(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Af(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:R(R({},e.params),n.params),data:R(R({},e.data),n.data),resolve:R(R(R(R({},n.data),e.data),i?.data),n._resolvedData)}:r={params:R({},n.params),data:R({},n.data),resolve:R(R({},n.data),n._resolvedData??{})},i&&UR(i)&&(r.resolve[Au]=i.title),r}var xo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Au]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ko(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ko(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Cu=class extends Sf{url;constructor(e,t){super(t),this.url=e,X_(this,t)}toString(){return jR(this._root)}};function X_(n,e){e.value._routerState=n,e.children.forEach(t=>X_(n,t))}function jR(n){let e=n.children.length>0?` { ${n.children.map(jR).join(", ")} } `:"";return`${n.value}${e}`}function j_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,cr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),cr(e.params,t.params)||n.paramsSubject.next(t.params),aB(e.url,t.url)||n.urlSubject.next(t.url),cr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function K_(n,e){let t=cr(n.params,e.params)&&dB(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||K_(n.parent,e.parent))}function UR(n){return typeof n.title=="string"||n.title===null}var BR=new B(""),eE=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=X;activateEvents=new Ve;deactivateEvents=new Ve;attachEvents=new Ve;detachEvents=new Ve;routerOutletData=I0();parentContexts=P(ra);location=P(Rr);changeDetector=P(ar);inputBinder=P(Pf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Q_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=he({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[yn]})}return n})(),Q_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===xr?this.route:e===ra?this.childContexts:e===BR?this.outletData:this.parent.get(e,t)}},Pf=new B("");var tE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Qv({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&jh(0,"router-outlet")},dependencies:[eE],encapsulation:2})}return n})();function nE(n){let e=n.children&&n.children.map(nE),t=e?U(R({},n),{children:e}):R({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==X&&(t.component=tE),t}function OB(n,e,t){let r=Su(n,e._root,t?t._root:void 0);return new bu(r,e)}function Su(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=FB(n,e,t);return new tn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Su(n,a)),s}}let r=LB(e.value),i=e.children.map(o=>Su(n,o));return new tn(r,i)}}function FB(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Su(n,r,i);return Su(n,r)})}function LB(n){return new xr(new We(n.url),new We(n.params),new We(n.queryParams),new We(n.fragment),new We(n.data),n.outlet,n.component,n)}var ea=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},$R="ngNavigationCancelingError";function Rf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ci(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=HR(!1,Ut.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function HR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[$R]=!0,t.cancellationCode=e,t}function VB(n){return qR(n)&&Ci(n.url)}function qR(n){return!!n&&n[$R]}var jB=(n,e,t,r)=>te(i=>(new Y_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Y_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),j_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Qs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Qs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Qs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new bf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Df(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(j_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),j_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Nf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Js=class{component;route;constructor(e,t){this.component=e,this.route=t}};function UB(n,e,t){let r=n._root,i=e?e._root:null;return yu(r,i,t,[r.value])}function BB(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ia(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ty(n)?n:e.get(n):r}function yu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Qs(e);return n.children.forEach(s=>{$B(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Eu(a,t.getContext(s),i)),i}function $B(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=HB(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Nf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?yu(n,e,a?a.children:null,r,i):yu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Js(a.outlet.component,s))}else s&&Eu(e,a,i),i.canActivateChecks.push(new Nf(r)),o.component?yu(n,null,a?a.children:null,r,i):yu(n,null,t,r,i);return i}function HB(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Po(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Po(n.url,e.url)||!cr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!K_(n,e)||!cr(n.queryParams,e.queryParams);case"paramsChange":default:return!K_(n,e)}}function Eu(n,e,t){let r=Qs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Eu(s,e.children.getContext(o),t):Eu(s,null,t):Eu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Js(e.outlet.component,i)):t.canDeactivateChecks.push(new Js(null,i)):t.canDeactivateChecks.push(new Js(null,i))}function Nu(n){return typeof n=="function"}function qB(n){return typeof n=="boolean"}function zB(n){return n&&Nu(n.canLoad)}function GB(n){return n&&Nu(n.canActivate)}function WB(n){return n&&Nu(n.canActivateChild)}function KB(n){return n&&Nu(n.canDeactivate)}function QB(n){return n&&Nu(n.canMatch)}function zR(n){return n instanceof Ir||n?.name==="EmptyError"}var uf=Symbol("INITIAL_VALUE");function ta(){return Gt(n=>Pm(n.map(e=>e.pipe(Dr(1),Ic(uf)))).pipe(te(e=>{for(let t of e)if(t!==!0){if(t===uf)return uf;if(t===!1||YB(t))return t}return!0}),dn(e=>e!==uf),Dr(1)))}function YB(n){return Ci(n)||n instanceof ea}function GR(n){return n.aborted?re(void 0).pipe(Dr(1)):new ne(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function WR(n){return Ds(GR(n))}function JB(n,e){return wt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?re(U(R({},t),{guardsResult:!0})):ZB(s,r,i,n).pipe(wt(a=>a&&qB(a)?XB(r,o,n,e):re(a)),te(a=>U(R({},t),{guardsResult:a})))})}function ZB(n,e,t,r){return Te(n).pipe(wt(i=>i$(i.component,i.route,t,e,r)),Tr(i=>i!==!0,!0))}function XB(n,e,t,r){return Te(e).pipe(Ec(i=>Is(t$(i.route.parent,r),e$(i.route,r),r$(n,i.path,t),n$(n,i.route,t))),Tr(i=>i!==!0,!0))}function e$(n,e){return n!==null&&e&&e(new Tf(n)),re(!0)}function t$(n,e){return n!==null&&e&&e(new wf(n)),re(!0)}function n$(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return re(!0);let i=r.map(o=>_c(()=>{let s=na(e)??t,a=ia(o,s),c=GB(a)?a.canActivate(e,n):ot(s,()=>a(e,n));return Fo(c).pipe(Tr())}));return re(i).pipe(ta())}function r$(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>BB(s)).filter(s=>s!==null).map(s=>_c(()=>{let a=s.guards.map(c=>{let l=na(s.node)??t,d=ia(c,l),f=WB(d)?d.canActivateChild(r,n):ot(l,()=>d(r,n));return Fo(f).pipe(Tr())});return re(a).pipe(ta())}));return re(o).pipe(ta())}function i$(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return re(!0);let s=o.map(a=>{let c=na(e)??i,l=ia(a,c),d=KB(l)?l.canDeactivate(n,e,t,r):ot(c,()=>l(n,e,t,r));return Fo(d).pipe(Tr())});return re(s).pipe(ta())}function o$(n,e,t,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return re(!0);let s=o.map(a=>{let c=ia(a,n),l=zB(c)?c.canLoad(e,t):ot(n,()=>c(e,t)),d=Fo(l);return i?d.pipe(WR(i)):d});return re(s).pipe(ta(),KR(r))}function KR(n){return sd(Dt(e=>{if(typeof e!="boolean")throw Rf(n,e)}),te(e=>e===!0))}function s$(n,e,t,r,i){let o=e.canMatch;if(!o||o.length===0)return re(!0);let s=o.map(a=>{let c=ia(a,n),l=QB(c)?c.canMatch(e,t):ot(n,()=>c(e,t)),d=Fo(l);return i?d.pipe(WR(i)):d});return re(s).pipe(ta(),KR(r))}var Mo=class QR extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,QR.prototype)}},J_=class YR extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,YR.prototype)}};function a$(n){throw new L(4e3,!1)}function c$(n){throw HR(!1,Ut.GuardRejected)}var u$=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[X])throw a$(`${e.redirectTo}`);i=i.children[X]}}async applyRedirectCommands(e,t,r,i,o){let s=await l$(t,i,o);if(s instanceof $n)throw new J_(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new J_(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new $n(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ye(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new L(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function l$(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:d,title:f}=e;return ff(Fo(ot(t,()=>r({params:l,data:d,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:f}))))}var Z_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function d$(n,e,t,r,i,o){let s=JR(n,e,t);return s.matched?(r=PB(e,r),s$(r,e,t,i,o).pipe(te(a=>a===!0?s:R({},Z_)))):re(s)}function JR(n,e,t){if(e.path==="**")return h$(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?R({},Z_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||IR)(t,n,e);if(!i)return R({},Z_);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?R(R({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function h$(n){return{matched:!0,parameters:n.length>0?DR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function vR(n,e,t,r){return t.length>0&&g$(n,t,r)?{segmentGroup:new ye(e,p$(r,new ye(t,n.children))),slicedSegments:[]}:t.length===0&&m$(n,t,r)?{segmentGroup:new ye(n.segments,f$(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ye(n.segments,n.children),slicedSegments:t}}function f$(n,e,t,r){let i={};for(let o of t)if(xf(n,e,o)&&!r[Bn(o)]){let s=new ye([],{});i[Bn(o)]=s}return R(R({},r),i)}function p$(n,e){let t={};t[X]=e;for(let r of n)if(r.path===""&&Bn(r)!==X){let i=new ye([],{});t[Bn(r)]=i}return t}function g$(n,e,t){return t.some(r=>xf(n,e,r)&&Bn(r)!==X)}function m$(n,e,t){return t.some(r=>xf(n,e,r))}function xf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function y$(n,e,t){return e.length===0&&!n.children[t]}var v$=class{};async function _$(n,e,t,r,i,o,s="emptyOnly",a){return new I$(n,e,t,r,i,s,o,a).recognize()}var E$=31,I$=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new u$(this.urlSerializer,this.urlTree)}noMatchError(e){return new L(4002,`'${e.segmentGroup}'`)}async recognize(){let e=vR(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new tn(r,t),o=new Cu("",i),s=xR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let t=new xo([],Object.freeze({}),Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,X,t),rootSnapshot:t}}catch(r){if(r instanceof J_)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Mo?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,o);let s=await this.processSegment(e,t,r,r.segments,i,!0,o);return s instanceof tn?[s]:[]}async processChildren(e,t,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let l=r.children[c],d=xB(t,c),f=await this.processSegmentGroup(e,d,l,c,i);s.push(...f)}let a=ZR(s);return w$(a),a}async processSegment(e,t,r,i,o,s,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a)}catch(l){if(l instanceof Mo||zR(l))continue;throw l}if(y$(r,i,o))return new v$;throw new Mo(r)}async processSegmentAgainstRoute(e,t,r,i,o,s,a,c){if(Bn(r)!==s&&(s===X||!xf(i,o,r)))throw new Mo(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c);throw new Mo(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=JR(t,i,o);if(!c)throw new Mo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>E$&&(this.allowRedirects=!1));let y=new xo(o,l,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,_R(i),Bn(i),i.component??i._loadedComponent??null,i,ER(i)),D=Af(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(D.params),y.data=Object.freeze(D.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let N=await this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,y,e),A=await this.applyRedirects.lineralizeSegments(i,N);return this.processSegment(e,r,t,A.concat(g),s,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await ff(d$(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new Mo(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:g}=a,y=new xo(f,d,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,_R(r),Bn(r),r.component??r._loadedComponent??null,r,ER(r)),D=Af(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(D.params),y.data=Object.freeze(D.data);let{segmentGroup:N,slicedSegments:A}=vR(t,f,g,c);if(A.length===0&&N.hasChildren()){let ie=await this.processChildren(l,c,N,y);return new tn(y,ie)}if(c.length===0&&A.length===0)return new tn(y,[]);let k=Bn(r)===o,H=await this.processSegment(l,c,N,A,k?X:o,!0,y);return new tn(y,H instanceof tn?[H]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await ff(o$(e,t,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=o.routes,t._loadedInjector=o.injector,o}throw c$(t)}return{routes:[],injector:e}}};function w$(n){n.sort((e,t)=>e.value.outlet===X?-1:t.value.outlet===X?1:e.value.outlet.localeCompare(t.value.outlet))}function D$(n){let e=n.value.routeConfig;return e&&e.path===""}function ZR(n){let e=[],t=new Set;for(let r of n){if(!D$(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=ZR(r.children);e.push(new tn(r.value,i))}return e.filter(r=>!t.has(r))}function _R(n){return n.data||{}}function ER(n){return n.resolve||{}}var T$=new B("",{factory:()=>_$});function b$(n,e,t,r,i,o,s){let a=n.get(T$);return wt(c=>re(c).pipe(Gt(l=>a(n,e,t,r,l.extractedUrl,i,o,s)),te(({state:l,tree:d})=>U(R({},c),{targetSnapshot:l,urlAfterRedirects:d}))))}function C$(n,e){return wt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return re(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of XR(c))s.add(l);let a=0;return Te(s).pipe(Ec(c=>o.has(c)?S$(c,r,n,e):(c.data=Af(c,c.parent,n).resolve,re(void 0))),Dt(()=>a++),Sd(1),wt(c=>a===s.size?re(t):qt))})}function XR(n){let e=n.children.map(t=>XR(t)).flat();return[n,...e]}function S$(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!UR(i)&&(o[Au]=i.title),_c(()=>(n.data=Af(n,n.parent,t).resolve,A$(o,n,e,r).pipe(te(s=>(n._resolvedData=s,n.data=R(R({},n.data),s),null)))))}function A$(n,e,t,r){let i=$_(n);if(i.length===0)return re({});let o={};return Te(i).pipe(wt(s=>R$(n[s],e,t,r).pipe(Tr(),Dt(a=>{if(a instanceof ea)throw Rf(new bi,a);o[s]=a}))),Sd(1),te(()=>o),wr(s=>zR(s)?qt:Mm(s)))}function R$(n,e,t,r){let i=na(e)??r,o=ia(n,i),s=o.resolve?o.resolve(e,t):ot(i,()=>o(e,t));return Fo(s)}function U_(n){return Gt(e=>{let t=n(e);return t?Te(t).pipe(te(()=>e)):re(e)})}var rE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(t){return t.data[Au]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>P(eN),providedIn:"root"})}return n})(),eN=(()=>{class n extends rE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Y(hR))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oa=new B("",{factory:()=>({})}),Mu=new B(""),tN=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(l_);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await TR(ot(t,()=>r.loadComponent())),s=await iN(rN(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await nN(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function nN(n,e,t,r){let i=await TR(ot(t,()=>n.loadChildren())),o=await iN(rN(i)),s;o instanceof Fh||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(n);let a,c,l=!1;return Array.isArray(s)?(c=s,l=!0):(a=s.create(t).injector,c=a.get(Mu,[],{optional:!0,self:!0}).flat()),{routes:c.map(nE),injector:a}}function N$(n){return n&&typeof n=="object"&&"default"in n}function rN(n){return N$(n)?n.default:n}async function iN(n){return n}var kf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>P(M$),providedIn:"root"})}return n})(),M$=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oN=new B("");var P$=()=>{},sN=new B(""),aN=(()=>{class n{currentNavigation=Xt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Xt(null);events=new Pe;transitionAbortWithErrorSubject=new Pe;configLoader=P(tN);environmentInjector=P(Ke);destroyRef=P(xn);urlSerializer=P(Ru);rootContexts=P(ra);location=P(Ks);inputBindingEnabled=P(Pf,{optional:!0})!==null;titleStrategy=P(rE);options=P(oa,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(kf);createViewTransition=P(oN,{optional:!0});navigationErrorHandler=P(sN,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>re(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Ef(i)),r=i=>this.events.next(new If(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;je(()=>{this.transitions?.next(U(R({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new We(null),this.transitions.pipe(dn(r=>r!==null),Gt(r=>{let i=!1,o=new AbortController;return re(r).pipe(Gt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ut.SupersededByNewNavigation),qt;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?U(R({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new Pr(s.id,this.urlSerializer.serialize(s.rawUrl),"",wu.IgnoredSameUrlNavigation)),s.resolve(!1),qt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return re(s).pipe(Gt(d=>(this.events.next(new Oo(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?qt:Promise.resolve(d))),b$(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Dt(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=d.urlAfterRedirects,g));let f=new Du(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:d,extractedUrl:f,source:g,restoredState:y,extras:D}=s,N=new Oo(d,this.urlSerializer.serialize(f),g,y);this.events.next(N);let A=VR(this.rootComponentType).snapshot;return this.currentTransition=r=U(R({},s),{targetSnapshot:A,urlAfterRedirects:f,extras:U(R({},D),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=f,k)),re(r)}else return this.events.next(new Pr(s.id,this.urlSerializer.serialize(s.extractedUrl),"",wu.IgnoredByUrlHandlingStrategy)),s.resolve(!1),qt}),Dt(s=>{let a=new mf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),te(s=>(this.currentTransition=r=U(R({},s),{guards:UB(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),JB(this.environmentInjector,s=>this.events.next(s)),Dt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Rf(this.urlSerializer,s.guardsResult);let a=new yf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),dn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Ut.GuardRejected),!1)),U_(s=>{if(s.guards.canActivateChecks.length!==0)return re(s).pipe(Dt(a=>{let c=new vf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Gt(a=>{let c=!1;return re(a).pipe(C$(this.paramsInheritanceStrategy,this.environmentInjector),Dt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Ut.NoDataFromResolver)}}))}),Dt(a=>{let c=new _f(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),U_(s=>{let a=l=>{let d=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let f=na(l)??this.environmentInjector;d.push(this.configLoader.loadComponent(f,l.routeConfig).then(g=>{l.component=g}))}for(let f of l.children)d.push(...a(f));return d},c=a(s.targetSnapshot.root);return c.length===0?re(s):Te(Promise.all(c).then(()=>s))}),U_(()=>this.afterPreactivation()),Gt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?Te(c).pipe(te(()=>r)):re(r)}),te(s=>{let a=OB(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=U(R({},s),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Dt(()=>{this.events.next(new Tu)}),jB(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Dr(1),Ds(GR(o.signal).pipe(dn(()=>!i&&!r.targetRouterState),Dt(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Ut.Aborted)}))),Dt({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=P$,a)),this.lastSuccessfulNavigation.set(je(this.currentNavigation)),this.events.next(new Hn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Ds(this.transitionAbortWithErrorSubject.pipe(Dt(s=>{throw s}))),Om(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Ut.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),wr(s=>{if(this.destroyed)return r.resolve(!1),qt;if(i=!0,qR(s))this.events.next(new ur(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),VB(s)?this.events.next(new Xs(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Zs(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=ot(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof ea){let{message:l,cancellationCode:d}=Rf(this.urlSerializer,c);this.events.next(new ur(r.id,this.urlSerializer.serialize(r.extractedUrl),l,d)),this.events.next(new Xs(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return qt}))}))}cancelNavigationTransition(t,r,i){let o=new ur(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=je(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function x$(n){return n!==_u}var cN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>P(k$),providedIn:"root"})}return n})(),Mf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},k$=(()=>{class n extends Mf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iE=(()=>{class n{urlSerializer=P(Ru);options=P(oa,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(Ks);urlHandlingStrategy=P(kf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new $n;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof $n?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=VR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>P(uN),providedIn:"root"})}return n})(),uN=(()=>{class n extends iE{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Oo?this.updateStateMemento():t instanceof Pr?this.commitTransition(r):t instanceof Du?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Tu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ur&&t.code!==Ut.SupersededByNewNavigation&&t.code!==Ut.Redirect?this.restoreHistory(r):t instanceof Zs?this.restoreHistory(r,!0):t instanceof Hn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=R(R({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=R(R({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oE(n,e){n.events.pipe(dn(t=>t instanceof Hn||t instanceof ur||t instanceof Zs||t instanceof Pr),te(t=>t instanceof Hn||t instanceof Pr?0:(t instanceof ur?t.code===Ut.Redirect||t.code===Ut.SupersededByNewNavigation:!1)?2:1),dn(t=>t!==2),Dr(1)).subscribe(()=>{e()})}var O$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},F$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},sa=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(Yv);stateManager=P(iE);options=P(oa,{optional:!0})||{};pendingTasks=P(Ar);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(aN);urlSerializer=P(Ru);location=P(Ks);urlHandlingStrategy=P(kf);injector=P(Ke);_events=new Pe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(cN);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(Mu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(Pf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new it;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=je(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ur&&r.code!==Ut.Redirect&&r.code!==Ut.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Hn)this.navigated=!0;else if(r instanceof Xs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=R({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||x$(i.source)},s);this.scheduleNavigation(a,_u,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}MB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),_u,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=R({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Zt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return je(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(nE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=R(R({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=kR(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return OR(f,t,d,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ci(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,_u,null,r)}navigate(t,r={skipLocationChange:!1}){return L$(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(go(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=R({},O$):r===!1?i=R({},F$):i=r,Ci(t))return fR(this.currentUrlTree,t,i);let o=this.parseUrl(t);return fR(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return oE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function L$(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new L(4008,!1)}var Of=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Xt(null);get href(){return je(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Pe;applicationErrorHandler=P(Zt);options=P(oa,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(P(new $h("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Hn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Ci(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Ci(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)($(sa),$(xr),Jc("tabindex"),$(vn),$(Ct),$(Ws))};static \u0275dir=he({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Vn("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Ii("href",i.reactiveHref(),Rv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",wi],skipLocationChange:[2,"skipLocationChange","skipLocationChange",wi],replaceUrl:[2,"replaceUrl","replaceUrl",wi],routerLink:"routerLink"},features:[yn]})}return n})(),j$=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ve;link=P(Of,{optional:!0});constructor(t,r,i,o){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=t.events.subscribe(s=>{s instanceof Hn&&this.update()})}ngAfterContentInit(){re(this.links.changes,re(null)).pipe(Es()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Te(t).pipe(Es()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=U$(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)($(sa),$(Ct),$(vn),$(ar))};static \u0275dir=he({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Uh(o,Of,5),r&2){let s;o_(s=s_())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[yn]})}return n})();function U$(n){return!!n.paths}var B$=new B("");function $$(n,...e){return Rn([{provide:Mu,multi:!0,useValue:n},[],{provide:xr,useFactory:H$},{provide:Vh,multi:!0,useFactory:q$},e.map(t=>t.\u0275providers)])}function H$(){return P(sa).routerState.root}function q$(){let n=P(qe);return e=>{let t=n.get(Ei);if(e!==t.components[0])return;let r=n.get(sa),i=n.get(z$);n.get(G$)===1&&r.initialNavigation(),n.get(W$,null,{optional:!0})?.setUpPreloading(),n.get(B$,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var z$=new B("",{factory:()=>new Pe}),G$=new B("",{factory:()=>1});var W$=new B("");var lN=()=>{};var fN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},K$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ff={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,d=o>>2,f=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;c||(y=64,s||(g=64)),r.push(t[d],t[f],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(fN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):K$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let f=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||f==null)throw new aE;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),f!==64){let D=l<<6&192|f;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},aE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Q$=function(n){let e=fN(n);return Ff.encodeByteArray(e,!0)},xu=function(n){return Q$(n).replace(/\./g,"")},Lf=function(n){try{return Ff.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Y$=()=>uE().__FIREBASE_DEFAULTS__,J$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Z$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Lf(n[1]);return e&&JSON.parse(e)},Vf=()=>{try{return lN()||Y$()||J$()||Z$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lE=n=>Vf()?.emulatorHosts?.[n],pN=n=>{let e=lE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},dE=()=>Vf()?.config,hE=n=>Vf()?.[`_${n}`];var Lo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Si(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jf(n){return(await fetch(n,{credentials:"include"})).ok}function gN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=R({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xu(JSON.stringify(t)),xu(JSON.stringify(s)),""].join(".")}var Pu={};function X$(){let n={prod:[],emulator:[]};for(let e of Object.keys(Pu))Pu[e]?n.emulator.push(e):n.prod.push(e);return n}function eH(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var dN=!1;function Uf(n,e){if(typeof window>"u"||typeof document>"u"||!Si(window.location.host)||Pu[n]===e||Pu[n]||dN)return;Pu[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=X$().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{dN=!0,s()},g}function d(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){let g=eH(r),y=t("text"),D=document.getElementById(y)||document.createElement("span"),N=t("learnmore"),A=document.getElementById(N)||document.createElement("a"),k=t("preprendIcon"),H=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let ie=g.element;a(ie),d(A,N);let Fe=l();c(H,k),ie.append(H,D,A,Fe),document.body.appendChild(ie)}o?(D.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function tH(){let n=Vf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vN(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _N(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EN(){let n=ft();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function IN(){return!tH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ku(){try{return typeof indexedDB=="object"}catch{return!1}}function wN(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var nH="FirebaseError",rn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=nH,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qn.prototype.create)}},qn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?rH(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new rn(i,a,r)}};function rH(n,e){return n.replace(iH,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var iH=/\{\$([^}]+)}/g;function DN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function lr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(hN(o)&&hN(s)){if(!lr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function hN(n){return n!==null&&typeof n=="object"}function Ou(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function aa(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ca(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function TN(n,e){let t=new cE(n,e);return t.subscribe.bind(t)}var cE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");oH(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=sE),i.error===void 0&&(i.error=sE),i.complete===void 0&&(i.complete=sE);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function oH(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function sE(){}var Sse=14400*1e3;function Ie(n){return n&&n._delegate?n._delegate:n}var Bt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Vo="[DEFAULT]";var fE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Lo;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aH(e))try{this.getOrInitializeService({instanceIdentifier:Vo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Vo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vo){return this.instances.has(e)}getOptions(e=Vo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sH(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vo){return this.component?this.component.multipleInstances?e:Vo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function sH(n){return n===Vo?void 0:n}function aH(n){return n.instantiationMode==="EAGER"}var Bf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new fE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var cH=[],ce=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ce||{}),uH={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},lH=ce.INFO,dH={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},hH=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=dH[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},dr=class{constructor(e){this.name=e,this._logLevel=lH,this._logHandler=hH,this._userLogHandler=null,cH.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var fH=(n,e)=>e.some(t=>n instanceof t),bN,CN;function pH(){return bN||(bN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gH(){return CN||(CN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var SN=new WeakMap,gE=new WeakMap,AN=new WeakMap,pE=new WeakMap,yE=new WeakMap;function mH(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(hr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&SN.set(t,n)}).catch(()=>{}),yE.set(e,n),e}function yH(n){if(gE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});gE.set(n,e)}var mE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||AN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function RN(n){mE=n(mE)}function vH(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call($f(this),e,...t);return AN.set(r,e.sort?e.sort():[e]),hr(r)}:gH().includes(n)?function(...e){return n.apply($f(this),e),hr(SN.get(this))}:function(...e){return hr(n.apply($f(this),e))}}function _H(n){return typeof n=="function"?vH(n):(n instanceof IDBTransaction&&yH(n),fH(n,pH())?new Proxy(n,mE):n)}function hr(n){if(n instanceof IDBRequest)return mH(n);if(pE.has(n))return pE.get(n);let e=_H(n);return e!==n&&(pE.set(n,e),yE.set(e,n)),e}var $f=n=>yE.get(n);function MN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=hr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(hr(s.result),c.oldVersion,c.newVersion,hr(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var EH=["get","getKey","getAll","getAllKeys","count"],IH=["put","add","delete","clear"],vE=new Map;function NN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(vE.get(e))return vE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=IH.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||EH.includes(t)))return;let o=async function(s,...a){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&c.done]))[0]};return vE.set(e,o),o}RN(n=>U(R({},n),{get:(e,t,r)=>NN(e,t)||n.get(e,t,r),has:(e,t)=>!!NN(e,t)||n.has(e,t)}));var EE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(wH(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function wH(n){return n.getComponent()?.type==="VERSION"}var IE="@firebase/app",PN="0.14.6";var kr=new dr("@firebase/app"),DH="@firebase/app-compat",TH="@firebase/analytics-compat",bH="@firebase/analytics",CH="@firebase/app-check-compat",SH="@firebase/app-check",AH="@firebase/auth",RH="@firebase/auth-compat",NH="@firebase/database",MH="@firebase/data-connect",PH="@firebase/database-compat",xH="@firebase/functions",kH="@firebase/functions-compat",OH="@firebase/installations",FH="@firebase/installations-compat",LH="@firebase/messaging",VH="@firebase/messaging-compat",jH="@firebase/performance",UH="@firebase/performance-compat",BH="@firebase/remote-config",$H="@firebase/remote-config-compat",HH="@firebase/storage",qH="@firebase/storage-compat",zH="@firebase/firestore",GH="@firebase/ai",WH="@firebase/firestore-compat",KH="firebase",QH="12.6.0";var wE="[DEFAULT]",YH={[IE]:"fire-core",[DH]:"fire-core-compat",[bH]:"fire-analytics",[TH]:"fire-analytics-compat",[SH]:"fire-app-check",[CH]:"fire-app-check-compat",[AH]:"fire-auth",[RH]:"fire-auth-compat",[NH]:"fire-rtdb",[MH]:"fire-data-connect",[PH]:"fire-rtdb-compat",[xH]:"fire-fn",[kH]:"fire-fn-compat",[OH]:"fire-iid",[FH]:"fire-iid-compat",[LH]:"fire-fcm",[VH]:"fire-fcm-compat",[jH]:"fire-perf",[UH]:"fire-perf-compat",[BH]:"fire-rc",[$H]:"fire-rc-compat",[HH]:"fire-gcs",[qH]:"fire-gcs-compat",[zH]:"fire-fst",[WH]:"fire-fst-compat",[GH]:"fire-vertex","fire-js":"fire-js",[KH]:"fire-js-all"};var Fu=new Map,JH=new Map,DE=new Map;function xN(n,e){try{n.container.addComponent(e)}catch(t){kr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zn(n){let e=n.name;if(DE.has(e))return kr.debug(`There were multiple attempts to register component ${e}.`),!1;DE.set(e,n);for(let t of Fu.values())xN(t,n);for(let t of JH.values())xN(t,n);return!0}function ua(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Kt(n){return n==null?!1:n.settings!==void 0}var ZH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new qn("app","Firebase",ZH);var TE=class{constructor(e,t,r){this._isDeleted=!1,this._options=R({},e),this._config=R({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}};var Ri=QH;function SE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=R({name:wE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ai.create("bad-app-name",{appName:String(i)});if(t||(t=dE()),!t)throw Ai.create("no-options");let o=Fu.get(i);if(o){if(lr(t,o.options)&&lr(r,o.config))return o;throw Ai.create("duplicate-app",{appName:i})}let s=new Bf(i);for(let c of DE.values())s.addComponent(c);let a=new TE(t,r,s);return Fu.set(i,a),a}function jo(n=wE){let e=Fu.get(n);if(!e&&n===wE&&dE())return SE();if(!e)throw Ai.create("no-app",{appName:n});return e}function Hf(){return Array.from(Fu.values())}function Ue(n,e,t){let r=YH[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kr.warn(s.join(" "));return}zn(new Bt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var XH="firebase-heartbeat-database",eq=1,Lu="firebase-heartbeat-store",_E=null;function LN(){return _E||(_E=MN(XH,eq,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Lu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ai.create("idb-open",{originalErrorMessage:n.message})})),_E}async function tq(n){try{let t=(await LN()).transaction(Lu),r=await t.objectStore(Lu).get(VN(n));return await t.done,r}catch(e){if(e instanceof rn)kr.warn(e.message);else{let t=Ai.create("idb-get",{originalErrorMessage:e?.message});kr.warn(t.message)}}}async function kN(n,e){try{let r=(await LN()).transaction(Lu,"readwrite");await r.objectStore(Lu).put(e,VN(n)),await r.done}catch(t){if(t instanceof rn)kr.warn(t.message);else{let r=Ai.create("idb-set",{originalErrorMessage:t?.message});kr.warn(r.message)}}}function VN(n){return`${n.name}!${n.options.appId}`}var nq=1024,rq=30,bE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new CE(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ON();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>rq){let i=oq(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){kr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=ON(),{heartbeatsToSend:t,unsentEntries:r}=iq(this._heartbeatsCache.heartbeats),i=xu(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return kr.warn(e),""}}};function ON(){return new Date().toISOString().substring(0,10)}function iq(n,e=nq){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),FN(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),FN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var CE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ku()?wN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await tq(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return kN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return kN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function FN(n){return xu(JSON.stringify({version:2,heartbeats:n})).length}function oq(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function sq(n){zn(new Bt("platform-logger",e=>new EE(e),"PRIVATE")),zn(new Bt("heartbeat",e=>new bE(e),"PRIVATE")),Ue(IE,PN,n),Ue(IE,PN,"esm2020"),Ue("fire-js","")}sq("");var aq="firebase",cq="12.7.0";Ue(aq,cq,"app");function jN(n){n===void 0&&(n=P(qe));let e=n.get(ks);return t=>new ne(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Ni=new si("ANGULARFIRE2_VERSION");function Vu(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var da=(n,e)=>{let t=e?[e]:Hf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},la=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(la||{}),UN=y_()&&typeof Zone<"u"?la.WARN:la.SILENT;var qf=class{zone;delegate;constructor(e,t=Nm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Mi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=P(xe);this.outsideAngular=t.runOutsideAngular(()=>new qf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new qf(typeof Zone>"u"?void 0:Zone.current,vc))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),BN=!1;function uq(n,e){!BN&&(UN>la.SILENT||y_())&&(BN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),UN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function lq(n){let e=P(xe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Uo(n){let e=P(xe,{optional:!0});return e?e.run(()=>n()):n()}var dq=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),ot(t,()=>Uo(()=>n.apply(void 0,r)))),be=(n,e,t)=>(t||=e?la.WARN:la.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=P(Mi),s=P(ks),a=P(Ke)}catch{return uq(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Uo(()=>s.add())),i[l]=dq(i[l],r,a));let c=lq(()=>n.apply(this,i));return e?c instanceof ne?c.pipe(oi(o.outsideAngular),ii(o.insideAngular),jN(a)):c instanceof Promise?Uo(()=>{let l=s.add();return new Promise((d,f)=>{c.then(g=>ot(a,()=>Uo(()=>d(g))),g=>ot(a,()=>Uo(()=>f(g)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Uo(()=>c):c instanceof ne?c.pipe(oi(o.outsideAngular),ii(o.insideAngular)):Uo(()=>c)});var Or=class{constructor(e){return e}},Bo=class{constructor(){return Hf()}};function hq(n){return n&&n.length===1?n[0]:new Or(jo())}var AE=new B("angularfire2._apps"),fq={provide:Or,useFactory:hq,deps:[[new en,AE]]},pq={provide:Bo,deps:[[new en,AE]]};function gq(n){return(e,t)=>{let r=t.get(Ao);Ue("angularfire",Ni.full,"core"),Ue("angularfire",Ni.full,"app"),Ue("angular",Xm.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Or(i)}}function Eae(n,...e){return Rn([fq,pq,{provide:AE,useFactory:gq(n),multi:!0,deps:[xe,qe,Mi,...e]}])}var Iae=be(SE,!0);var mq=new Map,yq={activated:!1,tokenObservers:[]},vq={initialized:!1,enabled:!1};function Gn(n){return mq.get(n)||R({},yq)}function zN(){return vq}var _q="https://content-firebaseappcheck.googleapis.com/v1";var Eq="exchangeDebugToken",$N={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Nae=1440*60*1e3;var ME=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Lo,this.pending.promise.catch(t=>{}),await Iq(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Lo,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Iq(n){return new Promise(e=>{setTimeout(e,n)})}var wq={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Pi=new qn("appCheck","AppCheck",wq);function GN(n){if(!Gn(n).activated)throw Pi.create("use-before-activation",{appName:n.name})}async function WN({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(n,o)}catch(f){throw Pi.create("fetch-network-error",{originalErrorMessage:f?.message})}if(s.status!==200)throw Pi.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(f){throw Pi.create("fetch-parse-error",{originalErrorMessage:f?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Pi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(c[1])*1e3,d=Date.now();return{token:a.token,expireTimeMillis:d+l,issuedAtTimeMillis:d}}function KN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${_q}/projects/${t}/apps/${r}:${Eq}?key=${i}`,body:{debug_token:e}}}var Dq="firebase-app-check-database",Tq=1,PE="firebase-app-check-store";var zf=null;function bq(){return zf||(zf=new Promise((n,e)=>{try{let t=indexedDB.open(Dq,Tq);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{e(Pi.create("storage-open",{originalErrorMessage:r.target.error?.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(PE,{keyPath:"compositeKey"})}}}catch(t){e(Pi.create("storage-open",{originalErrorMessage:t?.message}))}}),zf)}function Cq(n,e){return Sq(Aq(n),e)}async function Sq(n,e){let r=(await bq()).transaction(PE,"readwrite"),o=r.objectStore(PE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{a(Pi.create("storage-set",{originalErrorMessage:c.target.error?.message}))}})}function Aq(n){return`${n.options.appId}-${n.name}`}var ju=new dr("@firebase/app-check");function RE(n,e){return ku()?Cq(n,e).catch(t=>{ju.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function QN(){return zN().enabled}async function YN(){let n=zN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Rq={error:"UNKNOWN_ERROR"};function Nq(n){return Ff.encodeString(JSON.stringify(n),!1)}async function xE(n,e=!1,t=!1){let r=n.app;GN(r);let i=Gn(r),o=i.token,s;if(o&&!Uu(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(Uu(l)?o=l:await RE(r,void 0))}if(!e&&o&&Uu(o))return{token:o.token};let a=!1;if(QN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=WN(KN(r,await YN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await RE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?ju.warn(l.message):t&&ju.error(l),NE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await Gn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?ju.warn(l.message):t&&ju.error(l),s=l}let c;return o?s?Uu(o)?c={token:o.token,internalError:s}:c=NE(s):(c={token:o.token},i.token=o,await RE(r,o)):c=NE(s),a&&kq(r,c),c}async function Mq(n){let e=n.app;GN(e);let{provider:t}=Gn(e);if(QN()){let r=await YN(),{token:i}=await WN(KN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function Pq(n,e,t,r){let{app:i}=n,o=Gn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Uu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),HN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>HN(n))}function JN(n,e){let t=Gn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function HN(n){let{app:e}=n,t=Gn(e),r=t.tokenRefresher;r||(r=xq(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function xq(n){let{app:e}=n;return new ME(async()=>{let t=Gn(e),r;if(t.token?r=await xE(n,!0):r=await xE(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=Gn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},$N.RETRIAL_MIN_WAIT,$N.RETRIAL_MAX_WAIT)}function kq(n,e){let t=Gn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Uu(n){return n.expireTimeMillis-Date.now()>0}function NE(n){return{token:Nq(Rq),error:n}}var kE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Gn(this.app);for(let t of e)JN(this.app,t.next);return Promise.resolve()}};function Oq(n,e){return new kE(n,e)}function Fq(n){return{getToken:e=>xE(n,e),getLimitedUseToken:()=>Mq(n),addTokenListener:e=>Pq(n,"INTERNAL",e),removeTokenListener:e=>JN(n.app,e)}}var Lq="@firebase/app-check",Vq="0.11.0";var jq="app-check",qN="app-check-internal";function Uq(){zn(new Bt(jq,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Oq(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qN).initialize()})),zn(new Bt(qN,n=>{let e=n.getProvider("app-check").getImmediate();return Fq(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ue(Lq,Vq)}Uq();var Bq="app-check";var ha=class{constructor(){return da(Bq)}};var $q=["localhost","0.0.0.0","127.0.0.1"],Hae=typeof window<"u"&&$q.includes(window.location.hostname);function fM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var pM=fM,gM=new qn("auth","Firebase",fM());var Jf=new dr("@firebase/auth");function Hq(n,...e){Jf.logLevel<=ce.WARN&&Jf.warn(`Auth (${Ri}): ${n}`,...e)}function Wf(n,...e){Jf.logLevel<=ce.ERROR&&Jf.error(`Auth (${Ri}): ${n}`,...e)}function pr(n,...e){throw oI(n,...e)}function $o(n,...e){return oI(n,...e)}function mM(n,e,t){let r=U(R({},pM()),{[e]:t});return new qn("auth","Firebase",r).create(e,{appName:n.name})}function Vr(n){return mM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return gM.create(n,...e)}function G(n,e,...t){if(!n)throw oI(e,...t)}function Fr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Wf(e),new Error(e)}function Oi(n,e){n||Fr(e)}function VE(){return typeof self<"u"&&self.location?.href||""}function qq(){return ZN()==="http:"||ZN()==="https:"}function ZN(){return typeof self<"u"&&self.location?.protocol||null}function zq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qq()||vN()||"connection"in navigator)?navigator.onLine:!0}function Gq(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ho=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Oi(t>e,"Short delay should be less than long delay!"),this.isMobile=mN()||_N()}get(){return zq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function sI(n,e){Oi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Zf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Wq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Kq=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Qq=new Ho(3e4,6e4);function jr(n,e){return n.tenantId&&!e.tenantId?U(R({},e),{tenantId:n.tenantId}):e}async function gr(n,e,t,r,i={}){return yM(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Ou(R({key:n.config.apiKey},s)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=R({method:e,headers:c},o);return yN()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Si(n.emulatorConfig.host)&&(l.credentials="include"),Zf.fetch()(await vM(n,n.config.apiHost,t,a),l)})}async function yM(n,e,t){n._canInitEmulator=!1;let r=R(R({},Wq),e);try{let i=new jE(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Gf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gf(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Gf(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Gf(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw mM(n,d,l);pr(n,d)}}catch(i){if(i instanceof rn)throw i;pr(n,"network-request-failed",{message:String(i)})}}async function Ku(n,e,t,r,i={}){let o=await gr(n,e,t,r,i);return"mfaPendingCredential"in o&&pr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function vM(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?sI(n.config,i):`${n.config.apiScheme}://${i}`;return Kq.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function Yq(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var jE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r($o(this.auth,"network-request-failed")),Qq.get())})}};function Gf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=$o(n,e,r);return i.customData._tokenResponse=t,i}function XN(n){return n!==void 0&&n.enterprise!==void 0}var UE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Yq(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function Jq(n,e){return gr(n,"GET","/v2/recaptchaConfig",jr(n,e))}async function Zq(n,e){return gr(n,"POST","/v1/accounts:delete",e)}async function Xf(n,e){return gr(n,"POST","/v1/accounts:lookup",e)}function $u(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aI(n,e=!1){let t=Ie(n),r=await t.getIdToken(e),i=cI(r);G(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:$u(OE(i.auth_time)),issuedAtTime:$u(OE(i.iat)),expirationTime:$u(OE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function OE(n){return Number(n)*1e3}function cI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Wf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Lf(t);return i?JSON.parse(i):(Wf("Failed to decode base64 JWT payload"),null)}catch(i){return Wf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function eM(n){let e=cI(n);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function fa(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof rn&&Xq(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Xq({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var BE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var qu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$u(this.lastLoginAt),this.creationTime=$u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function ep(n){let e=n.auth,t=await n.getIdToken(),r=await fa(n,Xf(e,{idToken:t}));G(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?_M(i.providerUserInfo):[],s=ez(n.providerData,o),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,l=a?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new qu(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,d)}async function uI(n){let e=Ie(n);await ep(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ez(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function _M(n){return n.map(r=>{var i=r,{providerId:e}=i,t=um(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function tz(n,e){let t=await yM(n,{},async()=>{let r=Ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await vM(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Si(n.emulatorConfig.host)&&(c.credentials="include"),Zf.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nz(n,e){return gr(n,"POST","/v2/accounts:revokeToken",jr(n,e))}var Hu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){G(e.length!==0,"internal-error");let t=eM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await tz(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(G(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(G(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(G(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Fr("not implemented")}};function xi(n,e){G(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ki=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=um(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qu(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await fa(this,this.stsTokenManager.getToken(this.auth,e));return G(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return aI(this,e)}reload(){return uI(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>R({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(U(R({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ep(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kt(this.auth.app))return Promise.reject(Vr(this.auth));let e=await this.getIdToken();return await fa(this,Zq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return U(R({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>R({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,l=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:f,emailVerified:g,isAnonymous:y,providerData:D,stsTokenManager:N}=t;G(f&&N,e,"internal-error");let A=Hu.fromJSON(this.name,N);G(typeof f=="string",e,"internal-error"),xi(r,e.name),xi(i,e.name),G(typeof g=="boolean",e,"internal-error"),G(typeof y=="boolean",e,"internal-error"),xi(o,e.name),xi(s,e.name),xi(a,e.name),xi(c,e.name),xi(l,e.name),xi(d,e.name);let k=new n({uid:f,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:A,createdAt:l,lastLoginAt:d});return D&&Array.isArray(D)&&(k.providerData=D.map(H=>R({},H))),c&&(k._redirectEventId=c),k}static async _fromIdTokenResponse(e,t,r=!1){let i=new Hu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ep(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];G(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?_M(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Hu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new qu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c}};var tM=new Map;function Lr(n){Oi(n instanceof Function,"Expected a class definition");let e=tM.get(n);return e?(Oi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tM.set(n,e),e)}var rz=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),$E=rz;function Kf(n,e,t){return`firebase:${n}:${e}:${t}`}var tp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Kf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Kf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Xf(this.auth,{idToken:e}).catch(()=>{});return t?ki._fromGetAccountInfoResponse(this.auth,t,e):null}return ki._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Lr($E),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Lr($E),s=Kf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let d=await l._get(s);if(d){let f;if(typeof d=="string"){let g=await Xf(e,{idToken:d}).catch(()=>{});if(!g)break;f=await ki._fromGetAccountInfoResponse(e,g,d)}else f=ki._fromJSON(e,d);l!==o&&(a=f),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new n(o,e,r))}};function nM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bM(e))return"Blackberry";if(CM(e))return"Webos";if(IM(e))return"Safari";if((e.includes("chrome/")||wM(e))&&!e.includes("edge/"))return"Chrome";if(TM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function EM(n=ft()){return/firefox\//i.test(n)}function IM(n=ft()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wM(n=ft()){return/crios\//i.test(n)}function DM(n=ft()){return/iemobile/i.test(n)}function TM(n=ft()){return/android/i.test(n)}function bM(n=ft()){return/blackberry/i.test(n)}function CM(n=ft()){return/webos/i.test(n)}function lI(n=ft()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function iz(n=ft()){return lI(n)&&!!window.navigator?.standalone}function oz(){return EN()&&document.documentMode===10}function SM(n=ft()){return lI(n)||TM(n)||CM(n)||bM(n)||/windows phone/i.test(n)||DM(n)}function AM(n,e=[]){let t;switch(n){case"Browser":t=nM(ft());break;case"Worker":t=`${nM(ft())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ri}/${r}`}var HE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function sz(n,e={}){return gr(n,"GET","/v2/passwordPolicy",jr(n,e))}var az=6,qE=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??az,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var zE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new np(this),this.idTokenSubscription=new np(this),this.beforeStateQueue=new HE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await tp.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Xf(this,{idToken:e}),r=await ki._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Kt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ep(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Gq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kt(this.app))return Promise.reject(Vr(this));let t=e?Ie(e):null;return t&&G(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kt(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kt(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await sz(this),t=new qE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await nz(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Lr(e)||this._popupRedirectResolver;G(t,this,"argument-error"),this.redirectPersistenceManager=await tp.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Hq(`Error while retrieving App Check token: ${e.error}`),e?.token}};function zo(n){return Ie(n)}var np=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=TN(t=>this.observer=t)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var up={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cz(n){up=n}function RM(n){return up.loadJS(n)}function uz(){return up.recaptchaEnterpriseScript}function lz(){return up.gapiScript}function NM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var GE=class{constructor(){this.enterprise=new WE}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},WE=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var dz="recaptcha-enterprise",MM="NO_RECAPTCHA",KE=class{constructor(e){this.type=dz,this.auth=zo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{Jq(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new UE(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})})}function i(o,s,a){let c=window.grecaptcha;XN(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(MM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GE().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&XN(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=uz();c.length!==0&&(c+=a),RM(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})}};async function Bu(n,e,t,r=!1,i=!1){let o=new KE(n),s;if(i)s=MM;else try{s=await o.verify(t)}catch{s=await o.verify(t,!0)}let a=R({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function QE(n,e,t,r,i){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=await Bu(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=await Bu(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)});else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=await Bu(n,e,t);return r(n,o).catch(async s=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let a=await Bu(n,e,t,!1,!0);return r(n,a)}return Promise.reject(s)})}else{let o=await Bu(n,e,t,!1,!0);return r(n,o)}else return Promise.reject(i+" provider is not supported.")}function dI(n,e){let t=ua(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(lr(o,e??{}))return i;pr(i,"already-initialized")}return t.initialize({options:e})}function hz(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Lr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function hI(n,e,t){let r=zo(n);G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=PM(e),{host:s,port:a}=fz(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){G(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),G(lr(l,r.config.emulator)&&lr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Si(s)?(jf(`${o}//${s}${c}`),Uf("Auth",!0)):i||pz()}function PM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function fz(n){let e=PM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:rM(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:rM(s)}}}function rM(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function pz(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var zu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,t){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}};async function gz(n,e){return gr(n,"POST","/v1/accounts:update",e)}async function mz(n,e){return gr(n,"POST","/v1/accounts:signUp",e)}async function yz(n,e){return Ku(n,"POST","/v1/accounts:signInWithPassword",jr(n,e))}async function vz(n,e){return gr(n,"POST","/v1/accounts:sendOobCode",jr(n,e))}async function _z(n,e){return vz(n,e)}async function Ez(n,e){return Ku(n,"POST","/v1/accounts:signInWithEmailLink",jr(n,e))}async function Iz(n,e){return Ku(n,"POST","/v1/accounts:signInWithEmailLink",jr(n,e))}var Gu=class n extends zu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return QE(e,t,"signInWithPassword",yz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Ez(e,{email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return QE(e,r,"signUpPassword",mz,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Iz(e,{idToken:t,email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function FE(n,e){return Ku(n,"POST","/v1/accounts:signInWithIdp",jr(n,e))}function wz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Dz(n){let e=aa(ca(n)).link,t=e?aa(ca(e)).deep_link_id:null,r=aa(ca(n)).deep_link_id;return(r?aa(ca(r)).link:null)||r||t||e||n}var rp=class n{constructor(e){let t=aa(ca(e)),r=t.apiKey??null,i=t.oobCode??null,o=wz(t.mode??null);G(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t=Dz(e);try{return new n(t)}catch{return null}}};var lp=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Gu._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=rp.parseLink(r);return G(i,"argument-error"),Gu._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),ip=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var YE=class extends ip{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function Tz(n,e){return Ku(n,"POST","/v1/accounts:signUp",jr(n,e))}var pa=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await ki._fromIdTokenResponse(e,r,i),s=iM(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=iM(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function iM(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var JE=class n extends rn{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function xM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?JE._fromErrorAndOperation(n,o,e,r):o})}async function bz(n,e,t=!1){let r=await fa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return pa._forOperation(n,"link",r)}async function kM(n,e,t=!1){let{auth:r}=n;if(Kt(r.app))return Promise.reject(Vr(r));let i="reauthenticate";try{let o=await fa(n,xM(r,i,e,n),t);G(o.idToken,r,"internal-error");let s=cI(o.idToken);G(s,r,"internal-error");let{sub:a}=s;return G(n.uid===a,r,"user-mismatch"),pa._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&pr(r,"user-mismatch"),o}}async function OM(n,e,t=!1){if(Kt(n.app))return Promise.reject(Vr(n));let r="signIn",i=await xM(n,r,e),o=await pa._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function fI(n,e){return OM(zo(n),e)}async function dp(n,e){return kM(Ie(n),e)}function Cz(n,e,t){G(t.url?.length>0,n,"invalid-continue-uri"),G(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),G(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(G(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(G(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function FM(n){let e=zo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pI(n,e,t){if(Kt(n.app))return Promise.reject(Vr(n));let r=zo(n),s=await QE(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Tz,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&FM(n),c}),a=await pa._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function gI(n,e,t){return Kt(n.app)?Promise.reject(Vr(n)):fI(Ie(n),lp.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&FM(n),r})}async function hp(n,e,t){let r=Ie(n),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Cz(r.auth,o,t);let{email:s}=await _z(r.auth,o);s!==n.email&&await n.reload()}function fp(n,e){return Sz(Ie(n),null,e)}async function Sz(n,e,t){let{auth:r}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);let s=await fa(n,gz(r,o));await n._updateTokensIfNecessary(s,!0)}function pp(n,e,t,r){return Ie(n).onIdTokenChanged(e,t,r)}function mI(n,e,t){return Ie(n).beforeAuthStateChanged(e,t)}function gp(n,e,t,r){return Ie(n).onAuthStateChanged(e,t,r)}function yI(n){return Ie(n).signOut()}var op="__sak";var sp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(op,"1"),this.storage.removeItem(op),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Az=1e3,Rz=10,Nz=(()=>{class n extends sp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);oz()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Rz):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},Az)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),LM=Nz;var Mz=(()=>{class n extends sp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),vI=Mz;function Pz(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var xz=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(async d=>d(r.origin,s)),l=await Pz(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function VM(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var ZE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=VM("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function fr(){return window}function kz(n){fr().location.href=n}function jM(){return typeof fr().WorkerGlobalScope<"u"&&typeof fr().importScripts=="function"}async function Oz(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Fz(){return navigator?.serviceWorker?.controller||null}function Lz(){return jM()?self:null}var UM="firebaseLocalStorageDb",Vz=1,ap="firebaseLocalStorage",BM="fbase_key",qo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function mp(n,e){return n.transaction([ap],e?"readwrite":"readonly").objectStore(ap)}function jz(){let n=indexedDB.deleteDatabase(UM);return new qo(n).toPromise()}function XE(){let n=indexedDB.open(UM,Vz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(ap,{keyPath:BM})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(ap)?e(r):(r.close(),await jz(),e(await XE()))})})}async function oM(n,e,t){let r=mp(n,!0).put({[BM]:e,value:t});return new qo(r).toPromise()}async function Uz(n,e){let t=mp(n,!1).get(e),r=await new qo(t).toPromise();return r===void 0?null:r.value}function sM(n,e){let t=mp(n,!0).delete(e);return new qo(t).toPromise()}var Bz=800,$z=3,Hz=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await XE(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>$z)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xz._getInstance(Lz()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Oz(),!this.activeServiceWorker)return;this.sender=new ZE(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||Fz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await XE();return await oM(t,op,"1"),await sM(t,op),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>oM(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>Uz(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>sM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=mp(o,!1).getAll();return new qo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Bz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),$M=Hz;var Yae=NM("rcb"),Jae=new Ho(3e4,6e4);function qz(n,e){return e?Lr(e):(G(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Wu=class extends zu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return FE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return FE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return FE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function zz(n){return OM(n.auth,new Wu(n),n.bypassAuthState)}function Gz(n){let{auth:e,user:t}=n;return G(t,e,"internal-error"),kM(t,new Wu(n),n.bypassAuthState)}async function Wz(n){let{auth:e,user:t}=n;return G(t,e,"internal-error"),bz(t,new Wu(n),n.bypassAuthState)}var eI=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zz;case"linkViaPopup":case"linkViaRedirect":return Wz;case"reauthViaPopup":case"reauthViaRedirect":return Gz;default:pr(this.auth,"internal-error")}}resolve(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Zae=new Ho(2e3,1e4);var Kz="pendingRedirect",Qf=new Map,tI=class extends eI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Qf.get(this.auth._key());if(!e){try{let r=await Qz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Qf.set(this.auth._key(),e)}return this.bypassAuthState||Qf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Qz(n,e){let t=Zz(e),r=Jz(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function Yz(n,e){Qf.set(n._key(),e)}function Jz(n){return Lr(n._redirectPersistence)}function Zz(n){return Kf(Kz,n.config.apiKey,n.name)}async function Xz(n,e,t=!1){if(Kt(n.app))return Promise.reject(Vr(n));let r=zo(n),i=qz(r,e),s=await new tI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var e4=600*1e3,nI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!t4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!HM(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError($o(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=e4&&this.cachedEventUids.clear(),this.cachedEventUids.has(aM(e))}saveEventToCache(e){this.cachedEventUids.add(aM(e)),this.lastProcessedEventTime=Date.now()}};function aM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function HM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function t4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HM(n);default:return!1}}async function n4(n,e={}){return gr(n,"GET","/v1/projects",e)}var r4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i4=/^https?/;async function o4(n){if(n.config.emulator)return;let{authorizedDomains:e}=await n4(n);for(let t of e)try{if(s4(t))return}catch{}pr(n,"unauthorized-domain")}function s4(n){let e=VE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!i4.test(t))return!1;if(r4.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var a4=new Ho(3e4,6e4);function cM(){let n=fr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function c4(n){return new Promise((e,t)=>{function r(){cM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cM(),t($o(n,"network-request-failed"))},timeout:a4.get()})}if(fr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fr().gapi?.load)r();else{let i=NM("iframefcb");return fr()[i]=()=>{gapi.load?r():t($o(n,"network-request-failed"))},RM(`${lz()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Yf=null,e})}var Yf=null;function u4(n){return Yf=Yf||c4(n),Yf}var l4=new Ho(5e3,15e3),d4="__/auth/iframe",h4="emulator/auth/iframe",f4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function g4(n){let e=n.config;G(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?sI(e,h4):`https://${n.config.authDomain}/${d4}`,r={apiKey:e.apiKey,appName:n.name,v:Ri},i=p4.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Ou(r).slice(1)}`}async function m4(n){let e=await u4(n),t=fr().gapi;return G(t,n,"internal-error"),e.open({where:document.body,url:g4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:f4,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=$o(n,"network-request-failed"),a=fr().setTimeout(()=>{o(s)},l4.get());function c(){fr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})}))}var y4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},v4=500,_4=600,E4="_blank",I4="http://localhost",cp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function w4(n,e,t,r=v4,i=_4){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=U(R({},y4),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ft().toLowerCase();t&&(a=wM(l)?E4:t),EM(l)&&(e=e||I4,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[y,D])=>`${g}${y}=${D},`,"");if(iz(l)&&a!=="_self")return D4(e||"",a),new cp(null);let f=window.open(e||"",a,d);G(f,n,"popup-blocked");try{f.focus()}catch{}return new cp(f)}function D4(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var T4="__/auth/handler",b4="emulator/auth/handler",C4=encodeURIComponent("fac");async function uM(n,e,t,r,i,o){G(n.config.authDomain,n,"auth-domain-config-required"),G(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ri,eventId:i};if(e instanceof ip){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",DN(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(o||{}))s[d]=f}if(e instanceof YE){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=await n._getAppCheckToken(),l=c?`#${C4}=${encodeURIComponent(c)}`:"";return`${S4(n)}?${Ou(a).slice(1)}${l}`}function S4({config:n}){return n.emulator?sI(n,b4):`https://${n.authDomain}/${T4}`}var LE="webStorageSupport",rI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vI,this._completeRedirectFn=Xz,this._overrideRedirectResult=Yz}async _openPopup(e,t,r,i){Oi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await uM(e,t,r,VE(),i);return w4(e,o,VM())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await uM(e,t,r,VE(),i);return kz(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Oi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await m4(e),r=new nI(e);return t.register("authEvent",i=>(G(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(LE,{type:LE},i=>{let o=i?.[0]?.[LE];o!==void 0&&t(!!o),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=o4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return SM()||IM()||lI()}},qM=rI;var lM="@firebase/auth",dM="1.12.0";var iI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function A4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function R4(n){zn(new Bt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;G(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AM(n)},l=new zE(r,i,o,c);return hz(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),zn(new Bt("auth-internal",e=>{let t=zo(e.getProvider("auth").getImmediate());return(r=>new iI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(lM,dM,A4(n)),Ue(lM,dM,"esm2020")}var N4=300,M4=hE("authIdTokenMaxAge")||N4,hM=null,P4=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>M4)return;let i=t?.token;hM!==i&&(hM=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _I(n=jo()){let e=ua(n,"auth");if(e.isInitialized())return e.getImmediate();let t=dI(n,{popupRedirectResolver:qM,persistence:[$M,LM,vI]}),r=hE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=P4(o.toString());mI(t,s,()=>s(t.currentUser)),pp(t,a=>s(a))}}let i=lE("auth");return i&&hI(t,`http://${i}`),t}function x4(){return document.getElementsByTagName("head")?.[0]??document}cz({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=$o("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",x4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});R4("Browser");function GM(n){return new ne(function(e){var t=gp(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var WM="auth",Go=class{constructor(e){return e}},Qu=class{constructor(){return da(WM)}};var EI=new B("angularfire2.auth-instances");function yG(n,e){let t=Vu(WM,n,e);return t&&new Go(t)}function vG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Go(r)}}var _G={provide:Qu,deps:[[new en,EI]]},EG={provide:Go,useFactory:yG,deps:[[new en,EI],Or]};function qce(n,...e){return Ue("angularfire",Ni.full,"auth"),Rn([EG,_G,{provide:EI,useFactory:vG(n),multi:!0,deps:[xe,qe,Mi,Bo,[new en,ha],...e]}])}var KM=be(GM,!0);var QM=be(pI,!0,2);var zce=be(_I,!0);var YM=be(gI,!0,2);var JM=be(yI,!0,2);var ZM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XM={};var Ur,II;(function(){var n;function e(w,v){function E(){}E.prototype=v.prototype,w.F=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(T,I,C){for(var _=Array(arguments.length-2),Ht=2;Ht<arguments.length;Ht++)_[Ht-2]=arguments[Ht];return v.prototype[I].apply(T,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);let T=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)T[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)T[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],I=w.g[2];let C=w.g[3],_;_=v+(C^E&(I^C))+T[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[2]+606105819&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+T[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[6]+2821735955&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+T[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[10]+4294925233&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+T[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+T[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+T[14]+2792965006&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+T[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^C&(E^I))+T[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[11]+643717713&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+T[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[15]+3634488961&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+T[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[3]+4107603335&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+T[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+T[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+T[7]+1735328473&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+T[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^C)+T[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[11]+1839030562&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+T[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[7]+4139469664&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+T[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[3]+3572445317&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+T[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+T[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+T[15]+530742520&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+T[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~C))+T[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[14]+2878612391&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+T[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[10]+4293915773&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+T[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[6]+2734768916&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+T[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+T[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+T[2]+718787259&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+T[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);let E=v-this.blockSize,T=this.C,I=this.h,C=0;for(;C<v;){if(I==0)for(;C<=E;)i(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<v;)if(T[I++]=w.charCodeAt(C++),I==this.blockSize){i(this,T),I=0;break}}else for(;C<v;)if(T[I++]=w[C++],I==this.blockSize){i(this,T),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)w[v++]=this.g[E]>>>T&255;return w};function o(w,v){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;let E=[],T=!0;for(let I=w.length-1;I>=0;I--){let C=w[I]|0;T&&C==v||(E[I]=C,T=!1)}this.g=E}var a={};function c(w){return-128<=w&&w<128?o(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return f;if(w<0)return A(l(-w));let v=[],E=1;for(let T=0;w>=E;T++)v[T]=w/E|0,E*=4294967296;return new s(v,0)}function d(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return A(d(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),T=f;for(let C=0;C<w.length;C+=8){var I=Math.min(8,w.length-C);let _=parseInt(w.substring(C,C+I),v);I<8?(I=l(Math.pow(v,I)),T=T.j(I).add(l(_))):(T=T.j(E),T=T.add(l(_)))}return T}var f=c(0),g=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(N(this))return-A(this).m();let w=0,v=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);w+=(T>=0?T:4294967296+T)*v,v*=4294967296}return w},n.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(D(this))return"0";if(N(this))return"-"+A(this).toString(w);let v=l(Math.pow(w,6));var E=this;let T="";for(;;){let I=Fe(E,v).g;E=k(E,I.j(v));let C=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,D(E))return C+T;for(;C.length<6;)C="0"+C;T=C+T}},n.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function D(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function N(w){return w.h==-1}n.l=function(w){return w=k(this,w),N(w)?-1:D(w)?0:1};function A(w){let v=w.g.length,E=[];for(let T=0;T<v;T++)E[T]=~w.g[T];return new s(E,~w.h).add(g)}n.abs=function(){return N(this)?A(this):this},n.add=function(w){let v=Math.max(this.g.length,w.g.length),E=[],T=0;for(let I=0;I<=v;I++){let C=T+(this.i(I)&65535)+(w.i(I)&65535),_=(C>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);T=_>>>16,C&=65535,_&=65535,E[I]=_<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function k(w,v){return w.add(A(v))}n.j=function(w){if(D(this)||D(w))return f;if(N(this))return N(w)?A(this).j(A(w)):A(A(this).j(w));if(N(w))return A(this.j(A(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let v=this.g.length+w.g.length,E=[];for(var T=0;T<2*v;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let I=0;I<w.g.length;I++){let C=this.i(T)>>>16,_=this.i(T)&65535,Ht=w.i(I)>>>16,Yr=w.i(I)&65535;E[2*T+2*I]+=_*Yr,H(E,2*T+2*I),E[2*T+2*I+1]+=C*Yr,H(E,2*T+2*I+1),E[2*T+2*I+1]+=_*Ht,H(E,2*T+2*I+1),E[2*T+2*I+2]+=C*Ht,H(E,2*T+2*I+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function H(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function ie(w,v){this.g=w,this.h=v}function Fe(w,v){if(D(v))throw Error("division by zero");if(D(w))return new ie(f,f);if(N(w))return v=Fe(A(w),v),new ie(A(v.g),A(v.h));if(N(v))return v=Fe(w,A(v)),new ie(A(v.g),v.h);if(w.g.length>30){if(N(w)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,T=v;T.l(w)<=0;)E=Ae(E),T=Ae(T);var I=we(E,1),C=we(T,1);for(T=we(T,2),E=we(E,2);!D(T);){var _=C.add(T);_.l(w)<=0&&(I=I.add(E),C=_),T=we(T,1),E=we(E,1)}return v=k(w,I.j(v)),new ie(I,v)}for(I=f;w.l(v)>=0;){for(E=Math.max(1,Math.floor(w.m()/v.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),C=l(E),_=C.j(v);N(_)||_.l(w)>0;)E-=T,C=l(E),_=C.j(v);D(C)&&(C=g),I=I.add(C),w=k(w,_)}return new ie(I,w)}n.B=function(w){return Fe(this,w).h},n.and=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)&w.i(T);return new s(E,this.h&w.h)},n.or=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)|w.i(T);return new s(E,this.h|w.h)},n.xor=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)^w.i(T);return new s(E,this.h^w.h)};function Ae(w){let v=w.g.length+1,E=[];for(let T=0;T<v;T++)E[T]=w.i(T)<<1|w.i(T-1)>>>31;return new s(E,w.h)}function we(w,v){let E=v>>5;v%=32;let T=w.g.length-E,I=[];for(let C=0;C<T;C++)I[C]=v>0?w.i(C+E)>>>v|w.i(C+E+1)<<32-v:w.i(C+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,II=XM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=d,Ur=XM.Integer=s}).apply(typeof ZM<"u"?ZM:typeof self<"u"?self:typeof window<"u"?window:{});var yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Br={};var wI,wG,ga,DI,Yu,vp,TI,bI,CI;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yp=="object"&&yp];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var b=u[m];if(!(b in p))break e;p=p[b]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(h){var p=[],m;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&p.push([m,h[m]]);return p}});var o=o||{},s=this||self;function a(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function c(u,h,p){return u.call.apply(u.bind,arguments)}function l(u,h,p){return l=c,l.apply(null,arguments)}function d(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function f(u,h){function p(){}p.prototype=h.prototype,u.Z=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Ob=function(m,b,S){for(var F=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)F[ae-2]=arguments[ae];return h.prototype[b].apply(m,F)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function y(u){let h=u.length;if(h>0){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function D(u,h){for(let m=1;m<arguments.length;m++){let b=arguments[m];var p=typeof b;if(p=p!="object"?p:b?Array.isArray(b)?"array":p:"null",p=="array"||p=="object"&&typeof b.length=="number"){p=u.length||0;let S=b.length||0;u.length=p+S;for(let F=0;F<S;F++)u[p+F]=b[F]}else u.push(b)}}class N{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function A(u){s.setTimeout(()=>{throw u},0)}function k(){var u=w;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class H{constructor(){this.h=this.g=null}add(h,p){let m=ie.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var ie=new N(()=>new Fe,u=>u.reset());class Fe{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,we=!1,w=new H,v=()=>{let u=Promise.resolve(void 0);Ae=()=>{u.then(E)}};function E(){for(var u;u=k();){try{u.h.call(u.g)}catch(p){A(p)}var h=ie;h.j(u),h.h<100&&(h.h++,u.next=h.g,h.g=u)}we=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};s.addEventListener("test",p,h),s.removeEventListener("test",p,h)}catch{}return u})();function _(u){return/^[\s\xa0]*$/.test(u)}function Ht(u,h){I.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,h)}f(Ht,I),Ht.prototype.init=function(u,h){let p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget,h||(p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement)),this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ht.Z.h.call(this)},Ht.prototype.h=function(){Ht.Z.h.call(this);let u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Yr="closure_listenable_"+(Math.random()*1e6|0),RO=0;function NO(u,h,p,m,b){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=b,this.key=++RO,this.da=this.fa=!1}function Pl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function xl(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function MO(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function dT(u){let h={};for(let p in u)h[p]=u[p];return h}let hT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fT(u,h){let p,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(p in m)u[p]=m[p];for(let S=0;S<hT.length;S++)p=hT[S],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function kl(u){this.src=u,this.g={},this.h=0}kl.prototype.add=function(u,h,p,m,b){let S=u.toString();u=this.g[S],u||(u=this.g[S]=[],this.h++);let F=Vg(u,h,m,b);return F>-1?(h=u[F],p||(h.fa=!1)):(h=new NO(h,this.src,S,!!m,b),h.fa=p,u.push(h)),h};function Lg(u,h){let p=h.type;if(p in u.g){var m=u.g[p],b=Array.prototype.indexOf.call(m,h,void 0),S;(S=b>=0)&&Array.prototype.splice.call(m,b,1),S&&(Pl(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Vg(u,h,p,m){for(let b=0;b<u.length;++b){let S=u[b];if(!S.da&&S.listener==h&&S.capture==!!p&&S.ha==m)return b}return-1}var jg="closure_lm_"+(Math.random()*1e6|0),Ug={};function pT(u,h,p,m,b){if(m&&m.once)return mT(u,h,p,m,b);if(Array.isArray(h)){for(let S=0;S<h.length;S++)pT(u,h[S],p,m,b);return null}return p=qg(p),u&&u[Yr]?u.J(h,p,a(m)?!!m.capture:!!m,b):gT(u,h,p,!1,m,b)}function gT(u,h,p,m,b,S){if(!h)throw Error("Invalid event type");let F=a(b)?!!b.capture:!!b,ae=$g(u);if(ae||(u[jg]=ae=new kl(u)),p=ae.add(h,p,m,F,S),p.proxy)return p;if(m=PO(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)C||(b=F),b===void 0&&(b=!1),u.addEventListener(h.toString(),m,b);else if(u.attachEvent)u.attachEvent(vT(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function PO(){function u(p){return h.call(u.src,u.listener,p)}let h=xO;return u}function mT(u,h,p,m,b){if(Array.isArray(h)){for(let S=0;S<h.length;S++)mT(u,h[S],p,m,b);return null}return p=qg(p),u&&u[Yr]?u.K(h,p,a(m)?!!m.capture:!!m,b):gT(u,h,p,!0,m,b)}function yT(u,h,p,m,b){if(Array.isArray(h))for(var S=0;S<h.length;S++)yT(u,h[S],p,m,b);else m=a(m)?!!m.capture:!!m,p=qg(p),u&&u[Yr]?(u=u.i,S=String(h).toString(),S in u.g&&(h=u.g[S],p=Vg(h,p,m,b),p>-1&&(Pl(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete u.g[S],u.h--)))):u&&(u=$g(u))&&(h=u.g[h.toString()],u=-1,h&&(u=Vg(h,p,m,b)),(p=u>-1?h[u]:null)&&Bg(p))}function Bg(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[Yr])Lg(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(vT(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=$g(h))?(Lg(p,u),p.h==0&&(p.src=null,h[jg]=null)):Pl(u)}}}function vT(u){return u in Ug?Ug[u]:Ug[u]="on"+u}function xO(u,h){if(u.da)u=!0;else{h=new Ht(h,this);let p=u.listener,m=u.ha||u.src;u.fa&&Bg(u),u=p.call(m,h)}return u}function $g(u){return u=u[jg],u instanceof kl?u:null}var Hg="__closure_events_fn_"+(Math.random()*1e9>>>0);function qg(u){return typeof u=="function"?u:(u[Hg]||(u[Hg]=function(h){return u.handleEvent(h)}),u[Hg])}function Et(){T.call(this),this.i=new kl(this),this.M=this,this.G=null}f(Et,T),Et.prototype[Yr]=!0,Et.prototype.removeEventListener=function(u,h,p,m){yT(this,u,h,p,m)};function Mt(u,h){var p,m=u.G;if(m)for(p=[];m;m=m.G)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new I(h,u);else if(h instanceof I)h.target=h.target||u;else{var b=h;h=new I(m,u),fT(h,b)}b=!0;let S,F;if(p)for(F=p.length-1;F>=0;F--)S=h.g=p[F],b=Ol(S,m,!0,h)&&b;if(S=h.g=u,b=Ol(S,m,!0,h)&&b,b=Ol(S,m,!1,h)&&b,p)for(F=0;F<p.length;F++)S=h.g=p[F],b=Ol(S,m,!1,h)&&b}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var u=this.i;for(let h in u.g){let p=u.g[h];for(let m=0;m<p.length;m++)Pl(p[m]);delete u.g[h],u.h--}}this.G=null},Et.prototype.J=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},Et.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function Ol(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();let b=!0;for(let S=0;S<h.length;++S){let F=h[S];if(F&&!F.da&&F.capture==p){let ae=F.listener,rt=F.ha||F.src;F.fa&&Lg(u.i,F),b=ae.call(rt,m)!==!1&&b}}return b&&!m.defaultPrevented}function kO(u,h){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=l(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:s.setTimeout(u,h||0)}function _T(u){u.g=kO(()=>{u.g=null,u.i&&(u.i=!1,_T(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class OO extends T{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:_T(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wa(u){T.call(this),this.h=u,this.g={}}f(Wa,T);var ET=[];function IT(u){xl(u.g,function(h,p){this.g.hasOwnProperty(p)&&Bg(h)},u),u.g={}}Wa.prototype.N=function(){Wa.Z.N.call(this),IT(this)},Wa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zg=s.JSON.stringify,FO=s.JSON.parse,LO=class{stringify(u){return s.JSON.stringify(u,void 0)}parse(u){return s.JSON.parse(u,void 0)}};function wT(){}function DT(){}var Ka={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gg(){I.call(this,"d")}f(Gg,I);function Wg(){I.call(this,"c")}f(Wg,I);var to={},TT=null;function Fl(){return TT=TT||new Et}to.Ia="serverreachability";function bT(u){I.call(this,to.Ia,u)}f(bT,I);function Qa(u){let h=Fl();Mt(h,new bT(h))}to.STAT_EVENT="statevent";function CT(u,h){I.call(this,to.STAT_EVENT,u),this.stat=h}f(CT,I);function Pt(u){let h=Fl();Mt(h,new CT(h,u))}to.Ja="timingevent";function ST(u,h){I.call(this,to.Ja,u),this.size=h}f(ST,I);function Ya(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){u()},h)}function Ja(){this.g=!0}Ja.prototype.ua=function(){this.g=!1};function VO(u,h,p,m,b,S){u.info(function(){if(u.g)if(S){var F="",ae=S.split("&");for(let De=0;De<ae.length;De++){var rt=ae[De].split("=");if(rt.length>1){let ut=rt[0];rt=rt[1];let Qn=ut.split("_");F=Qn.length>=2&&Qn[1]=="type"?F+(ut+"="+rt+"&"):F+(ut+"=redacted&")}}}else F=null;else F=S;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+h+`
`+p+`
`+F})}function jO(u,h,p,m,b,S,F){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+h+`
`+p+`
`+S+" "+F})}function us(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+BO(u,p)+(m?" "+m:"")})}function UO(u,h){u.info(function(){return"TIMEOUT: "+h})}Ja.prototype.info=function(){};function BO(u,h){if(!u.g)return h;if(!h)return null;try{let S=JSON.parse(h);if(S){for(u=0;u<S.length;u++)if(Array.isArray(S[u])){var p=S[u];if(!(p.length<2)){var m=p[1];if(Array.isArray(m)&&!(m.length<1)){var b=m[0];if(b!="noop"&&b!="stop"&&b!="close")for(let F=1;F<m.length;F++)m[F]=""}}}}return zg(S)}catch{return h}}var Ll={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},AT={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},RT;function Kg(){}f(Kg,wT),Kg.prototype.g=function(){return new XMLHttpRequest},RT=new Kg;function Za(u){return encodeURIComponent(String(u))}function $O(u){var h=1;u=u.split(":");let p=[];for(;h>0&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function Jr(u,h,p,m){this.j=u,this.i=h,this.l=p,this.S=m||1,this.V=new Wa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new NT}function NT(){this.i=null,this.g="",this.h=!1}var MT={},Qg={};function Yg(u,h,p){u.M=1,u.A=jl(Kn(h)),u.u=p,u.R=!0,PT(u,null)}function PT(u,h){u.F=Date.now(),Vl(u),u.B=Kn(u.A);var p=u.B,m=u.S;Array.isArray(m)||(m=[String(m)]),zT(p.i,"t",m),u.C=0,p=u.j.L,u.h=new NT,u.g=ub(u.j,p?h:null,!u.u),u.P>0&&(u.O=new OO(l(u.Y,u,u.g),u.P)),h=u.V,p=u.g,m=u.ba;var b="readystatechange";Array.isArray(b)||(b&&(ET[0]=b.toString()),b=ET);for(let S=0;S<b.length;S++){let F=pT(p,b[S],m||h.handleEvent,!1,h.h||h);if(!F)break;h.g[F.key]=F}h=u.J?dT(u.J):{},u.u?(u.v||(u.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,h)):(u.v="GET",u.g.ea(u.B,u.v,null,h)),Qa(),VO(u.i,u.v,u.B,u.l,u.S,u.u)}Jr.prototype.ba=function(u){u=u.target;let h=this.O;h&&ei(u)==3?h.j():this.Y(u)},Jr.prototype.Y=function(u){try{if(u==this.g)e:{let ae=ei(this.g),rt=this.g.ya(),De=this.g.ca();if(!(ae<3)&&(ae!=3||this.g&&(this.h.h||this.g.la()||ZT(this.g)))){this.K||ae!=4||rt==7||(rt==8||De<=0?Qa(3):Qa(2)),Jg(this);var h=this.g.ca();this.X=h;var p=HO(this);if(this.o=h==200,jO(this.i,this.v,this.B,this.l,this.S,ae,h),this.o){if(this.U&&!this.L){t:{if(this.g){var m,b=this.g;if((m=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(m)){var S=m;break t}}S=null}if(u=S)us(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Zg(this,u);else{this.o=!1,this.m=3,Pt(12),no(this),Xa(this);break e}}if(this.R){u=!0;let ut;for(;!this.K&&this.C<p.length;)if(ut=qO(this,p),ut==Qg){ae==4&&(this.m=4,Pt(14),u=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==MT){this.m=4,Pt(15),us(this.i,this.l,p,"[Invalid Chunk]"),u=!1;break}else us(this.i,this.l,ut,null),Zg(this,ut);if(xT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ae!=4||p.length!=0||this.h.h||(this.m=1,Pt(16),u=!1),this.o=this.o&&u,!u)us(this.i,this.l,p,"[Invalid Chunked Response]"),no(this),Xa(this);else if(p.length>0&&!this.W){this.W=!0;var F=this.j;F.g==this&&F.aa&&!F.P&&(F.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),om(F),F.P=!0,Pt(11))}}else us(this.i,this.l,p,null),Zg(this,p);ae==4&&no(this),this.o&&!this.K&&(ae==4?ob(this.j,this):(this.o=!1,Vl(this)))}else i1(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),no(this),Xa(this)}}}catch{}finally{}};function HO(u){if(!xT(u))return u.g.la();let h=ZT(u.g);if(h==="")return"";let p="",m=h.length,b=ei(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return no(u),Xa(u),"";u.h.i=new s.TextDecoder}for(let S=0;S<m;S++)u.h.h=!0,p+=u.h.i.decode(h[S],{stream:!(b&&S==m-1)});return h.length=0,u.h.g+=p,u.C=0,u.h.g}function xT(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function qO(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?Qg:(p=Number(h.substring(p,m)),isNaN(p)?MT:(m+=1,m+p>h.length?Qg:(h=h.slice(m,m+p),u.C=m+p,h)))}Jr.prototype.cancel=function(){this.K=!0,no(this)};function Vl(u){u.T=Date.now()+u.H,kT(u,u.H)}function kT(u,h){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ya(l(u.aa,u),h)}function Jg(u){u.D&&(s.clearTimeout(u.D),u.D=null)}Jr.prototype.aa=function(){this.D=null;let u=Date.now();u-this.T>=0?(UO(this.i,this.B),this.M!=2&&(Qa(),Pt(17)),no(this),this.m=2,Xa(this)):kT(this,this.T-u)};function Xa(u){u.j.I==0||u.K||ob(u.j,u)}function no(u){Jg(u);var h=u.O;h&&typeof h.dispose=="function"&&h.dispose(),u.O=null,IT(u.V),u.g&&(h=u.g,u.g=null,h.abort(),h.dispose())}function Zg(u,h){try{var p=u.j;if(p.I!=0&&(p.g==u||Xg(p.h,u))){if(!u.L&&Xg(p.h,u)&&p.I==3){try{var m=p.Ba.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<u.F)zl(p),Hl(p);else break e;im(p),Pt(18)}}else p.xa=b[1],0<p.xa-p.K&&b[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=Ya(l(p.Va,p),6e3));LT(p.h)<=1&&p.ta&&(p.ta=void 0)}else io(p,11)}else if((u.L||p.g==u)&&zl(p),!_(h))for(b=p.Ba.g.parse(h),h=0;h<b.length;h++){let De=b[h],ut=De[0];if(!(ut<=p.K))if(p.K=ut,De=De[1],p.I==2)if(De[0]=="c"){p.M=De[1],p.ba=De[2];let Qn=De[3];Qn!=null&&(p.ka=Qn,p.j.info("VER="+p.ka));let oo=De[4];oo!=null&&(p.za=oo,p.j.info("SVER="+p.za));let ti=De[5];ti!=null&&typeof ti=="number"&&ti>0&&(m=1.5*ti,p.O=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let ni=u.g;if(ni){let Wl=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wl){var S=m.h;S.g||Wl.indexOf("spdy")==-1&&Wl.indexOf("quic")==-1&&Wl.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(em(S,S.h),S.h=null))}if(m.G){let sm=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;sm&&(m.wa=sm,Re(m.J,m.G,sm))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-u.F,p.j.info("Handshake RTT: "+p.T+"ms")),m=p;var F=u;if(m.na=cb(m,m.L?m.ba:null,m.W),F.L){VT(m.h,F);var ae=F,rt=m.O;rt&&(ae.H=rt),ae.D&&(Jg(ae),Vl(ae)),m.g=F}else rb(m);p.i.length>0&&ql(p)}else De[0]!="stop"&&De[0]!="close"||io(p,7);else p.I==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?io(p,7):rm(p):De[0]!="noop"&&p.l&&p.l.qa(De),p.A=0)}}Qa(4)}catch{}}var zO=class{constructor(u,h){this.g=u,this.map=h}};function OT(u){this.l=u||10,s.PerformanceNavigationTiming?(u=s.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function FT(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function LT(u){return u.h?1:u.g?u.g.size:0}function Xg(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function em(u,h){u.g?u.g.add(h):u.h=h}function VT(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}OT.prototype.cancel=function(){if(this.i=jT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function jT(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.G);return h}return y(u.i)}var UT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GO(u,h){if(u){u=u.split("&");for(let p=0;p<u.length;p++){let m=u[p].indexOf("="),b,S=null;m>=0?(b=u[p].substring(0,m),S=u[p].substring(m+1)):b=u[p],h(b,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function Zr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;u instanceof Zr?(this.l=u.l,ec(this,u.j),this.o=u.o,this.g=u.g,tc(this,u.u),this.h=u.h,tm(this,GT(u.i)),this.m=u.m):u&&(h=String(u).match(UT))?(this.l=!1,ec(this,h[1]||"",!0),this.o=nc(h[2]||""),this.g=nc(h[3]||"",!0),tc(this,h[4]),this.h=nc(h[5]||"",!0),tm(this,h[6]||"",!0),this.m=nc(h[7]||"")):(this.l=!1,this.i=new ic(null,this.l))}Zr.prototype.toString=function(){let u=[];var h=this.j;h&&u.push(rc(h,BT,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(rc(h,BT,!0),"@"),u.push(Za(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&u.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(rc(p,p.charAt(0)=="/"?QO:KO,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",rc(p,JO)),u.join("")},Zr.prototype.resolve=function(u){let h=Kn(this),p=!!u.j;p?ec(h,u.j):p=!!u.o,p?h.o=u.o:p=!!u.g,p?h.g=u.g:p=u.u!=null;var m=u.h;if(p)tc(h,u.u);else if(p=!!u.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var b=h.h.lastIndexOf("/");b!=-1&&(m=h.h.slice(0,b+1)+m)}if(b=m,b==".."||b==".")m="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){m=b.lastIndexOf("/",0)==0,b=b.split("/");let S=[];for(let F=0;F<b.length;){let ae=b[F++];ae=="."?m&&F==b.length&&S.push(""):ae==".."?((S.length>1||S.length==1&&S[0]!="")&&S.pop(),m&&F==b.length&&S.push("")):(S.push(ae),m=!0)}m=S.join("/")}else m=b}return p?h.h=m:p=u.i.toString()!=="",p?tm(h,GT(u.i)):p=!!u.m,p&&(h.m=u.m),h};function Kn(u){return new Zr(u)}function ec(u,h,p){u.j=p?nc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function tc(u,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);u.u=h}else u.u=null}function tm(u,h,p){h instanceof ic?(u.i=h,ZO(u.i,u.l)):(p||(h=rc(h,YO)),u.i=new ic(h,u.l))}function Re(u,h,p){u.i.set(h,p)}function jl(u){return Re(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function nc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function rc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,WO),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function WO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var BT=/[#\/\?@]/g,KO=/[#\?:]/g,QO=/[#\?]/g,YO=/[#\?@]/g,JO=/#/g;function ic(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function ro(u){u.g||(u.g=new Map,u.h=0,u.i&&GO(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=ic.prototype,n.add=function(u,h){ro(this),this.i=null,u=ls(this,u);let p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function $T(u,h){ro(u),h=ls(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function HT(u,h){return ro(u),h=ls(u,h),u.g.has(h)}n.forEach=function(u,h){ro(this),this.g.forEach(function(p,m){p.forEach(function(b){u.call(h,b,m,this)},this)},this)};function qT(u,h){ro(u);let p=[];if(typeof h=="string")HT(u,h)&&(p=p.concat(u.g.get(ls(u,h))));else for(u=Array.from(u.g.values()),h=0;h<u.length;h++)p=p.concat(u[h]);return p}n.set=function(u,h){return ro(this),this.i=null,u=ls(this,u),HT(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=qT(this,u),u.length>0?String(u[0]):h):h};function zT(u,h,p){$T(u,h),p.length>0&&(u.i=null,u.g.set(ls(u,h),y(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(let m=0;m<h.length;m++){var p=h[m];let b=Za(p);p=qT(this,p);for(let S=0;S<p.length;S++){let F=b;p[S]!==""&&(F+="="+Za(p[S])),u.push(F)}}return this.i=u.join("&")};function GT(u){let h=new ic;return h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),h}function ls(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function ZO(u,h){h&&!u.j&&(ro(u),u.i=null,u.g.forEach(function(p,m){let b=m.toLowerCase();m!=b&&($T(this,m),zT(this,b,p))},u)),u.j=h}function XO(u,h){let p=new Ja;if(s.Image){let m=new Image;m.onload=d(Xr,p,"TestLoadImage: loaded",!0,h,m),m.onerror=d(Xr,p,"TestLoadImage: error",!1,h,m),m.onabort=d(Xr,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=d(Xr,p,"TestLoadImage: timeout",!1,h,m),s.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function e1(u,h){let p=new Ja,m=new AbortController,b=setTimeout(()=>{m.abort(),Xr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(S=>{clearTimeout(b),S.ok?Xr(p,"TestPingServer: ok",!0,h):Xr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(b),Xr(p,"TestPingServer: error",!1,h)})}function Xr(u,h,p,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(p)}catch{}}function t1(){this.g=new LO}function Ul(u){this.i=u.Sb||null,this.h=u.ab||!1}f(Ul,wT),Ul.prototype.g=function(){return new Bl(this.i,this.h)};function Bl(u,h){Et.call(this),this.H=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Bl,Et),n=Bl.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=h,this.readyState=1,sc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(h.body=u),(this.H||s).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,oc(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,sc(this)),this.g&&(this.readyState=3,sc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;WT(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function WT(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?oc(this):sc(this),this.readyState==3&&WT(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,oc(this))},n.Na=function(u){this.g&&(this.response=u,oc(this))},n.ga=function(){this.g&&oc(this)};function oc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,sc(u)}n.setRequestHeader=function(u,h){this.A.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function sc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function KT(u){let h="";return xl(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function nm(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=KT(p),typeof u=="string"?p!=null&&Za(p):Re(u,h,p))}function Le(u){Et.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Le,Et);var n1=/^https?$/i,r1=["POST","PUT"];n=Le.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():RT.g(),this.g.onreadystatechange=g(l(this.Ca,this));try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(S){QT(this,S);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)p.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let S of m.keys())p.set(S,m.get(S));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(S=>S.toLowerCase()=="content-type"),b=s.FormData&&u instanceof s.FormData,!(Array.prototype.indexOf.call(r1,h,void 0)>=0)||m||b||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,F]of p)this.g.setRequestHeader(S,F);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(S){QT(this,S)}};function QT(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.o=5,YT(u),$l(u)}function YT(u){u.A||(u.A=!0,Mt(u,"complete"),Mt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Mt(this,"complete"),Mt(this,"abort"),$l(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$l(this,!0)),Le.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?JT(this):this.Xa())},n.Xa=function(){JT(this)};function JT(u){if(u.h&&typeof o<"u"){if(u.v&&ei(u)==4)setTimeout(u.Ca.bind(u),0);else if(Mt(u,"readystatechange"),ei(u)==4){u.h=!1;try{let S=u.ca();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=S===0){let F=String(u.D).match(UT)[1]||null;!F&&s.self&&s.self.location&&(F=s.self.location.protocol.slice(0,-1)),m=!n1.test(F?F.toLowerCase():"")}p=m}if(p)Mt(u,"complete"),Mt(u,"success");else{u.o=6;try{var b=ei(u)>2?u.g.statusText:""}catch{b=""}u.l=b+" ["+u.ca()+"]",YT(u)}}finally{$l(u)}}}}function $l(u,h){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);let p=u.g;u.g=null,h||Mt(u,"ready");try{p.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ei(u){return u.g?u.g.readyState:0}n.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),FO(h)}};function ZT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function i1(u){let h={};u=(u.g&&ei(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(_(u[m]))continue;var p=$O(u[m]);let b=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let S=h[b]||[];h[b]=S,S.push(p)}MO(h,function(m){return m.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ac(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function XT(u){this.za=0,this.i=[],this.j=new Ja,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ac("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ac("baseRetryDelayMs",5e3,u),this.Za=ac("retryDelaySeedMs",1e4,u),this.Ta=ac("forwardChannelMaxRetries",2,u),this.va=ac("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new OT(u&&u.concurrentRequestLimit),this.Ba=new t1,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=XT.prototype,n.ka=8,n.I=1,n.connect=function(u,h,p,m){Pt(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.J=cb(this,null,this.W),ql(this)};function rm(u){if(eb(u),u.I==3){var h=u.V++,p=Kn(u.J);if(Re(p,"SID",u.M),Re(p,"RID",h),Re(p,"TYPE","terminate"),cc(u,p),h=new Jr(u,u.j,h),h.M=2,h.A=jl(Kn(p)),p=!1,s.navigator&&s.navigator.sendBeacon)try{p=s.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&s.Image&&(new Image().src=h.A,p=!0),p||(h.g=ub(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Vl(h)}ab(u)}function Hl(u){u.g&&(om(u),u.g.cancel(),u.g=null)}function eb(u){Hl(u),u.v&&(s.clearTimeout(u.v),u.v=null),zl(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&s.clearTimeout(u.m),u.m=null)}function ql(u){if(!FT(u.h)&&!u.m){u.m=!0;var h=u.Ea;Ae||v(),we||(Ae(),we=!0),w.add(h,u),u.D=0}}function o1(u,h){return LT(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=h.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ya(l(u.Ea,u,h),sb(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;let b=new Jr(this,this.j,u),S=this.o;if(this.U&&(S?(S=dT(S),fT(S,this.U)):S=this.U),this.u!==null||this.R||(b.J=S,S=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=nb(this,b,h),p=Kn(this.J),Re(p,"RID",u),Re(p,"CVER",22),this.G&&Re(p,"X-HTTP-Session-Id",this.G),cc(this,p),S&&(this.R?h="headers="+Za(KT(S))+"&"+h:this.u&&nm(p,this.u,S)),em(this.h,b),this.Ra&&Re(p,"TYPE","init"),this.S?(Re(p,"$req",h),Re(p,"SID","null"),b.U=!0,Yg(b,p,null)):Yg(b,p,h),this.I=2}}else this.I==3&&(u?tb(this,u):this.i.length==0||FT(this.h)||tb(this))};function tb(u,h){var p;h?p=h.l:p=u.V++;let m=Kn(u.J);Re(m,"SID",u.M),Re(m,"RID",p),Re(m,"AID",u.K),cc(u,m),u.u&&u.o&&nm(m,u.u,u.o),p=new Jr(u,u.j,p,u.D+1),u.u===null&&(p.J=u.o),h&&(u.i=h.G.concat(u.i)),h=nb(u,p,1e3),p.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),em(u.h,p),Yg(p,m,h)}function cc(u,h){u.H&&xl(u.H,function(p,m){Re(h,m,p)}),u.l&&xl({},function(p,m){Re(h,m,p)})}function nb(u,h,p){p=Math.min(u.i.length,p);let m=u.l?l(u.l.Ka,u.l,u):null;e:{var b=u.i;let ae=-1;for(;;){let rt=["count="+p];ae==-1?p>0?(ae=b[0].g,rt.push("ofs="+ae)):ae=0:rt.push("ofs="+ae);let De=!0;for(let ut=0;ut<p;ut++){var S=b[ut].g;let Qn=b[ut].map;if(S-=ae,S<0)ae=Math.max(0,b[ut].g-100),De=!1;else try{S="req"+S+"_"||"";try{var F=Qn instanceof Map?Qn:Object.entries(Qn);for(let[oo,ti]of F){let ni=ti;a(ti)&&(ni=zg(ti)),rt.push(S+oo+"="+encodeURIComponent(ni))}}catch(oo){throw rt.push(S+"type="+encodeURIComponent("_badmap")),oo}}catch{m&&m(Qn)}}if(De){F=rt.join("&");break e}}F=void 0}return u=u.i.splice(0,p),h.G=u,F}function rb(u){if(!u.g&&!u.v){u.Y=1;var h=u.Da;Ae||v(),we||(Ae(),we=!0),w.add(h,u),u.A=0}}function im(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ya(l(u.Da,u),sb(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,ib(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ya(l(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),Hl(this),ib(this))};function om(u){u.B!=null&&(s.clearTimeout(u.B),u.B=null)}function ib(u){u.g=new Jr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var h=Kn(u.na);Re(h,"RID","rpc"),Re(h,"SID",u.M),Re(h,"AID",u.K),Re(h,"CI",u.F?"0":"1"),!u.F&&u.ia&&Re(h,"TO",u.ia),Re(h,"TYPE","xmlhttp"),cc(u,h),u.u&&u.o&&nm(h,u.u,u.o),u.O&&(u.g.H=u.O);var p=u.g;u=u.ba,p.M=1,p.A=jl(Kn(h)),p.u=null,p.R=!0,PT(p,u)}n.Va=function(){this.C!=null&&(this.C=null,Hl(this),im(this),Pt(19))};function zl(u){u.C!=null&&(s.clearTimeout(u.C),u.C=null)}function ob(u,h){var p=null;if(u.g==h){zl(u),om(u),u.g=null;var m=2}else if(Xg(u.h,h))p=h.G,VT(u.h,h),m=1;else return;if(u.I!=0){if(h.o)if(m==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var b=u.D;m=Fl(),Mt(m,new ST(m,p)),ql(u)}else rb(u);else if(b=h.m,b==3||b==0&&h.X>0||!(m==1&&o1(u,h)||m==2&&im(u)))switch(p&&p.length>0&&(h=u.h,h.i=h.i.concat(p)),b){case 1:io(u,5);break;case 4:io(u,10);break;case 3:io(u,6);break;default:io(u,2)}}}function sb(u,h){let p=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(p*=2),p*h}function io(u,h){if(u.j.info("Error code "+h),h==2){var p=l(u.bb,u),m=u.Ua;let b=!m;m=new Zr(m||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||ec(m,"https"),jl(m),b?XO(m.toString(),p):e1(m.toString(),p)}else Pt(2);u.I=0,u.l&&u.l.pa(h),ab(u),eb(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function ab(u){if(u.I=0,u.ja=[],u.l){let h=jT(u.h);(h.length!=0||u.i.length!=0)&&(D(u.ja,h),D(u.ja,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.oa()}}function cb(u,h,p){var m=p instanceof Zr?Kn(p):new Zr(p);if(m.g!="")h&&(m.g=h+"."+m.g),tc(m,m.u);else{var b=s.location;m=b.protocol,h=h?h+"."+b.hostname:b.hostname,b=+b.port;let S=new Zr(null);m&&ec(S,m),h&&(S.g=h),b&&tc(S,b),p&&(S.h=p),m=S}return p=u.G,h=u.wa,p&&h&&Re(m,p,h),Re(m,"VER",u.ka),cc(u,m),m}function ub(u,h,p){if(h&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Aa&&!u.ma?new Le(new Ul({ab:p})):new Le(u.ma),h.Fa(u.L),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function lb(){}n=lb.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Gl(){}Gl.prototype.g=function(u,h){return new Yt(u,h)};function Yt(u,h){Et.call(this),this.g=new XT(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(u?u["X-WebChannel-Client-Profile"]=h.sa:u={"X-WebChannel-Client-Profile":h.sa}),this.g.U=u,(u=h&&h.Qb)&&!_(u)&&(this.g.u=u),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.G=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new ds(this)}f(Yt,Et),Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){rm(this.g)},Yt.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.v&&(p={},p.__data__=zg(u),u=p);h.i.push(new zO(h.Ya++,u)),h.I==3&&ql(h)},Yt.prototype.N=function(){this.g.l=null,delete this.j,rm(this.g),delete this.g,Yt.Z.N.call(this)};function db(u){Gg.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}f(db,Gg);function hb(){Wg.call(this),this.status=1}f(hb,Wg);function ds(u){this.g=u}f(ds,lb),ds.prototype.ra=function(){Mt(this.g,"a")},ds.prototype.qa=function(u){Mt(this.g,new db(u))},ds.prototype.pa=function(u){Mt(this.g,new hb)},ds.prototype.oa=function(){Mt(this.g,"b")},Gl.prototype.createWebChannel=Gl.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,CI=Br.createWebChannelTransport=function(){return new Gl},bI=Br.getStatEventTarget=function(){return Fl()},TI=Br.Event=to,vp=Br.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ll.NO_ERROR=0,Ll.TIMEOUT=8,Ll.HTTP_ERROR=6,Yu=Br.ErrorCode=Ll,AT.COMPLETE="complete",DI=Br.EventType=AT,DT.EventType=Ka,Ka.OPEN="a",Ka.CLOSE="b",Ka.ERROR="c",Ka.MESSAGE="d",Et.prototype.listen=Et.prototype.J,ga=Br.WebChannel=DT,wG=Br.FetchXmlHttpFactory=Ul,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,wI=Br.XhrIo=Le}).apply(typeof yp<"u"?yp:typeof self<"u"?self:typeof window<"u"?window:{});var eP="@firebase/firestore",tP="4.9.3";var pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var La="12.7.0";var Yo=new dr("@firebase/firestore");function ma(){return Yo.logLevel}function j(n,...e){if(Yo.logLevel<=ce.DEBUG){let t=e.map(_D);Yo.debug(`Firestore (${La}): ${n}`,...t)}}function Hr(n,...e){if(Yo.logLevel<=ce.ERROR){let t=e.map(_D);Yo.error(`Firestore (${La}): ${n}`,...t)}}function Da(n,...e){if(Yo.logLevel<=ce.WARN){let t=e.map(_D);Yo.warn(`Firestore (${La}): ${n}`,...t)}}function _D(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function q(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,zP(n,r,t)}function zP(n,e,t){let r=`FIRESTORE (${La}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Hr(r),new Error(r)}function pe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||zP(e,i,r)}function Q(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends rn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Dn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var bp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},MI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pt.UNAUTHENTICATED))}shutdown(){}},PI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},xI=class{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){pe(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Dn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Dn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Dn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string",31837,{l:r}),new bp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string",2055,{h:e}),new pt(e)}},kI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},OI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new kI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Cp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},FI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){pe(this.o===void 0,3512);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function DG(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var rl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=DG(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ue(n,e){return n<e?-1:n>e?1:0}function LI(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return SI(i)===SI(o)?ue(i,o):SI(i)?1:-1}return ue(n.length,e.length)}var TG=55296,bG=57343;function SI(n){let e=n.charCodeAt(0);return e>=TG&&e<=bG}function Ta(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var nP="__name__",Sp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&q(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ue(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):LI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ur.fromString(e.substring(4,e.length-2))}},Se=class n extends Sp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},CG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,on=class n extends Sp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return CG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nP}static keyField(){return new n([nP])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new O(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new O(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Se.fromString(e))}static fromName(e){return new n(Se.fromString(e).popFirst(5))}static empty(){return new n(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Se(e.slice()))}};function GP(n,e,t){if(!t)throw new O(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function SG(n,e,t,r){if(e===!0&&r===!0)throw new O(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rP(n){if(!z.isDocumentKey(n))throw new O(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iP(n){if(z.isDocumentKey(n))throw new O(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WP(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function sg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q(12329,{type:typeof n})}function Rt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=sg(n);throw new O(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function AG(n,e){if(e<=0)throw new O(M.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function et(n,e){let t={typeString:n};return e&&(t.value=e),t}function yl(n,e){if(!WP(n))throw new O(M.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new O(M.INVALID_ARGUMENT,t);return!0}var oP=-62135596800,sP=1e6,tt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*sP);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<oP)throw new O(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sP}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yl(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-oP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};tt._jsonSchemaVersion="firestore/timestamp/1.0",tt._jsonSchema={type:et("string",tt._jsonSchemaVersion),seconds:et("number"),nanoseconds:et("number")};var K=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new tt(0,0))}static max(){return new n(new tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var il=-1,VI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};VI.UNKNOWN_ID=-1;function RG(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=K.fromTimestamp(r===1e9?new tt(t+1,0):new tt(t,r));return new Jo(i,z.empty(),e)}function NG(n){return new Jo(n.readTime,n.key,il)}var Jo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(K.min(),z.empty(),il)}static max(){return new n(K.max(),z.empty(),il)}};function MG(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:ue(n.largestBatchId,e.largestBatchId))}var PG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Va(n){if(n.code!==M.FAILED_PRECONDITION||n.message!==PG)throw n;j("LocalStore","Unexpectedly lost primary lease")}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(d=>{s[l]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function xG(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ja(n){return n.name==="IndexedDbTransactionError"}var ED=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),ID=-1;function vl(n){return n==null}function ol(n){return n===0&&1/n==-1/0}function kG(n){return typeof n=="number"&&Number.isInteger(n)&&!ol(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var KP="";function OG(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=aP(e)),e=FG(n.get(t),e);return aP(e)}function FG(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case KP:t+="";break;default:t+=o}}return t}function aP(n){return n+KP+""}var LG="remoteDocuments",QP="owner";var YP="mutationQueues";var JP="mutations";var ZP="documentMutations",VG="remoteDocumentsV14";var XP="remoteDocumentGlobal";var ex="targets";var tx="targetDocuments";var nx="targetGlobal",rx="collectionParents";var ix="clientMetadata";var ox="bundles";var sx="namedQueries";var jG="indexConfiguration";var UG="indexState";var BG="indexEntries";var ax="documentOverlays";var $G="globals";var HG=[YP,JP,ZP,LG,ex,QP,nx,tx,ix,XP,rx,ox,sx],oue=[...HG,ax],qG=[YP,JP,ZP,VG,ex,QP,nx,tx,ix,XP,rx,ox,sx,ax],zG=qG,GG=[...zG,jG,UG,BG];var sue=[...GG,$G];function cP(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function cx(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Be=class n{constructor(e,t){this.comparator=e,this.root=t||mr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ea(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ea(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ea(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ea(this.root,e,this.comparator,!0)}},Ea=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},mr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw q(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw q(27949);return e+(this.isRed()?0:1)}};mr.EMPTY=null,mr.RED=!0,mr.BLACK=!1;mr.EMPTY=new class{constructor(){this.size=0}get key(){throw q(57766)}get value(){throw q(16141)}get color(){throw q(16727)}get left(){throw q(29726)}get right(){throw q(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new mr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var mt=class n{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ap(this.data.getIterator())}getIteratorFrom(e){return new Ap(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ap=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var wn=class n{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new n([])}unionWith(e){let t=new mt(on.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ta(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Rp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Nt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Rp("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Nt.EMPTY_BYTE_STRING=new Nt("");var WG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qr(n){if(pe(!!n,39018),typeof n=="string"){let e=0,t=WG.exec(n);if(pe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zr(n){return typeof n=="string"?Nt.fromBase64String(n):Nt.fromUint8Array(n)}var ux="server_timestamp",lx="__type__",dx="__previous_value__",hx="__local_write_time__";function wD(n){return(n?.mapValue?.fields||{})[lx]?.stringValue===ux}function ag(n){let e=n.mapValue.fields[dx];return wD(e)?ag(e):e}function sl(n){let e=qr(n.mapValue.fields[hx].timestampValue);return new tt(e.seconds,e.nanos)}var UI=class{constructor(e,t,r,i,o,s,a,c,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=d}},Np="(default)",Mp=class n{constructor(e,t){this.projectId=e,this.database=t||Np}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Np}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var DD="__type__",fx="__max__",_p={mapValue:{fields:{__type__:{stringValue:fx}}}},TD="__vector__",ba="value";function $i(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wD(n)?4:gx(n)?9007199254740991:px(n)?10:11:q(28295,{value:n})}function vr(n,e){if(n===e)return!0;let t=$i(n);if(t!==$i(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sl(n).isEqual(sl(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=qr(i.timestampValue),a=qr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return zr(i.bytesValue).isEqual(zr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ke(i.doubleValue),a=ke(o.doubleValue);return s===a?ol(s)===ol(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Ta(n.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(cP(s)!==cP(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!vr(s[c],a[c])))return!1;return!0})(n,e);default:return q(52216,{left:n})}}function al(n,e){return(n.values||[]).find(t=>vr(t,e))!==void 0}function Ca(n,e){if(n===e)return 0;let t=$i(n),r=$i(e);if(t!==r)return ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=ke(o.integerValue||o.doubleValue),c=ke(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return uP(n.timestampValue,e.timestampValue);case 4:return uP(sl(n),sl(e));case 5:return LI(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=zr(o),c=zr(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=ue(a[l],c[l]);if(d!==0)return d}return ue(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ue(ke(o.latitude),ke(s.latitude));return a!==0?a:ue(ke(o.longitude),ke(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return lP(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},c=s.fields||{},l=a[ba]?.arrayValue,d=c[ba]?.arrayValue,f=ue(l?.values?.length||0,d?.values?.length||0);return f!==0?f:lP(l,d)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===_p.mapValue&&s===_p.mapValue)return 0;if(o===_p.mapValue)return 1;if(s===_p.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=LI(c[f],d[f]);if(g!==0)return g;let y=Ca(a[c[f]],l[d[f]]);if(y!==0)return y}return ue(c.length,d.length)})(n.mapValue,e.mapValue);default:throw q(23264,{he:t})}}function uP(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ue(n,e);let t=qr(n),r=qr(e),i=ue(t.seconds,r.seconds);return i!==0?i:ue(t.nanos,r.nanos)}function lP(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ca(t[i],r[i]);if(o)return o}return ue(t.length,r.length)}function Sa(n){return BI(n)}function BI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=qr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return zr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return z.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=BI(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${BI(t.fields[s])}`;return i+"}"})(n.mapValue):q(61005,{value:n})}function wp(n){switch($i(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ag(n);return e?16+wp(e):16;case 5:return 2*n.stringValue.length;case 6:return zr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+wp(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Wi(r.fields,(o,s)=>{i+=o.length+wp(s)}),i})(n.mapValue);default:throw q(13486,{value:n})}}function dP(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $I(n){return!!n&&"integerValue"in n}function bD(n){return!!n&&"arrayValue"in n}function hP(n){return!!n&&"nullValue"in n}function fP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Dp(n){return!!n&&"mapValue"in n}function px(n){return(n?.mapValue?.fields||{})[DD]?.stringValue===TD}function Zu(n){if(n.geoPointValue)return{geoPointValue:R({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:R({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Wi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zu(n.arrayValue.values[t]);return e}return R({},n)}function gx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fx}var cue={mapValue:{fields:{[DD]:{stringValue:TD},[ba]:{arrayValue:{}}}}};var Qt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Dp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(t)}setAll(e){let t=on.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Zu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Dp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Dp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Wi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Zu(this.value))}};function mx(n){let e=[];return Wi(n.fields,(t,r)=>{let i=new on([t]);if(Dp(r)){let o=mx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new wn(e)}var an=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,K.min(),K.min(),K.min(),Qt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,K.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,K.min(),K.min(),Qt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,K.min(),K.min(),Qt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Aa=class{constructor(e,t){this.position=e,this.inclusive=t}};function pP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),t.key):r=Ca(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function gP(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vr(n.position[t],e.position[t]))return!1;return!0}var Zo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function KG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Pp=class{},Xe=class n extends Pp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new qI(e,t,r):t==="array-contains"?new WI(e,r):t==="in"?new KI(e,r):t==="not-in"?new QI(e,r):t==="array-contains-any"?new YI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new zI(e,r):new GI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ca(t,this.value)):t!==null&&$i(this.value)===$i(t)&&this.matchesComparison(Ca(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Wn=class n extends Pp{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return yx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function yx(n){return n.op==="and"}function vx(n){return QG(n)&&yx(n)}function QG(n){for(let e of n.filters)if(e instanceof Wn)return!1;return!0}function HI(n){if(n instanceof Xe)return n.field.canonicalString()+n.op.toString()+Sa(n.value);if(vx(n))return n.filters.map(e=>HI(e)).join(",");{let e=n.filters.map(t=>HI(t)).join(",");return`${n.op}(${e})`}}function _x(n,e){return n instanceof Xe?(function(r,i){return i instanceof Xe&&r.op===i.op&&r.field.isEqual(i.field)&&vr(r.value,i.value)})(n,e):n instanceof Wn?(function(r,i){return i instanceof Wn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&_x(s,i.filters[a]),!0):!1})(n,e):void q(19439)}function Ex(n){return n instanceof Xe?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sa(t.value)}`})(n):n instanceof Wn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Ex).join(" ,")+"}"})(n):"Filter"}var qI=class extends Xe{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},zI=class extends Xe{constructor(e,t){super(e,"in",t),this.keys=Ix("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},GI=class extends Xe{constructor(e,t){super(e,"not-in",t),this.keys=Ix("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Ix(n,e){return(e.arrayValue?.values||[]).map(t=>z.fromName(t.referenceValue))}var WI=class extends Xe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return bD(t)&&al(t.arrayValue,this.value)}},KI=class extends Xe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&al(this.value.arrayValue,t)}},QI=class extends Xe{constructor(e,t){super(e,"not-in",t)}matches(e){if(al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!al(this.value.arrayValue,t)}},YI=class extends Xe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!bD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>al(this.value.arrayValue,r))}};var JI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function mP(n,e=null,t=[],r=[],i=null,o=null,s=null){return new JI(n,e,t,r,i,o,s)}function CD(n){let e=Q(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>HI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),vl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Sa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Sa(r)).join(",")),e.Te=t}return e.Te}function SD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!KG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_x(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!gP(n.startAt,e.startAt)&&gP(n.endAt,e.endAt)}function ZI(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Hi=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function YG(n,e,t,r,i,o,s,a){return new Hi(n,e,t,r,i,o,s,a)}function cg(n){return new Hi(n)}function yP(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wx(n){return n.collectionGroup!==null}function Xu(n){let e=Q(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new mt(on.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Zo(o,r))}),t.has(on.keyField().canonicalString())||e.Ie.push(new Zo(on.keyField(),r))}return e.Ie}function yr(n){let e=Q(n);return e.Ee||(e.Ee=JG(e,Xu(n))),e.Ee}function JG(n,e){if(n.limitType==="F")return mP(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Zo(i.field,o)});let t=n.endAt?new Aa(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Aa(n.startAt.position,n.startAt.inclusive):null;return mP(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function XI(n,e){let t=n.filters.concat([e]);return new Hi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xp(n,e,t){return new Hi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ug(n,e){return SD(yr(n),yr(e))&&n.limitType===e.limitType}function Dx(n){return`${CD(yr(n))}|lt:${n.limitType}`}function ya(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Ex(i)).join(", ")}]`),vl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Sa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Sa(i)).join(",")),`Target(${r})`})(yr(n))}; limitType=${n.limitType})`}function lg(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Xu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let l=pP(s,a,c);return s.inclusive?l<=0:l<0})(r.startAt,Xu(r),i)||r.endAt&&!(function(s,a,c){let l=pP(s,a,c);return s.inclusive?l>=0:l>0})(r.endAt,Xu(r),i))})(n,e)}function ZG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Tx(n){return(e,t)=>{let r=!1;for(let i of Xu(n)){let o=XG(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function XG(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Ca(c,l):q(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q(19790,{direction:n.dir})}}var Gr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return cx(this.inner)}size(){return this.innerSize}};var e3=new Be(z.comparator);function Wr(){return e3}var bx=new Be(z.comparator);function Ju(...n){let e=bx;for(let t of n)e=e.insert(t.key,t);return e}function Cx(n){let e=bx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Wo(){return el()}function Sx(){return el()}function el(){return new Gr(n=>n.toString(),(n,e)=>n.isEqual(e))}var t3=new Be(z.comparator),n3=new mt(z.comparator);function le(...n){let e=n3;for(let t of n)e=e.add(t);return e}var r3=new mt(ue);function i3(){return r3}function AD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ol(e)?"-0":e}}function Ax(n){return{integerValue:""+n}}function o3(n,e){return kG(e)?Ax(e):AD(n,e)}var Ra=class{constructor(){this._=void 0}};function s3(n,e,t){return n instanceof Xo?(function(i,o){let s={fields:{[lx]:{stringValue:ux},[hx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&wD(o)&&(o=ag(o)),o&&(s.fields[dx]=o),{mapValue:s}})(t,e):n instanceof es?Nx(n,e):n instanceof ts?Mx(n,e):(function(i,o){let s=Rx(i,o),a=vP(s)+vP(i.Ae);return $I(s)&&$I(i.Ae)?Ax(a):AD(i.serializer,a)})(n,e)}function a3(n,e,t){return n instanceof es?Nx(n,e):n instanceof ts?Mx(n,e):t}function Rx(n,e){return n instanceof Na?(function(r){return $I(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Xo=class extends Ra{},es=class extends Ra{constructor(e){super(),this.elements=e}};function Nx(n,e){let t=Px(e);for(let r of n.elements)t.some(i=>vr(i,r))||t.push(r);return{arrayValue:{values:t}}}var ts=class extends Ra{constructor(e){super(),this.elements=e}};function Mx(n,e){let t=Px(e);for(let r of n.elements)t=t.filter(i=>!vr(i,r));return{arrayValue:{values:t}}}var Na=class extends Ra{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function vP(n){return ke(n.integerValue||n.doubleValue)}function Px(n){return bD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ew=class{constructor(e,t){this.field=e,this.transform=t}};function c3(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof es&&i instanceof es||r instanceof ts&&i instanceof ts?Ta(r.elements,i.elements,vr):r instanceof Na&&i instanceof Na?vr(r.Ae,i.Ae):r instanceof Xo&&i instanceof Xo})(n.transform,e.transform)}var tw=class{constructor(e,t){this.version=e,this.transformResults=t}},gt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Tp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ma=class{};function xx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new rs(n.key,gt.none()):new ns(n.key,n.data,gt.none());{let t=n.data,r=Qt.empty(),i=new mt(on.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new _r(n.key,r,new wn(i.toArray()),gt.none())}}function u3(n,e,t){n instanceof ns?(function(i,o,s){let a=i.value.clone(),c=EP(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof _r?(function(i,o,s){if(!Tp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=EP(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(kx(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function tl(n,e,t,r){return n instanceof ns?(function(o,s,a,c){if(!Tp(o.precondition,s))return a;let l=o.value.clone(),d=IP(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof _r?(function(o,s,a,c){if(!Tp(o.precondition,s))return a;let l=IP(o.fieldTransforms,c,s),d=s.data;return d.setAll(kx(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))})(n,e,t,r):(function(o,s,a){return Tp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function l3(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Rx(r.transform,i||null);o!=null&&(t===null&&(t=Qt.empty()),t.set(r.field,o))}return t||null}function _P(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ta(r,i,(o,s)=>c3(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ns=class extends Ma{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_r=class extends Ma{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function kx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function EP(n,e,t){let r=new Map;pe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,a3(s,a,t[i]))}return r}function IP(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,s3(o,s,e))}return r}var rs=class extends Ma{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},kp=class extends Ma{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var nw=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&u3(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=tl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=tl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Sx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=xx(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),le())}isEqual(e){return this.batchId===e.batchId&&Ta(this.mutations,e.mutations,(t,r)=>_P(t,r))&&Ta(this.baseMutations,e.baseMutations,(t,r)=>_P(t,r))}},rw=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return t3})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var iw=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ow=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Je,fe;function Ox(n){switch(n){case M.OK:return q(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return q(15467,{code:n})}}function Fx(n){if(n===void 0)return Hr("GRPC error has no .code"),M.UNKNOWN;switch(n){case Je.OK:return M.OK;case Je.CANCELLED:return M.CANCELLED;case Je.UNKNOWN:return M.UNKNOWN;case Je.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Je.INTERNAL:return M.INTERNAL;case Je.UNAVAILABLE:return M.UNAVAILABLE;case Je.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Je.NOT_FOUND:return M.NOT_FOUND;case Je.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Je.ABORTED:return M.ABORTED;case Je.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Je.DATA_LOSS:return M.DATA_LOSS;default:return q(39323,{code:n})}}(fe=Je||(Je={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";var d3=null;function h3(){return new TextEncoder}var f3=new Ur([4294967295,4294967295],0);function wP(n){let e=h3().encode(n),t=new II;return t.update(e),new Uint8Array(t.digest())}function DP(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ur([t,r],0),new Ur([i,o],0)]}var sw=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ko(`Invalid padding: ${t}`);if(r<0)throw new Ko(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ko(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ko(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ur.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Ur.fromNumber(r)));return i.compare(f3)===1&&(i=new Ur([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=wP(e),[r,i]=DP(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=wP(e),[r,i]=DP(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ko=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Op=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,cl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(K.min(),i,new Be(ue),Wr(),le())}},cl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,le(),le(),le())}};var Ia=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Fp=class{constructor(e,t){this.targetId=e,this.Ce=t}},Lp=class{constructor(e,t,r=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Vp=class{constructor(){this.ve=0,this.Fe=TP(),this.Me=Nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),t=le(),r=le();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:q(38017,{changeType:o})}}),new cl(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=TP()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},aw=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wr(),this.Je=Ep(),this.He=Ep(),this.Ye=new Be(ue)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:q(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(ZI(o))if(r===0){let s=new z(o.path);this.et(t,s,an.newNoDocument(s,K.min()))}else pe(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}d3?.lt((function(d,f,g,y,D){let N={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},A=f.unchangedNames;return A&&(N.bloomFilter={applied:D===0,hashCount:A?.hashCount??0,bitmapLength:A?.bits?.bitmap?.length??0,padding:A?.bits?.padding??0,mightContain:k=>y?.mightContain(k)??!1}),N})(s,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=zr(r).toUint8Array()}catch(c){if(c instanceof Rp)return Da("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new sw(s,i,o)}catch(c){return Da(c instanceof Ko?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&ZI(a.target)){let c=new z(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,an.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=le();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Op(e,t,this.Ye,this.je,r);return this.je=Wr(),this.Je=Ep(),this.He=Ep(),this.Ye=new Be(ue),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Vp,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mt(ue),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mt(ue),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vp),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Ep(){return new Be(z.comparator)}function TP(){return new Be(z.comparator)}var p3={asc:"ASCENDING",desc:"DESCENDING"},g3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m3={and:"AND",or:"OR"},cw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function uw(n,e){return n.useProto3Json||vl(e)?e:{value:e}}function jp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function y3(n,e){return jp(n,e.toTimestamp())}function sn(n){return pe(!!n,49232),K.fromTimestamp((function(t){let r=qr(t);return new tt(r.seconds,r.nanos)})(n))}function RD(n,e){return lw(n,e).canonicalString()}function lw(n,e){let t=(function(i){return new Se(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Vx(n){let e=Se.fromString(n);return pe(qx(e),10190,{key:e.toString()}),e}function Up(n,e){return RD(n.databaseId,e.path)}function nl(n,e){let t=Vx(e);if(t.get(1)!==n.databaseId.projectId)throw new O(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(Ux(t))}function jx(n,e){return RD(n.databaseId,e)}function v3(n){let e=Vx(n);return e.length===4?Se.emptyPath():Ux(e)}function dw(n){return new Se(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ux(n){return pe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function bP(n,e,t){return{name:Up(n,e),fields:t.value.mapValue.fields}}function _3(n,e){return"found"in e?(function(r,i){pe(!!i.found,43571),i.found.name,i.found.updateTime;let o=nl(r,i.found.name),s=sn(i.found.updateTime),a=i.found.createTime?sn(i.found.createTime):K.min(),c=new Qt({mapValue:{fields:i.found.fields}});return an.newFoundDocument(o,s,a,c)})(n,e):"missing"in e?(function(r,i){pe(!!i.missing,3894),pe(!!i.readTime,22933);let o=nl(r,i.missing),s=sn(i.readTime);return an.newNoDocument(o,s)})(n,e):q(7234,{result:e})}function E3(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:q(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,d){return l.useProto3Json?(pe(d===void 0||typeof d=="string",58123),Nt.fromBase64String(d||"")):(pe(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Nt.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let d=l.code===void 0?M.UNKNOWN:Fx(l.code);return new O(d,l.message||"")})(s);t=new Lp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=nl(n,r.document.name),o=sn(r.document.updateTime),s=r.document.createTime?sn(r.document.createTime):K.min(),a=new Qt({mapValue:{fields:r.document.fields}}),c=an.newFoundDocument(i,o,s,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new Ia(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=nl(n,r.document),o=r.readTime?sn(r.readTime):K.min(),s=an.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ia([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=nl(n,r.document),o=r.removedTargetIds||[];t=new Ia([],o,i,null)}else{if(!("filter"in e))return q(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new ow(i,o),a=r.targetId;t=new Fp(a,s)}}return t}function Bx(n,e){let t;if(e instanceof ns)t={update:bP(n,e.key,e.value)};else if(e instanceof rs)t={delete:Up(n,e.key)};else if(e instanceof _r)t={update:bP(n,e.key,e.data),updateMask:R3(e.fieldMask)};else{if(!(e instanceof kp))return q(16599,{Vt:e.type});t={verify:Up(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Xo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof es)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ts)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Na)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw q(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:y3(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q(27497)})(n,e.precondition)),t}function I3(n,e){return n&&n.length>0?(pe(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?sn(i.updateTime):sn(o);return s.isEqual(K.min())&&(s=sn(o)),new tw(s,i.transformResults||[])})(t,e))):[]}function w3(n,e){return{documents:[jx(n,e.path)]}}function D3(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=jx(n,i);let o=(function(l){if(l.length!==0)return Hx(Wn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(d=>(function(g){return{field:va(g.field),direction:C3(g.dir)}})(d))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=uw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function T3(n){let e=v3(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){pe(r===1,65062);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=(function(f){let g=$x(f);return g instanceof Wn&&vx(g)?g.getFilters():[g]})(t.where));let s=[];t.orderBy&&(s=(function(f){return f.map(g=>(function(D){return new Zo(_a(D.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(g))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let g;return g=typeof f=="object"?f.value:f,vl(g)?null:g})(t.limit));let c=null;t.startAt&&(c=(function(f){let g=!!f.before,y=f.values||[];return new Aa(y,g)})(t.startAt));let l=null;return t.endAt&&(l=(function(f){let g=!f.before,y=f.values||[];return new Aa(y,g)})(t.endAt)),YG(e,i,s,o,a,"F",c,l)}function b3(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return q(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $x(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=_a(t.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=_a(t.unaryFilter.field);return Xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=_a(t.unaryFilter.field);return Xe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=_a(t.unaryFilter.field);return Xe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return q(61313);default:return q(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Xe.create(_a(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return q(58110);default:return q(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wn.create(t.compositeFilter.filters.map(r=>$x(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q(1026)}})(t.compositeFilter.op))})(n):q(30097,{filter:n})}function C3(n){return p3[n]}function S3(n){return g3[n]}function A3(n){return m3[n]}function va(n){return{fieldPath:n.canonicalString()}}function _a(n){return on.fromServerFormat(n.fieldPath)}function Hx(n){return n instanceof Xe?(function(t){if(t.op==="=="){if(fP(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NAN"}};if(hP(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(fP(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NOT_NAN"}};if(hP(t.value))return{unaryFilter:{field:va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:va(t.field),op:S3(t.op),value:t.value}}})(n):n instanceof Wn?(function(t){let r=t.getFilters().map(i=>Hx(i));return r.length===1?r[0]:{compositeFilter:{op:A3(t.op),filters:r}}})(n):q(54877,{filter:n})}function R3(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ul=class n{constructor(e,t,r,i,o=K.min(),s=K.min(),a=Nt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var hw=class{constructor(e){this.yt=e}};function N3(n){let e=T3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xp(e,e.limit,"L"):e}var Bp=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),ol(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=qr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(zr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?gx(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):px(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):q(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=ba,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ke(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),z.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Bp.Kt=new Bp;var fw=class{constructor(){this.Cn=new pw}addToCollectionParentIndex(e,t){return this.Cn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Jo.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Jo.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},pw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mt(Se.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(Se.comparator)).toArray()}};var uue=new Uint8Array(0);var CP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zx=41943040,In=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(zx,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);var ll=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var SP="LruGarbageCollector",M3=1048576;function AP([n,e],[t,r]){let i=ue(n,t);return i===0?ue(e,r):i}var gw=class{constructor(e){this.Ir=e,this.buffer=new mt(AP),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();AP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},mw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){j(SP,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ja(t)?j(SP,"Ignoring IndexedDB error during garbage collection: ",t):await Va(t)}await this.Vr(3e5)})}},yw=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(ED.ce);let r=new gw(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(CP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CP):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),ma()<=ce.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function P3(n,e){return new yw(n,e)}var vw=class{constructor(){this.changes=new Gr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var _w=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Ew=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&tl(r.mutation,i,wn.empty(),tt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=le()){let i=Wo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Ju();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Wo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,le()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Wr(),s=el(),a=(function(){return el()})();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof _r)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),tl(d.mutation,l,d.mutation.getFieldMask(),tt.now())):s.set(l.key,wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),t.forEach((l,d)=>a.set(l,new _w(d,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=el(),i=new Be((s,a)=>s-a),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||wn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||le()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=Sx();d.forEach(g=>{if(!o.has(g)){let y=xx(t.get(g),r.get(g));y!==null&&f.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,f))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):wx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(Wo()),a=il,c=o;return s.next(l=>x.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?x.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,le())).next(d=>({batchId:a,changes:Cx(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=Ju();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Ju();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,c=>{let l=(function(f,g){return new Hi(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{s=s.insert(f,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,an.newInvalidDocument(d)))});let a=Ju();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&tl(d.mutation,l,wn.empty(),tt.now()),lg(t,l)&&(a=a.insert(c,l))}),a})}};var Iw=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return x.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:sn(i.createTime)}})(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:N3(i.bundledQuery),readTime:sn(i.readTime)}})(t)),x.resolve()}};var ww=class{constructor(){this.overlays=new Be(z.comparator),this.qr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Wo();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=Wo(),o=t.length+1,s=new z(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Be((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=o.get(l.largestBatchId);d===null&&(d=Wo(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Wo(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return x.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new iw(t,r));let o=this.qr.get(t);o===void 0&&(o=le(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var Dw=class{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var dl=class{constructor(){this.Qr=new mt(Ze.$r),this.Ur=new mt(Ze.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ze(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ze(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new z(new Se([])),r=new Ze(t,e),i=new Ze(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new z(new Se([])),r=new Ze(t,e),i=new Ze(t,e+1),o=le();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ze(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ze=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return z.comparator(e.key,t.key)||ue(e.Yr,t.Yr)}static Kr(e,t){return ue(e.Yr,t.Yr)||z.comparator(e.key,t.key)}};var Tw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mt(Ze.$r)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new nw(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new Ze(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?ID:this.tr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ze(t,0),i=new Ze(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(ue);return t.forEach(i=>{let o=new Ze(i,0),s=new Ze(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),x.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new Ze(new z(o),0),a=new mt(ue);return this.Zr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Yr)),!0)},s),x.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){pe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return x.forEach(t.mutations,i=>{let o=new Ze(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ze(t,0),i=this.Zr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var bw=class{constructor(e){this.ri=e,this.docs=(function(){return new Be(z.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let r=Wr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():an.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Wr(),s=t.path,a=new z(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||MG(NG(d),r)<=0||(i.has(d.key)||lg(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){q(9500)}ii(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Cw(this)}getSize(e){return x.resolve(this.size)}},Cw=class extends vw{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var Sw=class{constructor(e){this.persistence=e,this.si=new Gr(t=>CD(t),SD),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.oi=0,this._i=new dl,this.targetCount=0,this.ai=ll.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),x.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new ll(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.Pr(t),x.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this._i.containsKey(t))}};var $p=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new ED(0),this.li=!1,this.li=!0,this.hi=new Dw,this.referenceDelegate=e(this),this.Pi=new Sw(this),this.indexManager=new fw,this.remoteDocumentCache=(function(i){return new bw(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new hw(t),this.Ii=new Iw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ww,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Tw(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new Aw(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return x.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},Aw=class extends jI{constructor(e){super(),this.currentSequenceNumber=e}},Rw=class n{constructor(e){this.persistence=e,this.Ri=new dl,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw q(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.fi,r=>{let i=z.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,K.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return x.or([()=>x.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Hp=class n{constructor(e,t){this.persistence=e,this.pi=new Gr(r=>OG(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=P3(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return x.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,K.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),x.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=wp(e.data.value)),t}br(e,t,r){return x.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Nw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=le(),i=le();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Mw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Pw=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return IN()?8:xG(ft())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Mw;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(ma()<=ce.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",ya(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),x.resolve()):(ma()<=ce.DEBUG&&j("QueryEngine","Query:",ya(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ma()<=ce.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",ya(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yr(t))):x.resolve())}ys(e,t){if(yP(t))return x.resolve(null);let r=yr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=xp(t,null,"F"),r=yr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=le(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Ds(t,a);return this.Cs(t,l,s,c.readTime)?this.ys(e,xp(t,null,"F")):this.vs(e,l,t,c)}))})))}ws(e,t,r,i){return yP(t)||i.isEqual(K.min())?x.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?x.resolve(null):(ma()<=ce.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ya(t)),this.vs(e,s,t,RG(i,il)).next(a=>a))})}Ds(e,t){let r=new mt(Tx(e));return t.forEach((i,o)=>{lg(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return ma()<=ce.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",ya(t)),this.ps.getDocumentsMatchingQuery(e,t,Jo.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ND="LocalStore",x3=3e8,xw=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Be(ue),this.xs=new Gr(o=>CD(o),SD),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ew(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function k3(n,e,t,r){return new xw(n,e,t,r)}async function Gx(n,e){let t=Q(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=le();for(let l of i){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})}function O3(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,d){let f=l.batch,g=f.keys(),y=x.resolve();return g.forEach(D=>{y=y.next(()=>d.getEntry(c,D)).next(N=>{let A=l.docVersions.get(D);pe(A!==null,48541),N.version.compareTo(A)<0&&(f.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),d.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Wx(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function F3(n,e){let t=Q(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Pi.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Pi.addMatchingKeys(o,d.addedDocuments,f)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Nt.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),(function(N,A,k){return N.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=x3?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(g,y,d)&&a.push(t.Pi.updateTargetData(o,y))});let c=Wr(),l=le();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(L3(o,s,e.documentUpdates).next(d=>{c=d.ks,l=d.qs})),!r.isEqual(K.min())){let d=t.Pi.getLastRemoteSnapshotVersion(o).next(f=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Ms=i,o))}function L3(n,e,t){let r=le(),i=le();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Wr();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(K.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):j(ND,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:s,qs:i}})}function V3(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ID),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function j3(n,e){let t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new ul(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function kw(n,e,t){let r=Q(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ja(s))throw s;j(ND,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function RP(n,e,t){let r=Q(n),i=K.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,l,d){let f=Q(c),g=f.xs.get(d);return g!==void 0?x.resolve(f.Ms.get(g)):f.Pi.getTargetData(l,d)})(r,s,yr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:K.min(),t?o:le())).next(a=>(U3(r,ZG(e),a),{documents:a,Qs:o})))}function U3(n,e,t){let r=n.Os.get(e)||K.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var qp=class{constructor(){this.activeTargetIds=i3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Ow=class{constructor(){this.Mo=new qp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Fw=class{Oo(e){}shutdown(){}};var NP="ConnectivityMonitor",zp=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){j(NP,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){j(NP,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ip=null;function Lw(){return Ip===null?Ip=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ip++,"0x"+Ip.toString(16)}var AI="RestConnection",B3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Vw=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Np?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=Lw(),a=this.zo(e,t.toUriEncodedString());j(AI,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);let{host:l}=new URL(a),d=Si(l);return this.Jo(e,a,c,r,d).then(f=>(j(AI,`Received RPC '${e}' ${s}: `,f),f),f=>{throw Da(AI,`RPC '${e}' ${s} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+La})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=B3[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var jw=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var At="WebChannelConnection",Uw=class extends Vw{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=Lw();return new Promise((a,c)=>{let l=new wI;l.setWithCredentials(!0),l.listenOnce(DI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Yu.NO_ERROR:let f=l.getResponseJson();j(At,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case Yu.TIMEOUT:j(At,`RPC '${e}' ${s} timed out`),c(new O(M.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:let g=l.getStatus();if(j(At,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let D=y?.error;if(D&&D.status&&D.message){let N=(function(k){let H=k.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(H)>=0?H:M.UNKNOWN})(D.status);c(new O(N,D.message))}else c(new O(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new O(M.UNAVAILABLE,"Connection failed."));break;default:q(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{j(At,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(i);j(At,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",d,r,15)})}T_(e,t,r){let i=Lw(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=CI(),a=bI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");j(At,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c);this.I_(f);let g=!1,y=!1,D=new jw({Yo:A=>{y?j(At,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(j(At,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),j(At,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},Zo:()=>f.close()}),N=(A,k,H)=>{A.listen(k,ie=>{try{H(ie)}catch(Fe){setTimeout(()=>{throw Fe},0)}})};return N(f,ga.EventType.OPEN,()=>{y||(j(At,`RPC '${e}' stream ${i} transport opened.`),D.o_())}),N(f,ga.EventType.CLOSE,()=>{y||(y=!0,j(At,`RPC '${e}' stream ${i} transport closed`),D.a_(),this.E_(f))}),N(f,ga.EventType.ERROR,A=>{y||(y=!0,Da(At,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),D.a_(new O(M.UNAVAILABLE,"The operation could not be completed")))}),N(f,ga.EventType.MESSAGE,A=>{if(!y){let k=A.data[0];pe(!!k,16349);let H=k,ie=H?.error||H[0]?.error;if(ie){j(At,`RPC '${e}' stream ${i} received error:`,ie);let Fe=ie.status,Ae=(function(v){let E=Je[v];if(E!==void 0)return Fx(E)})(Fe),we=ie.message;Ae===void 0&&(Ae=M.INTERNAL,we="Unknown error status: "+Fe+" with message "+ie.message),y=!0,D.a_(new O(Ae,we)),f.close()}else j(At,`RPC '${e}' stream ${i} received:`,k),D.u_(k)}}),N(a,TI.STAT_EVENT,A=>{A.stat===vp.PROXY?j(At,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===vp.NOPROXY&&j(At,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.__()},0),D}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function RI(){return typeof document<"u"?document:null}function dg(n){return new cw(n,!0)}var hl=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var MP="PersistentStream",Gp=class{constructor(e,t,r,i,o,s,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hl(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Hr(t.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new O(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return j(MP,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(j(MP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Bw=class extends Gp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=E3(this.serializer,e),r=(function(o){if(!("targetChange"in o))return K.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?K.min():s.readTime?sn(s.readTime):K.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=dw(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=ZI(c)?{documents:w3(o,c)}:{query:D3(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Lx(o,s.resumeToken);let l=uw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(K.min())>0){a.readTime=jp(o,s.snapshotVersion.toTimestamp());let l=uw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=b3(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=dw(this.serializer),t.removeTarget=e,this.q_(t)}},$w=class extends Gp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=I3(e.writeResults,e.commitTime),r=sn(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=dw(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Bx(this.serializer,r))};this.q_(t)}};var Hw=class{},qw=class extends Hw{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new O(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,lw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(M.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,lw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(M.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},zw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hr(t),this.aa=!1):j("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var is="RemoteStore",Gw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{os(this)&&(j(is,"Restarting streams for network reachability change."),await(async function(c){let l=Q(c);l.Ea.add(4),await _l(l),l.Ra.set("Unknown"),l.Ea.delete(4),await hg(l)})(this))})}),this.Ra=new zw(r,i)}};async function hg(n){if(os(n))for(let e of n.da)await e(!0)}async function _l(n){for(let e of n.da)await e(!1)}function Kx(n,e){let t=Q(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),kD(t)?xD(t):Ua(t).O_()&&PD(t,e))}function MD(n,e){let t=Q(n),r=Ua(t);t.Ia.delete(e),r.O_()&&Qx(t,e),t.Ia.size===0&&(r.O_()?r.L_():os(t)&&t.Ra.set("Unknown"))}function PD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ua(n).Y_(e)}function Qx(n,e){n.Va.Ue(e),Ua(n).Z_(e)}function xD(n){n.Va=new aw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ua(n).start(),n.Ra.ua()}function kD(n){return os(n)&&!Ua(n).x_()&&n.Ia.size>0}function os(n){return Q(n).Ea.size===0}function Yx(n){n.Va=void 0}async function $3(n){n.Ra.set("Online")}async function H3(n){n.Ia.forEach((e,t)=>{PD(n,e)})}async function q3(n,e){Yx(n),kD(n)?(n.Ra.ha(e),xD(n)):n.Ra.set("Unknown")}async function z3(n,e,t){if(n.Ra.set("Online"),e instanceof Lp&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){j(is,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wp(n,r)}else if(e instanceof Ia?n.Va.Ze(e):e instanceof Fp?n.Va.st(e):n.Va.tt(e),!t.isEqual(K.min()))try{let r=await Wx(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.Ia.get(l);d&&o.Ia.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.Ia.get(c);if(!d)return;o.Ia.set(c,d.withResumeToken(Nt.EMPTY_BYTE_STRING,d.snapshotVersion)),Qx(o,c);let f=new ul(d.target,c,l,d.sequenceNumber);PD(o,f)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){j(is,"Failed to raise snapshot:",r),await Wp(n,r)}}async function Wp(n,e,t){if(!ja(e))throw e;n.Ea.add(1),await _l(n),n.Ra.set("Offline"),t||(t=()=>Wx(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{j(is,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await hg(n)})}function Jx(n,e){return e().catch(t=>Wp(n,t,e))}async function fg(n){let e=Q(n),t=qi(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ID;for(;G3(e);)try{let i=await V3(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,W3(e,i)}catch(i){await Wp(e,i)}Zx(e)&&Xx(e)}function G3(n){return os(n)&&n.Ta.length<10}function W3(n,e){n.Ta.push(e);let t=qi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Zx(n){return os(n)&&!qi(n).x_()&&n.Ta.length>0}function Xx(n){qi(n).start()}async function K3(n){qi(n).ra()}async function Q3(n){let e=qi(n);for(let t of n.Ta)e.ea(t.mutations)}async function Y3(n,e,t){let r=n.Ta.shift(),i=rw.from(r,e,t);await Jx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await fg(n)}async function J3(n,e){e&&qi(n).X_&&await(async function(r,i){if((function(s){return Ox(s)&&s!==M.ABORTED})(i.code)){let o=r.Ta.shift();qi(r).B_(),await Jx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await fg(r)}})(n,e),Zx(n)&&Xx(n)}async function PP(n,e){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),j(is,"RemoteStore received new credentials");let r=os(t);t.Ea.add(3),await _l(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hg(t)}async function Z3(n,e){let t=Q(n);e?(t.Ea.delete(2),await hg(t)):e||(t.Ea.add(2),await _l(t),t.Ra.set("Unknown"))}function Ua(n){return n.ma||(n.ma=(function(t,r,i){let o=Q(t);return o.sa(),new Bw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:$3.bind(null,n),t_:H3.bind(null,n),r_:q3.bind(null,n),H_:z3.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),kD(n)?xD(n):n.Ra.set("Unknown")):(await n.ma.stop(),Yx(n))})),n.ma}function qi(n){return n.fa||(n.fa=(function(t,r,i){let o=Q(t);return o.sa(),new $w(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:K3.bind(null,n),r_:J3.bind(null,n),ta:Q3.bind(null,n),na:Y3.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await fg(n)):(await n.fa.stop(),n.Ta.length>0&&(j(is,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var Ww=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function OD(n,e){if(Hr("AsyncQueue",`${e}: ${n}`),ja(n))return new O(M.UNAVAILABLE,`${e}: ${n}`);throw n}var Kp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=Ju(),this.sortedSet=new Be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Qp=class{constructor(){this.ga=new Be(z.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):q(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Pa=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Kp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ug(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Kw=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},Qw=class{constructor(){this.queries=xP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Q(t),o=i.queries;i.queries=xP(),o.forEach((s,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new O(M.ABORTED,"Firestore shutting down"))}};function xP(){return new Gr(n=>Dx(n),ug)}async function FD(n,e){let t=Q(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Kw,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=OD(s,`Initialization of query '${ya(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&VD(t)}async function LD(n,e){let t=Q(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function X3(n,e){let t=Q(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&VD(t)}function e6(n,e,t){let r=Q(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function VD(n){n.Ca.forEach(e=>{e.next()})}var Yw,kP;(kP=Yw||(Yw={})).Ma="default",kP.Cache="cache";var fl=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Pa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Pa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yw.Cache}};var Yp=class{constructor(e){this.key=e}},Jp=class{constructor(e){this.key=e}},Jw=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=Tx(e),this.tu=new Kp(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new Qp,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=lg(this.query,f)?f:null,D=!!g&&this.mutatedKeys.has(g.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;g&&y?g.data.isEqual(y.data)?D!==N&&(r.track({type:3,doc:y}),A=!0):this.su(g,y)||(r.track({type:2,doc:y}),A=!0,(c&&this.eu(y,c)>0||l&&this.eu(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(c||l)&&(a=!0)),A&&(y?(s=s.add(y),o=N?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((d,f)=>(function(y,D){let N=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return q(20277,{Rt:A})}};return N(y)-N(D)})(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,l=c!==this.Za;return this.Za=c,s.length!==0||l?{snapshot:new Pa(this.query,e.tu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Jp(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Yp(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=le();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Pa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},jD="SyncEngine",Zw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Xw=class{constructor(e){this.key=e,this.hu=!1}},eD=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Gr(a=>Dx(a),ug),this.Iu=new Map,this.Eu=new Set,this.du=new Be(z.comparator),this.Au=new Map,this.Ru=new dl,this.Vu={},this.mu=new Map,this.fu=ll.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function t6(n,e,t=!0){let r=ok(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await ek(r,e,t,!0),i}async function n6(n,e){let t=ok(n);await ek(t,e,!0,!1)}async function ek(n,e,t,r){let i=await j3(n.localStore,yr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await r6(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Kx(n.remoteStore,i),a}async function r6(n,e,t,r,i){n.pu=(f,g,y)=>(async function(N,A,k,H){let ie=A.view.ru(k);ie.Cs&&(ie=await RP(N.localStore,A.query,!1).then(({documents:w})=>A.view.ru(w,ie)));let Fe=H&&H.targetChanges.get(A.targetId),Ae=H&&H.targetMismatches.get(A.targetId)!=null,we=A.view.applyChanges(ie,N.isPrimaryClient,Fe,Ae);return FP(N,A.targetId,we.au),we.snapshot})(n,f,g,y);let o=await RP(n.localStore,e,!0),s=new Jw(e,o.Qs),a=s.ru(o.documents),c=cl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);FP(n,t,l.au);let d=new Zw(e,t,s);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function i6(n,e,t){let r=Q(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!ug(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await kw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&MD(r.remoteStore,i.targetId),tD(r,i.targetId)}).catch(Va)):(tD(r,i.targetId),await kw(r.localStore,i.targetId,!0))}async function o6(n,e){let t=Q(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),MD(t.remoteStore,r.targetId))}async function s6(n,e,t){let r=f6(n);try{let i=await(function(s,a){let c=Q(s),l=tt.now(),d=a.reduce((y,D)=>y.add(D.key),le()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let D=Wr(),N=le();return c.Ns.getEntries(y,d).next(A=>{D=A,D.forEach((k,H)=>{H.isValidDocument()||(N=N.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,D)).next(A=>{f=A;let k=[];for(let H of a){let ie=l3(H,f.get(H.key).overlayedDocument);ie!=null&&k.push(new _r(H.key,ie,mx(ie.value.mapValue),gt.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,k,a)}).next(A=>{g=A;let k=A.applyToLocalDocumentSet(f,N);return c.documentOverlayCache.saveOverlays(y,A.batchId,k)})}).then(()=>({batchId:g.batchId,changes:Cx(f)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let l=s.Vu[s.currentUser.toKey()];l||(l=new Be(ue)),l=l.insert(a,c),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,t),await El(r,i.changes),await fg(r.remoteStore)}catch(i){let o=OD(i,"Failed to persist write");t.reject(o)}}async function tk(n,e){let t=Q(n);try{let r=await F3(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?pe(s.hu,14607):i.removedDocuments.size>0&&(pe(s.hu,42227),s.hu=!1))}),await El(t,r,e)}catch(r){await Va(r)}}function OP(n,e,t){let r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=Q(s);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.Sa)g.va(a)&&(l=!0)}),l&&VD(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a6(n,e,t){let r=Q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Be(z.comparator);s=s.insert(o,an.newNoDocument(o,K.min()));let a=le().add(o),c=new Op(K.min(),new Map,new Be(ue),s,a);await tk(r,c),r.du=r.du.remove(o),r.Au.delete(e),UD(r)}else await kw(r.localStore,e,!1).then(()=>tD(r,e,t)).catch(Va)}async function c6(n,e){let t=Q(n),r=e.batch.batchId;try{let i=await O3(t.localStore,e);rk(t,r,null),nk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await El(t,i)}catch(i){await Va(i)}}async function u6(n,e,t){let r=Q(n);try{let i=await(function(s,a){let c=Q(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(pe(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})})(r.localStore,e);rk(r,e,t),nk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await El(r,i)}catch(i){await Va(i)}}function nk(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function rk(n,e,t){let r=Q(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function tD(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||ik(n,r)})}function ik(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(MD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),UD(n))}function FP(n,e,t){for(let r of t)r instanceof Yp?(n.Ru.addReference(r.key,e),l6(n,r)):r instanceof Jp?(j(jD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||ik(n,r.key)):q(19791,{wu:r})}function l6(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(j(jD,"New document in limbo: "+t),n.Eu.add(r),UD(n))}function UD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new z(Se.fromString(e)),r=n.fu.next();n.Au.set(r,new Xw(t)),n.du=n.du.insert(t,r),Kx(n.remoteStore,new ul(yr(cg(t.path)),r,"TargetPurposeLimboResolution",ED.ce))}}async function El(n,e,t){let r=Q(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{s.push(r.pu(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let d=l?!l.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);let d=Nw.As(c.targetId,l);o.push(d)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(c,l){let d=Q(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>x.forEach(l,g=>x.forEach(g.Es,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>x.forEach(g.ds,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!ja(f))throw f;j(ND,"Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.Ms.get(g),D=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(D);d.Ms=d.Ms.insert(g,N)}}})(r.localStore,o))}async function d6(n,e){let t=Q(n);if(!t.currentUser.isEqual(e)){j(jD,"User change. New user:",e.toKey());let r=await Gx(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(c=>{c.reject(new O(M.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await El(t,r.Ls)}}function h6(n,e){let t=Q(n),r=t.Au.get(e);if(r&&r.hu)return le().add(r.key);{let i=le(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function ok(n){let e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a6.bind(null,e),e.Pu.H_=X3.bind(null,e.eventManager),e.Pu.yu=e6.bind(null,e.eventManager),e}function f6(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u6.bind(null,e),e}var sk=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=dg(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return k3(this.persistence,new Pw,t.initialUser,this.serializer)}Cu(t){return new $p(Rw.mi,this.serializer)}Du(t){return new Ow}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),nD=class extends sk{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){pe(this.persistence.referenceDelegate instanceof Hp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new mw(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new $p(r=>Hp.mi(r,t),this.serializer)}};var p6=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>OP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=d6.bind(null,this.syncEngine),await Z3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new Qw})()}createDatastore(t){let r=dg(t.databaseInfo.databaseId),i=(function(s){return new Uw(s)})(t.databaseInfo);return(function(s,a,c,l){return new qw(s,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new Gw(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>OP(this.syncEngine,r,0),(function(){return zp.v()?new zp:new Fw})())}createSyncEngine(t,r){return(function(o,s,a,c,l,d,f){let g=new eD(o,s,a,c,l,d);return f&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Q(r);j(is,"RemoteStore shutting down."),i.Ea.add(5),await _l(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var pl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var rD=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new O(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await(async function(i,o){let s=Q(i),a={documents:o.map(f=>Up(s.serializer,f))},c=await s.Ho("BatchGetDocuments",s.serializer.databaseId,Se.emptyPath(),a,o.length),l=new Map;c.forEach(f=>{let g=_3(s.serializer,f);l.set(g.key.toString(),g)});let d=[];return o.forEach(f=>{let g=l.get(f.toString());pe(!!g,55234,{key:f}),d.push(g)}),d})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=z.fromPath(r);this.mutations.push(new kp(i,this.precondition(i)))}),await(async function(r,i){let o=Q(r),s={writes:i.map(a=>Bx(o.serializer,a))};await o.Go("Commit",o.serializer.databaseId,Se.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw q(50498,{Gu:e.constructor.name});t=K.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new O(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(K.min())?gt.exists(!1):gt.updateTime(t):gt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(K.min()))throw new O(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gt.updateTime(t)}return gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var iD=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new hl(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{let e=new rD(this.datastore),t=this.Hu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{let t=this.updateFunction(e);return!vl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Ox(t)}return!1}};var zi="FirestoreClient",oD=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=rl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{j(zi,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(j(zi,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=OD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function NI(n,e){n.asyncQueue.verifyOperationInProgress(),j(zi,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Gx(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function LP(n,e){n.asyncQueue.verifyOperationInProgress();let t=await g6(n);j(zi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>PP(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>PP(e.remoteStore,i)),n._onlineComponents=e}async function g6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j(zi,"Using user provided OfflineComponentProvider");try{await NI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Da("Error using user provided cache. Falling back to memory cache: "+t),await NI(n,new sk)}}else j(zi,"Using default OfflineComponentProvider"),await NI(n,new nD(void 0));return n._offlineComponents}async function BD(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(j(zi,"Using user provided OnlineComponentProvider"),await LP(n,n._uninitializedComponentsProvider._online)):(j(zi,"Using default OnlineComponentProvider"),await LP(n,new p6))),n._onlineComponents}function m6(n){return BD(n).then(e=>e.syncEngine)}function y6(n){return BD(n).then(e=>e.datastore)}async function Zp(n){let e=await BD(n),t=e.eventManager;return t.onListen=t6.bind(null,e.syncEngine),t.onUnlisten=i6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=n6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=o6.bind(null,e.syncEngine),t}function v6(n,e,t={}){let r=new Dn;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,c,l){let d=new pl({next:g=>{d.Nu(),s.enqueueAndForget(()=>LD(o,f));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new O(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?l.reject(new O(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new fl(cg(a.path),d,{includeMetadataChanges:!0,qa:!0});return FD(o,f)})(await Zp(n),n.asyncQueue,e,t,r)),r.promise}function _6(n,e,t={}){let r=new Dn;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,c,l){let d=new pl({next:g=>{d.Nu(),s.enqueueAndForget(()=>LD(o,f)),g.fromCache&&c.source==="server"?l.reject(new O(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new fl(a,d,{includeMetadataChanges:!0,qa:!0});return FD(o,f)})(await Zp(n),n.asyncQueue,e,t,r)),r.promise}function ak(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var VP=new Map;var ck="firestore.googleapis.com",jP=!0,Xp=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new O(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ck,this.ssl=jP}else this.host=e.host,this.ssl=e.ssl??jP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M3)throw new O(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ak(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new O(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new O(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new O(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},xa=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new MI;switch(r.type){case"firstParty":return new OI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=VP.get(t);r&&(j("ComponentProvider","Removing Datastore"),VP.delete(t),r.terminate())})(this),Promise.resolve()}};function uk(n,e,t,r={}){n=Rt(n,xa);let i=Si(e),o=n._getSettings(),s=U(R({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(jf(`https://${a}`),Uf("Firestore",!0)),o.host!==ck&&o.host!==a&&Da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=U(R({},o),{host:a,ssl:i,emulatorOptions:r});if(!lr(c,s)&&(n._setSettings(c),r.mockUserToken)){let l,d;if(typeof r.mockUserToken=="string")l=r.mockUserToken,d=pt.MOCK_USER;else{l=gN(r.mockUserToken,n._app?.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new O(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new pt(f)}n._authCredentials=new PI(new bp(l,d))}}var Kr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},nt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(yl(t,n._jsonSchema))return new n(e,r||null,new z(Se.fromString(t.referencePath)))}};nt._jsonSchemaVersion="firestore/documentReference/1.0",nt._jsonSchema={type:et("string",nt._jsonSchemaVersion),referencePath:et("string")};var Vi=class n extends Kr{constructor(e,t,r){super(e,t,cg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new nt(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function lk(n,e,...t){if(n=Ie(n),GP("collection","path",e),n instanceof xa){let r=Se.fromString(e,...t);return iP(r),new Vi(n,null,r)}{if(!(n instanceof nt||n instanceof Vi))throw new O(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Se.fromString(e,...t));return iP(r),new Vi(n.firestore,null,r)}}function $D(n,e,...t){if(n=Ie(n),arguments.length===1&&(e=rl.newId()),GP("doc","path",e),n instanceof xa){let r=Se.fromString(e,...t);return rP(r),new nt(n,null,new z(r))}{if(!(n instanceof nt||n instanceof Vi))throw new O(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Se.fromString(e,...t));return rP(r),new nt(n.firestore,n instanceof Vi?n.converter:null,new z(r))}}var UP="AsyncQueue",eg=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hl(this,"async_queue_retry"),this._c=()=>{let r=RI();r&&j(UP,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=RI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=RI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Dn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ja(e))throw e;j(UP,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Hr("INTERNAL UNHANDLED ERROR: ",BP(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Ww.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&q(47125,{Pc:BP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function BP(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function $P(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var cn=class extends xa{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new eg,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new eg(e),this._firestoreClient=void 0,await e}}};function dk(n,e){let t=typeof n=="object"?n:jo(),r=typeof n=="string"?n:e||Np,i=ua(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=pN("firestore");o&&uk(i,...o)}return i}function Ba(n){if(n._terminated)throw new O(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||E6(n),n._firestoreClient}function E6(n){let e=n._freezeSettings(),t=(function(i,o,s,a){return new UI(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,ak(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new oD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var $r=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Nt.fromBase64String(e))}catch(t){throw new O(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yl(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};$r._jsonSchemaVersion="firestore/bytes/1.0",$r._jsonSchema={type:et("string",$r._jsonSchemaVersion),bytes:et("string")};var Gi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ka=class{constructor(e){this._methodName=e}};var ji=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(yl(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};ji._jsonSchemaVersion="firestore/geoPoint/1.0",ji._jsonSchema={type:et("string",ji._jsonSchemaVersion),latitude:et("number"),longitude:et("number")};var Ui=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yl(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new O(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Ui._jsonSchemaVersion="firestore/vectorValue/1.0",Ui._jsonSchema={type:et("string",Ui._jsonSchemaVersion),vectorValues:et("object")};var I6=/^__.*__$/,sD=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new _r(e,this.data,this.fieldMask,t,this.fieldTransforms):new ns(e,this.data,t,this.fieldTransforms)}},tg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new _r(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function hk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q(40011,{Ac:n})}}var aD=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(R(R({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hk(this.Ac)&&I6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},cD=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||dg(e)}Cc(e,t,r,i=!1){return new aD({Ac:e,methodName:t,Dc:r,path:on.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function $a(n){let e=n._freezeSettings(),t=dg(n._databaseId);return new cD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pg(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);zD("Data must be an object, but it was:",s,r);let a=fk(r,s),c,l;if(o.merge)c=new wn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let g=lD(e,f,t);if(!s.contains(g))throw new O(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);gk(d,g)||d.push(g)}c=new wn(d),l=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=s.fieldTransforms;return new sD(new Qt(a),c,l)}var ng=class n extends ka{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var uD=class n extends ka{_toFieldTransform(e){return new ew(e.path,new Xo)}isEqual(e){return e instanceof n}};function HD(n,e,t,r){let i=n.Cc(1,e,t);zD("Data must be an object, but it was:",i,r);let o=[],s=Qt.empty();Wi(r,(c,l)=>{let d=GD(e,c,t);l=Ie(l);let f=i.yc(d);if(l instanceof ng)o.push(d);else{let g=Il(l,f);g!=null&&(o.push(d),s.set(d,g))}});let a=new wn(o);return new tg(s,a,i.fieldTransforms)}function qD(n,e,t,r,i,o){let s=n.Cc(1,e,t),a=[lD(e,r,t)],c=[i];if(o.length%2!=0)throw new O(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(lD(e,o[g])),c.push(o[g+1]);let l=[],d=Qt.empty();for(let g=a.length-1;g>=0;--g)if(!gk(l,a[g])){let y=a[g],D=c[g];D=Ie(D);let N=s.yc(y);if(D instanceof ng)l.push(y);else{let A=Il(D,N);A!=null&&(l.push(y),d.set(y,A))}}let f=new wn(l);return new tg(d,f,s.fieldTransforms)}function w6(n,e,t,r=!1){return Il(t,n.Cc(r?4:3,e))}function Il(n,e){if(pk(n=Ie(n)))return zD("Unsupported field value:",e,n),fk(n,e);if(n instanceof ka)return(function(r,i){if(!hk(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=Il(a,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return o3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=tt.fromDate(r);return{timestampValue:jp(i.serializer,o)}}if(r instanceof tt){let o=new tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jp(i.serializer,o)}}if(r instanceof ji)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $r)return{bytesValue:Lx(i.serializer,r._byteString)};if(r instanceof nt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:RD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ui)return(function(s,a){return{mapValue:{fields:{[DD]:{stringValue:TD},[ba]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return AD(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${sg(r)}`)})(n,e)}function fk(n,e){let t={};return cx(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(n,(r,i)=>{let o=Il(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function pk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof tt||n instanceof ji||n instanceof $r||n instanceof nt||n instanceof ka||n instanceof Ui)}function zD(n,e,t){if(!pk(t)||!WP(t)){let r=sg(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function lD(n,e,t){if((e=Ie(e))instanceof Gi)return e._internalPath;if(typeof e=="string")return GD(n,e);throw rg("Field path arguments must be of type string or ",n,!1,void 0,t)}var D6=new RegExp("[~\\*/\\[\\]]");function GD(n,e,t){if(e.search(D6)>=0)throw rg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gi(...e.split("."))._internalPath}catch{throw rg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new O(M.INVALID_ARGUMENT,a+n+c)}function gk(n,e){return n.some(t=>t.isEqual(e))}var Oa=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new dD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(gg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},dD=class extends Oa{data(){return super.data()}};function gg(n,e){return typeof e=="string"?GD(n,e):e instanceof Gi?e._internalPath:e._delegate._internalPath}function mk(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gl=class{},ml=class extends gl{};function yk(n,e,...t){let r=[];e instanceof gl&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof hD).length,a=o.filter(c=>c instanceof ig).length;if(s>1||s>0&&a>0)throw new O(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var ig=class n extends ml{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Ik(e._query,t),new Kr(e.firestore,e.converter,XI(e._query,t))}_parse(e){let t=$a(e.firestore);return(function(o,s,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new O(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){qP(f,d);let D=[];for(let N of f)D.push(HP(c,o,N));g={arrayValue:{values:D}}}else g=HP(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||qP(f,d),g=w6(a,s,f,d==="in"||d==="not-in");return Xe.create(l,d,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function vk(n,e,t){let r=e,i=gg("where",n);return ig._create(i,r,t)}var hD=class n extends gl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Wn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)Ik(s,c),s=XI(s,c)})(e._query,t),new Kr(e.firestore,e.converter,XI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var fD=class n extends ml{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new O(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zo(o,s)})(e._query,this._field,this._direction);return new Kr(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Hi(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function _k(n,e="asc"){let t=e,r=gg("orderBy",n);return fD._create(r,t)}var pD=class n extends ml{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Kr(e.firestore,e.converter,xp(e._query,this._limit,this._limitType))}};function Ek(n){return AG("limit",n),pD._create("limit",n,"F")}function HP(n,e,t){if(typeof(t=Ie(t))=="string"){if(t==="")throw new O(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wx(e)&&t.indexOf("/")!==-1)throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Se.fromString(t));if(!z.isDocumentKey(r))throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dP(n,new z(r))}if(t instanceof nt)return dP(n,t._key);throw new O(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sg(t)}.`)}function qP(n,e){if(!Array.isArray(n)||n.length===0)throw new O(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ik(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new O(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var og=class{convertValue(e,t="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw q(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Wi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[ba].arrayValue?.values?.map(r=>ke(r.doubleValue));return new Ui(t)}convertGeoPoint(e){return new ji(ke(e.latitude),ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ag(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sl(e));default:return null}}convertTimestamp(e){let t=qr(e);return new tt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Se.fromString(e);pe(qx(r),9688,{name:e});let i=new Mp(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(t)||Hr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function mg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var gD=class extends og{constructor(e){super(),this.firestore=e}convertBytes(e){return new $r(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,t)}};var Fi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Bi=class n extends Oa{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new wa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(gg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Bi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bi._jsonSchema={type:et("string",Bi._jsonSchemaVersion),bundleSource:et("string","DocumentSnapshot"),bundleName:et("string"),bundle:et("string")};var wa=class extends Bi{data(e={}){return super.data(e)}},Qo=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wa(this._firestore,this._userDataWriter,r.key,r,new Fi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new wa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new wa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:T6(a.type),doc:c,oldIndex:l,newIndex:d}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function T6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return q(61501,{type:n})}}function wk(n){n=Rt(n,nt);let e=Rt(n.firestore,cn);return v6(Ba(e),n._key).then(t=>Ak(e,n,t))}Qo._jsonSchemaVersion="firestore/querySnapshot/1.0",Qo._jsonSchema={type:et("string",Qo._jsonSchemaVersion),bundleSource:et("string","QuerySnapshot"),bundleName:et("string"),bundle:et("string")};var Fa=class extends og{constructor(e){super(),this.firestore=e}convertBytes(e){return new $r(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new nt(this.firestore,null,t)}};function Dk(n){n=Rt(n,Kr);let e=Rt(n.firestore,cn),t=Ba(e),r=new Fa(e);return mk(n._query),_6(t,n._query).then(i=>new Qo(e,r,n,i))}function Tk(n,e,t){n=Rt(n,nt);let r=Rt(n.firestore,cn),i=mg(n.converter,e,t);return wl(r,[pg($a(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,gt.none())])}function bk(n,e,t,...r){n=Rt(n,nt);let i=Rt(n.firestore,cn),o=$a(i),s;return s=typeof(e=Ie(e))=="string"||e instanceof Gi?qD(o,"updateDoc",n._key,e,t,r):HD(o,"updateDoc",n._key,e),wl(i,[s.toMutation(n._key,gt.exists(!0))])}function Ck(n){return wl(Rt(n.firestore,cn),[new rs(n._key,gt.none())])}function Sk(n,e){let t=Rt(n.firestore,cn),r=$D(n),i=mg(n.converter,e);return wl(t,[pg($a(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,gt.exists(!1))]).then(()=>r)}function WD(n,...e){n=Ie(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||$P(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if($P(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let o,s,a;if(n instanceof nt)s=Rt(n.firestore,cn),a=cg(n._key.path),o={next:c=>{e[r]&&e[r](Ak(s,n,c))},error:e[r+1],complete:e[r+2]};else{let c=Rt(n,Kr);s=Rt(c.firestore,cn),a=c._query;let l=new Fa(s);o={next:d=>{e[r]&&e[r](new Qo(s,l,c,d))},error:e[r+1],complete:e[r+2]},mk(n._query)}return(function(l,d,f,g){let y=new pl(g),D=new fl(d,y,f);return l.asyncQueue.enqueueAndForget(async()=>FD(await Zp(l),D)),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(async()=>LD(await Zp(l),D))}})(Ba(s),a,i,o)}function wl(n,e){return(function(r,i){let o=new Dn;return r.asyncQueue.enqueueAndForget(async()=>s6(await m6(r),i,o)),o.promise})(Ba(n),e)}function Ak(n,e,t){let r=t.docs.get(e._key),i=new Fa(n);return new Bi(n,i,e._key,r,new Fi(t.hasPendingWrites,t.fromCache),e.converter)}var b6={maxAttempts:5};var mD=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$a(e)}set(e,t,r){this._verifyNotCommitted();let i=Li(e,this._firestore),o=mg(i.converter,t,r),s=pg(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,gt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Li(e,this._firestore),s;return s=typeof(t=Ie(t))=="string"||t instanceof Gi?qD(this._dataReader,"WriteBatch.update",o._key,t,r,i):HD(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,gt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Li(e,this._firestore);return this._mutations=this._mutations.concat(new rs(t._key,gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Li(n,e){if((n=Ie(n)).firestore!==e)throw new O(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var yD=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$a(e)}get(e){let t=Li(e,this._firestore),r=new gD(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return q(24041);let o=i[0];if(o.isFoundDocument())return new Oa(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Oa(this._firestore,r,t._key,null,t.converter);throw q(18433,{doc:o})})}set(e,t,r){let i=Li(e,this._firestore),o=mg(i.converter,t,r),s=pg(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=Li(e,this._firestore),s;return s=typeof(t=Ie(t))=="string"||t instanceof Gi?qD(this._dataReader,"Transaction.update",o._key,t,r,i):HD(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=Li(e,this._firestore);return this._transaction.delete(t._key),this}};var vD=class extends yD{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Li(e,this._firestore),r=new Fa(this._firestore);return super.get(e).then(i=>new Bi(this._firestore,r,t._key,i._document,new Fi(!1,!1),t.converter))}};function Rk(n,e,t){n=Rt(n,cn);let r=R(R({},b6),t);return(function(o){if(o.maxAttempts<1)throw new O(M.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let c=new Dn;return o.asyncQueue.enqueueAndForget(async()=>{let l=await y6(o);new iD(o.asyncQueue,l,a,s,c).ju()}),c.promise})(Ba(n),i=>e(new vD(n,i)),r)}function $e(){return new uD("serverTimestamp")}function Nk(n){return Ba(n=Rt(n,cn)),new mD(n,e=>wl(n,e))}(function(e,t=!0){(function(i){La=i})(Ri),zn(new Bt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new cn(new xI(r.getProvider("auth-internal")),new FI(s,r.getProvider("app-check-internal")),(function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mp(l.options.projectId,d)})(s,i),s);return o=R({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ue(eP,tP,e),Ue(eP,tP,"esm2020")})();var yg=function(){return yg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},yg.apply(this,arguments)};var A6={includeMetadataChanges:!1};function KD(n,e){return e===void 0&&(e=A6),new ne(function(t){var r=WD(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Mk(n){return KD(n,{includeMetadataChanges:!0})}function Pk(n,e){return e===void 0&&(e={}),Mk(n).pipe(te(function(t){return QD(t,e)}))}function QD(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:yg(yg({},r),(t={},t[e.idField]=n.id,t))}function xk(n){return KD(n,{includeMetadataChanges:!0}).pipe(te(function(e){return e.docs}))}function kk(n,e){return e===void 0&&(e={}),xk(n).pipe(te(function(t){return t.map(function(r){return QD(r,e)})}))}var $t=class{constructor(e){return e}},Ok="firestore",YD=class{constructor(){return da(Ok)}};var JD=new B("angularfire2.firestore-instances");function R6(n,e){let t=Vu(Ok,n,e);return t&&new $t(t)}function N6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new $t(r)}}var M6={provide:YD,deps:[[new en,JD]]},P6={provide:$t,useFactory:R6,deps:[[new en,JD],Or]};function wle(n,...e){return Ue("angularfire",Ni.full,"fst"),Rn([P6,M6,{provide:JD,useFactory:N6(n),multi:!0,deps:[xe,qe,Mi,Bo,[new en,Qu],[new en,ha],...e]}])}var Ki=be(kk,!0);var vg=be(Pk,!0);var ss=be(Sk,!0,2);var Ge=be(lk,!0,2);var Ha=be(Ck,!0,2);var He=be($D,!0,2);var Dle=be(wk,!0);var Qr=be(Dk,!0);var Tle=be(dk,!0);var Tn=be(Ek,!0,2);var Qi=be(_k,!0,2),un=be(yk,!0,2);var ZD=be(Rk,!0),Fk=be(Tk,!0,2);var Yi=be(bk,!0,2);var Ji=be(vk,!0,2),XD=be(Nk,!0,2);function Zi(n){if(!n)return"";if(typeof n=="object"&&typeof n.toDate=="function"){let t=n.toDate();return Dl(t)}if(n instanceof Date)return Dl(n);if(typeof n=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(n))return n;let e=new Date(n);return isNaN(e.getTime())?"":Dl(e)}function Dl(n){let e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`}function Cle(n){if(!n)return"";let[e,t,r]=n.split("-").map(Number);return!e||!t||!r?n:new Intl.DateTimeFormat("pt-BR").format(new Date(e,t-1,r))}function Er(n){if(!n)return null;let[e,t,r]=n.split("-").map(Number);return!e||!t||!r?null:new Date(e,t-1,r)}function _g(n,e="America/Sao_Paulo"){return new Intl.DateTimeFormat("en-CA",{timeZone:e,year:"numeric",month:"2-digit",day:"2-digit"}).format(n)}function Lk(n,e,t="America/Sao_Paulo"){let r=_g(n,t),i=_g(e,t),[o,s,a]=r.split("-").map(Number),[c,l,d]=i.split("-").map(Number),f=Date.UTC(o,s-1,a),y=Date.UTC(c,l-1,d)-f;return y<=0?0:Math.floor(y/(1e3*60*60*24))}var Eg=class n{firestore=P($t);list$(e){let t=Ge(this.firestore,`users/${e}/categories`),r=un(t,Qi("name"),Tn(1e3));return Ki(r,{idField:"id"}).pipe(te(i=>i.map(o=>U(R({},o),{type:o.type??"expense"}))))}async add(e,t){let r=Ge(this.firestore,`users/${e}/categories`);await ss(r,U(R({},t),{createdAt:$e()}))}async update(e,t,r){let i=He(this.firestore,`users/${e}/categories/${t}`);await Yi(i,R({},r))}async delete(e,t){let r=Ge(this.firestore,`users/${e}/transactions`),i=un(r,Ji("categoryId","==",t),Tn(1));if(!(await Qr(i)).empty)throw new Error("Categoria em uso em lan\xE7amentos. N\xE3o \xE9 poss\xEDvel excluir.");let s=He(this.firestore,`users/${e}/categories/${t}`);await Ha(s)}async ensureDefaultCategories(e){let t=Ge(this.firestore,`users/${e}/categories`);(await Qr(un(t,Tn(1)))).empty}async ensureCategory(e,t){let r=Ge(this.firestore,`users/${e}/categories`),i=un(r,Ji("name","==",t.name),Ji("type","==",t.type),Tn(1)),o=await Qr(i);return o.empty?(await ss(r,{name:t.name,type:t.type,color:t.color??"#94a3b8",createdAt:$e()})).id:o.docs[0].id}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var Vk=class n{constructor(e,t,r){this.auth=e;this.firestore=t;this.categoriesService=r;this.user$=KM(this.auth).pipe(ws({bufferSize:1,refCount:!0})),this.profile$=this.user$.pipe(Gt(i=>i?vg(He(this.firestore,`users/${i.uid}`)):re(null)),te(i=>i?.birthDate?U(R({},i),{age:this.calculateAge(i.birthDate)}):i),ws({bufferSize:1,refCount:!0}))}user$;profile$;async register(e,t,r){let i=await QM(this.auth,e,t),o=He(this.firestore,`users/${i.user.uid}`);return await Fk(o,U(R({uid:i.user.uid,email:e},r),{createdAt:$e(),updatedAt:$e()})),await this.categoriesService.ensureDefaultCategories(i.user.uid),i.user}login(e,t){return Te(YM(this.auth,e,t)).pipe(Gt(r=>Te(this.categoriesService.ensureDefaultCategories(r.user.uid)).pipe(te(()=>r.user))))}logout(){return Te(JM(this.auth))}async updateProfile(e){let t=this.auth.currentUser;if(!t)throw new Error("Usu\xE1rio n\xE3o autenticado");let r=He(this.firestore,`users/${t.uid}`);await Yi(r,U(R({},e),{updatedAt:$e()}))}async reauthenticate(e){let t=this.auth.currentUser;if(!t)throw new Error("USER_NOT_LOGGED");let r=t.email;if(!r)throw new Error("USER_NO_EMAIL");let i=lp.credential(r,e);await dp(t,i)}async requestEmailChange(e,t){let r=this.auth.currentUser;if(!r)throw new Error("USER_NOT_LOGGED");if(!e||!e.includes("@"))throw new Error("INVALID_EMAIL");await this.reauthenticate(t),await hp(r,e)}async updateUserPassword(e,t){let r=this.auth.currentUser;if(!r)throw new Error("USER_NOT_LOGGED");if(!e||e.length<6)throw new Error("WEAK_PASSWORD");await this.reauthenticate(t),await fp(r,e)}async updateEmailSecure(e,t){await this.requestEmailChange(t,e)}async updatePasswordSecure(e,t){await this.updateUserPassword(t,e)}calculateAge(e){let t=Er(e);if(!t)return 0;let r=new Date,i=r.getFullYear()-t.getFullYear(),o=r.getMonth()-t.getMonth();return(o<0||o===0&&r.getDate()<t.getDate())&&i--,i}static \u0275fac=function(t){return new(t||n)(Y(Go),Y($t),Y(Eg))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var Qk=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)($(vn),$(Ct))};static \u0275dir=he({type:n})}return n})(),Nl=(()=>{class n extends Qk{static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=he({type:n,features:[ze]})}return n})(),cs=new B(""),O6={provide:cs,useExisting:dt(()=>F6),multi:!0},F6=(()=>{class n extends Nl{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=he({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Vn("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[jt([O6]),ze]})}return n})(),L6={provide:cs,useExisting:dt(()=>Yk),multi:!0};function V6(){let n=_n()?_n().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var j6=new B(""),Yk=(()=>{class n extends Qk{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!V6())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)($(vn),$(Ct),$(j6,8))};static \u0275dir=he({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Vn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[jt([L6]),ze]})}return n})();function oT(n){return n==null||sT(n)===0}function sT(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var eo=new B(""),Ml=new B(""),U6=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,jk=class{static min(e){return Jk(e)}static max(e){return Zk(e)}static required(e){return Xk(e)}static requiredTrue(e){return B6(e)}static email(e){return $6(e)}static minLength(e){return H6(e)}static maxLength(e){return q6(e)}static pattern(e){return z6(e)}static nullValidator(e){return wg()}static compose(e){return oO(e)}static composeAsync(e){return aO(e)}};function Jk(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Zk(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Xk(n){return oT(n.value)?{required:!0}:null}function B6(n){return n.value===!0?null:{required:!0}}function $6(n){return oT(n.value)||U6.test(n.value)?null:{email:!0}}function H6(n){return e=>{let t=e.value?.length??sT(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function q6(n){return e=>{let t=e.value?.length??sT(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function z6(n){if(!n)return wg;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(oT(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function wg(n){return null}function eO(n){return n!=null}function tO(n){return Nr(n)?Te(n):n}function nO(n){let e={};return n.forEach(t=>{e=t!=null?R(R({},e),t):e}),Object.keys(e).length===0?null:e}function rO(n,e){return e.map(t=>t(n))}function G6(n){return!n.validate}function iO(n){return n.map(e=>G6(e)?e:t=>e.validate(t))}function oO(n){if(!n)return null;let e=n.filter(eO);return e.length==0?null:function(t){return nO(rO(t,e))}}function sO(n){return n!=null?oO(iO(n)):null}function aO(n){if(!n)return null;let e=n.filter(eO);return e.length==0?null:function(t){let r=rO(t,e).map(tO);return xm(r).pipe(te(nO))}}function cO(n){return n!=null?aO(iO(n)):null}function Uk(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function uO(n){return n._rawValidators}function lO(n){return n._rawAsyncValidators}function eT(n){return n?Array.isArray(n)?n:[n]:[]}function Dg(n,e){return Array.isArray(n)?n.includes(e):n===e}function Bk(n,e){let t=eT(e);return eT(n).forEach(i=>{Dg(t,i)||t.push(i)}),t}function $k(n,e){return eT(e).filter(t=>!Dg(n,t))}var Tg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=sO(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ln=class extends Tg{name;get formDirective(){return null}get path(){return null}},as=class extends Tg{_parent=null;name=null;valueAccessor=null},bg=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var ade=(()=>{class n extends bg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)($(as,2))};static \u0275dir=he({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ru("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ze]})}return n})(),cde=(()=>{class n extends bg{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)($(ln,10))};static \u0275dir=he({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ru("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[ze]})}return n})();var Tl="VALID",Ig="INVALID",qa="PENDING",bl="DISABLED",Xi=class{},Cg=class extends Xi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Cl=class extends Xi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Sl=class extends Xi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},za=class extends Xi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},tT=class extends Xi{source;constructor(e){super(),this.source=e}},Rl=class extends Xi{source;constructor(e){super(),this.source=e}};function aT(n){return(Ng(n)?n.validators:n)||null}function W6(n){return Array.isArray(n)?sO(n):n||null}function cT(n,e){return(Ng(e)?e.asyncValidators:n)||null}function K6(n){return Array.isArray(n)?cO(n):n||null}function Ng(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function dO(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new L(1e3,"");if(!r[t])throw new L(1001,"")}function hO(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new L(1002,"")})}var Ga=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return je(this.statusReactive)}set status(e){je(()=>this.statusReactive.set(e))}_status=Gs(()=>this.statusReactive());statusReactive=Xt(void 0);get valid(){return this.status===Tl}get invalid(){return this.status===Ig}get pending(){return this.status==qa}get disabled(){return this.status===bl}get enabled(){return this.status!==bl}errors;get pristine(){return je(this.pristineReactive)}set pristine(e){je(()=>this.pristineReactive.set(e))}_pristine=Gs(()=>this.pristineReactive());pristineReactive=Xt(!0);get dirty(){return!this.pristine}get touched(){return je(this.touchedReactive)}set touched(e){je(()=>this.touchedReactive.set(e))}_touched=Gs(()=>this.touchedReactive());touchedReactive=Xt(!1);get untouched(){return!this.touched}_events=new Pe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Bk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Bk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($k(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($k(e,this._rawAsyncValidators))}hasValidator(e){return Dg(this._rawValidators,e)}hasAsyncValidator(e){return Dg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(U(R({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Sl(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Sl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(U(R({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Cl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Cl(!0,r))}markAsPending(e={}){this.status=qa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new za(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(U(R({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=bl,this.errors=null,this._forEachChild(i=>{i.disable(U(R({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cg(this.value,r)),this._events.next(new za(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(U(R({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Tl,this._forEachChild(r=>{r.enable(U(R({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(U(R({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tl||this.status===qa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cg(this.value,t)),this._events.next(new za(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(U(R({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bl:Tl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=qa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=tO(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new za(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ve,this.statusChanges=new Ve}_calculateStatus(){return this._allControlsDisabled()?bl:this.errors?Ig:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qa)?qa:this._anyControlsHaveStatus(Ig)?Ig:Tl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Cl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Sl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ng(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=W6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=K6(this._rawAsyncValidators)}},Sg=class extends Ga{constructor(e,t,r){super(aT(t),cT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){hO(this,!0,e),Object.keys(e).forEach(r=>{dO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,U(R({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Rl(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var nT=class extends Sg{};var Mg=new B("",{factory:()=>Pg}),Pg="always";function xg(n,e){return[...e.path,n]}function rT(n,e,t=Pg){uT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Y6(n,e),Z6(n,e),J6(n,e),Q6(n,e)}function Hk(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Rg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ag(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Q6(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function uT(n,e){let t=uO(n);e.validator!==null?n.setValidators(Uk(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=lO(n);e.asyncValidator!==null?n.setAsyncValidators(Uk(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Ag(e._rawValidators,i),Ag(e._rawAsyncValidators,i)}function Rg(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=uO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=lO(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Ag(e._rawValidators,r),Ag(e._rawAsyncValidators,r),t}function Y6(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&fO(n,e)})}function J6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&fO(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function fO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Z6(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function X6(n,e){n==null,uT(n,e)}function eW(n,e){return Rg(n,e)}function pO(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function tW(n){return Object.getPrototypeOf(n.constructor)===Nl}function nW(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function gO(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Yk?t=o:tW(o)?r=o:i=o}),i||r||t||null}function rW(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function qk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function zk(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Al=class extends Ga{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(aT(t),cT(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ng(t)&&(t.nonNullable||t.initialValueIsDefault)&&(zk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Rl(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){zk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var iW=n=>n instanceof Al,oW=(()=>{class n extends ln{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return xg(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=he({type:n,standalone:!1,features:[ze]})}return n})();var sW={provide:as,useExisting:dt(()=>aW)},Gk=Promise.resolve(),aW=(()=>{class n extends as{_changeDetectorRef;callSetDisabledState;control=new Al;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ve;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=gO(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),pO(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){rT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Gk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&wi(r);Gk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?xg(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)($(ln,9),$(eo,10),$(Ml,10),$(cs,10),$(ar,8),$(Mg,8))};static \u0275dir=he({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[jt([sW]),ze,yn]})}return n})();var lde=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=he({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),cW={provide:cs,useExisting:dt(()=>uW),multi:!0},uW=(()=>{class n extends Nl{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=he({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Vn("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[jt([cW]),ze]})}return n})();var iT=class extends Ga{constructor(e,t,r){super(aT(t),cT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){hO(this,!1,e),e.forEach((r,i)=>{dO(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],U(R({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Rl(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var mO=(()=>{class n extends ln{callSetDisabledState;get submitted(){return je(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Gs(()=>this._submittedReactive());_submittedReactive=Xt(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(Rg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return rT(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Hk(t.control||null,t,!1),rW(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,nW(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new tT(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Hk(r||null,t),iW(i)&&(rT(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);X6(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&eW(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){uT(this.form,this),this._oldForm&&Rg(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)($(eo,10),$(Ml,10),$(Mg,8))};static \u0275dir=he({type:n,features:[ze,yn]})}return n})();var yO=new B("");var lW={provide:ln,useExisting:dt(()=>vO)},vO=(()=>{class n extends oW{name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){EO(this._parent)}static \u0275fac=function(r){return new(r||n)($(ln,13),$(eo,10),$(Ml,10))};static \u0275dir=he({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[jt([lW]),ze]})}return n})(),dW={provide:ln,useExisting:dt(()=>_O)},_O=(()=>{class n extends ln{_parent;name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){EO(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return xg(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||n)($(ln,13),$(eo,10),$(Ml,10))};static \u0275dir=he({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[jt([dW]),ze]})}return n})();function EO(n){return!(n instanceof vO)&&!(n instanceof mO)&&!(n instanceof _O)}var hW={provide:as,useExisting:dt(()=>fW)},fW=(()=>{class n extends as{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ve;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=gO(this,o)}ngOnChanges(t){this._added||this._setUpControl(),pO(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return xg(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)($(ln,13),$(eo,10),$(Ml,10),$(cs,10),$(yO,8))};static \u0275dir=he({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[jt([hW]),ze,yn]})}return n})();var pW={provide:ln,useExisting:dt(()=>gW)},gW=(()=>{class n extends mO{form=null;ngSubmit=new Ve;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=he({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Vn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[jt([pW]),ze]})}return n})(),mW={provide:cs,useExisting:dt(()=>wO),multi:!0};function IO(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function yW(n){return n.split(":")[0]}var wO=(()=>{class n extends Nl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=P(Ei).injector;destroyRef=P(xn);cdr=P(ar);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Rh({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=IO(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=yW(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=he({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Vn("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[jt([mW]),ze]})}return n})(),dde=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(IO(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)($(Ct),$(vn),$(wO,9))};static \u0275dir=he({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),vW={provide:cs,useExisting:dt(()=>DO),multi:!0};function Wk(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function _W(n){return n.split(":")[0]}var DO=(()=>{class n extends Nl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=_W(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=he({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Vn("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[jt([vW]),ze]})}return n})(),hde=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Wk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Wk(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)($(Ct),$(vn),$(DO,9))};static \u0275dir=he({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function TO(n){return typeof n=="number"?n:parseFloat(n)}var lT=(()=>{class n{_validator=wg;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):wg,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=he({type:n,features:[yn]})}return n})(),EW={provide:eo,useExisting:dt(()=>IW),multi:!0},IW=(()=>{class n extends lT{max;inputName="max";normalizeInput=t=>TO(t);createValidator=t=>Zk(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=he({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ii("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[jt([EW]),ze]})}return n})(),wW={provide:eo,useExisting:dt(()=>DW),multi:!0},DW=(()=>{class n extends lT{min;inputName="min";normalizeInput=t=>TO(t);createValidator=t=>Jk(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=he({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Ii("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[jt([wW]),ze]})}return n})(),TW={provide:eo,useExisting:dt(()=>bW),multi:!0};var bW=(()=>{class n extends lT{required;inputName="required";normalizeInput=wi;createValidator=t=>Xk;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=he({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Ii("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[jt([TW]),ze]})}return n})();var bO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=sr({type:n});static \u0275inj=An({})}return n})();function Kk(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var fde=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return Kk(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Sg(i,o)}record(t,r=null){let i=this._reduceControls(t);return new nT(i,r)}control(t,r,i){let o={};return this.useNonNullable?(Kk(r)?o=r:(o.validators=r,o.asyncValidators=i),new Al(t,U(R({},o),{nonNullable:!0}))):new Al(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new iT(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Al)return t;if(t instanceof Ga)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pde=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Mg,useValue:t.callSetDisabledState??Pg}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=sr({type:n});static \u0275inj=An({imports:[bO]})}return n})(),gde=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:yO,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Mg,useValue:t.callSetDisabledState??Pg}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=sr({type:n});static \u0275inj=An({imports:[bO]})}return n})();var CO=class n{firestore=P($t);list$(e){let t=Ge(this.firestore,`users/${e}/accounts`),r=un(t,Qi("name"),Tn(1e3));return Ki(r,{idField:"id"}).pipe(te(i=>i.map(o=>U(R({},o),{initialBalance:Number(o.initialBalance??0),type:o.type??"bank"}))))}async add(e,t){let r=Ge(this.firestore,`users/${e}/accounts`);await ss(r,U(R({},t),{type:t.type??"bank",initialBalance:Number(t.initialBalance??0),createdAt:$e()}))}async update(e,t,r){let i=He(this.firestore,`users/${e}/accounts/${t}`);await Yi(i,R(R({},r),r.initialBalance!==void 0?{initialBalance:Number(r.initialBalance)}:{}))}async delete(e,t){let r=Ge(this.firestore,`users/${e}/transactions`),i=un(r,Ji("accountId","==",t),Tn(1));if(!(await Qr(i)).empty)throw new Error("Conta em uso em lan\xE7amentos. N\xE3o \xE9 poss\xEDvel excluir.");let s=He(this.firestore,`users/${e}/accounts/${t}`);await Ha(s)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var kg={production:!1,firebase:{apiKey:"AIzaSyBrtk-IgKjO9M01grt7g-N0Wp-vrrtBK0k",authDomain:"gestaogastos-bc99d.firebaseapp.com",projectId:"gestaogastos-bc99d",storageBucket:"gestaogastos-bc99d.firebasestorage.app",messagingSenderId:"481547974744",appId:"1:481547974744:web:8ea510a9165babbda8f22d",measurementId:"G-SSQPTQEE46"}};var Og=class n{calculate(e,t){let r=this.getPreAppYield(e),i=this.getInitialValue(e),o=this.getStartDate(e),s=this.getReferenceDate(t),a=Dl(s);if(!o||i<=0)return this.buildResult(e,r,i,i,0,0,a,this.isIndexMode(e.yieldMode),!1);let c=this.daysBetween(o,s),l=this.monthsBetween(o,s);if(c<=0)return this.buildResult(e,r,i,i,0,0,a,!1,!1);if(e.yieldMode==="manual_monthly"||e.yieldMode==="manual_yearly"){let y=this.calculateManual(i,e.yieldMode,Number(e.manualRate??0),e.compounding??"monthly",c,l),D=y-i;return this.buildResult(e,r,i,y,D,i>0?D/i*100:0,a,!1,!1)}let d=e.yieldMode==="cdi_percent"?t.cdi:t.selic,f=Number(d?.value??0);if(d&&f>0){let y=this.calculateIndex(i,e.yieldMode,e.cdiPercent??100,f,e.compounding??"daily",c,l),D=y-i;return this.buildResult(e,r,i,y,D,i>0?D/i*100:0,d.date??a,!1,!1)}let g=Number(e.manualRate??0);if(g>0){let y=this.calculateManual(i,"manual_monthly",g,e.compounding??"monthly",c,l),D=y-i;return this.buildResult(e,r,i,y,D,i>0?D/i*100:0,a,!0,!0)}return this.buildResult(e,r,i,i,0,0,null,!0,!1)}summarize(e,t){let r=e.filter(g=>g.status==="active"),i=r.map(g=>this.calculate(g,t)),o=this.sum(r.map(g=>Number(g.principalBase??0))),s=this.sum(i.map(g=>g.totalEstimated)),a=this.sum(i.map(g=>g.totalYield)),c=this.sum(r.map(g=>{let y=Number(g.totalInvestedToDate??0);if(y>0)return y;let D=this.getPreAppYield(g);return this.getPrincipalBaseForReturn(g,D)})),l=c>0?a/c*100:0,d=this.pickLatestDate(i.map(g=>g.updatedAt)),f=i.some(g=>g.indexMissing);return{totalInvested:o,totalEstimated:s,totalYield:a,totalYieldPercent:l,updatedAt:d,indexMissing:f,count:r.length}}calculateRescueIR(e){let t=Math.max(0,Number(e.rescueAmount??0)),r=Math.max(0,Number(e.currentValue??0)),i=Math.max(0,Number(e.principalBase??0)),o=Math.max(r-i,0),s=r>0?Math.min(Math.max(t/r,0),1):0,a=o>0?o*s:0,c=typeof e.investmentStartDate=="string"?Er(e.investmentStartDate):e.investmentStartDate instanceof Date?e.investmentStartDate:null,l=e.referenceDate?new Date(e.referenceDate):new Date,d=c?this.daysBetween(c,l):0,f=o>0?this.resolveIrRate(d):0,g=Math.max(0,a*f),y=Math.max(0,t-g);return{grossAmount:t,profitPortion:a,irRate:f,irValue:g,netAmount:y}}getInitialValue(e){let t=Number(e.principalBase??0),r=this.getPreAppYield(e);return t+r}getPreAppYield(e){return e.hadBeforeApp?Number(e.preAppYield??0):0}getPrincipalBaseForReturn(e,t){return e.hadBeforeApp&&e.currentValueAtOnboarding!==null&&e.currentValueAtOnboarding!==void 0?Math.max(0,Number(e.currentValueAtOnboarding)-t):Number(e.principalBase??0)}getTotalReturnPercent(e,t,r){let i=Number(e.totalInvestedToDate??0);return i>0?t/i*100:r>0?t/r*100:0}buildResult(e,t,r,i,o,s,a,c,l){let d=t+o,f=this.getPrincipalBaseForReturn(e,t),g=this.getTotalReturnPercent(e,d,f);return{preAppYield:t,postAppYield:o,totalYield:d,totalReturnPercent:g,initialValue:r,totalEstimated:i,yieldAfter:o,yieldPercent:s,updatedAt:a,indexMissing:c,placeholderUsed:l}}getStartDate(e){let t=Er(e.systemStartDate);return t||Er(e.realStartDate)}getReferenceDate(e){let t=e.referenceDate?new Date(e.referenceDate):new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())}calculateManual(e,t,r,i,o,s){let a=Math.max(0,r)/100;if(a<=0)return e;if(i==="monthly"){let l=t==="manual_yearly"?Math.pow(1+a,.08333333333333333)-1:a;return e*Math.pow(1+l,Math.max(0,s))}let c=t==="manual_yearly"?Math.pow(1+a,1/365)-1:Math.pow(1+a,1/30)-1;return e*Math.pow(1+c,Math.max(0,o))}calculateIndex(e,t,r,i,o,s,a){let c=Math.max(0,i)/100,l=t==="cdi_percent"?Math.max(0,r)/100:1,d=c*l;if(d<=0)return e;if(o==="monthly"){let f=Math.pow(1+d,30)-1;return e*Math.pow(1+f,Math.max(0,a))}return e*Math.pow(1+d,Math.max(0,s))}daysBetween(e,t){let r=new Date(e.getFullYear(),e.getMonth(),e.getDate()),o=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-r.getTime();return Math.floor(o/(1e3*60*60*24))}monthsBetween(e,t){let r=e.getFullYear()*12+e.getMonth(),o=t.getFullYear()*12+t.getMonth()-r;return t.getDate()<e.getDate()&&(o-=1),Math.max(0,o)}resolveIrRate(e){let t=Math.max(0,Math.floor(e));return t<=180?.225:t<=360?.2:t<=720?.175:.15}sum(e){return e.reduce((t,r)=>t+r,0)}pickLatestDate(e){let t=e.filter(r=>!!r);return t.length?t.sort((r,i)=>r>i?-1:1)[0]:null}isIndexMode(e){return e==="cdi_percent"||e==="selic"}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var Fg=class n{firestore=P($t);cache=new Map;latest$(e){let t=this.cache.get(e);if(t)return t;let r=Ge(this.firestore,"indices"),i=un(r,Ji("type","==",e),Qi("date","desc"),Tn(1)),o=Ki(i,{idField:"id"}).pipe(te(s=>{let a=s?.[0]??null;return a?this.normalize(a,e):null}),wr(()=>re(null)),ws({bufferSize:1,refCount:!0}));return this.cache.set(e,o),o}normalize(e,t){let r=Zi(e.date);return U(R({},e),{type:e.type??t,date:r||"",value:Number(e.value??0)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var SO=class n{firestore=P($t);calculator=P(Og);indicesService=P(Fg);dailyYieldRunKeyByUser=new Map;dailyYieldRunning=new Set;list$(e){let t=Ge(this.firestore,`users/${e}/investments`),r=un(t,Qi("name"));return Ki(r,{idField:"id"}).pipe(te(i=>i.map(o=>this.normalize(o))))}get$(e,t){let r=He(this.firestore,`users/${e}/investments/${t}`);return vg(r,{idField:"id"}).pipe(te(i=>i?this.normalize(i):null))}async add(e,t){let r=Ge(this.firestore,`users/${e}/investments`);await ss(r,U(R({},t),{userId:e,createdAt:$e(),updatedAt:$e()}))}async update(e,t,r){let i=He(this.firestore,`users/${e}/investments/${t}`);await Yi(i,U(R({},r),{updatedAt:$e()}))}async deleteInvestment(e,t){let r=He(this.firestore,`users/${e}/investments/${t}`),i=Ge(this.firestore,`users/${e}/investments/${t}/movements`),o=400;for(;;){let s=un(i,Tn(o)),a=await Qr(s);if(a.empty)break;let c=XD(this.firestore);if(a.docs.forEach(l=>c.delete(l.ref)),await c.commit(),a.size<o)break}await Ha(r)}async createDeposit(e,t){let r=He(this.firestore,`users/${e}/investments/${t.investmentId}`);await ZD(this.firestore,async i=>{let o=await i.get(r);if(!o.exists())throw new Error("Investimento nao encontrado.");let s=o.data(),a=!!t.isHistorical,c=t.accountId?t.accountId.trim():"";if(!a&&!c)throw new Error("Conta obrigatoria.");let l=c?He(this.firestore,`users/${e}/accounts/${c}`):null,d=l?await i.get(l):null,f=d?.exists()?d.data():null,g=Number(t.amount??0);if(!Number.isFinite(g))throw new Error("Valor invalido.");let y=null,D=He(Ge(this.firestore,`users/${e}/investments/${t.investmentId}/movements`));if(!a){let A=He(Ge(this.firestore,`users/${e}/transactions`));y=A.id,i.set(A,{type:"expense",description:`Aporte em investimento: ${s.name}`,amount:g,date:t.date,categoryId:t.categoryId||null,accountId:c,accountOriginId:null,accountDestinationId:null,notes:t.notes||null,investmentId:t.investmentId,investmentAction:"deposit",source:"investment_movement",createdAt:$e()})}let N={userId:e,investmentId:t.investmentId,type:"deposit",amount:g,date:t.date,accountId:c||null,accountNameSnapshot:f?.name??null,note:t.notes||null,relatedTransactionId:y,isHistorical:a,affectsAccounts:!a,source:a?"investment_only":"ledger",createdAt:$e(),updatedAt:$e()};if(kg.production||console.log("[Investments] movement write",{path:D.path,payload:N}),i.set(D,N),!a){let k=Number(s.principalBase??0)+g;if(!Number.isFinite(k))throw new Error("Valor invalido.");i.update(r,{principalBase:k,updatedAt:$e()})}})}async createWithdraw(e,t){let r=He(this.firestore,`users/${e}/investments/${t.investmentId}`);await ZD(this.firestore,async i=>{let o=await i.get(r);if(!o.exists())throw new Error("Investimento nao encontrado.");let s=o.data(),a=!!t.isHistorical,c=t.accountId?t.accountId.trim():"";if(!a&&!c)throw new Error("Conta obrigatoria.");let l=c?He(this.firestore,`users/${e}/accounts/${c}`):null,d=l?await i.get(l):null,f=d?.exists()?d.data():null,g=Number(t.amount??0);if(!Number.isFinite(g))throw new Error("Valor invalido.");let y=!!t.applyIr,D=Number(t.currentValue??0),N=null,A=null,k=g;if(!a&&y){let Ae=s.realStartDate||s.systemStartDate||"";if(Number.isFinite(D)&&D>0&&Ae){let we=this.calculator.calculateRescueIR({principalBase:Number(s.principalBase??0),currentValue:D,rescueAmount:g,investmentStartDate:Ae});N=we.irRate,A=we.irValue,k=we.netAmount}else N=0,A=0,k=g}else a||(A=0);let H=null,ie=He(Ge(this.firestore,`users/${e}/investments/${t.investmentId}/movements`));if(!a){let Ae=He(Ge(this.firestore,`users/${e}/transactions`));H=Ae.id;let we=A&&A>0?`Resgate de investimento: ${s.name} | IR estimado descontado: R$ ${A.toFixed(2)}`:`Resgate de investimento: ${s.name}`;i.set(Ae,{type:"income",description:we,amount:k,date:t.date,categoryId:t.categoryId||null,accountId:c,accountOriginId:null,accountDestinationId:null,notes:t.notes||null,investmentId:t.investmentId,investmentAction:"withdraw",source:"investment_movement",createdAt:$e()})}let Fe={userId:e,investmentId:t.investmentId,type:"withdraw",amount:g,grossAmount:g,netAmount:k,irEstimated:A,irRate:N,date:t.date,accountId:c||null,accountNameSnapshot:f?.name??null,note:t.notes||null,relatedTransactionId:H,isHistorical:a,affectsAccounts:!a,source:a?"investment_only":"ledger",createdAt:$e(),updatedAt:$e()};if(kg.production||console.log("[Investments] movement write",{path:ie.path,payload:Fe}),i.set(ie,Fe),!a){let Ae=Number(s.principalBase??0),we=Math.max(0,Ae-g);if(!Number.isFinite(we))throw new Error("Valor invalido.");i.update(r,{principalBase:we,updatedAt:$e()})}})}async runDailyYieldUpdateForUser(e){if(!e)return;let t=new Date,r=_g(t);if(!this.dailyYieldRunning.has(e)&&this.dailyYieldRunKeyByUser.get(e)!==r){this.dailyYieldRunning.add(e);try{let[i,o]=await Promise.all([Dd(this.indicesService.latest$("cdi")),Dd(this.indicesService.latest$("selic"))]),s=Ge(this.firestore,`users/${e}/investments`),a=await Qr(s);if(a.empty){this.dailyYieldRunKeyByUser.set(e,r);return}let c=XD(this.firestore),l=0;for(let d of a.docs){let f=this.normalize(R({id:d.id},d.data()));if(f.status!=="active"||!this.canCalculateYield(f,{cdi:i,selic:o}))continue;let g=this.resolveLastCalculationDate(f),y=g??this.resolveYieldStartDate(f);if(!y||Lk(y,t)<=0)continue;let D=this.calculator.calculate(f,{cdi:i,selic:o,referenceDate:t}),N=this.calculator.calculate(f,{cdi:i,selic:o,referenceDate:g??y}),A=Math.max(0,D.postAppYield-N.postAppYield),H=(f.postAppYield===null||f.postAppYield===void 0?N.postAppYield:Number(f.postAppYield??0))+A,ie=D.initialValue+H;!Number.isFinite(H)||!Number.isFinite(ie)||(c.update(d.ref,{postAppYield:H,currentValueEstimated:ie,lastYieldCalculationAt:r,updatedAt:$e()}),l+=1)}l>0&&await c.commit(),this.dailyYieldRunKeyByUser.set(e,r),kg.production||console.log("[Investments] daily yield updated",{uid:e,updates:l,todayKey:r})}catch(i){console.error("[Investments] daily yield update failed",i)}finally{this.dailyYieldRunning.delete(e)}}}normalize(e){let t=e.yieldMode??"manual_monthly",r=e.compounding??(t==="cdi_percent"||t==="selic"?"daily":"monthly"),i=Zi(e.realStartDate)||"",o=Zi(e.systemStartDate)||i,s=Zi(e.onboardingDate)||"",a=Zi(e.lastYieldCalculationAt??e.lastCalculatedAt)||null,c=e.postAppYield===null||e.postAppYield===void 0?null:Number(e.postAppYield),l=e.currentValueEstimated===null||e.currentValueEstimated===void 0?null:Number(e.currentValueEstimated);return U(R({},e),{type:e.type??"manual",status:e.status??"active",hadBeforeApp:!!e.hadBeforeApp,realStartDate:i,systemStartDate:o,onboardingDate:s||null,principalBase:Number(e.principalBase??0),preAppYield:Number(e.preAppYield??0),totalInvestedToDate:e.totalInvestedToDate===null||e.totalInvestedToDate===void 0?null:Number(e.totalInvestedToDate),currentValueAtOnboarding:e.currentValueAtOnboarding===null||e.currentValueAtOnboarding===void 0?null:Number(e.currentValueAtOnboarding),lastYieldCalculationAt:a,postAppYield:c,currentValueEstimated:l,yieldMode:t,manualRate:e.manualRate===null||e.manualRate===void 0?null:Number(e.manualRate),cdiPercent:e.cdiPercent===null||e.cdiPercent===void 0?null:Number(e.cdiPercent),compounding:r})}canCalculateYield(e,t){if(e.yieldMode==="manual_monthly"||e.yieldMode==="manual_yearly")return Number(e.manualRate??0)>0;let r=Number(e.manualRate??0)>0;return e.yieldMode==="cdi_percent"?Number(t.cdi?.value??0)>0||r:e.yieldMode==="selic"?Number(t.selic?.value??0)>0||r:!1}resolveLastCalculationDate(e){return this.toLocalDate(e.lastYieldCalculationAt??e.lastCalculatedAt)}resolveYieldStartDate(e){let t=this.toLocalDate(e.onboardingDate);if(t)return t;let r=Er(e.systemStartDate);if(r)return r;let i=Er(e.realStartDate);return i||this.toLocalDate(e.createdAt)}toLocalDate(e){if(!e)return null;if(typeof e=="object"&&typeof e.toDate=="function"){let r=e.toDate();if(r instanceof Date&&!Number.isNaN(r.getTime()))return new Date(r.getFullYear(),r.getMonth(),r.getDate())}if(e instanceof Date&&!Number.isNaN(e.getTime()))return new Date(e.getFullYear(),e.getMonth(),e.getDate());if(typeof e=="string"){let r=Zi(e);return Er(r)}let t=new Date(e);return Number.isNaN(t.getTime())?null:new Date(t.getFullYear(),t.getMonth(),t.getDate())}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var AO=class n{toastsSubject=new We([]);timers=new Map;confirmSubject=new We(null);confirmQueue=[];activeConfirm=null;toasts$=this.toastsSubject.asObservable();confirm$=this.confirmSubject.asObservable();success(e,t){this.show("success",e,t)}error(e,t){this.show("error",e,t)}info(e,t){this.show("info",e,t)}warning(e,t){this.show("warning",e,t)}confirm(e){return new Promise(t=>{let r={id:`${Date.now()}-${Math.random().toString(16).slice(2)}`,title:e.title,message:e.message,confirmText:e.confirmText??"Confirmar",cancelText:e.cancelText??"Cancelar",tone:e.tone??"default",icon:e.icon,resolve:t};if(this.activeConfirm){this.confirmQueue.push(r);return}this.openConfirm(r)})}resolveConfirm(e){if(!this.activeConfirm)return;let t=this.activeConfirm;if(this.activeConfirm=null,this.confirmSubject.next(null),t.resolve(e),this.confirmQueue.length>0){let r=this.confirmQueue.shift()??null;r&&this.openConfirm(r)}}show(e,t,r){let i=`${Date.now()}-${Math.random().toString(16).slice(2)}`,o={id:i,type:e,message:t,actionLabel:r?.actionLabel,action:r?.action},s=r?.durationMs??(e==="error"?7e3:4e3);if(this.toastsSubject.next([...this.toastsSubject.value,o]),s>0){let a=setTimeout(()=>this.dismiss(i),s);this.timers.set(i,a)}}dismiss(e){let t=this.toastsSubject.value;if(!t.length)return;let r=t.filter(o=>o.id!==e);this.toastsSubject.next(r);let i=this.timers.get(e);i&&(clearTimeout(i),this.timers.delete(e))}openConfirm(e){this.activeConfirm=e,this.confirmSubject.next(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};export{R as a,U as b,CW as c,SW as d,AW as e,Pe as f,We as g,re as h,Dd as i,te as j,Pm as k,wr as l,B1 as m,Dr as n,Ic as o,Gt as p,Ds as q,Dt as r,V as s,Y as t,P as u,TC as v,bC as w,VC as x,ct as y,Ve as z,yL as A,PL as B,Qv as C,LA as D,Ii as E,$A as F,e_ as G,t_ as H,jh as I,n_ as J,r_ as K,HA as L,zA as M,GA as N,Lj as O,Vn as P,KA as Q,Hj as R,qj as S,ZA as T,ru as U,tU as V,hU as W,i0 as X,a_ as Y,o0 as Z,s0 as _,a0 as $,yU as aa,c0 as ba,IU as ca,wU as da,DU as ea,TU as fa,AU as ga,NU as ha,MU as ia,PU as ja,xU as ka,No as la,N2 as ma,Z0 as na,M2 as oa,k2 as pa,F2 as qa,L2 as ra,V2 as sa,rR as ta,jie as ua,Z2 as va,xr as wa,eE as xa,sa as ya,Of as za,j$ as Aa,$$ as Ba,Eae as Ca,Iae as Da,qce as Ea,zce as Fa,$e as Ga,$t as Ha,wle as Ia,Ki as Ja,ss as Ka,Ge as La,Ha as Ma,He as Na,Dle as Oa,Qr as Pa,Tle as Qa,Tn as Ra,Qi as Sa,un as Ta,ZD as Ua,Yi as Va,Ji as Wa,Zi as Xa,Dl as Ya,Cle as Za,Er as _a,_g as $a,Eg as ab,Vk as bb,F6 as cb,Yk as db,jk as eb,ade as fb,cde as gb,Al as hb,aW as ib,lde as jb,uW as kb,_O as lb,fW as mb,gW as nb,wO as ob,dde as pb,hde as qb,IW as rb,DW as sb,bW as tb,fde as ub,pde as vb,gde as wb,CO as xb,kg as yb,Og as zb,Fg as Ab,SO as Bb,AO as Cb};
