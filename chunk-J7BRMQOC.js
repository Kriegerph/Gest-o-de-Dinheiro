var YO=Object.create;var Xg=Object.defineProperty,JO=Object.defineProperties,ZO=Object.getOwnPropertyDescriptor,XO=Object.getOwnPropertyDescriptors,e1=Object.getOwnPropertyNames,zl=Object.getOwnPropertySymbols,t1=Object.getPrototypeOf,em=Object.prototype.hasOwnProperty,ab=Object.prototype.propertyIsEnumerable;var sb=(n,e,t)=>e in n?Xg(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,R=(n,e)=>{for(var t in e||={})em.call(e,t)&&sb(n,t,e[t]);if(zl)for(var t of zl(e))ab.call(e,t)&&sb(n,t,e[t]);return n},U=(n,e)=>JO(n,XO(e));var uW=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var tm=(n,e)=>{var t={};for(var r in n)em.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&zl)for(var r of zl(n))e.indexOf(r)<0&&ab.call(n,r)&&(t[r]=n[r]);return t};var lW=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var n1=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of e1(e))!em.call(n,i)&&i!==t&&Xg(n,i,{get:()=>e[i],enumerable:!(r=ZO(e,i))||r.enumerable});return n};var dW=(n,e,t)=>(t=n!=null?YO(t1(n)):{},n1(e||!n||!n.__esModule?Xg(t,"default",{value:n,enumerable:!0}):t,n));var It=null,Gl=!1,om=1,r1=null,xt=Symbol("SIGNAL");function ie(n){let e=It;return It=n,e}function Kl(){return It}var sc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ac(n){if(Gl)throw new Error("");if(It===null)return;It.consumerOnSignalRead(n);let e=It.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=It.recomputing;if(r&&(t=e!==void 0?e.nextProducer:It.producers,t!==void 0&&t.producer===n)){It.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===It&&(!r||o1(i,It)))return;let o=us(It),s={producer:n,consumer:It,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};It.producersTail=s,e!==void 0?e.nextProducer=s:It.producers=s,o&&db(n,s)}function cb(){om++}function sm(n){if(!(us(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===om)){if(!n.producerMustRecompute(n)&&!Yl(n)){im(n);return}n.producerRecomputeValue(n),im(n)}}function am(n){if(n.consumers===void 0)return;let e=Gl;Gl=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||i1(r)}}finally{Gl=e}}function cm(){return It?.consumerAllowSignalWrites!==!1}function i1(n){n.dirty=!0,am(n),n.consumerMarkedDirty?.(n)}function im(n){n.dirty=!1,n.lastCleanEpoch=om}function cc(n){return n&&ub(n),ie(n)}function ub(n){n.producersTail=void 0,n.recomputing=!0}function Ql(n,e){ie(e),n&&lb(n)}function lb(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(us(n))do t=um(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Yl(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(sm(t),r!==t.version))return!0}return!1}function uc(n){if(us(n)){let e=n.producers;for(;e!==void 0;)e=um(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function db(n,e){let t=n.consumersTail,r=us(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)db(i.producer,i)}function um(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!us(e)){let o=e.producers;for(;o!==void 0;)o=um(o)}return t}function us(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function lm(n){r1?.(n)}function o1(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function dm(n,e){return Object.is(n,e)}function Jl(n,e){let t=Object.create(s1);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(sm(t),ac(t),t.value===Wl)throw t.error;return t.value};return r[xt]=t,lm(t),r}var nm=Symbol("UNSET"),rm=Symbol("COMPUTING"),Wl=Symbol("ERRORED"),s1=U(R({},sc),{value:nm,dirty:!0,error:null,equal:dm,kind:"computed",producerMustRecompute(n){return n.value===nm||n.value===rm},producerRecomputeValue(n){if(n.value===rm)throw new Error("");let e=n.value;n.value=rm;let t=cc(n),r,i=!1;try{r=n.computation(),ie(null),i=e!==nm&&e!==Wl&&r!==Wl&&n.equal(e,r)}catch(o){r=Wl,n.error=o}finally{Ql(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function a1(){throw new Error}var hb=a1;function fb(n){hb(n)}function hm(n){hb=n}var c1=null;function fm(n,e){let t=Object.create(Zl);t.value=n,e!==void 0&&(t.equal=e);let r=()=>pb(t);return r[xt]=t,lm(t),[r,s=>lc(t,s),s=>gb(t,s)]}function pb(n){return ac(n),n.value}function lc(n,e){cm()||fb(n),n.equal(n.value,e)||(n.value=e,u1(n))}function gb(n,e){cm()||fb(n),lc(n,e(n.value))}var Zl=U(R({},sc),{equal:dm,value:void 0,kind:"signal"});function u1(n){n.version++,cb(),am(n),c1?.(n)}function pm(n){let e=ie(null);try{return n()}finally{ie(e)}}function X(n){return typeof n=="function"}function ls(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Xl=ls(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ro(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var rt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(X(r))try{r()}catch(o){e=o instanceof Xl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{mb(o)}catch(s){e=e??[],s instanceof Xl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Xl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)mb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ro(t,e)}remove(e){let{_finalizers:t}=this;t&&ro(t,e),e instanceof n&&e._removeParent(this)}};rt.EMPTY=(()=>{let n=new rt;return n.closed=!0,n})();var gm=rt.EMPTY;function ed(n){return n instanceof rt||n&&"closed"in n&&X(n.remove)&&X(n.add)&&X(n.unsubscribe)}function mb(n){X(n)?n():n.unsubscribe()}var bn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ds={setTimeout(n,e,...t){let{delegate:r}=ds;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ds;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function td(n){ds.setTimeout(()=>{let{onUnhandledError:e}=bn;if(e)e(n);else throw n})}function dc(){}var yb=mm("C",void 0,void 0);function vb(n){return mm("E",void 0,n)}function _b(n){return mm("N",n,void 0)}function mm(n,e,t){return{kind:n,value:e,error:t}}var io=null;function hs(n){if(bn.useDeprecatedSynchronousErrorHandling){let e=!io;if(e&&(io={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=io;if(io=null,t)throw r}}else n()}function Eb(n){bn.useDeprecatedSynchronousErrorHandling&&io&&(io.errorThrown=!0,io.error=n)}var oo=class extends rt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ed(e)&&e.add(this)):this.destination=h1}static create(e,t,r){return new Cn(e,t,r)}next(e){this.isStopped?vm(_b(e),this):this._next(e)}error(e){this.isStopped?vm(vb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vm(yb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},l1=Function.prototype.bind;function ym(n,e){return l1.call(n,e)}var _m=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){nd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){nd(r)}else nd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){nd(t)}}},Cn=class extends oo{constructor(e,t,r){super();let i;if(X(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&bn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ym(e.next,o),error:e.error&&ym(e.error,o),complete:e.complete&&ym(e.complete,o)}):i=e}this.destination=new _m(i)}};function nd(n){bn.useDeprecatedSynchronousErrorHandling?Eb(n):td(n)}function d1(n){throw n}function vm(n,e){let{onStoppedNotification:t}=bn;t&&ds.setTimeout(()=>t(n,e))}var h1={closed:!0,next:dc,error:d1,complete:dc};var fs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Sn(n){return n}function rd(...n){return Em(n)}function Em(n){return n.length===0?Sn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ne=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=p1(t)?t:new Cn(t,r,i);return hs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Ib(r),new r((i,o)=>{let s=new Cn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[fs](){return this}pipe(...t){return Em(t)(this)}toPromise(t){return t=Ib(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Ib(n){var e;return(e=n??bn.Promise)!==null&&e!==void 0?e:Promise}function f1(n){return n&&X(n.next)&&X(n.error)&&X(n.complete)}function p1(n){return n&&n instanceof oo||f1(n)&&ed(n)}function g1(n){return X(n?.lift)}function ge(n){return e=>{if(g1(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(n,e,t,r,i){return new Im(n,e,t,r,i)}var Im=class extends oo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var wb=ls(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=(()=>{class n extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new id(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new wb}next(t){hs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){hs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){hs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gm:(this.currentObservers=null,o.push(t),new rt(()=>{this.currentObservers=null,ro(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ne;return t.source=this,t}}return n.create=(e,t)=>new id(e,t),n})(),id=class extends Me{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:gm}};var it=class extends Me{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var hc={now(){return(hc.delegate||Date).now()},delegate:void 0};var fc=class extends Me{constructor(e=1/0,t=1/0,r=hc){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var od=class extends rt{constructor(e,t){super()}schedule(e,t=0){return this}};var pc={setInterval(n,e,...t){let{delegate:r}=pc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=pc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ps=class extends od{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return pc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&pc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ro(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var gs=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};gs.now=hc.now;var ms=class extends gs{constructor(e,t=gs.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var wm=new ms(ps);var sd=class extends ps{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ad=class extends ms{};var Dm=new ad(sd);var $t=new ne(n=>n.complete());function Db(n){return n&&X(n.schedule)}function Tb(n){return n[n.length-1]}function cd(n){return X(Tb(n))?n.pop():void 0}function ei(n){return Db(Tb(n))?n.pop():void 0}function Cb(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function c(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function bb(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function so(n){return this instanceof so?(this.v=n,this):new so(n)}function Sb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(M){return new Promise(function(A,k){o.push([y,M,A,k])>1||c(y,M)})},T&&(i[y]=T(i[y])))}function c(y,T){try{l(r[y](T))}catch(M){g(o[0][3],M)}}function l(y){y.value instanceof so?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){c("next",y)}function p(y){c("throw",y)}function g(y,T){y(T),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Ab(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof bb=="function"?bb(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var ud=n=>n&&typeof n.length=="number"&&typeof n!="function";function ld(n){return X(n?.then)}function dd(n){return X(n[fs])}function hd(n){return Symbol.asyncIterator&&X(n?.[Symbol.asyncIterator])}function fd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function m1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var pd=m1();function gd(n){return X(n?.[pd])}function md(n){return Sb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield so(t.read());if(i)return yield so(void 0);yield yield so(r)}}finally{t.releaseLock()}})}function yd(n){return X(n?.getReader)}function Oe(n){if(n instanceof ne)return n;if(n!=null){if(dd(n))return y1(n);if(ud(n))return v1(n);if(ld(n))return _1(n);if(hd(n))return Rb(n);if(gd(n))return E1(n);if(yd(n))return I1(n)}throw fd(n)}function y1(n){return new ne(e=>{let t=n[fs]();if(X(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function v1(n){return new ne(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function _1(n){return new ne(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,td)})}function E1(n){return new ne(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Rb(n){return new ne(e=>{w1(n,e).catch(t=>e.error(t))})}function I1(n){return Rb(md(n))}function w1(n,e){var t,r,i,o;return Cb(this,void 0,void 0,function*(){try{for(t=Ab(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ht(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function ti(n,e=0){return ge((t,r)=>{t.subscribe(ye(r,i=>Ht(r,n,()=>r.next(i),e),()=>Ht(r,n,()=>r.complete(),e),i=>Ht(r,n,()=>r.error(i),e)))})}function ni(n,e=0){return ge((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Nb(n,e){return Oe(n).pipe(ni(e),ti(e))}function Mb(n,e){return Oe(n).pipe(ni(e),ti(e))}function Pb(n,e){return new ne(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function xb(n,e){return new ne(t=>{let r;return Ht(t,e,()=>{r=n[pd](),Ht(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>X(r?.return)&&r.return()})}function vd(n,e){if(!n)throw new Error("Iterable cannot be null");return new ne(t=>{Ht(t,e,()=>{let r=n[Symbol.asyncIterator]();Ht(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function kb(n,e){return vd(md(n),e)}function Ob(n,e){if(n!=null){if(dd(n))return Nb(n,e);if(ud(n))return Pb(n,e);if(ld(n))return Mb(n,e);if(hd(n))return vd(n,e);if(gd(n))return xb(n,e);if(yd(n))return kb(n,e)}throw fd(n)}function Te(n,e){return e?Ob(n,e):Oe(n)}function re(...n){let e=ei(n);return Te(n,e)}function Tm(n,e){let t=X(n)?n:()=>n,r=i=>i.error(t());return new ne(e?i=>e.schedule(r,0,i):r)}function _d(n){return!!n&&(n instanceof ne||X(n.lift)&&X(n.subscribe))}var vr=ls(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function D1(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Cn({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new vr)}});n.subscribe(o)})}function ee(n,e){return ge((t,r)=>{let i=0;t.subscribe(ye(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:T1}=Array;function b1(n,e){return T1(e)?n(...e):n(e)}function Ed(n){return ee(e=>b1(n,e))}var{isArray:C1}=Array,{getPrototypeOf:S1,prototype:A1,keys:R1}=Object;function Id(n){if(n.length===1){let e=n[0];if(C1(e))return{args:e,keys:null};if(N1(e)){let t=R1(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function N1(n){return n&&typeof n=="object"&&S1(n)===A1}function wd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function bm(...n){let e=ei(n),t=cd(n),{args:r,keys:i}=Id(n);if(r.length===0)return Te([],e);let o=new ne(M1(r,e,i?s=>wd(i,s):Sn));return t?o.pipe(Ed(t)):o}function M1(n,e,t=Sn){return r=>{Fb(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Fb(e,()=>{let l=Te(n[c],e),h=!1;l.subscribe(ye(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Fb(n,e,t){n?Ht(t,n,e):e()}function Lb(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,g=()=>{p&&!c.length&&!l&&e.complete()},y=M=>l<r?T(M):c.push(M),T=M=>{o&&e.next(M),l++;let A=!1;Oe(t(M,h++)).subscribe(ye(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;c.length&&l<r;){let k=c.shift();s?Ht(e,s,()=>T(k)):T(k)}g()}catch(k){e.error(k)}}))};return n.subscribe(ye(e,y,()=>{p=!0,g()})),()=>{a?.()}}function wt(n,e,t=1/0){return X(e)?wt((r,i)=>ee((o,s)=>e(r,o,i,s))(Oe(n(r,i))),t):(typeof e=="number"&&(t=e),ge((r,i)=>Lb(r,i,n,t)))}function ys(n=1/0){return wt(Sn,n)}function Vb(){return ys(1)}function vs(...n){return Vb()(Te(n,ei(n)))}function gc(n){return new ne(e=>{Oe(n()).subscribe(e)})}function Cm(...n){let e=cd(n),{args:t,keys:r}=Id(n),i=new ne(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let h=0;h<s;h++){let p=!1;Oe(t[h]).subscribe(ye(o,g=>{p||(p=!0,l--),a[h]=g},()=>c--,void 0,()=>{(!c||!p)&&(l||o.next(r?wd(r,a):a),o.complete())}))}});return e?i.pipe(Ed(e)):i}function dn(n,e){return ge((t,r)=>{let i=0;t.subscribe(ye(r,o=>n.call(e,o,i++)&&r.next(o)))})}function _r(n){return ge((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ye(t,void 0,void 0,s=>{o=Oe(n(s,_r(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function mc(n,e){return X(e)?wt(n,e,1):wt(n,1)}function Sm(n){return ge((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Er(n){return n<=0?()=>$t:ge((e,t)=>{let r=0;e.subscribe(ye(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function jb(n=P1){return ge((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function P1(){return new vr}function Am(n){return ge((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ir(n,e){let t=arguments.length>=2;return r=>r.pipe(n?dn((i,o)=>n(i,o,r)):Sn,Er(1),t?Sm(e):jb(()=>new vr))}function Dd(n){return n<=0?()=>$t:ge((e,t)=>{let r=[];e.subscribe(ye(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ub(n={}){let{connector:e=()=>new Me,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=c=void 0,h=p=!1},T=()=>{let M=s;y(),M?.unsubscribe()};return ge((M,A)=>{l++,!p&&!h&&g();let k=c=c??e();A.add(()=>{l--,l===0&&!p&&!h&&(a=Rm(T,i))}),k.subscribe(A),!s&&l>0&&(s=new Cn({next:G=>k.next(G),error:G=>{p=!0,g(),a=Rm(y,t,G),k.error(G)},complete:()=>{h=!0,g(),a=Rm(y,r),k.complete()}}),Oe(M).subscribe(s))})(o)}}function Rm(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Cn({next:()=>{r.unsubscribe(),n()}});return Oe(e(...t)).subscribe(r)}function _s(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,Ub({connector:()=>new fc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function yc(...n){let e=ei(n);return ge((t,r)=>{(e?vs(n,t,e):vs(n,t)).subscribe(r)})}function qt(n,e){return ge((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ye(r,c=>{i?.unsubscribe();let l=0,h=o++;Oe(n(c,h)).subscribe(i=ye(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Es(n){return ge((e,t)=>{Oe(n).subscribe(ye(t,()=>t.complete(),dc)),!t.closed&&e.subscribe(t)})}function Dt(n,e,t){let r=X(n)||e||t?{next:n,error:e,complete:t}:n;return r?ge((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ye(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Sn}var Nm;function Td(){return Nm}function Kn(n){let e=Nm;return Nm=n,e}var Bb=Symbol("NotFound");function Is(n){return n===Bb||n?.name==="\u0275NotFound"}var ri=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Gm=new ri("21.0.6");var Rd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",L=class extends Error{code;constructor(e,t){super(ho(e,t)),this.code=e}};function O1(n){return`NG0${Math.abs(n)}`}function ho(n,e){return`${O1(n)}${e?": "+e:""}`}var Tr=globalThis;function ve(n){for(let e in n)if(n[e]===ve)return e;throw Error("")}function Gb(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Dr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Dr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Wm(n,e){return n?e?`${n} ${e}`:n:e||""}var F1=ve({__forward_ref__:ve});function lt(n){return n.__forward_ref__=lt,n.toString=function(){return Dr(this())},n}function yt(n){return Km(n)?n():n}function Km(n){return typeof n=="function"&&n.hasOwnProperty(F1)&&n.__forward_ref__===lt}function V(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function An(n){return{providers:n.providers||[],imports:n.imports||[]}}function Dc(n){return L1(n,Nd)}function Qm(n){return Dc(n)!==null}function L1(n,e){return n.hasOwnProperty(e)&&n[e]||null}function V1(n){let e=n?.[Nd]??null;return e||null}function Pm(n){return n&&n.hasOwnProperty(Cd)?n[Cd]:null}var Nd=ve({\u0275prov:ve}),Cd=ve({\u0275inj:ve}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=V({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ym(n){return n&&!!n.\u0275providers}var Jm=ve({\u0275cmp:ve}),Zm=ve({\u0275dir:ve}),Xm=ve({\u0275pipe:ve}),ey=ve({\u0275mod:ve}),_c=ve({\u0275fac:ve}),fo=ve({__NG_ELEMENT_ID__:ve}),$b=ve({__NG_ENV_ID__:ve});function ty(n){return Md(n,"@NgModule"),n[ey]||null}function ai(n){return Md(n,"@Component"),n[Jm]||null}function ny(n){return Md(n,"@Directive"),n[Zm]||null}function Wb(n){return Md(n,"@Pipe"),n[Xm]||null}function Md(n,e){if(n==null)throw new L(-919,!1)}function Yn(n){return typeof n=="string"?n:n==null?"":String(n)}function Kb(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Yn(n)}var Qb=ve({ngErrorCode:ve}),j1=ve({ngErrorMessage:ve}),U1=ve({ngTokenPath:ve});function ry(n,e){return Yb("",-200,e)}function Pd(n,e){throw new L(-201,!1)}function Yb(n,e,t){let r=new L(e,n);return r[Qb]=e,r[j1]=n,t&&(r[U1]=t),r}function B1(n){return n[Qb]}var xm;function Jb(){return xm}function kt(n){let e=xm;return xm=n,e}function iy(n,e,t){let r=Dc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Pd(n,"")}var $1={},ao=$1,km="__NG_DI_FLAG__",Om=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=co(t)||0;try{return this.injector.get(e,r&8?null:ao,r)}catch(i){if(Is(i))return i;throw i}}};function H1(n,e=0){let t=Td();if(t===void 0)throw new L(-203,!1);if(t===null)return iy(n,void 0,e);{let r=q1(e),i=t.retrieve(n,r);if(Is(i)){if(r.optional)return null;throw i}return i}}function Y(n,e=0){return(Jb()||H1)(yt(n),e)}function P(n,e){return Y(n,co(e))}function co(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function q1(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Fm(n){let e=[];for(let t=0;t<n.length;t++){let r=yt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new L(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=z1(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Y(i,o))}else e.push(Y(r))}return e}function Zb(n,e){return n[km]=e,n.prototype[km]=e,n}function z1(n){return n[km]}function ii(n,e){let t=n.hasOwnProperty(_c);return t?n[_c]:null}function Xb(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function eC(n){return n.flat(Number.POSITIVE_INFINITY)}function xd(n,e){n.forEach(t=>Array.isArray(t)?xd(t,e):e(t))}function oy(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Tc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function tC(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function nC(n,e,t){let r=Ds(n,e);return r>=0?n[r|1]=t:(r=~r,tC(n,r,e,t)),r}function kd(n,e){let t=Ds(n,e);if(t>=0)return n[t|1]}function Ds(n,e){return G1(n,e,1)}function G1(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ci={},Qt=[],Ts=new B(""),sy=new B("",-1),ay=new B(""),Ec=class{get(e,t=ao){if(t===ao){let i=Yb("",-201);throw i.name="\u0275NotFound",i}return t}};function Rn(n){return{\u0275providers:n}}function rC(...n){return{\u0275providers:cy(!0,n),\u0275fromNgModule:!0}}function cy(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return xd(e,s=>{let a=s;Sd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&iC(i,o),t}function iC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];uy(i,o=>{e(o,r)})}}function Sd(n,e,t,r){if(n=yt(n),!n)return!1;let i=null,o=Pm(n),s=!o&&ai(n);if(!o&&!s){let c=n.ngModule;if(o=Pm(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Sd(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{xd(o.imports,h=>{Sd(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&iC(l,e)}if(!a){let l=ii(i)||(()=>new i);e({provide:i,useFactory:l,deps:Qt},i),e({provide:ay,useValue:i,multi:!0},i),e({provide:Ts,useValue:()=>Y(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;uy(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function uy(n,e){for(let t of n)Ym(t)&&(t=t.\u0275providers),Array.isArray(t)?uy(t,e):e(t)}var W1=ve({provide:String,useValue:ve});function oC(n){return n!==null&&typeof n=="object"&&W1 in n}function K1(n){return!!(n&&n.useExisting)}function Q1(n){return!!(n&&n.useFactory)}function uo(n){return typeof n=="function"}function sC(n){return!!n.useClass}var bc=new B(""),bd={},Hb={},Mm;function Cc(){return Mm===void 0&&(Mm=new Ec),Mm}var Ge=class{},lo=class extends Ge{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Vm(e,s=>this.processProvider(s)),this.records.set(sy,ws(void 0,this)),i.has("environment")&&this.records.set(Ge,ws(void 0,this));let o=this.records.get(bc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(ay,Qt,{self:!0}))}retrieve(e,t){let r=co(t)||0;try{return this.get(e,ao,r)}catch(i){if(Is(i))return i;throw i}}destroy(){vc(this),this._destroyed=!0;let e=ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(e)}}onDestroy(e){return vc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){vc(this);let t=Kn(this),r=kt(void 0),i;try{return e()}finally{Kn(t),kt(r)}}get(e,t=ao,r){if(vc(this),e.hasOwnProperty($b))return e[$b](this);let i=co(r),o,s=Kn(this),a=kt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=eF(e)&&Dc(e);h&&this.injectableDefInScope(h)?l=ws(Lm(e),bd):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?Cc():this.parent;return t=i&8&&t===ao?null:t,c.get(e,t)}catch(c){let l=B1(c);throw l===-200||l===-201?new L(l,null):c}finally{kt(a),Kn(s)}}resolveInjectorInitializers(){let e=ie(null),t=Kn(this),r=kt(void 0),i;try{let o=this.get(Ts,Qt,{self:!0});for(let s of o)s()}finally{Kn(t),kt(r),ie(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Dr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=yt(e);let t=uo(e)?e:yt(e&&e.provide),r=J1(e);if(!uo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ws(void 0,bd,!0),i.factory=()=>Fm(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=ie(null);try{if(t.value===Hb)throw ry(Dr(e));return t.value===bd&&(t.value=Hb,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&X1(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ie(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=yt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Lm(n){let e=Dc(n),t=e!==null?e.factory:ii(n);if(t!==null)return t;if(n instanceof B)throw new L(204,!1);if(n instanceof Function)return Y1(n);throw new L(204,!1)}function Y1(n){if(n.length>0)throw new L(204,!1);let t=V1(n);return t!==null?()=>t.factory(n):()=>new n}function J1(n){if(oC(n))return ws(void 0,n.useValue);{let e=ly(n);return ws(e,bd)}}function ly(n,e,t){let r;if(uo(n)){let i=yt(n);return ii(i)||Lm(i)}else if(oC(n))r=()=>yt(n.useValue);else if(Q1(n))r=()=>n.useFactory(...Fm(n.deps||[]));else if(K1(n))r=(i,o)=>Y(yt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=yt(n&&(n.useClass||n.provide));if(Z1(n))r=()=>new i(...Fm(n.deps));else return ii(i)||Lm(i)}return r}function vc(n){if(n.destroyed)throw new L(205,!1)}function ws(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Z1(n){return!!n.deps}function X1(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function eF(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Vm(n,e){for(let t of n)Array.isArray(t)?Vm(t,e):t&&Ym(t)?Vm(t.\u0275providers,e):e(t)}function ot(n,e){let t;n instanceof lo?(vc(n),t=n):t=new Om(n);let r,i=Kn(t),o=kt(void 0);try{return e()}finally{Kn(i),kt(o)}}function aC(){return Jb()!==void 0||Td()!=null}var Nn=0,W=1,J=2,ut=3,hn=4,fn=5,Sc=6,bs=7,Tt=8,ui=9,Jn=10,xe=11,Cs=12,dy=13,po=14,pn=15,li=16,go=17,Zn=18,Ac=19,hy=20,wr=21,Od=22,Rc=23,Yt=24,mo=25,Nc=26,We=27,cC=1;var di=7,Mc=8,yo=9,Ot=10;function Xn(n){return Array.isArray(n)&&typeof n[cC]=="object"}function Mn(n){return Array.isArray(n)&&n[cC]===!0}function fy(n){return(n.flags&4)!==0}function hi(n){return n.componentOffset>-1}function Ss(n){return(n.flags&1)===1}function er(n){return!!n.template}function As(n){return(n[J]&512)!==0}function vo(n){return(n[J]&256)===256}var py="svg",uC="math";function gn(n){for(;Array.isArray(n);)n=n[Nn];return n}function gy(n,e){return gn(e[n])}function Pn(n,e){return gn(e[n.index])}function Fd(n,e){return n.data[e]}function Pc(n,e){return n[e]}function my(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function mn(n,e){let t=e[n];return Xn(t)?t:t[Nn]}function lC(n){return(n[J]&4)===4}function Ld(n){return(n[J]&128)===128}function dC(n){return Mn(n[ut])}function _o(n,e){return e==null?null:n[e]}function yy(n){n[go]=0}function vy(n){n[J]&1024||(n[J]|=1024,Ld(n)&&Rs(n))}function hC(n,e){for(;n>0;)e=e[po],n--;return e}function xc(n){return!!(n[J]&9216||n[Yt]?.dirty)}function Vd(n){n[Jn].changeDetectionScheduler?.notify(8),n[J]&64&&(n[J]|=1024),xc(n)&&Rs(n)}function Rs(n){n[Jn].changeDetectionScheduler?.notify(0);let e=oi(n);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!Ld(e)));)e=oi(e)}function _y(n,e){if(vo(n))throw new L(911,!1);n[wr]===null&&(n[wr]=[]),n[wr].push(e)}function fC(n,e){if(n[wr]===null)return;let t=n[wr].indexOf(e);t!==-1&&n[wr].splice(t,1)}function oi(n){let e=n[ut];return Mn(e)?e[ut]:e}function Ey(n){return n[bs]??=[]}function Iy(n){return n.cleanup??=[]}function pC(n,e,t,r){let i=Ey(e);i.push(t),n.firstCreatePass&&Iy(n).push(r,i.length-1)}var oe={lFrame:RC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var jm=!1;function gC(){return oe.lFrame.elementDepthCount}function mC(){oe.lFrame.elementDepthCount++}function wy(){oe.lFrame.elementDepthCount--}function jd(){return oe.bindingsEnabled}function yC(){return oe.skipHydrationRootTNode!==null}function Dy(n){return oe.skipHydrationRootTNode===n}function Ty(){oe.skipHydrationRootTNode=null}function te(){return oe.lFrame.lView}function dt(){return oe.lFrame.tView}function vC(n){return oe.lFrame.contextLView=n,n[Tt]}function _C(n){return oe.lFrame.contextLView=null,n}function st(){let n=by();for(;n!==null&&n.type===64;)n=n.parent;return n}function by(){return oe.lFrame.currentTNode}function EC(){let n=oe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ns(n,e){let t=oe.lFrame;t.currentTNode=n,t.isParent=e}function Cy(){return oe.lFrame.isParent}function IC(){oe.lFrame.isParent=!1}function wC(){return oe.lFrame.contextLView}function Sy(){return jm}function Ay(n){let e=jm;return jm=n,e}function fi(){let n=oe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ry(){return oe.lFrame.bindingIndex}function DC(n){return oe.lFrame.bindingIndex=n}function kc(){return oe.lFrame.bindingIndex++}function Ud(n){let e=oe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function TC(){return oe.lFrame.inI18n}function bC(n,e){let t=oe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bd(e)}function CC(){return oe.lFrame.currentDirectiveIndex}function Bd(n){oe.lFrame.currentDirectiveIndex=n}function SC(n){let e=oe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Ny(){return oe.lFrame.currentQueryIndex}function $d(n){oe.lFrame.currentQueryIndex=n}function tF(n){let e=n[W];return e.type===2?e.declTNode:e.type===1?n[fn]:null}function My(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=tF(o),i===null||(o=o[po],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=oe.lFrame=AC();return r.currentTNode=e,r.lView=n,!0}function Hd(n){let e=AC(),t=n[W];oe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function AC(){let n=oe.lFrame,e=n===null?null:n.child;return e===null?RC(n):e}function RC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function NC(){let n=oe.lFrame;return oe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Py=NC;function qd(){let n=NC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function MC(n){return(oe.lFrame.contextLView=hC(n,oe.lFrame.contextLView))[Tt]}function br(){return oe.lFrame.selectedIndex}function pi(n){oe.lFrame.selectedIndex=n}function zd(){let n=oe.lFrame;return Fd(n.tView,n.selectedIndex)}function PC(){oe.lFrame.currentNamespace=py}function xC(){return oe.lFrame.currentNamespace}var kC=!0;function Gd(){return kC}function Oc(n){kC=n}function Um(n,e=null,t=null,r){let i=xy(n,e,t,r);return i.resolveInjectorInitializers(),i}function xy(n,e=null,t=null,r,i=new Set){let o=[t||Qt,rC(n)];return r=r||(typeof n=="object"?void 0:Dr(n)),new lo(o,e||Cc(),r||null,i)}var He=class n{static THROW_IF_NOT_FOUND=ao;static NULL=new Ec;static create(e,t){if(Array.isArray(e))return Um({name:""},t,e,"");{let r=e.name??"";return Um({name:r},e.parent,e.providers,r)}}static \u0275prov=V({token:n,providedIn:"any",factory:()=>Y(sy)});static __NG_ELEMENT_ID__=-1},at=new B(""),xn=(()=>{class n{static __NG_ELEMENT_ID__=nF;static __NG_ENV_ID__=t=>t}return n})(),Bm=class extends xn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return vo(this._lView)}onDestroy(e){let t=this._lView;return _y(t,e),()=>fC(t,e)}};function nF(){return new Bm(te())}var OC=!1,Cr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new it(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ne(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),$m=class extends Me{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,aC()&&(this.destroyRef=P(xn,{optional:!0})??void 0,this.pendingTasks=P(Cr,{optional:!0})??void 0)}emit(e){let t=ie(null);try{super.next(e)}finally{ie(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof rt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Ve=$m;function Ad(...n){}function ky(n){let e,t;function r(){n=Ad;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Oy(n){return queueMicrotask(()=>n()),()=>{n=Ad}}var Fy="isAngularZone",Ic=Fy+"_ID",rF=0,Pe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ve(!1);onMicrotaskEmpty=new Ve(!1);onStable=new Ve(!1);onError=new Ve(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=OC}=e;if(typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,sF(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Fy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new L(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,iF,Ad,Ad);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},iF={};function Ly(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function oF(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){ky(()=>{n.callbackScheduled=!1,Hm(n),n.isCheckStableRunning=!0,Ly(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Hm(n)}function sF(n){let e=()=>{oF(n)},t=rF++;n._inner=n._inner.fork({name:"angular",properties:{[Fy]:!0,[Ic]:t,[Ic+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(aF(c))return r.invokeTask(o,s,a,c);try{return qb(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),zb(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return qb(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!cF(c)&&e(),zb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Hm(n),Ly(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Hm(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function qb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function zb(n){n._nesting--,Ly(n)}var wc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ve;onMicrotaskEmpty=new Ve;onStable=new Ve;onError=new Ve;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function aF(n){return FC(n,"__ignore_ng_zone__")}function cF(n){return FC(n,"__scheduler_tick__")}function FC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Qn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Jt=new B("",{factory:()=>{let n=P(Pe),e=P(Ge),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Qn),t.handleError(r))})}}}),LC={provide:Ts,useValue:()=>{let n=P(Qn,{optional:!0})},multi:!0};function Zt(n,e){let[t,r,i]=fm(n,e?.equal),o=t,s=o[xt];return o.set=r,o.update=i,o.asReadonly=VC.bind(o),o}function VC(){let n=this[xt];if(n.readonlyFn===void 0){let e=()=>this();e[xt]=n,n.readonlyFn=e}return n.readonlyFn}var Wd=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=uF}return n})();function uF(){return new Wd(te(),st())}var si=class{},Fc=new B("",{factory:()=>!0});var Vy=new B(""),Ms=(()=>{class n{internalPendingTasks=P(Cr);scheduler=P(si);errorHandler=P(Jt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),jy=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>new qm})}return n})(),qm=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},zm=class{[xt];constructor(e){this[xt]=e}destroy(){this[xt].destroy()}};function je(n){return pm(n)}function js(n){return{toString:n}.toString()}var Kd="__parameters__";function mF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function yF(n,e,t){return js(()=>{let r=mF(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(Kd)?c[Kd]:Object.defineProperty(c,Kd,{value:[]})[Kd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Xt=Zb(yF("Optional"),8);function vF(n){return typeof n=="function"}function pS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var nh=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},yn=(()=>{let n=()=>gS;return n.ngInherit=!0,n})();function gS(n){return n.type.prototype.ngOnChanges&&(n.setInput=EF),_F}function _F(){let n=yS(this),e=n?.current;if(e){let t=n.previous;if(t===ci)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function EF(n,e,t,r,i){let o=this.declaredInputs[r],s=yS(n)||IF(n,{previous:ci,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new nh(l&&l.currentValue,t,c===ci),pS(n,e,i,t)}var mS="__ngSimpleChanges__";function yS(n){return n[mS]||null}function IF(n,e){return n[mS]=e}var jC=[];var _e=function(n,e=null,t){for(let r=0;r<jC.length;r++){let i=jC[r];i(n,e,t)}},pe=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(pe||{});function wF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=gS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function vS(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Jd(n,e,t){_S(n,e,3,t)}function Zd(n,e,t,r){(n[J]&3)===t&&_S(n,e,t,r)}function Uy(n,e){let t=n[J];(t&3)===e&&(t&=16383,t+=1,n[J]=t)}function _S(n,e,t,r){let i=r!==void 0?n[go]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[go]+=65536),(a<o||o==-1)&&(DF(n,t,e,c),n[go]=(n[go]&4294901760)+c+2),c++}function UC(n,e){_e(pe.LifecycleHookStart,n,e);let t=ie(null);try{e.call(n)}finally{ie(t),_e(pe.LifecycleHookEnd,n,e)}}function DF(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[J]>>14<n[go]>>16&&(n[J]&3)===e&&(n[J]+=16384,UC(a,o)):UC(a,o)}var xs=-1,Io=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function TF(n){return(n.flags&8)!==0}function bF(n){return(n.flags&16)!==0}function CF(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];SF(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function ES(n){return n===3||n===4||n===6}function SF(n){return n.charCodeAt(0)===64}function ks(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?BC(n,t,i,null,e[++r]):BC(n,t,i,null,null))}}return n}function BC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function IS(n){return n!==xs}function rh(n){return n&32767}function AF(n){return n>>16}function ih(n,e){let t=AF(n),r=e;for(;t>0;)r=r[po],t--;return r}var Qy=!0;function oh(n){let e=Qy;return Qy=n,e}var RF=256,wS=RF-1,DS=5,NF=0,tr={};function MF(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(fo)&&(r=t[fo]),r==null&&(r=t[fo]=NF++);let i=r&wS,o=1<<i;e.data[n+(i>>DS)]|=o}function sh(n,e){let t=TS(n,e);if(t!==-1)return t;let r=e[W];r.firstCreatePass&&(n.injectorIndex=e.length,By(r.data,n),By(e,null),By(r.blueprint,null));let i=mv(n,e),o=n.injectorIndex;if(IS(i)){let s=rh(i),a=ih(i,e),c=a[W].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function By(n,e){n.push(0,0,0,0,0,0,0,0,e)}function TS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function mv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=RS(i),r===null)return xs;if(t++,i=i[po],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return xs}function Yy(n,e,t){MF(n,e,t)}function PF(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(ES(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function bS(n,e,t){if(t&8||n!==void 0)return n;Pd(e,"NodeInjector")}function CS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[ui],o=kt(void 0);try{return i?i.get(e,r,t&8):iy(e,r,t&8)}finally{kt(o)}}return bS(r,e,t)}function SS(n,e,t,r=0,i){if(n!==null){if(e[J]&2048&&!(r&2)){let s=FF(n,e,t,r,tr);if(s!==tr)return s}let o=AS(n,e,t,r,tr);if(o!==tr)return o}return CS(e,t,r,i)}function AS(n,e,t,r,i){let o=kF(t);if(typeof o=="function"){if(!My(e,n,r))return r&1?bS(i,t,r):CS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Pd(t);else return s}finally{Py()}}else if(typeof o=="number"){let s=null,a=TS(n,e),c=xs,l=r&1?e[pn][fn]:null;for((a===-1||r&4)&&(c=a===-1?mv(n,e):e[a+8],c===xs||!HC(r,!1)?a=-1:(s=e[W],a=rh(c),e=ih(c,e)));a!==-1;){let h=e[W];if($C(o,a,h.data)){let p=xF(a,e,t,s,r,l);if(p!==tr)return p}c=e[a+8],c!==xs&&HC(r,e[W].data[a+8]===l)&&$C(o,a,e)?(s=h,a=rh(c),e=ih(c,e)):a=-1}}return i}function xF(n,e,t,r,i,o){let s=e[W],a=s.data[n+8],c=r==null?hi(a)&&Qy:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Xd(a,s,t,c,l);return h!==null?Bc(e,s,h,a,i):tr}function Xd(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let T=s[y];if(y<c&&t===T||y>=c&&T.type===t)return y}if(i){let y=s[c];if(y&&er(y)&&y.type===t)return c}return null}function Bc(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Io){let a=o;if(a.resolving){let y=Kb(s[t]);throw ry(y)}let c=oh(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?kt(a.injectImpl):null,g=My(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&wF(t,s[t],e)}finally{p!==null&&kt(p),oh(c),a.resolving=!1,Py()}}return o}function kF(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(fo)?n[fo]:void 0;return typeof e=="number"?e>=0?e&wS:OF:e}function $C(n,e,t){let r=1<<n;return!!(t[e+(n>>DS)]&r)}function HC(n,e){return!(n&2)&&!(n&1&&e)}var Eo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return SS(this._tNode,this._lView,e,co(r),t)}};function OF(){return new Eo(st(),te())}function bt(n){return js(()=>{let e=n.prototype.constructor,t=e[_c]||Jy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[_c]||Jy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Jy(n){return Km(n)?()=>{let e=Jy(yt(n));return e&&e()}:ii(n)}function FF(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!As(s);){let a=AS(o,s,t,r|2,tr);if(a!==tr)return a;let c=o.parent;if(!c){let l=s[hy];if(l){let h=l.get(t,tr,r);if(h!==tr)return h}c=RS(s),s=s[po]}o=c}return i}function RS(n){let e=n[W],t=e.type;return t===2?e.declTNode:t===1?n[fn]:null}function Gc(n){return PF(st(),n)}function LF(){return Us(st(),te())}function Us(n,e){return new Ct(Pn(n,e))}var Ct=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=LF}return n})();function VF(n){return n instanceof Ct?n.nativeElement:n}function jF(){return this._results[Symbol.iterator]()}var ah=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Me}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=eC(e);(this._changesDetected=!Xb(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=jF};function NS(n){return(n.flags&128)===128}var yv=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(yv||{}),MS=new Map,UF=0;function BF(){return UF++}function $F(n){MS.set(n[Ac],n)}function Zy(n){MS.delete(n[Ac])}var qC="__ngContext__";function Os(n,e){Xn(e)?(n[qC]=e[Ac],$F(e)):n[qC]=e}function PS(n){return kS(n[Cs])}function xS(n){return kS(n[hn])}function kS(n){for(;n!==null&&!Mn(n);)n=n[hn];return n}var HF;function vv(n){HF=n}var vh=new B("",{factory:()=>qF}),qF="ng";var _h=new B(""),bo=new B("",{providedIn:"platform",factory:()=>"unknown"});var Eh=new B("",{factory:()=>P(at).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var OS=!1,FS=new B("",{factory:()=>OS});var zF=(n,e,t,r)=>{};function GF(n,e,t,r){zF(n,e,t,r)}function _v(n){return(n.flags&32)===32}var WF=()=>null;function LS(n,e,t=!1){return WF(n,e,t)}function VS(n,e){let t=n.contentQueries;if(t!==null){let r=ie(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];$d(o),a.contentQueries(2,e[s],s)}}}finally{ie(r)}}}function Xy(n,e,t){$d(0);let r=ie(null);try{e(n,t)}finally{ie(r)}}function Ev(n,e,t){if(fy(e)){let r=ie(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{ie(r)}}}var On=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(On||{});var Qd;function KF(){if(Qd===void 0&&(Qd=null,Tr.trustedTypes))try{Qd=Tr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Qd}function zC(n){return KF()?.createScriptURL(n)||n}var ch=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Rd})`}};function Wc(n){return n instanceof ch?n.changingThisBreaksApplicationSecurity:n}function Iv(n,e){let t=jS(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Rd})`)}return t===e}function jS(n){return n instanceof ch&&n.getTypeName()||null}var QF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function US(n){return n=String(n),n.match(QF)?n:"unsafe:"+n}var YF=/^>|^->|<!--|-->|--!>|<!-$/g,JF=/(<|>)/g,ZF="\u200B$1\u200B";function XF(n){return n.replace(YF,e=>e.replace(JF,ZF))}function eL(n,e){return n.createText(e)}function tL(n,e,t){n.setValue(e,t)}function nL(n,e){return n.createComment(XF(e))}function BS(n,e,t){return n.createElement(e,t)}function uh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function $S(n,e,t){n.appendChild(e,t)}function GC(n,e,t,r,i){r!==null?uh(n,e,t,r,i):$S(n,e,t)}function rL(n,e,t,r){n.removeChild(null,e,t,r)}function iL(n,e,t){n.setAttribute(e,"style",t)}function oL(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function HS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&CF(n,e,r),i!==null&&oL(n,e,i),o!==null&&iL(n,e,o)}var Ih=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Ih||{});function qS(n){let e=GS();return e?e.sanitize(Ih.URL,n)||"":Iv(n,"URL")?Wc(n):US(Yn(n))}function zS(n){let e=GS();if(e)return zC(e.sanitize(Ih.RESOURCE_URL,n)||"");if(Iv(n,"ResourceURL"))return zC(Wc(n));throw new L(904,!1)}function sL(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?zS:qS}function wv(n,e,t){return sL(e,t)(n)}function GS(){let n=te();return n&&n[Jn].sanitizer}function WS(n){return n instanceof Function?n():n}function aL(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var KS="ng-template";function cL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&aL(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Dv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Dv(n){return n.type===4&&n.value!==KS}function uL(n,e,t){let r=n.type===4&&!t?KS:n.value;return e===r}function lL(n,e,t){let r=4,i=n.attrs,o=i!==null?fL(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!kn(r)&&!kn(c))return!1;if(s&&kn(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!uL(n,c,t)||c===""&&e.length===1){if(kn(r))return!1;s=!0}}else if(r&8){if(i===null||!cL(n,i,c,t)){if(kn(r))return!1;s=!0}}else{let l=e[++a],h=dL(c,i,Dv(n),t);if(h===-1){if(kn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(kn(r))return!1;s=!0}}}}return kn(r)||s}function kn(n){return(n&1)===0}function dL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return pL(e,n)}function hL(n,e,t=!1){for(let r=0;r<e.length;r++)if(lL(n,e[r],t))return!0;return!1}function fL(n){for(let e=0;e<n.length;e++){let t=n[e];if(ES(t))return e}return n.length}function pL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function WC(n,e){return n?":not("+e.trim()+")":e}function gL(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!kn(s)&&(e+=WC(o,i),i=""),r=s,o=o||!kn(r);t++}return i!==""&&(e+=WC(o,i)),e}function mL(n){return n.map(gL).join(",")}function yL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!kn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var en={};function Tv(n,e,t,r,i,o,s,a,c,l,h){let p=We+r,g=p+i,y=vL(p,g),T=typeof l=="function"?l():l;return y[W]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:T,incompleteFirstPass:!1,ssrId:h}}function vL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:en);return t}function _L(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Tv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function bv(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Nn]=i,p[J]=r|4|128|8|64|1024,(l!==null||n&&n[J]&2048)&&(p[J]|=2048),yy(p),p[ut]=p[po]=n,p[Tt]=t,p[Jn]=s||n&&n[Jn],p[xe]=a||n&&n[xe],p[ui]=c||n&&n[ui]||null,p[fn]=o,p[Ac]=BF(),p[Sc]=h,p[hy]=l,p[pn]=e.type==2?n[pn]:p,p}function EL(n,e,t){let r=Pn(e,n),i=_L(t),o=n[Jn].rendererFactory,s=Cv(n,bv(n,i,null,QS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function QS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function YS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Cv(n,e){return n[Cs]?n[dy][hn]=e:n[Cs]=e,n[dy]=e,e}function IL(n=1){JS(dt(),te(),br()+n,!1)}function JS(n,e,t,r){if(!r)if((e[J]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Jd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Zd(e,o,0,t)}pi(t)}var wh=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(wh||{});function ev(n,e,t,r){let i=ie(null);try{let[o,s,a]=n.inputs[t],c=null;(s&wh.SignalBased)!==0&&(c=e[o][xt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):pS(e,c,o,r)}finally{ie(i)}}var nr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(nr||{}),wL;function Sv(n,e){return wL(n,e)}var Fs=new Set,Dh=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Dh||{}),Co=new B(""),KC=new Set;function Kc(n){KC.has(n)||(KC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Av=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),ZS=[0,1,2,3],XS=(()=>{class n{ngZone=P(Pe);scheduler=P(si);errorHandler=P(Qn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){P(Co,{optional:!0})}execute(){let t=this.sequences.size>0;t&&_e(pe.AfterRenderHooksStart),this.executing=!0;for(let r of ZS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&_e(pe.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[mo]??=[]).push(t),Rs(r),r[J]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Dh.AFTER_NEXT_RENDER,t):t()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),lh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[mo];e&&(this.view[mo]=e.filter(t=>t!==this))}};function Th(n,e){let t=e?.injector??P(He);return Kc("NgAfterNextRender"),TL(n,t,e,!0)}function DL(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function TL(n,e,t,r){let i=e.get(Av);i.impl??=e.get(XS);let o=e.get(Co,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(xn):null,a=e.get(Wd,null,{optional:!0}),c=new lh(i.impl,DL(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var bL=new B("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:P(Ge)})});function eA(n,e,t){let r=n.get(bL);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function CL(n,e){for(let[t,r]of e)eA(n,r.animateFns)}function QC(n,e,t,r){let i=n?.[Nc]?.enter;e!==null&&i&&i.has(t.index)&&CL(r,i)}function Ps(n,e,t,r,i,o,s,a){if(i!=null){let c,l=!1;Mn(i)?c=i:Xn(i)&&(l=!0,i=i[Nn]);let h=gn(i);n===0&&r!==null?(QC(a,r,o,t),s==null?$S(e,r,h):uh(e,r,h,s||null,!0)):n===1&&r!==null?(QC(a,r,o,t),uh(e,r,h,s||null,!0)):n===2?YC(a,o,t,p=>{rL(e,h,l,p)}):n===3&&YC(a,o,t,()=>{e.destroyNode(h)}),c!=null&&jL(e,n,t,c,o,r,s)}}function SL(n,e){tA(n,e),e[Nn]=null,e[fn]=null}function AL(n,e,t,r,i,o){r[Nn]=i,r[fn]=e,bh(n,r,t,1,i,o)}function tA(n,e){e[Jn].changeDetectionScheduler?.notify(9),bh(n,e,e[xe],2,null,null)}function RL(n){let e=n[Cs];if(!e)return $y(n[W],n);for(;e;){let t=null;if(Xn(e))t=e[Cs];else{let r=e[Ot];r&&(t=r)}if(!t){for(;e&&!e[hn]&&e!==n;)Xn(e)&&$y(e[W],e),e=e[ut];e===null&&(e=n),Xn(e)&&$y(e[W],e),t=e&&e[hn]}e=t}}function Rv(n,e){let t=n[yo],r=t.indexOf(e);t.splice(r,1)}function nA(n,e){if(vo(e))return;let t=e[xe];t.destroyNode&&bh(n,e,t,3,null,null),RL(e)}function $y(n,e){if(vo(e))return;let t=ie(null);try{e[J]&=-129,e[J]|=256,e[Yt]&&uc(e[Yt]),PL(n,e),ML(n,e),e[W].type===1&&e[xe].destroy();let r=e[li];if(r!==null&&Mn(e[ut])){r!==e[ut]&&Rv(r,e);let i=e[Zn];i!==null&&i.detachView(n)}Zy(e)}finally{ie(t)}}function YC(n,e,t,r){let i=n?.[Nc];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Fs.add(n),eA(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let l=s.animateFns[c],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),NL(n,r)}else n&&Fs.delete(n),r(!1)},i)}function NL(n,e){let t=n[Nc]?.running;if(t){t.then(()=>{n[Nc].running=void 0,Fs.delete(n),e(!0)});return}e(!1)}function ML(n,e){let t=n.cleanup,r=e[bs];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[bs]=null);let i=e[wr];if(i!==null){e[wr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Rc];if(o!==null){e[Rc]=null;for(let s of o)s.destroy()}}function PL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Io)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];_e(pe.LifecycleHookStart,a,c);try{c.call(a)}finally{_e(pe.LifecycleHookEnd,a,c)}}else{_e(pe.LifecycleHookStart,i,o);try{o.call(i)}finally{_e(pe.LifecycleHookEnd,i,o)}}}}}function xL(n,e,t){return kL(n,e.parent,t)}function kL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Nn];if(hi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===On.None||i===On.Emulated)return null}return Pn(r,t)}function OL(n,e,t){return LL(n,e,t)}function FL(n,e,t){return n.type&40?Pn(n,t):null}var LL=FL,JC;function Nv(n,e,t,r){let i=xL(n,r,e),o=e[xe],s=r.parent||e[fn],a=OL(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)GC(o,i,t[c],a,!1);else GC(o,i,t,a,!1);JC!==void 0&&JC(o,r,e,t,i)}function Vc(n,e){if(e!==null){let t=e.type;if(t&3)return Pn(e,n);if(t&4)return tv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Vc(n,r);{let i=n[e.index];return Mn(i)?tv(-1,i):gn(i)}}else{if(t&128)return Vc(n,e.next);if(t&32)return Sv(e,n)()||gn(n[e.index]);{let r=rA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=oi(n[pn]);return Vc(i,r)}else return Vc(n,e.next)}}}return null}function rA(n,e){if(e!==null){let r=n[pn][fn],i=e.projection;return r.projection[i]}return null}function tv(n,e){let t=Ot+n+1;if(t<e.length){let r=e[t],i=r[W].firstChild;if(i!==null)return Vc(r,i)}return e[di]}function Mv(n,e,t,r,i,o,s){for(;t!=null;){let a=r[ui];if(t.type===128){t=t.next;continue}let c=r[t.index],l=t.type;if(s&&e===0&&(c&&Os(gn(c),r),t.flags|=2),!_v(t))if(l&8)Mv(n,e,t.child,r,i,o,!1),Ps(e,n,a,i,c,t,o,r);else if(l&32){let h=Sv(t,r),p;for(;p=h();)Ps(e,n,a,i,p,t,o,r);Ps(e,n,a,i,c,t,o,r)}else l&16?VL(n,e,r,t,i,o):Ps(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function bh(n,e,t,r,i,o){Mv(t,r,n.firstChild,e,i,o,!1)}function VL(n,e,t,r,i,o){let s=t[pn],c=s[fn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Ps(e,n,t[ui],i,h,r,o,t)}else{let l=c,h=s[ut];NS(r)&&(l.flags|=128),Mv(n,e,l,h,i,o,!0)}}function jL(n,e,t,r,i,o,s){let a=r[di],c=gn(r);a!==c&&Ps(e,n,t,o,a,i,s);for(let l=Ot;l<r.length;l++){let h=r[l];bh(h[W],h,n,e,o,a)}}function UL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:nr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=nr.Important),n.setStyle(t,r,i,o))}}function iA(n,e,t,r,i){let o=br(),s=r&2;try{pi(-1),s&&e.length>We&&JS(n,e,We,!1);let a=s?pe.TemplateUpdateStart:pe.TemplateCreateStart;_e(a,i,t),t(r,i)}finally{pi(o);let a=s?pe.TemplateUpdateEnd:pe.TemplateCreateEnd;_e(a,i,t)}}function Ch(n,e,t){WL(n,e,t),(t.flags&64)===64&&KL(n,e,t)}function Sh(n,e,t=Pn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function BL(n,e,t,r){let o=r.get(FS,OS)||t===On.ShadowDom||t===On.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return $L(s),s}function $L(n){HL(n)}var HL=()=>null;function qL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function oA(n,e,t,r,i,o){let s=e[W];if(Ov(n,s,e,t,r)){hi(n)&&GL(e,n.index);return}n.type&3&&(t=qL(t)),zL(n,e,t,r,i,o)}function zL(n,e,t,r,i,o){if(n.type&3){let s=Pn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function GL(n,e){let t=mn(e,n);t[J]&16||(t[J]|=64)}function WL(n,e,t){let r=t.directiveStart,i=t.directiveEnd;hi(t)&&EL(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||sh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=Bc(e,n,s,t);if(Os(c,e),o!==null&&ZL(e,s-r,c,a,t,o),er(a)){let l=mn(t.index,e);l[Tt]=Bc(e,n,s,t)}}}function KL(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=CC();try{pi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Bd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&QL(c,l)}}finally{pi(-1),Bd(s)}}function QL(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Pv(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];hL(e,o.selectors,!1)&&(r??=[],er(o)?r.unshift(o):r.push(o))}return r}function YL(n,e,t,r,i,o){let s=Pn(n,e);JL(e[xe],s,o,n.value,t,r,i)}function JL(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Yn(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function ZL(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];ev(r,t,c,l)}}function xv(n,e,t,r,i){let o=We+t,s=e[W],a=i(s,e,n,r,t);e[o]=a,Ns(n,!0);let c=n.type===2;return c?(HS(e[xe],a,n),(gC()===0||Ss(n))&&Os(a,e),mC()):Os(a,e),Gd()&&(!c||!_v(n))&&Nv(s,e,a,n),n}function kv(n){let e=n;return Cy()?IC():(e=e.parent,Ns(e,!1)),e}function XL(n,e){let t=n[ui];if(!t)return;let r;try{r=t.get(Jt,null)}catch{r=null}r?.(e)}function Ov(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],h=s[c+1],p=e.data[l];ev(p,t[l],h,i),a=!0}if(o)for(let c of o){let l=t[c],h=e.data[c];ev(h,l,r,i),a=!0}return a}function eV(n,e){let t=mn(e,n),r=t[W];tV(r,t);let i=t[Nn];i!==null&&t[Sc]===null&&(t[Sc]=LS(i,t[ui])),_e(pe.ComponentStart);try{Fv(r,t,t[Tt])}finally{_e(pe.ComponentEnd,t[Tt])}}function tV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Fv(n,e,t){Hd(e);try{let r=n.viewQuery;r!==null&&Xy(1,r,t);let i=n.template;i!==null&&iA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Zn]?.finishViewCreation(n),n.staticContentQueries&&VS(n,e),n.staticViewQueries&&Xy(2,n.viewQuery,t);let o=n.components;o!==null&&nV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[J]&=-5,qd()}}function nV(n,e){for(let t=0;t<e.length;t++)eV(n,e[t])}function rV(n,e,t,r){let i=ie(null);try{let o=e.tView,a=n[J]&4096?4096:16,c=bv(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[li]=l;let h=n[Zn];return h!==null&&(c[Zn]=h.createEmbeddedView(o)),Fv(o,c,t),c}finally{ie(i)}}function ZC(n,e){return!e||e.firstChild===null||NS(n)}function $c(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(gn(o)),Mn(o)&&sA(o,r);let s=t.type;if(s&8)$c(n,e,t.child,r);else if(s&32){let a=Sv(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=rA(e,t);if(Array.isArray(a))r.push(...a);else{let c=oi(e[pn]);$c(c[W],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function sA(n,e){for(let t=Ot;t<n.length;t++){let r=n[t],i=r[W].firstChild;i!==null&&$c(r[W],r,i,e)}n[di]!==n[Nn]&&e.push(n[di])}function aA(n){if(n[mo]!==null){for(let e of n[mo])e.impl.addSequence(e);n[mo].length=0}}var cA=[];function iV(n){return n[Yt]??oV(n)}function oV(n){let e=cA.pop()??Object.create(aV);return e.lView=n,e}function sV(n){n.lView[Yt]!==n&&(n.lView=null,cA.push(n))}var aV=U(R({},sc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Rs(n.lView)},consumerOnSignalRead(){this.lView[Yt]=this}});function cV(n){let e=n[Yt]??Object.create(uV);return e.lView=n,e}var uV=U(R({},sc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=oi(n.lView);for(;e&&!uA(e[W]);)e=oi(e);e&&vy(e)},consumerOnSignalRead(){this.lView[Yt]=this}});function uA(n){return n.type!==2}function lA(n){if(n[Rc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Rc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[J]&8192)}}var lV=100;function dA(n,e=0){let r=n[Jn].rendererFactory,i=!1;i||r.begin?.();try{dV(n,e)}finally{i||r.end?.()}}function dV(n,e){let t=Sy();try{Ay(!0),nv(n,e);let r=0;for(;xc(n);){if(r===lV)throw new L(103,!1);r++,nv(n,1)}}finally{Ay(t)}}function hV(n,e,t,r){if(vo(e))return;let i=e[J],o=!1,s=!1;Hd(e);let a=!0,c=null,l=null;o||(uA(n)?(l=iV(e),c=cc(l)):Kl()===null?(a=!1,l=cV(e),c=cc(l)):e[Yt]&&(uc(e[Yt]),e[Yt]=null));try{yy(e),DC(n.bindingStartIndex),t!==null&&iA(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Jd(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Zd(e,y,0,null),Uy(e,0)}if(s||fV(e),lA(e),hA(e,0),n.contentQueries!==null&&VS(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Jd(e,y)}else{let y=n.contentHooks;y!==null&&Zd(e,y,1),Uy(e,1)}gV(n,e);let p=n.components;p!==null&&pA(e,p,0);let g=n.viewQuery;if(g!==null&&Xy(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Jd(e,y)}else{let y=n.viewHooks;y!==null&&Zd(e,y,2),Uy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Od]){for(let y of e[Od])y();e[Od]=null}o||(aA(e),e[J]&=-73)}catch(h){throw o||Rs(e),h}finally{l!==null&&(Ql(l,c),a&&sV(l)),qd()}}function hA(n,e){for(let t=PS(n);t!==null;t=xS(t))for(let r=Ot;r<t.length;r++){let i=t[r];fA(i,e)}}function fV(n){for(let e=PS(n);e!==null;e=xS(e)){if(!(e[J]&2))continue;let t=e[yo];for(let r=0;r<t.length;r++){let i=t[r];vy(i)}}}function pV(n,e,t){_e(pe.ComponentStart);let r=mn(e,n);try{fA(r,t)}finally{_e(pe.ComponentEnd,r[Tt])}}function fA(n,e){Ld(n)&&nv(n,e)}function nv(n,e){let r=n[W],i=n[J],o=n[Yt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Yl(o)),s||=!1,o&&(o.dirty=!1),n[J]&=-9217,s)hV(r,n,r.template,n[Tt]);else if(i&8192){let a=ie(null);try{lA(n),hA(n,1);let c=r.components;c!==null&&pA(n,c,1),aA(n)}finally{ie(a)}}}function pA(n,e,t){for(let r=0;r<e.length;r++)pV(n,e[r],t)}function gV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)pi(~i);else{let o=i,s=t[++r],a=t[++r];bC(s,o);let c=e[o];_e(pe.HostBindingsUpdateStart,c);try{a(2,c)}finally{_e(pe.HostBindingsUpdateEnd,c)}}}}finally{pi(-1)}}function Lv(n,e){let t=Sy()?64:1088;for(n[Jn].changeDetectionScheduler?.notify(e);n;){n[J]|=t;let r=oi(n);if(As(n)&&!r)return n;n=r}return null}function gA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function mV(n,e,t,r=!0){let i=e[W];if(yV(i,e,n,t),r){let s=tv(t,n),a=e[xe],c=a.parentNode(n[di]);c!==null&&AL(i,n[fn],a,e,c,s)}let o=e[Sc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function rv(n,e){if(n.length<=Ot)return;let t=Ot+e,r=n[t];if(r){let i=r[li];i!==null&&i!==n&&Rv(i,r),e>0&&(n[t-1][hn]=r[hn]);let o=Tc(n,Ot+e);SL(r[W],r);let s=o[Zn];s!==null&&s.detachView(o[W]),r[ut]=null,r[hn]=null,r[J]&=-129}return r}function yV(n,e,t,r){let i=Ot+r,o=t.length;r>0&&(t[i-1][hn]=e),r<o-Ot?(e[hn]=t[i],oy(t,Ot+r,e)):(t.push(e),e[hn]=null),e[ut]=t;let s=e[li];s!==null&&t!==s&&mA(s,e);let a=e[Zn];a!==null&&a.insertView(n),Vd(e),e[J]|=128}function mA(n,e){let t=n[yo],r=e[ut];if(Xn(r))n[J]|=2;else{let i=r[ut][pn];e[pn]!==i&&(n[J]|=2)}t===null?n[yo]=[e]:t.push(e)}var gi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[W];return $c(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Tt]}set context(e){this._lView[Tt]=e}get destroyed(){return vo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ut];if(Mn(e)){let t=e[Mc],r=t?t.indexOf(this):-1;r>-1&&(rv(e,r),Tc(t,r))}this._attachedToViewContainer=!1}nA(this._lView[W],this._lView)}onDestroy(e){_y(this._lView,e)}markForCheck(){Lv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){Vd(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,dA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=As(this._lView),t=this._lView[li];t!==null&&!e&&Rv(t,this._lView),tA(this._lView[W],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=e;let t=As(this._lView),r=this._lView[li];r!==null&&!t&&mA(r,this._lView),Vd(this._lView)}};var mi=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=vV;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=rV(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new gi(o)}}return n})();function vV(){return Ah(st(),te())}function Ah(n,e){return n.type&4?new mi(e,n,Us(n,e)):null}function Rh(n,e,t,r,i){let o=n.data[e];if(o===null)o=_V(n,e,t,r,i),TC()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=EC();o.injectorIndex=s===null?-1:s.injectorIndex}return Ns(o,!0),o}function _V(n,e,t,r,i){let o=by(),s=Cy(),a=s?o:o&&o.parent,c=n.data[e]=IV(n,a,t,e,r,i);return EV(n,c,o,s),c}function EV(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function IV(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return yC()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var wV=()=>null;function XC(n,e){return wV(n,e)}var yA=class{},Nh=class{},iv=class{resolveComponentFactory(e){throw new L(917,!1)}},Qc=class{static NULL=new iv},wo=class{},vn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>DV()}return n})();function DV(){let n=te(),e=st(),t=mn(e.index,n);return(Xn(t)?t:n)[xe]}var vA=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>null})}return n})();var eh={},ov=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,eh,r);return i!==eh||t===eh?i:this.parentInjector.get(e,t,r)}};function dh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Wm(i,a);else if(o==2){let c=a,l=e[++s];r=Wm(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function $(n,e=0){let t=te();if(t===null)return Y(n,e);let r=st();return SS(r,t,yt(n),e)}function _A(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,c,l]=h.resolveHostDirectives(s);break}CV(n,e,t,a,o,c,l)}o!==null&&r!==null&&TV(t,r,o)}function TV(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new L(-301,!1);r.push(e[i],o)}}function bV(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function CV(n,e,t,r,i,o,s){let a=r.length,c=null;for(let g=0;g<a;g++){let y=r[g];c===null&&er(y)&&(c=y,bV(n,t,g)),Yy(sh(t,e),n,y.type)}PV(t,n.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=YS(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=ks(t.mergedAttrs,y.hostAttrs),AV(n,t,e,p,y),MV(p,y,i),s!==null&&s.has(y)){let[M,A]=s.get(y);t.directiveToIndex.set(y.type,[p,M+t.directiveStart,A+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let T=y.type.prototype;!l&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(T.ngOnChanges||T.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}SV(n,t,o)}function SV(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))eS(0,e,i,r),eS(1,e,i,r),nS(e,r,!1);else{let o=t.get(i);tS(0,e,o,r),tS(1,e,o,r),nS(e,r,!0)}}}function eS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),EA(e,o)}}function tS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),EA(e,s)}}function EA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function nS(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Dv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let l=i[c];for(let h of l)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let l=o[c];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function AV(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ii(i.type,!0)),s=new Io(o,er(i),$,null);n.blueprint[r]=s,t[r]=s,RV(n,e,r,YS(n,t,i.hostVars,en),i)}function RV(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;NV(s)!=a&&s.push(a),s.push(t,r,o)}}function NV(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function MV(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;er(e)&&(t[""]=n)}}function PV(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Vv(n,e,t,r,i,o,s,a){let c=e[W],l=c.consts,h=_o(l,s),p=Rh(c,n,t,r,h);return o&&_A(c,e,p,_o(l,a),i),p.mergedAttrs=ks(p.mergedAttrs,p.attrs),p.attrs!==null&&dh(p,p.attrs,!1),p.mergedAttrs!==null&&dh(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function jv(n,e){vS(n,e),fy(e)&&n.queries.elementEnd(e)}function xV(n,e,t,r,i,o){let s=e.consts,a=_o(s,i),c=Rh(e,n,t,r,a);if(c.mergedAttrs=ks(c.mergedAttrs,c.attrs),o!=null){let l=_o(s,o);c.localNames=[];for(let h=0;h<l.length;h+=2)c.localNames.push(l[h],-1)}return c.attrs!==null&&dh(c,c.attrs,!1),c.mergedAttrs!==null&&dh(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Uv(n){return wA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function IA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function wA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Yc(n,e,t){return n[e]=t}function rr(n,e,t){if(t===en)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Hc(n,e,t,r){let i=rr(n,e,t);return rr(n,e+1,r)||i}function DA(n,e,t,r,i){let o=Hc(n,e,t,r);return rr(n,e+2,i)||o}function kV(n,e,t,r,i,o){let s=Hc(n,e,t,r);return Hc(n,e+2,i,o)||s}function th(n,e,t){return function r(i){let o=hi(n)?mn(n.index,e):e;Lv(o,5);let s=e[Tt],a=rS(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=rS(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function rS(n,e,t,r){let i=ie(null);try{return _e(pe.OutputStart,e,t),t(r)!==!1}catch(o){return XL(n,o),!1}finally{_e(pe.OutputEnd,e,t),ie(i)}}function TA(n,e,t,r,i,o,s,a){let c=Ss(n),l=!1,h=null;if(!r&&c&&(h=FV(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Pn(n,t),g=r?r(p):p;GF(t,g,o,a);let y=i.listen(g,o,a);if(!OV(o)){let T=r?M=>r(gn(M[n.index])):n.index;bA(T,e,t,o,a,y,!1)}}return l}function OV(n){return n.startsWith("animation")||n.startsWith("transition")}function FV(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[bs],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function bA(n,e,t,r,i,o,s){let a=e.firstCreatePass?Iy(e):null,c=Ey(t),l=c.length;c.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function iS(n,e,t,r,i,o){let s=e[t],a=e[W],l=a.data[t].outputs[r],p=s[l].subscribe(o);bA(n.index,a,e,i,o,p,!0)}var sv=Symbol("BINDING");var hh=class extends Qc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ai(e);return new Ls(t,this.ngModule)}};function LV(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&wh.SignalBased)!==0};return i&&(o.transform=i),o})}function VV(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function jV(n,e,t){let r=e instanceof Ge?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new ov(t,r):t}function UV(n){let e=n.get(wo,null);if(e===null)throw new L(407,!1);let t=n.get(vA,null),r=n.get(si,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function BV(n,e){let t=CA(n);return BS(e,t,t==="svg"?py:t==="math"?uC:null)}function CA(n){return(n.selectors[0][0]||"div").toLowerCase()}var Ls=class extends Nh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=LV(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=VV(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=mL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){_e(pe.DynamicComponentStart);let a=ie(null);try{let c=this.componentDef,l=$V(r,c,s,o),h=jV(c,i||this.ngModule,e),p=UV(h),g=p.rendererFactory.createRenderer(null,c),y=r?BL(g,r,c.encapsulation,h):BV(c,g),T=s?.some(oS)||o?.some(k=>typeof k!="function"&&k.bindings.some(oS)),M=bv(null,l,null,512|QS(c),null,null,p,g,h,null,LS(y,h,!0));M[We]=y,Hd(M);let A=null;try{let k=Vv(We,M,2,"#host",()=>l.directiveRegistry,!0,0);HS(g,y,k),Os(y,M),Ch(l,M,k),Ev(l,k,M),jv(l,k),t!==void 0&&qV(k,this.ngContentSelectors,t),A=mn(k.index,M),M[Tt]=A[Tt],Fv(l,M,null)}catch(k){throw A!==null&&Zy(A),Zy(M),k}finally{_e(pe.DynamicComponentEnd),qd()}return new fh(this.componentType,M,!!T)}finally{ie(a)}}};function $V(n,e,t,r){let i=n?["ng-version","21.0.6"]:yL(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[sv].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[sv].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=ny(p);c.push(g)}return Tv(0,null,HV(o,s),1,a,c,null,null,null,[i],null)}function HV(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function oS(n){let e=n[sv].kind;return e==="input"||e==="twoWay"}var fh=class extends yA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Fd(t[W],We),this.location=Us(this._tNode,t),this.instance=mn(this._tNode.index,t)[Tt],this.hostView=this.changeDetectorRef=new gi(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Ov(r,i[W],i,e,t);this.previousInputValues.set(e,t);let s=mn(r.index,i);Lv(s,1)}get injector(){return new Eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function qV(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Sr=(()=>{class n{static __NG_ELEMENT_ID__=zV}return n})();function zV(){let n=st();return AA(n,te())}var GV=Sr,SA=class extends GV{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Us(this._hostTNode,this._hostLView)}get injector(){return new Eo(this._hostTNode,this._hostLView)}get parentInjector(){let e=mv(this._hostTNode,this._hostLView);if(IS(e)){let t=ih(e,this._hostLView),r=rh(e),i=t[W].data[r+8];return new Eo(i,t)}else return new Eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=sS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ot}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=XC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,ZC(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!vF(e),l;if(c)l=t;else{let A=t||{};l=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef,s=A.directives,a=A.bindings}let h=c?e:new Ls(ai(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let k=(c?p:this.parentInjector).get(Ge,null);k&&(o=k)}let g=ai(h.componentType??{}),y=XC(this._lContainer,g?.id??null),T=y?.firstChild??null,M=h.create(p,i,T,o,s,a);return this.insertImpl(M.hostView,l,ZC(this._hostTNode,y)),M}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(dC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[ut],l=new SA(c,c[fn],c[ut]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return mV(s,i,o,r),e.attachToViewContainerRef(),oy(Hy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=sS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=rv(this._lContainer,t);r&&(Tc(Hy(this._lContainer),t),nA(r[W],r))}detach(e){let t=this._adjustIndex(e,-1),r=rv(this._lContainer,t);return r&&Tc(Hy(this._lContainer),t)!=null?new gi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function sS(n){return n[Mc]}function Hy(n){return n[Mc]||(n[Mc]=[])}function AA(n,e){let t,r=e[n.index];return Mn(r)?t=r:(t=gA(r,e,null,n),e[n.index]=t,Cv(e,t)),KV(t,e,n,r),new SA(t,n,e)}function WV(n,e){let t=n[xe],r=t.createComment(""),i=Pn(e,n),o=t.parentNode(i);return uh(t,o,r,t.nextSibling(i),!1),r}var KV=JV,QV=()=>!1;function YV(n,e,t){return QV(n,e,t)}function JV(n,e,t,r){if(n[di])return;let i;t.type&8?i=gn(r):i=WV(e,t),n[di]=i}var av=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},cv=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Bv(e,t).matches!==null&&this.queries[t].setDirty()}},uv=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=oj(e):this.predicate=e}},lv=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},dv=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,ZV(t,o)),this.matchTNodeWithReadOption(e,t,Xd(t,e,o,!1,!1))}else r===mi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Xd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ct||i===Sr||i===mi&&t.type&4)this.addMatch(t.index,-2);else{let o=Xd(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function ZV(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function XV(n,e){return n.type&11?Us(n,e):n.type&4?Ah(n,e):null}function ej(n,e,t,r){return t===-1?XV(e,n):t===-2?tj(n,e,r):Bc(n,n[W],t,e)}function tj(n,e,t){if(t===Ct)return Us(e,n);if(t===mi)return Ah(e,n);if(t===Sr)return AA(e,n)}function RA(n,e,t,r){let i=e[Zn].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let h=o[l];a.push(ej(e,h,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function hv(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=RA(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-c];for(let p=Ot;p<h.length;p++){let g=h[p];g[li]===g[ut]&&hv(g[W],g,l,r)}if(h[yo]!==null){let p=h[yo];for(let g=0;g<p.length;g++){let y=p[g];hv(y[W],y,l,r)}}}}}return r}function nj(n,e){return n[Zn].queries[e].queryList}function rj(n,e,t){let r=new ah((t&4)===4);return pC(n,e,r,r.destroy),(e[Zn]??=new cv).queries.push(new av(r))-1}function ij(n,e,t,r){let i=dt();if(i.firstCreatePass){let o=st();sj(i,new uv(e,t,r),o.index),aj(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return rj(i,te(),t)}function oj(n){return n.split(",").map(e=>e.trim())}function sj(n,e,t){n.queries===null&&(n.queries=new lv),n.queries.track(new dv(e,t))}function aj(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Bv(n,e){return n.queries.getByIndex(e)}function cj(n,e){let t=n[W],r=Bv(t,e);return r.crossesNgTemplate?hv(t,n,e,[]):RA(t,n,r,e)}var Do=class{},Mh=class{};var ph=class extends Do{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new hh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=ty(e);this._bootstrapComponents=WS(o.bootstrap),this._r3Injector=xy(e,t,[{provide:Do,useValue:this},{provide:Qc,useValue:this.componentFactoryResolver},...r],Dr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gh=class extends Mh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new ph(this.moduleType,e,[])}};var qc=class extends Do{injector;componentFactoryResolver=new hh(this);instance=null;constructor(e){super();let t=new lo([...e.providers,{provide:Do,useValue:this},{provide:Qc,useValue:this.componentFactoryResolver}],e.parent||Cc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Jc(n,e,t=null){return new qc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var uj=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=cy(!1,t.type),i=r.length>0?Jc([r],this._injector,""):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=V({token:n,providedIn:"environment",factory:()=>new n(Y(Ge))})}return n})();function $v(n){return js(()=>{let e=NA(n),t=U(R({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===yv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(uj).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||On.Emulated,styles:n.styles||Qt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Kc("NgStandalone"),MA(t);let r=n.dependencies;return t.directiveDefs=aS(r,lj),t.pipeDefs=aS(r,Wb),t.id=fj(t),t})}function lj(n){return ai(n)||ny(n)}function ir(n){return js(()=>({type:n.type,bootstrap:n.bootstrap||Qt,declarations:n.declarations||Qt,imports:n.imports||Qt,exports:n.exports||Qt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function dj(n,e){if(n==null)return ci;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=wh.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function hj(n){if(n==null)return ci;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function de(n){return js(()=>{let e=NA(n);return MA(e),e})}function Bs(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function NA(n){let e={};return{type:n.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ci,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Qt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:dj(n.inputs,e),outputs:hj(n.outputs),debugInfo:null}}function MA(n){n.features?.forEach(e=>e(n))}function aS(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function fj(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function pj(n){return Object.getPrototypeOf(n.prototype).constructor}function qe(n){let e=pj(n.type),t=!0,r=[n];for(;e;){let i;if(er(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new L(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=qy(n.inputs),s.declaredInputs=qy(n.declaredInputs),s.outputs=qy(n.outputs);let a=i.hostBindings;a&&_j(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&yj(n,c),l&&vj(n,l),gj(n,i),Gb(n.outputs,i.outputs),er(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===qe&&(t=!1)}}e=Object.getPrototypeOf(e)}mj(r)}function gj(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function mj(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ks(i.hostAttrs,t=ks(t,i.hostAttrs))}}function qy(n){return n===ci?{}:n===Qt?[]:n}function yj(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function vj(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function _j(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Ej(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=ks(n.mergedAttrs,n.attrs);let h=n.tView=Tv(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ns(n,!1);let c=wj(t,e,n,r);Gd()&&Nv(t,e,c,n),Os(c,e);let l=gA(c,e,c,n);e[r+We]=l,Cv(e,l),YV(l,n,e)}function Ij(n,e,t,r,i,o,s,a,c,l,h){let p=t+We,g;return e.firstCreatePass?(g=Rh(e,p,4,s||null,a||null),jd()&&_A(e,n,g,_o(e.consts,l),Pv),vS(e,g)):g=e.data[p],Ej(g,n,e,t,r,i,o,c),Ss(g)&&Ch(e,n,g),l!=null&&Sh(n,g,h),g}function PA(n,e,t,r,i,o,s,a){let c=te(),l=dt(),h=_o(l.consts,o);return Ij(c,l,n,e,t,r,i,h,void 0,s,a),PA}var wj=Dj;function Dj(n,e,t,r){return Oc(!0),e[xe].createComment("")}var Hv=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function xA(n){return typeof n=="function"&&n[xt]!==void 0}function qv(n){return xA(n)&&typeof n.set=="function"}var zv=new B("");function Ar(n){return!!n&&typeof n.then=="function"}function Ph(n){return!!n&&typeof n.subscribe=="function"}var kA=new B("");var Gv=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=P(kA,{optional:!0})??[];injector=P(He);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=ot(this.injector,i);if(Ar(o))t.push(o);else if(Ph(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xh=new B("");function OA(){hm(()=>{let n="";throw new L(600,n)})}function FA(n){return n.isBoundToModule}var Tj=10;var yi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(Jt);afterRenderManager=P(Av);zonelessEnabled=P(Fc);rootEffectScheduler=P(jy);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Me;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(Cr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ee(t=>!t))}constructor(){P(Co,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=P(Ge);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=He.NULL){return this._injector.get(Pe).run(()=>{_e(pe.BootstrapComponentStart);let s=t instanceof Nh;if(!this._injector.get(Gv).done){let T="";throw new L(405,T)}let c;s?c=t:c=this._injector.get(Qc).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let l=FA(c)?void 0:this._injector.get(Do),h=r||c.selector,p=c.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(zv,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),jc(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),_e(pe.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){_e(pe.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Dh.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw _e(pe.ChangeDetectionEnd),new L(101,!1);let t=ie(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ie(t),this.afterTick.next(),_e(pe.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(wo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Tj;){_e(pe.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{_e(pe.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!xc(i))continue;let o=r&&!this.zonelessEnabled?0:1;dA(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>xc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;jc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(xh,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>jc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new L(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function vi(n,e,t,r){let i=te(),o=kc();if(rr(i,o,e)){let s=dt(),a=zd();YL(a,i,n,e,t,r)}return vi}var rJ=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function LA(n,e,t){let r=te(),i=kc();if(rr(r,i,e)){let o=dt(),s=zd();oA(s,r,n,e,r[xe],t)}return LA}function cS(n,e,t,r,i){Ov(e,n,t,i?"class":"style",r)}function Wv(n,e,t,r){let i=te(),o=i[W],s=n+We,a=o.firstCreatePass?Vv(s,i,2,e,Pv,jd(),t,r):o.data[s];if(xv(a,i,n,e,jA),Ss(a)){let c=i[W];Ch(c,i,a),Ev(c,a,i)}return r!=null&&Sh(i,a),Wv}function Kv(){let n=dt(),e=st(),t=kv(e);return n.firstCreatePass&&jv(n,t),Dy(t)&&Ty(),wy(),t.classesWithoutHost!=null&&TF(t)&&cS(n,t,te(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&bF(t)&&cS(n,t,te(),t.stylesWithoutHost,!1),Kv}function kh(n,e,t,r){return Wv(n,e,t,r),Kv(),kh}function Qv(n,e,t,r){let i=te(),o=i[W],s=n+We,a=o.firstCreatePass?xV(s,o,2,e,t,r):o.data[s];return xv(a,i,n,e,jA),r!=null&&Sh(i,a),Qv}function Yv(){let n=st(),e=kv(n);return Dy(e)&&Ty(),wy(),Yv}function VA(n,e,t,r){return Qv(n,e,t,r),Yv(),VA}var jA=(n,e,t,r,i)=>(Oc(!0),BS(e[xe],r,xC()));function UA(n,e,t){let r=te(),i=r[W],o=n+We,s=i.firstCreatePass?Vv(o,r,8,"ng-container",Pv,jd(),e,t):i.data[o];if(xv(s,r,n,"ng-container",bj),Ss(s)){let a=r[W];Ch(a,r,s),Ev(a,s,r)}return t!=null&&Sh(r,s),UA}function BA(){let n=dt(),e=st(),t=kv(e);return n.firstCreatePass&&jv(n,t),BA}var bj=(n,e,t,r,i)=>(Oc(!0),nL(e[xe],""));function Cj(){return te()}var Lc=void 0;function Sj(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var Aj=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Lc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Lc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Lc,Lc,Lc],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Sj],Uc={};function Jv(n,e,t){typeof e!="string"&&(t=e,e=n[Ne.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Uc[e]=n,t&&(Uc[e][Ne.ExtraData]=t)}function Ft(n){let e=Rj(n),t=uS(e);if(t)return t;let r=e.split("-")[0];if(t=uS(r),t)return t;if(r==="en")return Aj;throw new L(701,!1)}function uS(n){return n in Uc||(Uc[n]=Tr.ng&&Tr.ng.common&&Tr.ng.common.locales&&Tr.ng.common.locales[n]),Uc[n]}var Ne=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(Ne||{});function Rj(n){return n.toLowerCase().replace(/_/g,"-")}var Zc="en-US",Nj="USD";var Mj=Zc;function $A(n){typeof n=="string"&&(Mj=n.toLowerCase().replace(/_/g,"-"))}function Fn(n,e,t){let r=te(),i=dt(),o=st();return qA(i,r,r[xe],o,n,e,t),Fn}function HA(n,e,t){let r=te(),i=dt(),o=st();return(o.type&3||t)&&TA(o,i,r,t,r[xe],n,e,th(o,r,e)),HA}function qA(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=th(r,e,o),TA(r,n,e,s,t,i,o,c)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];c??=th(r,e,o),iS(r,e,g,y,i,c)}if(l&&l.length)for(let p of l)c??=th(r,e,o),iS(r,e,p,i,i,c)}}function Pj(n=1){return MC(n)}function Oh(n,e,t,r){return ij(n,e,t,r),Oh}function Zv(n){let e=te(),t=dt(),r=Ny();$d(r+1);let i=Bv(t,r);if(n.dirty&&lC(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=cj(e,r);n.reset(o,VF),n.notifyOnChanges()}return!0}return!1}function Xv(){return nj(te(),Ny())}function xj(n){let e=wC();return Pc(e,We+n)}function Yd(n,e){return n<<17|e<<2}function To(n){return n>>17&32767}function kj(n){return(n&2)==2}function Oj(n,e){return n&131071|e<<17}function fv(n){return n|2}function Vs(n){return(n&131068)>>2}function zy(n,e){return n&-131069|e<<2}function Fj(n){return(n&1)===1}function pv(n){return n|1}function Lj(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=To(s),c=Vs(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ds(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let g=To(n[a+1]);n[r+1]=Yd(g,a),g!==0&&(n[g+1]=zy(n[g+1],r)),n[a+1]=Oj(n[a+1],r)}else n[r+1]=Yd(a,0),a!==0&&(n[a+1]=zy(n[a+1],r)),a=r;else n[r+1]=Yd(c,0),a===0?a=r:n[c+1]=zy(n[c+1],r),c=r;l&&(n[r+1]=fv(n[r+1])),lS(n,h,r,!0),lS(n,h,r,!1),Vj(e,h,n,r,o),s=Yd(a,c),o?e.classBindings=s:e.styleBindings=s}function Vj(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ds(o,e)>=0&&(t[r+1]=pv(t[r+1]))}function lS(n,e,t,r){let i=n[t+1],o=e===null,s=r?To(i):Vs(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];jj(c,e)&&(a=!0,n[s+1]=r?pv(l):fv(l)),s=r?To(l):Vs(l)}a&&(n[t+1]=r?fv(i):pv(i))}function jj(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ds(n,e)>=0:!1}function zA(n,e,t){return GA(n,e,t,!1),zA}function Xc(n,e){return GA(n,e,null,!0),Xc}function GA(n,e,t,r){let i=te(),o=dt(),s=Ud(2);if(o.firstUpdatePass&&Bj(o,n,s,r),e!==en&&rr(i,s,e)){let a=o.data[br()];Gj(o,a,i,i[xe],n,i[s+1]=Wj(e,t),r,s)}}function Uj(n,e){return e>=n.expandoStartIndex}function Bj(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[br()],s=Uj(n,t);Kj(o,r)&&e===null&&!s&&(e=!1),e=$j(i,o,e,r),Lj(i,o,e,t,s,r)}}function $j(n,e,t,r){let i=SC(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Gy(null,n,e,t,r),t=zc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Gy(i,n,e,t,r),o===null){let c=Hj(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Gy(null,n,e,c[1],r),c=zc(c,e.attrs,r),qj(n,e,r,c))}else o=zj(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Hj(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Vs(r)!==0)return n[To(r)]}function qj(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[To(i)]=r}function zj(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=zc(r,s,t)}return zc(r,e.attrs,t)}function Gy(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=zc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function zc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),nC(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Gj(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=Fj(l)?dS(c,e,t,i,Vs(l),s):void 0;if(!mh(h)){mh(o)||kj(l)&&(o=dS(c,null,t,i,a,s));let p=gy(br(),t);UL(r,s,p,i,o)}}function dS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,g=t[i+1];g===en&&(g=p?Qt:void 0);let y=p?kd(g,r):h===r?g:void 0;if(l&&!mh(y)&&(y=kd(c,r)),mh(y)&&(a=y,s))return a;let T=n[i+1];i=s?To(T):Vs(T)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=kd(c,r))}return a}function mh(n){return n!==void 0}function Wj(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Dr(Wc(n)))),n}function Kj(n,e){return(n.flags&(e?8:16))!==0}function Qj(n,e=""){let t=te(),r=dt(),i=n+We,o=r.firstCreatePass?Rh(r,i,1,e,null):r.data[i],s=Yj(r,t,o,e,n);t[i]=s,Gd()&&Nv(r,t,s,o),Ns(o,!1)}var Yj=(n,e,t,r,i)=>(Oc(!0),eL(e[xe],r));function Jj(n,e,t,r=""){return rr(n,kc(),t)?e+Yn(t)+r:en}function Zj(n,e,t,r,i,o=""){let s=Ry(),a=Hc(n,s,t,i);return Ud(2),a?e+Yn(t)+r+Yn(i)+o:en}function Xj(n,e,t,r,i,o,s,a=""){let c=Ry(),l=DA(n,c,t,i,s);return Ud(3),l?e+Yn(t)+r+Yn(i)+o+Yn(s)+a:en}function WA(n){return e_("",n),WA}function e_(n,e,t){let r=te(),i=Jj(r,n,e,t);return i!==en&&t_(r,br(),i),e_}function KA(n,e,t,r,i){let o=te(),s=Zj(o,n,e,t,r,i);return s!==en&&t_(o,br(),s),KA}function QA(n,e,t,r,i,o,s){let a=te(),c=Xj(a,n,e,t,r,i,o,s);return c!==en&&t_(a,br(),c),QA}function t_(n,e,t){let r=gy(e,n);tL(n[xe],r,t)}function YA(n,e,t){qv(e)&&(e=e());let r=te(),i=kc();if(rr(r,i,e)){let o=dt(),s=zd();oA(s,r,n,e,r[xe],t)}return YA}function e2(n,e){let t=qv(n);return t&&n.set(e),t}function JA(n,e){let t=te(),r=dt(),i=st();return qA(r,t,t[xe],i,n,e),JA}function hS(n,e,t){let r=dt();r.firstCreatePass&&ZA(e,r.data,r.blueprint,er(n),t)}function ZA(n,e,t,r,i){if(n=yt(n),Array.isArray(n))for(let o=0;o<n.length;o++)ZA(n[o],e,t,r,i);else{let o=dt(),s=te(),a=st(),c=uo(n)?n:yt(n.provide),l=ly(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(uo(n)||!n.multi){let y=new Io(l,i,$,null),T=Ky(c,e,i?h:h+g,p);T===-1?(Yy(sh(a,s),o,c),Wy(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[T]=y,s[T]=y)}else{let y=Ky(c,e,h+g,p),T=Ky(c,e,h,h+g),M=y>=0&&t[y],A=T>=0&&t[T];if(i&&!A||!i&&!M){Yy(sh(a,s),o,c);let k=r2(i?n2:t2,t.length,i,r,l,n);!i&&A&&(t[T].providerFactory=k),Wy(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),s.push(k)}else{let k=XA(t[i?T:y],l,!i&&r);Wy(o,n,y>-1?y:T,k)}!i&&r&&A&&t[T].componentProviders++}}}function Wy(n,e,t,r){let i=uo(e),o=sC(e);if(i||o){let c=(o?yt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function XA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ky(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function t2(n,e,t,r,i){return gv(this.multi,[])}function n2(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Bc(r,r[W],this.providerFactory.index,i);s=c.slice(0,a),gv(o,s);for(let l=a;l<c.length;l++)s.push(c[l])}else s=[],gv(o,s);return s}function gv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function r2(n,e,t,r,i,o){let s=new Io(n,t,$,null);return s.multi=[],s.index=e,s.componentProviders=0,XA(s,i,r&&!t),s}function Lt(n,e){return t=>{t.providersResolver=(r,i)=>hS(r,i?i(n):n,!1),e&&(t.viewProvidersResolver=(r,i)=>hS(r,i?i(e):e,!0))}}function i2(n,e,t,r){return e0(te(),fi(),n,e,t,r)}function o2(n,e,t,r,i){return t0(te(),fi(),n,e,t,r,i)}function s2(n,e,t,r,i,o){return c2(te(),fi(),n,e,t,r,i,o)}function a2(n,e,t,r,i,o,s){return u2(te(),fi(),n,e,t,r,i,o,s)}function eu(n,e){let t=n[e];return t===en?void 0:t}function e0(n,e,t,r,i,o){let s=e+t;return rr(n,s,i)?Yc(n,s+1,o?r.call(o,i):r(i)):eu(n,s+1)}function t0(n,e,t,r,i,o,s){let a=e+t;return Hc(n,a,i,o)?Yc(n,a+2,s?r.call(s,i,o):r(i,o)):eu(n,a+2)}function c2(n,e,t,r,i,o,s,a){let c=e+t;return DA(n,c,i,o,s)?Yc(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):eu(n,c+3)}function u2(n,e,t,r,i,o,s,a,c){let l=e+t;return kV(n,l,i,o,s,a)?Yc(n,l+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):eu(n,l+4)}function l2(n,e,t,r,i,o){let s=e+t,a=!1;for(let c=0;c<i.length;c++)rr(n,s++,i[c])&&(a=!0);return a?Yc(n,s,r.apply(o,i)):eu(n,s)}function d2(n,e){let t=dt(),r,i=n+We;t.firstCreatePass?(r=h2(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=ii(r.type,!0)),s,a=kt($);try{let c=oh(!1),l=o();return oh(c),my(t,te(),i,l),l}finally{kt(a)}}function h2(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function f2(n,e,t){let r=n+We,i=te(),o=Pc(i,r);return n_(i,r)?e0(i,fi(),e,o.transform,t,o):o.transform(t)}function p2(n,e,t,r){let i=n+We,o=te(),s=Pc(o,i);return n_(o,i)?t0(o,fi(),e,s.transform,t,r,s):s.transform(t,r)}function g2(n,e,t){let r=n+We,i=te(),o=Pc(i,r);return n_(i,r)?l2(i,fi(),e,o.transform,t,o):o.transform.apply(o,t)}function n_(n,e){return n[W].data[e].pure}function m2(n,e){return Ah(n,e)}var yh=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},r_=(()=>{class n{compileModuleSync(t){return new gh(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=ty(t),o=WS(i.declarations).reduce((s,a)=>{let c=ai(a);return c&&s.push(new Ls(c)),s},[]);return new yh(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var n0=(()=>{class n{applicationErrorHandler=P(Jt);appRef=P(yi);taskService=P(Cr);ngZone=P(Pe);zonelessEnabled=P(Fc);tracing=P(Co,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new rt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ic):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Vy,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Oy:ky;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ic+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Oy(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function r0(){return[{provide:si,useExisting:n0},{provide:Pe,useClass:wc},{provide:Fc,useValue:!0}]}function y2(){return typeof $localize<"u"&&$localize.locale||Zc}var So=new B("",{factory:()=>P(So,{optional:!0,skipSelf:!0})||y2()}),i_=new B("",{factory:()=>Nj});function $s(n,e){return Jl(n,e?.equal)}var c0=Symbol("InputSignalNode#UNSET"),N2=U(R({},Zl),{transformFn:void 0,applyValueToInputSignal(n,e){lc(n,e)}});function u0(n,e){let t=Object.create(N2);t.value=n,t.transformFn=e?.transform;function r(){if(ac(t),t.value===c0){let i=null;throw new L(-950,i)}return t.value}return r[xt]=t,r}var Lh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Gc(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function i0(n,e){return u0(n,e)}function M2(n){return u0(c0,n)}var l0=(i0.required=M2,i0);var o_=new B(""),P2=new B("");function tu(n){return!n.moduleRef}function x2(n){let e=tu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Pe);return t.run(()=>{tu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Jt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),tu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(o_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(o_);s.add(o),n.moduleRef.onDestroy(()=>{jc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return O2(r,t,()=>{let o=e.get(Cr),s=o.add(),a=e.get(Gv);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(So,Zc);if($A(c||Zc),!e.get(P2,!0))return tu(n)?e.get(yi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(tu(n)){let h=e.get(yi);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return k2?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var k2;function O2(n,e,t){try{let r=t();return Ar(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Fh=null;function F2(n=[],e){return He.create({name:e,providers:[{provide:bc,useValue:"platform"},{provide:o_,useValue:new Set([()=>Fh=null])},...n]})}function L2(n=[]){if(Fh)return Fh;let e=F2(n);return Fh=e,OA(),V2(e),e}function V2(n){let e=n.get(_h,null);ot(n,()=>{e?.forEach(t=>t())})}function l_(){return!1}var or=(()=>{class n{static __NG_ELEMENT_ID__=j2}return n})();function j2(n){return U2(st(),te(),(n&16)===16)}function U2(n,e,t){if(hi(n)&&!t){let r=mn(n.index,e);return new gi(r,r)}else if(n.type&175){let r=e[pn];return new gi(r,e)}return null}var s_=class{constructor(){}supports(e){return Uv(e)}create(e){return new a_(e)}},B2=(n,e)=>e,a_=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||B2}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<o0(r,i,o)?t:r,a=o0(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,T=y+g;h<=T&&T<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Uv(e))throw new L(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,IA(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new c_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Vh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Vh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},c_=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},u_=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Vh=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new u_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function o0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function s0(){return new d_([new s_])}var d_=(()=>{class n{factories;static \u0275prov=V({token:n,providedIn:"root",factory:s0});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=P(n,{optional:!0,skipSelf:!0});return n.create(t,r||s0())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new L(901,!1)}}return n})();function d0(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;_e(pe.BootstrapApplicationStart);try{let o=i?.injector??L2(r),s=[r0(),LC,...t||[]],a=new qc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return x2({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{_e(pe.BootstrapApplicationEnd)}}function _i(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var h0=null;function _n(){return h0}function h_(n){h0??=n}var nu=class{},jh=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>P(f0),providedIn:"platform"})}return n})();var f0=(()=>{class n extends jh{_location;_history;_doc=P(at);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _n().getBaseHref(this._doc)}onPopState(t){let r=_n().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=_n().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function m0(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function p0(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Ei(n){return n&&n[0]!=="?"?`?${n}`:n}var Hs=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>P(H2),providedIn:"root"})}return n})(),$2=new B(""),H2=(()=>{class n extends Hs{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(at).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return m0(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Ei(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Ei(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Ei(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Y(jh),Y($2,8))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qs=(()=>{class n{_subject=new Me;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=G2(p0(g0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ei(r))}normalize(t){return n.stripTrailingSlash(z2(this._basePath,g0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ei(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ei(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Ei;static joinWithSlash=m0;static stripTrailingSlash=p0;static \u0275fac=function(r){return new(r||n)(Y(Hs))};static \u0275prov=V({token:n,factory:()=>q2(),providedIn:"root"})}return n})();function q2(){return new qs(Y(Hs))}function z2(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function g0(n){return n.replace(/\/index.html$/,"")}function G2(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var D0={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KGS:[void 0,"\u20C0"],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XCG:["Cg."],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Qh=(function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n})(Qh||{});var St=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(St||{}),Ee=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(Ee||{}),zt=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(zt||{}),_t={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function T0(n){return Ft(n)[Ne.LocaleId]}function b0(n,e,t){let r=Ft(n),i=[r[Ne.DayPeriodsFormat],r[Ne.DayPeriodsStandalone]],o=En(i,e);return En(o,t)}function C0(n,e,t){let r=Ft(n),i=[r[Ne.DaysFormat],r[Ne.DaysStandalone]],o=En(i,e);return En(o,t)}function S0(n,e,t){let r=Ft(n),i=[r[Ne.MonthsFormat],r[Ne.MonthsStandalone]],o=En(i,e);return En(o,t)}function A0(n,e){let r=Ft(n)[Ne.Eras];return En(r,e)}function ru(n,e){let t=Ft(n);return En(t[Ne.DateFormat],e)}function iu(n,e){let t=Ft(n);return En(t[Ne.TimeFormat],e)}function ou(n,e){let r=Ft(n)[Ne.DateTimeFormat];return En(r,e)}function Vn(n,e){let t=Ft(n),r=t[Ne.NumberSymbols][e];if(typeof r>"u"){if(e===_t.CurrencyDecimal)return t[Ne.NumberSymbols][_t.Decimal];if(e===_t.CurrencyGroup)return t[Ne.NumberSymbols][_t.Group]}return r}function I_(n,e){return Ft(n)[Ne.NumberFormats][e]}function W2(n){return Ft(n)[Ne.Currencies]}function R0(n){if(!n[Ne.ExtraData])throw new L(2303,!1)}function N0(n){let e=Ft(n);return R0(e),(e[Ne.ExtraData][2]||[]).map(r=>typeof r=="string"?f_(r):[f_(r[0]),f_(r[1])])}function M0(n,e,t){let r=Ft(n);R0(r);let i=[r[Ne.ExtraData][0],r[Ne.ExtraData][1]],o=En(i,e)||[];return En(o,t)||[]}function En(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new L(2304,!1)}function f_(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}function P0(n,e,t="en"){let r=W2(t)[n]||D0[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var K2=2;function x0(n){let e,t=D0[n];return t&&(e=t[2]),typeof e=="number"?e:K2}var Q2=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Uh={},Y2=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function k0(n,e,t,r){let i=oU(n);e=Rr(t,e)||e;let s=[],a;for(;e;)if(a=Y2.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=F0(r,c),i=iU(i,r));let l="";return s.forEach(h=>{let p=nU(h);l+=p?p(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function zh(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Rr(n,e){let t=T0(n);if(Uh[t]??={},Uh[t][e])return Uh[t][e];let r="";switch(e){case"shortDate":r=ru(n,zt.Short);break;case"mediumDate":r=ru(n,zt.Medium);break;case"longDate":r=ru(n,zt.Long);break;case"fullDate":r=ru(n,zt.Full);break;case"shortTime":r=iu(n,zt.Short);break;case"mediumTime":r=iu(n,zt.Medium);break;case"longTime":r=iu(n,zt.Long);break;case"fullTime":r=iu(n,zt.Full);break;case"short":let i=Rr(n,"shortTime"),o=Rr(n,"shortDate");r=Bh(ou(n,zt.Short),[i,o]);break;case"medium":let s=Rr(n,"mediumTime"),a=Rr(n,"mediumDate");r=Bh(ou(n,zt.Medium),[s,a]);break;case"long":let c=Rr(n,"longTime"),l=Rr(n,"longDate");r=Bh(ou(n,zt.Long),[c,l]);break;case"full":let h=Rr(n,"fullTime"),p=Rr(n,"fullDate");r=Bh(ou(n,zt.Full),[h,p]);break}return r&&(Uh[t][e]=r),r}function Bh(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Ln(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function J2(n,e){return Ln(n,3).substring(0,e)}function Ke(n,e,t=0,r=!1,i=!1){return function(o,s){let a=Z2(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return J2(a,e);let c=Vn(s,_t.MinusSign);return Ln(a,e,c,r,i)}}function Z2(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new L(2301,!1)}}function Ce(n,e,t=St.Format,r=!1){return function(i,o){return X2(i,o,n,e,t,r)}}function X2(n,e,t,r,i,o){switch(t){case 2:return S0(e,i,r)[n.getMonth()];case 1:return C0(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=N0(e),h=M0(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[y,T]=g,M=s>=y.hours&&a>=y.minutes,A=s<T.hours||s===T.hours&&a<T.minutes;if(y.hours<T.hours){if(M&&A)return!0}else if(M||A)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return b0(e,i,r)[s<12?0:1];case 3:return A0(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new L(2302,!1)}}function $h(n){return function(e,t,r){let i=-1*r,o=Vn(t,_t.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Ln(s,2,o)+Ln(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Ln(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Ln(s,2,o)+":"+Ln(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Ln(s,2,o)+":"+Ln(Math.abs(i%60),2,o);default:throw new L(2310,!1)}}}var eU=0,qh=4;function tU(n){let e=zh(n,eU,1).getDay();return zh(n,0,1+(e<=qh?qh:qh+7)-e)}function O0(n){let e=n.getDay(),t=e===0?-3:qh-e;return zh(n.getFullYear(),n.getMonth(),n.getDate()+t)}function p_(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=O0(t),s=tU(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Ln(i,n,Vn(r,_t.MinusSign))}}function Hh(n,e=!1){return function(t,r){let o=O0(t).getFullYear();return Ln(o,n,Vn(r,_t.MinusSign),e)}}var g_={};function nU(n){if(g_[n])return g_[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ce(3,Ee.Abbreviated);break;case"GGGG":e=Ce(3,Ee.Wide);break;case"GGGGG":e=Ce(3,Ee.Narrow);break;case"y":e=Ke(0,1,0,!1,!0);break;case"yy":e=Ke(0,2,0,!0,!0);break;case"yyy":e=Ke(0,3,0,!1,!0);break;case"yyyy":e=Ke(0,4,0,!1,!0);break;case"Y":e=Hh(1);break;case"YY":e=Hh(2,!0);break;case"YYY":e=Hh(3);break;case"YYYY":e=Hh(4);break;case"M":case"L":e=Ke(1,1,1);break;case"MM":case"LL":e=Ke(1,2,1);break;case"MMM":e=Ce(2,Ee.Abbreviated);break;case"MMMM":e=Ce(2,Ee.Wide);break;case"MMMMM":e=Ce(2,Ee.Narrow);break;case"LLL":e=Ce(2,Ee.Abbreviated,St.Standalone);break;case"LLLL":e=Ce(2,Ee.Wide,St.Standalone);break;case"LLLLL":e=Ce(2,Ee.Narrow,St.Standalone);break;case"w":e=p_(1);break;case"ww":e=p_(2);break;case"W":e=p_(1,!0);break;case"d":e=Ke(2,1);break;case"dd":e=Ke(2,2);break;case"c":case"cc":e=Ke(7,1);break;case"ccc":e=Ce(1,Ee.Abbreviated,St.Standalone);break;case"cccc":e=Ce(1,Ee.Wide,St.Standalone);break;case"ccccc":e=Ce(1,Ee.Narrow,St.Standalone);break;case"cccccc":e=Ce(1,Ee.Short,St.Standalone);break;case"E":case"EE":case"EEE":e=Ce(1,Ee.Abbreviated);break;case"EEEE":e=Ce(1,Ee.Wide);break;case"EEEEE":e=Ce(1,Ee.Narrow);break;case"EEEEEE":e=Ce(1,Ee.Short);break;case"a":case"aa":case"aaa":e=Ce(0,Ee.Abbreviated);break;case"aaaa":e=Ce(0,Ee.Wide);break;case"aaaaa":e=Ce(0,Ee.Narrow);break;case"b":case"bb":case"bbb":e=Ce(0,Ee.Abbreviated,St.Standalone,!0);break;case"bbbb":e=Ce(0,Ee.Wide,St.Standalone,!0);break;case"bbbbb":e=Ce(0,Ee.Narrow,St.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ce(0,Ee.Abbreviated,St.Format,!0);break;case"BBBB":e=Ce(0,Ee.Wide,St.Format,!0);break;case"BBBBB":e=Ce(0,Ee.Narrow,St.Format,!0);break;case"h":e=Ke(3,1,-12);break;case"hh":e=Ke(3,2,-12);break;case"H":e=Ke(3,1);break;case"HH":e=Ke(3,2);break;case"m":e=Ke(4,1);break;case"mm":e=Ke(4,2);break;case"s":e=Ke(5,1);break;case"ss":e=Ke(5,2);break;case"S":e=Ke(6,1);break;case"SS":e=Ke(6,2);break;case"SSS":e=Ke(6,3);break;case"Z":case"ZZ":case"ZZZ":e=$h(0);break;case"ZZZZZ":e=$h(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=$h(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=$h(2);break;default:return null}return g_[n]=e,e}function F0(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function rU(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function iU(n,e,t){let i=n.getTimezoneOffset(),o=F0(e,i);return rU(n,-1*(o-i))}function oU(n){if(y0(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return zh(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Q2))return sU(r)}let e=new Date(n);if(!y0(e))throw new L(2311,!1);return e}function sU(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function y0(n){return n instanceof Date&&!isNaN(n.valueOf())}var aU=/^(\d+)?\.((\d+)(-(\d+))?)?$/,v0=22,Gh=".",su="0",cU=";",uU=",",m_="#",_0="\xA4";function L0(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=Vn(t,_t.Infinity);else{let l=dU(n);s&&(l=lU(l));let h=e.minInt,p=e.minFrac,g=e.maxFrac;if(o){let G=o.match(aU);if(G===null)throw new L(2306,!1);let ae=G[1],Fe=G[3],Ae=G[5];ae!=null&&(h=y_(ae)),Fe!=null&&(p=y_(Fe)),Ae!=null?g=y_(Ae):Fe!=null&&p>g&&(g=p)}hU(l,p,g);let y=l.digits,T=l.integerLen,M=l.exponent,A=[];for(c=y.every(G=>!G);T<h;T++)y.unshift(0);for(;T<0;T++)y.unshift(0);T>0?A=y.splice(T,y.length):(A=y,y=[0]);let k=[];for(y.length>=e.lgSize&&k.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)k.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&k.unshift(y.join("")),a=k.join(Vn(t,r)),A.length&&(a+=Vn(t,i)+A.join("")),M&&(a+=Vn(t,_t.Exponential)+"+"+M)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function V0(n,e,t,r,i){let o=I_(e,Qh.Currency),s=U0(o,Vn(e,_t.MinusSign));return s.minFrac=x0(r),s.maxFrac=s.minFrac,L0(n,s,e,_t.CurrencyGroup,_t.CurrencyDecimal,i).replace(_0,t).replace(_0,"").trim()}function j0(n,e,t){let r=I_(e,Qh.Decimal),i=U0(r,Vn(e,_t.MinusSign));return L0(n,i,e,_t.Group,_t.Decimal,t)}function U0(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(cU),i=r[0],o=r[1],s=i.indexOf(Gh)!==-1?i.split(Gh):[i.substring(0,i.lastIndexOf(su)+1),i.substring(i.lastIndexOf(su)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(m_));for(let h=0;h<c.length;h++){let p=c.charAt(h);p===su?t.minFrac=t.maxFrac=h+1:p===m_?t.maxFrac=h+1:t.posSuf+=p}let l=a.split(uU);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let h=i.length-t.posPre.length-t.posSuf.length,p=o.indexOf(m_);t.negPre=o.substring(0,p).replace(/'/g,""),t.negSuf=o.slice(p+h).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function lU(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function dU(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(Gh))>-1&&(e=e.replace(Gh,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===su;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===su;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>v0&&(r=r.splice(0,v0-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function hU(n,e,t){if(e>t)throw new L(2307,!1);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,l=e+n.integerLen,h=r.reduceRight(function(p,g,y,T){return g=g+p,T[y]=g<10?g:g-10,c&&(T[y]===0&&y>=l?T.pop():c=!1),g>=10?1:0},0);h&&(r.unshift(h),n.integerLen++)}function y_(n){let e=parseInt(n);if(isNaN(e))throw new L(2305,!1);return e}var v_=/\s+/,E0=[],fU=(()=>{class n{_ngEl;_renderer;initialClasses=E0;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(v_):E0}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(v_):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(v_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)($(Ct),$(vn))};static \u0275dir=de({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Wh=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},B0=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Wh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),I0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);I0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)($(Sr),$(mi),$(d_))};static \u0275dir=de({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function I0(n,e){n.context.$implicit=e.item}var pU=(()=>{class n{_viewContainer;_context=new Kh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){w0(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){w0(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)($(Sr),$(mi))};static \u0275dir=de({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),Kh=class{$implicit=null;ngIf=null};function w0(n,e){if(n&&!n.createEmbeddedView)throw new L(2020,!1)}function Yh(n,e){return new L(2100,!1)}var __=class{createSubscription(e,t,r){return je(()=>e.subscribe({next:t,error:r}))}dispose(e){je(()=>e.unsubscribe())}},E_=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},gU=new E_,mU=new __,yU=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=P(Jt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Ar(t))return gU;if(Ph(t))return mU;throw Yh(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)($(or,16))};static \u0275pipe=Bs({name:"async",type:n,pure:!1})}return n})();var vU="mediumDate",$0=new B(""),H0=new B(""),_U=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??vU,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return k0(t,s,o||this.locale,a)}catch(s){throw Yh(n,s.message)}}static \u0275fac=function(r){return new(r||n)($(So,16),$($0,24),$(H0,24))};static \u0275pipe=Bs({name:"date",type:n,pure:!0})}return n})();var EU=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!q0(t))return null;i||=this._locale;try{let o=z0(t);return j0(o,i,r)}catch(o){throw Yh(n,o.message)}}static \u0275fac=function(r){return new(r||n)($(So,16))};static \u0275pipe=Bs({name:"number",type:n,pure:!0})}return n})();var IU=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!q0(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=P0(a,i==="symbol"?"wide":"narrow",s):a=i);try{let c=z0(t);return V0(c,s,a,r,o)}catch(c){throw Yh(n,c.message)}}static \u0275fac=function(r){return new(r||n)($(So,16),$(i_,16))};static \u0275pipe=Bs({name:"currency",type:n,pure:!0})}return n})();function q0(n){return!(n==null||n===""||n!==n)}function z0(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new L(2309,!1);return n}var G0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ir({type:n});static \u0275inj=An({})}return n})();function w_(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var au=class{};function _ie(n,e,t){return Jv(n,e,t)}var W0="browser";var cu=class{_doc;constructor(e){this._doc=e}manager},Jh=(()=>{class n extends cu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Y(at))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),ef=new B(""),C_=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Jh));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Jh);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new L(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Y(ef),Y(Pe))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),D_="ng-app-id";function K0(n){for(let e of n)e.remove()}function Q0(n,e){let t=e.createElement("style");return t.textContent=n,t}function DU(n,e,t,r){let i=n.head?.querySelectorAll(`style[${D_}="${e}"],link[${D_}="${e}"]`);if(i)for(let o of i)o.removeAttribute(D_),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function b_(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var S_=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,DU(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,Q0);r?.forEach(i=>this.addUsage(i,this.external,b_))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(K0(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])K0(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,Q0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,b_(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Y(at),Y(vh),Y(Eh,8),Y(bo))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),T_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},A_=/%COMP%/g;var J0="%COMP%",TU=`_nghost-${J0}`,bU=`_ngcontent-${J0}`,CU=!0,SU=new B("",{factory:()=>CU});function AU(n){return bU.replace(A_,n)}function RU(n){return TU.replace(A_,n)}function Z0(n,e){return e.map(t=>t.replace(A_,n))}var R_=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(t,r,i,o,s,a,c=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=l,this.defaultRenderer=new uu(t,s,a,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Xh?i.applyToHost(t):i instanceof lu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case On.Emulated:o=new Xh(c,l,r,this.appId,h,s,a,p);break;case On.ShadowDom:return new Zh(c,t,r,s,a,this.nonce,p,l);case On.ExperimentalIsolatedShadowDom:return new Zh(c,t,r,s,a,this.nonce,p);default:o=new lu(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Y(C_),Y(S_),Y(vh),Y(SU),Y(at),Y(Pe),Y(Eh),Y(Co,8))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),uu=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(T_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Y0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Y0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new L(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=T_[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=T_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(nr.DashCase|nr.Important)?e.style.setProperty(t,r,i&nr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&nr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=_n().getGlobalEventTarget(this.doc,e),!e))throw new L(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Y0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Zh=class extends uu{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,c){super(e,i,o,a),this.hostEl=t,this.sharedStylesHost=c,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=Z0(r.id,l);for(let p of l){let g=document.createElement("style");s&&g.setAttribute("nonce",s),g.textContent=p,this.shadowRoot.appendChild(g)}let h=r.getExternalStyles?.();if(h)for(let p of h){let g=b_(p,i);s&&g.setAttribute("nonce",s),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},lu=class extends uu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=c?Z0(c,l):l,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Fs.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Xh=class extends lu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=AU(l),this.hostAttr=RU(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var tf=class n extends nu{supportsDOMEvents=!0;static makeCurrent(){h_(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=NU();return t==null?null:MU(t)}resetBaseElement(){du=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return w_(document.cookie,e)}},du=null;function NU(){return du=du||document.head.querySelector("base"),du?du.getAttribute("href"):null}function MU(n){return new URL(n,document.baseURI).pathname}var PU=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),X0=["alt","control","meta","shift"],xU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},eR=(()=>{class n extends cu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_n().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),X0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=xU[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),X0.forEach(s=>{if(s!==i){let a=kU[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Y(at))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function OU(n,e,t){let r=R({rootComponent:n,platformRef:t?.platformRef},FU(e));return d0(r)}function FU(n){return{appProviders:[...BU,...n?.providers??[]],platformProviders:UU}}function LU(){tf.makeCurrent()}function VU(){return new Qn}function jU(){return vv(document),document}var UU=[{provide:bo,useValue:W0},{provide:_h,useValue:LU,multi:!0},{provide:at,useFactory:jU}];var BU=[{provide:bc,useValue:"root"},{provide:Qn,useFactory:VU},{provide:ef,useClass:Jh,multi:!0},{provide:ef,useClass:eR,multi:!0},R_,S_,C_,{provide:wo,useExisting:R_},{provide:au,useClass:PU},[]];var tR=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Y(at))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Z="primary",Tu=Symbol("RouteTitle"),k_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Mo(n){return new k_(n)}function lR(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function cf(n){return new Promise((e,t)=>{n.pipe(Ir()).subscribe({next:r=>e(r),error:r=>t(r)})})}function qU(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!sr(n[t],e[t]))return!1;return!0}function sr(n,e){let t=n?O_(n):void 0,r=e?O_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!dR(n[i],e[i]))return!1;return!0}function O_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function dR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function hR(n){return n.length>0?n[n.length-1]:null}function xo(n){return _d(n)?n:Ar(n)?Te(Promise.resolve(n)):re(n)}function fR(n){return _d(n)?cf(n):Promise.resolve(n)}var zU={exact:gR,subset:mR},pR={exact:GU,subset:WU,ignored:()=>!0};function nR(n,e,t){return zU[t.paths](n.root,e.root,t.matrixParams)&&pR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function GU(n,e){return sr(n,e)}function gR(n,e,t){if(!Ro(n.segments,e.segments)||!of(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!gR(n.children[r],e.children[r],t))return!1;return!0}function WU(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>dR(n[t],e[t]))}function mR(n,e,t){return yR(n,e,e.segments,t)}function yR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ro(i,t)||e.hasChildren()||!of(i,t,r))}else if(n.segments.length===t.length){if(!Ro(n.segments,t)||!of(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!mR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ro(n.segments,i)||!of(n.segments,i,r)||!n.children[Z]?!1:yR(n.children[Z],e,o,r)}}function of(n,e,t){return e.every((r,i)=>pR[t](n[i].parameters,r.parameters))}var Un=class{root;queryParams;fragment;_queryParamMap;constructor(e=new me([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Mo(this.queryParams),this._queryParamMap}toString(){return YU.serialize(this)}},me=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sf(this)}},Ii=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Mo(this.parameters),this._parameterMap}toString(){return _R(this)}};function KU(n,e){return Ro(n,e)&&n.every((t,r)=>sr(t.parameters,e[r].parameters))}function Ro(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function QU(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Z&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Z&&(t=t.concat(e(i,r)))}),t}var bu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>new wi,providedIn:"root"})}return n})(),wi=class{parse(e){let t=new L_(e);return new Un(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${hu(e.root,!0)}`,r=XU(e.queryParams),i=typeof e.fragment=="string"?`#${JU(e.fragment)}`:"";return`${t}${r}${i}`}},YU=new wi;function sf(n){return n.segments.map(e=>_R(e)).join("/")}function hu(n,e){if(!n.hasChildren())return sf(n);if(e){let t=n.children[Z]?hu(n.children[Z],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Z&&r.push(`${i}:${hu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=QU(n,(r,i)=>i===Z?[hu(n.children[Z],!1)]:[`${i}:${hu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Z]!=null?`${sf(n)}/${t[0]}`:`${sf(n)}/(${t.join("//")})`}}function vR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nf(n){return vR(n).replace(/%3B/gi,";")}function JU(n){return encodeURI(n)}function F_(n){return vR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function af(n){return decodeURIComponent(n)}function rR(n){return af(n.replace(/\+/g,"%20"))}function _R(n){return`${F_(n.path)}${ZU(n.parameters)}`}function ZU(n){return Object.entries(n).map(([e,t])=>`;${F_(e)}=${F_(t)}`).join("")}function XU(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${nf(t)}=${nf(i)}`).join("&"):`${nf(t)}=${nf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var eB=/^[^\/()?;#]+/;function N_(n){let e=n.match(eB);return e?e[0]:""}var tB=/^[^\/()?;=#]+/;function nB(n){let e=n.match(tB);return e?e[0]:""}var rB=/^[^=?&#]+/;function iB(n){let e=n.match(rB);return e?e[0]:""}var oB=/^[^&#]+/;function sB(n){let e=n.match(oB);return e?e[0]:""}var L_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Z]=new me(e,t)),r}parseSegment(){let e=N_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(e),new Ii(af(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=nB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=N_(this.remaining);i&&(r=i,this.capture(r))}e[af(t)]=af(r)}parseQueryParam(e){let t=iB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=sB(this.remaining);s&&(r=s,this.capture(r))}let i=rR(t),o=rR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=N_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new L(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Z);let s=this.parseChildren();t[o??Z]=Object.keys(s).length===1&&s[Z]?s[Z]:new me([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new L(4011,!1)}};function ER(n){return n.segments.length>0?new me([],{[Z]:n}):n}function IR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=IR(i);if(r===Z&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new me(n.segments,e);return aB(t)}function aB(n){if(n.numberOfChildren===1&&n.children[Z]){let e=n.children[Z];return new me(n.segments.concat(e.segments),e.children)}return n}function Di(n){return n instanceof Un}function wR(n,e,t=null,r=null,i=new wi){let o=DR(n);return TR(o,e,t,r,i)}function DR(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new me(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=ER(r);return e??i}function TR(n,e,t,r,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return M_(o,o,o,t,r,i);let s=cB(e);if(s.toRoot())return M_(o,o,new me([],{}),t,r,i);let a=uB(s,o,n),c=a.processChildren?pu(a.segmentGroup,a.index,s.commands):CR(a.segmentGroup,a.index,s.commands);return M_(o,a.segmentGroup,c,t,r,i)}function uf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function yu(n){return typeof n=="object"&&n!=null&&n.outlets}function iR(n,e,t){n||="\u0275";let r=new Un;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function M_(n,e,t,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>iR(l,p,o)):iR(l,h,o);let a;n===e?a=t:a=bR(n,e,t);let c=ER(IR(a));return new Un(c,s,i)}function bR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=bR(o,e,t)}),new me(n.segments,r)}var lf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&uf(r[0]))throw new L(4003,!1);let i=r.find(yu);if(i&&i!==hR(r))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function cB(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new lf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new lf(t,e,r)}var Gs=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function uB(n,e,t){if(n.isAbsolute)return new Gs(e,!0,0);if(!t)return new Gs(e,!1,NaN);if(t.parent===null)return new Gs(t,!0,0);let r=uf(n.commands[0])?0:1,i=t.segments.length-1+r;return lB(t,i,n.numberOfDoubleDots)}function lB(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new L(4005,!1);i=r.segments.length}return new Gs(r,!1,i-o)}function dB(n){return yu(n[0])?n[0].outlets:{[Z]:n}}function CR(n,e,t){if(n??=new me([],{}),n.segments.length===0&&n.hasChildren())return pu(n,e,t);let r=hB(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new me(n.segments.slice(0,r.pathIndex),{});return o.children[Z]=new me(n.segments.slice(r.pathIndex),n.children),pu(o,0,i)}else return r.match&&i.length===0?new me(n.segments,{}):r.match&&!n.hasChildren()?V_(n,e,t):r.match?pu(n,0,i):V_(n,e,t)}function pu(n,e,t){if(t.length===0)return new me(n.segments,{});{let r=dB(t),i={};if(Object.keys(r).some(o=>o!==Z)&&n.children[Z]&&n.numberOfChildren===1&&n.children[Z].segments.length===0){let o=pu(n.children[Z],e,t);return new me(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=CR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new me(n.segments,i)}}function hB(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(yu(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!sR(c,l,s))return o;r+=2}else{if(!sR(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function V_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(yu(o)){let c=fB(o.outlets);return new me(r,c)}if(i===0&&uf(t[0])){let c=n.segments[e];r.push(new Ii(c.path,oR(t[0]))),i++;continue}let s=yu(o)?o.outlets[Z]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&uf(a)?(r.push(new Ii(s,oR(a))),i+=2):(r.push(new Ii(s,{})),i++)}return new me(r,{})}function fB(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=V_(new me([],{}),0,r))}),e}function oR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function sR(n,e,t){return n==t.path&&sr(e,t.parameters)}var gu="imperative",ht=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(ht||{}),nn=class{id;url;constructor(e,t){this.id=e,this.url=t}},Po=class extends nn{type=ht.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Bn=class extends nn{urlAfterRedirects;type=ht.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Vt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Vt||{}),vu=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(vu||{}),ar=class extends nn{reason;code;type=ht.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Nr=class extends nn{reason;code;type=ht.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ks=class extends nn{error;target;type=ht.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_u=class extends nn{urlAfterRedirects;state;type=ht.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},df=class extends nn{urlAfterRedirects;state;type=ht.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hf=class extends nn{urlAfterRedirects;state;shouldActivate;type=ht.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ff=class extends nn{urlAfterRedirects;state;type=ht.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pf=class extends nn{urlAfterRedirects;state;type=ht.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gf=class{route;type=ht.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},mf=class{route;type=ht.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},yf=class{snapshot;type=ht.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vf=class{snapshot;type=ht.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_f=class{snapshot;type=ht.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ef=class{snapshot;type=ht.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Eu=class{},Qs=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function pB(n){return!(n instanceof Eu)&&!(n instanceof Qs)}function gB(n,e){return n.providers&&!n._injector&&(n._injector=Jc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function jn(n){return n.outlet||Z}function mB(n,e){let t=n.filter(r=>jn(r)===e);return t.push(...n.filter(r=>jn(r)!==e)),t}function Zs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var If=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Zs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Xs(this.rootInjector)}},Xs=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new If(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Y(Ge))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=j_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=j_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=U_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return U_(e,this._root).map(t=>t.value)}};function j_(n,e){if(n===e.value)return e;for(let t of e.children){let r=j_(n,t);if(r)return r}return null}function U_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=U_(n,t);if(r.length)return r.unshift(e),r}return[]}var tn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function zs(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Iu=class extends wf{snapshot;constructor(e,t){super(e),this.snapshot=t,G_(this,e)}toString(){return this.snapshot.toString()}};function SR(n){let e=yB(n),t=new it([new Ii("",{})]),r=new it({}),i=new it({}),o=new it({}),s=new it(""),a=new Mr(t,r,o,s,i,Z,n,e.root);return a.snapshot=e.root,new Iu(new tn(a,[]),e)}function yB(n){let e={},t={},r={},o=new No([],e,r,"",t,Z,n,null,{});return new wu("",new tn(o,[]))}var Mr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ee(l=>l[Tu]))??re(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>Mo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>Mo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Df(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:R(R({},e.params),n.params),data:R(R({},e.data),n.data),resolve:R(R(R(R({},n.data),e.data),i?.data),n._resolvedData)}:r={params:R({},n.params),data:R({},n.data),resolve:R(R({},n.data),n._resolvedData??{})},i&&RR(i)&&(r.resolve[Tu]=i.title),r}var No=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Tu]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Mo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Mo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wu=class extends wf{url;constructor(e,t){super(t),this.url=e,G_(this,t)}toString(){return AR(this._root)}};function G_(n,e){e.value._routerState=n,e.children.forEach(t=>G_(n,t))}function AR(n){let e=n.children.length>0?` { ${n.children.map(AR).join(", ")} } `:"";return`${n.value}${e}`}function P_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,sr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),sr(e.params,t.params)||n.paramsSubject.next(t.params),qU(e.url,t.url)||n.urlSubject.next(t.url),sr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function B_(n,e){let t=sr(n.params,e.params)&&KU(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||B_(n.parent,e.parent))}function RR(n){return typeof n.title=="string"||n.title===null}var NR=new B(""),W_=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Z;activateEvents=new Ve;deactivateEvents=new Ve;attachEvents=new Ve;detachEvents=new Ve;routerOutletData=l0();parentContexts=P(Xs);location=P(Sr);changeDetector=P(or);inputBinder=P(Sf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new $_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=de({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[yn]})}return n})(),$_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Mr?this.route:e===Xs?this.childContexts:e===NR?this.outletData:this.parent.get(e,t)}},Sf=new B("");var K_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=$v({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&kh(0,"router-outlet")},dependencies:[W_],encapsulation:2})}return n})();function Q_(n){let e=n.children&&n.children.map(Q_),t=e?U(R({},n),{children:e}):R({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Z&&(t.component=K_),t}function vB(n,e,t){let r=Du(n,e._root,t?t._root:void 0);return new Iu(r,e)}function Du(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=_B(n,e,t);return new tn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Du(n,a)),s}}let r=EB(e.value),i=e.children.map(o=>Du(n,o));return new tn(r,i)}}function _B(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Du(n,r,i);return Du(n,r)})}function EB(n){return new Mr(new it(n.url),new it(n.params),new it(n.queryParams),new it(n.fragment),new it(n.data),n.outlet,n.component,n)}var Ys=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},MR="ngNavigationCancelingError";function Tf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Di(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=PR(!1,Vt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function PR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[MR]=!0,t.cancellationCode=e,t}function IB(n){return xR(n)&&Di(n.url)}function xR(n){return!!n&&n[MR]}var wB=(n,e,t,r)=>ee(i=>(new H_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),H_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),P_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=zs(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=zs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=zs(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=zs(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ef(o.value.snapshot))}),e.children.length&&this.forwardEvent(new vf(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(P_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),P_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},bf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ws=class{component;route;constructor(e,t){this.component=e,this.route=t}};function DB(n,e,t){let r=n._root,i=e?e._root:null;return fu(r,i,t,[r.value])}function TB(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ea(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Qm(n)?n:e.get(n):r}function fu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=zs(e);return n.children.forEach(s=>{bB(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>mu(a,t.getContext(s),i)),i}function bB(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=CB(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new bf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?fu(n,e,a?a.children:null,r,i):fu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ws(a.outlet.component,s))}else s&&mu(e,a,i),i.canActivateChecks.push(new bf(r)),o.component?fu(n,null,a?a.children:null,r,i):fu(n,null,t,r,i);return i}function CB(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ro(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ro(n.url,e.url)||!sr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!B_(n,e)||!sr(n.queryParams,e.queryParams);case"paramsChange":default:return!B_(n,e)}}function mu(n,e,t){let r=zs(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?mu(s,e.children.getContext(o),t):mu(s,null,t):mu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ws(e.outlet.component,i)):t.canDeactivateChecks.push(new Ws(null,i)):t.canDeactivateChecks.push(new Ws(null,i))}function Cu(n){return typeof n=="function"}function SB(n){return typeof n=="boolean"}function AB(n){return n&&Cu(n.canLoad)}function RB(n){return n&&Cu(n.canActivate)}function NB(n){return n&&Cu(n.canActivateChild)}function MB(n){return n&&Cu(n.canDeactivate)}function PB(n){return n&&Cu(n.canMatch)}function kR(n){return n instanceof vr||n?.name==="EmptyError"}var rf=Symbol("INITIAL_VALUE");function Js(){return qt(n=>bm(n.map(e=>e.pipe(Er(1),yc(rf)))).pipe(ee(e=>{for(let t of e)if(t!==!0){if(t===rf)return rf;if(t===!1||xB(t))return t}return!0}),dn(e=>e!==rf),Er(1)))}function xB(n){return Di(n)||n instanceof Ys}function OR(n){return n.aborted?re(void 0).pipe(Er(1)):new ne(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function FR(n){return Es(OR(n))}function kB(n,e){return wt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?re(U(R({},t),{guardsResult:!0})):OB(s,r,i,n).pipe(wt(a=>a&&SB(a)?FB(r,o,n,e):re(a)),ee(a=>U(R({},t),{guardsResult:a})))})}function OB(n,e,t,r){return Te(n).pipe(wt(i=>BB(i.component,i.route,t,e,r)),Ir(i=>i!==!0,!0))}function FB(n,e,t,r){return Te(e).pipe(mc(i=>vs(VB(i.route.parent,r),LB(i.route,r),UB(n,i.path,t),jB(n,i.route,t))),Ir(i=>i!==!0,!0))}function LB(n,e){return n!==null&&e&&e(new _f(n)),re(!0)}function VB(n,e){return n!==null&&e&&e(new yf(n)),re(!0)}function jB(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return re(!0);let i=r.map(o=>gc(()=>{let s=Zs(e)??t,a=ea(o,s),c=RB(a)?a.canActivate(e,n):ot(s,()=>a(e,n));return xo(c).pipe(Ir())}));return re(i).pipe(Js())}function UB(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>TB(s)).filter(s=>s!==null).map(s=>gc(()=>{let a=s.guards.map(c=>{let l=Zs(s.node)??t,h=ea(c,l),p=NB(h)?h.canActivateChild(r,n):ot(l,()=>h(r,n));return xo(p).pipe(Ir())});return re(a).pipe(Js())}));return re(o).pipe(Js())}function BB(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return re(!0);let s=o.map(a=>{let c=Zs(e)??i,l=ea(a,c),h=MB(l)?l.canDeactivate(n,e,t,r):ot(c,()=>l(n,e,t,r));return xo(h).pipe(Ir())});return re(s).pipe(Js())}function $B(n,e,t,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return re(!0);let s=o.map(a=>{let c=ea(a,n),l=AB(c)?c.canLoad(e,t):ot(n,()=>c(e,t)),h=xo(l);return i?h.pipe(FR(i)):h});return re(s).pipe(Js(),LR(r))}function LR(n){return rd(Dt(e=>{if(typeof e!="boolean")throw Tf(n,e)}),ee(e=>e===!0))}function HB(n,e,t,r,i){let o=e.canMatch;if(!o||o.length===0)return re(!0);let s=o.map(a=>{let c=ea(a,n),l=PB(c)?c.canMatch(e,t):ot(n,()=>c(e,t)),h=xo(l);return i?h.pipe(FR(i)):h});return re(s).pipe(Js(),LR(r))}var Ao=class VR extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,VR.prototype)}},q_=class jR extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,jR.prototype)}};function qB(n){throw new L(4e3,!1)}function zB(n){throw PR(!1,Vt.GuardRejected)}var GB=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Z])throw qB(`${e.redirectTo}`);i=i.children[Z]}}async applyRedirectCommands(e,t,r,i,o){let s=await WB(t,i,o);if(s instanceof Un)throw new q_(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new q_(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Un(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new me(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new L(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function WB(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:l,data:h,title:p}=e;return cf(xo(ot(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:p}))))}var z_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KB(n,e,t,r,i,o){let s=UR(n,e,t);return s.matched?(r=gB(e,r),HB(r,e,t,i,o).pipe(ee(a=>a===!0?s:R({},z_)))):re(s)}function UR(n,e,t){if(e.path==="**")return QB(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?R({},z_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||lR)(t,n,e);if(!i)return R({},z_);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?R(R({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function QB(n){return{matched:!0,parameters:n.length>0?hR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function aR(n,e,t,r){return t.length>0&&ZB(n,t,r)?{segmentGroup:new me(e,JB(r,new me(t,n.children))),slicedSegments:[]}:t.length===0&&XB(n,t,r)?{segmentGroup:new me(n.segments,YB(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new me(n.segments,n.children),slicedSegments:t}}function YB(n,e,t,r){let i={};for(let o of t)if(Af(n,e,o)&&!r[jn(o)]){let s=new me([],{});i[jn(o)]=s}return R(R({},r),i)}function JB(n,e){let t={};t[Z]=e;for(let r of n)if(r.path===""&&jn(r)!==Z){let i=new me([],{});t[jn(r)]=i}return t}function ZB(n,e,t){return t.some(r=>Af(n,e,r)&&jn(r)!==Z)}function XB(n,e,t){return t.some(r=>Af(n,e,r))}function Af(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function e$(n,e,t){return e.length===0&&!n.children[t]}var t$=class{};async function n$(n,e,t,r,i,o,s="emptyOnly",a){return new i$(n,e,t,r,i,s,o,a).recognize()}var r$=31,i$=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a,c){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new GB(this.urlSerializer,this.urlTree)}noMatchError(e){return new L(4002,`'${e.segmentGroup}'`)}async recognize(){let e=aR(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new tn(r,t),o=new wu("",i),s=wR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let t=new No([],Object.freeze({}),Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Z,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Z,t),rootSnapshot:t}}catch(r){if(r instanceof q_)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ao?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,o);let s=await this.processSegment(e,t,r,r.segments,i,!0,o);return s instanceof tn?[s]:[]}async processChildren(e,t,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let l=r.children[c],h=mB(t,c),p=await this.processSegmentGroup(e,h,l,c,i);s.push(...p)}let a=BR(s);return o$(a),a}async processSegment(e,t,r,i,o,s,a){for(let c of t)try{return await this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a)}catch(l){if(l instanceof Ao||kR(l))continue;throw l}if(e$(r,i,o))return new t$;throw new Ao(r)}async processSegmentAgainstRoute(e,t,r,i,o,s,a,c){if(jn(r)!==s&&(s===Z||!Af(i,o,r)))throw new Ao(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c);throw new Ao(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=UR(t,i,o);if(!c)throw new Ao(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>r$&&(this.allowRedirects=!1));let y=new No(o,l,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,cR(i),jn(i),i.component??i._loadedComponent??null,i,uR(i)),T=Df(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(T.params),y.data=Object.freeze(T.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let M=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),A=await this.applyRedirects.lineralizeSegments(i,M);return this.processSegment(e,r,t,A.concat(g),s,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await cf(KB(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new Ao(t);e=r._injector??e;let{routes:c}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=a,y=new No(p,h,Object.freeze(R({},this.urlTree.queryParams)),this.urlTree.fragment,cR(r),jn(r),r.component??r._loadedComponent??null,r,uR(r)),T=Df(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(T.params),y.data=Object.freeze(T.data);let{segmentGroup:M,slicedSegments:A}=aR(t,p,g,c);if(A.length===0&&M.hasChildren()){let ae=await this.processChildren(l,c,M,y);return new tn(y,ae)}if(c.length===0&&A.length===0)return new tn(y,[]);let k=jn(r)===o,G=await this.processSegment(l,c,M,A,k?Z:o,!0,y);return new tn(y,G instanceof tn?[G]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await cf($B(e,t,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=o.routes,t._loadedInjector=o.injector,o}throw zB(t)}return{routes:[],injector:e}}};function o$(n){n.sort((e,t)=>e.value.outlet===Z?-1:t.value.outlet===Z?1:e.value.outlet.localeCompare(t.value.outlet))}function s$(n){let e=n.value.routeConfig;return e&&e.path===""}function BR(n){let e=[],t=new Set;for(let r of n){if(!s$(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=BR(r.children);e.push(new tn(r.value,i))}return e.filter(r=>!t.has(r))}function cR(n){return n.data||{}}function uR(n){return n.resolve||{}}var a$=new B("",{factory:()=>n$});function c$(n,e,t,r,i,o,s){let a=n.get(a$);return wt(c=>re(c).pipe(qt(l=>a(n,e,t,r,l.extractedUrl,i,o,s)),ee(({state:l,tree:h})=>U(R({},c),{targetSnapshot:l,urlAfterRedirects:h}))))}function u$(n,e){return wt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return re(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of $R(c))s.add(l);let a=0;return Te(s).pipe(mc(c=>o.has(c)?l$(c,r,n,e):(c.data=Df(c,c.parent,n).resolve,re(void 0))),Dt(()=>a++),Dd(1),wt(c=>a===s.size?re(t):$t))})}function $R(n){let e=n.children.map(t=>$R(t)).flat();return[n,...e]}function l$(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!RR(i)&&(o[Tu]=i.title),gc(()=>(n.data=Df(n,n.parent,t).resolve,d$(o,n,e,r).pipe(ee(s=>(n._resolvedData=s,n.data=R(R({},n.data),s),null)))))}function d$(n,e,t,r){let i=O_(n);if(i.length===0)return re({});let o={};return Te(i).pipe(wt(s=>h$(n[s],e,t,r).pipe(Ir(),Dt(a=>{if(a instanceof Ys)throw Tf(new wi,a);o[s]=a}))),Dd(1),ee(()=>o),_r(s=>kR(s)?$t:Tm(s)))}function h$(n,e,t,r){let i=Zs(e)??r,o=ea(n,i),s=o.resolve?o.resolve(e,t):ot(i,()=>o(e,t));return xo(s)}function x_(n){return qt(e=>{let t=n(e);return t?Te(t).pipe(ee(()=>e)):re(e)})}var Y_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Z);return r}getResolvedTitleForRoute(t){return t.data[Tu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>P(HR),providedIn:"root"})}return n})(),HR=(()=>{class n extends Y_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Y(tR))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ta=new B("",{factory:()=>({})}),Su=new B(""),qR=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(r_);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await fR(ot(t,()=>r.loadComponent())),s=await WR(GR(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await zR(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function zR(n,e,t,r){let i=await fR(ot(t,()=>n.loadChildren())),o=await WR(GR(i)),s;o instanceof Mh||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(n);let a,c,l=!1;return Array.isArray(s)?(c=s,l=!0):(a=s.create(t).injector,c=a.get(Su,[],{optional:!0,self:!0}).flat()),{routes:c.map(Q_),injector:a}}function f$(n){return n&&typeof n=="object"&&"default"in n}function GR(n){return f$(n)?n.default:n}async function WR(n){return n}var Rf=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>P(p$),providedIn:"root"})}return n})(),p$=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),KR=new B("");var g$=()=>{},QR=new B(""),YR=(()=>{class n{currentNavigation=Zt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Zt(null);events=new Me;transitionAbortWithErrorSubject=new Me;configLoader=P(qR);environmentInjector=P(Ge);destroyRef=P(xn);urlSerializer=P(bu);rootContexts=P(Xs);location=P(qs);inputBindingEnabled=P(Sf,{optional:!0})!==null;titleStrategy=P(Y_);options=P(ta,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(Rf);createViewTransition=P(KR,{optional:!0});navigationErrorHandler=P(QR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>re(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new gf(i)),r=i=>this.events.next(new mf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;je(()=>{this.transitions?.next(U(R({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new it(null),this.transitions.pipe(dn(r=>r!==null),qt(r=>{let i=!1,o=new AbortController;return re(r).pipe(qt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Vt.SupersededByNewNavigation),$t;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?U(R({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new Nr(s.id,this.urlSerializer.serialize(s.rawUrl),"",vu.IgnoredSameUrlNavigation)),s.resolve(!1),$t;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return re(s).pipe(qt(h=>(this.events.next(new Po(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?$t:Promise.resolve(h))),c$(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Dt(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=h.urlAfterRedirects,g));let p=new _u(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:g,restoredState:y,extras:T}=s,M=new Po(h,this.urlSerializer.serialize(p),g,y);this.events.next(M);let A=SR(this.rootComponentType).snapshot;return this.currentTransition=r=U(R({},s),{targetSnapshot:A,urlAfterRedirects:p,extras:U(R({},T),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=p,k)),re(r)}else return this.events.next(new Nr(s.id,this.urlSerializer.serialize(s.extractedUrl),"",vu.IgnoredByUrlHandlingStrategy)),s.resolve(!1),$t}),Dt(s=>{let a=new df(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ee(s=>(this.currentTransition=r=U(R({},s),{guards:DB(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),kB(this.environmentInjector,s=>this.events.next(s)),Dt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Tf(this.urlSerializer,s.guardsResult);let a=new hf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),dn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Vt.GuardRejected),!1)),x_(s=>{if(s.guards.canActivateChecks.length!==0)return re(s).pipe(Dt(a=>{let c=new ff(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),qt(a=>{let c=!1;return re(a).pipe(u$(this.paramsInheritanceStrategy,this.environmentInjector),Dt({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Vt.NoDataFromResolver)}}))}),Dt(a=>{let c=new pf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),x_(s=>{let a=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=Zs(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(g=>{l.component=g}))}for(let p of l.children)h.push(...a(p));return h},c=a(s.targetSnapshot.root);return c.length===0?re(s):Te(Promise.all(c).then(()=>s))}),x_(()=>this.afterPreactivation()),qt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?Te(c).pipe(ee(()=>r)):re(r)}),ee(s=>{let a=vB(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=U(R({},s),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Dt(()=>{this.events.next(new Eu)}),wB(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Er(1),Es(OR(o.signal).pipe(dn(()=>!i&&!r.targetRouterState),Dt(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Vt.Aborted)}))),Dt({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=g$,a)),this.lastSuccessfulNavigation.set(je(this.currentNavigation)),this.events.next(new Bn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Es(this.transitionAbortWithErrorSubject.pipe(Dt(s=>{throw s}))),Am(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Vt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),_r(s=>{if(this.destroyed)return r.resolve(!1),$t;if(i=!0,xR(s))this.events.next(new ar(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),IB(s)?this.events.next(new Qs(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Ks(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=ot(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Ys){let{message:l,cancellationCode:h}=Tf(this.urlSerializer,c);this.events.next(new ar(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Qs(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return $t}))}))}cancelNavigationTransition(t,r,i){let o=new ar(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=je(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function m$(n){return n!==gu}var JR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>P(y$),providedIn:"root"})}return n})(),Cf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},y$=(()=>{class n extends Cf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),J_=(()=>{class n{urlSerializer=P(bu);options=P(ta,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(qs);urlHandlingStrategy=P(Rf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Un;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Un?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=SR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>P(ZR),providedIn:"root"})}return n})(),ZR=(()=>{class n extends J_{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof Po?this.updateStateMemento():t instanceof Nr?this.commitTransition(r):t instanceof _u?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Eu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ar&&t.code!==Vt.SupersededByNewNavigation&&t.code!==Vt.Redirect?this.restoreHistory(r):t instanceof Ks?this.restoreHistory(r,!0):t instanceof Bn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=R(R({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=R(R({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Z_(n,e){n.events.pipe(dn(t=>t instanceof Bn||t instanceof ar||t instanceof Ks||t instanceof Nr),ee(t=>t instanceof Bn||t instanceof Nr?0:(t instanceof ar?t.code===Vt.Redirect||t.code===Vt.SupersededByNewNavigation:!1)?2:1),dn(t=>t!==2),Er(1)).subscribe(()=>{e()})}var v$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},na=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(Hv);stateManager=P(J_);options=P(ta,{optional:!0})||{};pendingTasks=P(Cr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(YR);urlSerializer=P(bu);location=P(qs);urlHandlingStrategy=P(Rf);injector=P(Ge);_events=new Me;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(JR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(Su,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(Sf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new rt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=je(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ar&&r.code!==Vt.Redirect&&r.code!==Vt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Bn)this.navigated=!0;else if(r instanceof Qs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=R({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||m$(i.source)},s);this.scheduleNavigation(a,gu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}pB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),gu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=R({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(Jt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return je(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Q_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=R(R({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=DR(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return TR(p,t,h,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Di(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,gu,null,r)}navigate(t,r={skipLocationChange:!1}){return E$(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(ho(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=R({},v$):r===!1?i=R({},_$):i=r,Di(t))return nR(this.currentUrlTree,t,i);let o=this.parseUrl(t);return nR(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,c=g});let h=this.pendingTasks.add();return Z_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function E$(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new L(4008,!1)}var Nf=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Zt(null);get href(){return je(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Me;applicationErrorHandler=P(Jt);options=P(ta,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(P(new Lh("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Bn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Di(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Di(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)($(na),$(Mr),Gc("tabindex"),$(vn),$(Ct),$(Hs))};static \u0275dir=de({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Fn("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&vi("href",i.reactiveHref(),wv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",_i],skipLocationChange:[2,"skipLocationChange","skipLocationChange",_i],replaceUrl:[2,"replaceUrl","replaceUrl",_i],routerLink:"routerLink"},features:[yn]})}return n})(),w$=(()=>{class n{router;element;renderer;cdr;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ve;link=P(Nf,{optional:!0});constructor(t,r,i,o){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.routerEventsSubscription=t.events.subscribe(s=>{s instanceof Bn&&this.update()})}ngAfterContentInit(){re(this.links.changes,re(null)).pipe(ys()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Te(t).pipe(ys()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=D$(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)($(na),$(Ct),$(vn),$(or))};static \u0275dir=de({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Oh(o,Nf,5),r&2){let s;Zv(s=Xv())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[yn]})}return n})();function D$(n){return!!n.paths}var T$=new B("");function b$(n,...e){return Rn([{provide:Su,multi:!0,useValue:n},[],{provide:Mr,useFactory:C$},{provide:xh,multi:!0,useFactory:S$},e.map(t=>t.\u0275providers)])}function C$(){return P(na).routerState.root}function S$(){let n=P(He);return e=>{let t=n.get(yi);if(e!==t.components[0])return;let r=n.get(na),i=n.get(A$);n.get(R$)===1&&r.initialNavigation(),n.get(N$,null,{optional:!0})?.setUpPreloading(),n.get(T$,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var A$=new B("",{factory:()=>new Me}),R$=new B("",{factory:()=>1});var N$=new B("");var XR=()=>{};var nN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},M$=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Mf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;c||(y=64,s||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(nN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):M$(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new eE;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},eE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},P$=function(n){let e=nN(n);return Mf.encodeByteArray(e,!0)},Ru=function(n){return P$(n).replace(/\./g,"")},Pf=function(n){try{return Mf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var x$=()=>nE().__FIREBASE_DEFAULTS__,k$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},O$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Pf(n[1]);return e&&JSON.parse(e)},xf=()=>{try{return XR()||x$()||k$()||O$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rE=n=>xf()?.emulatorHosts?.[n],rN=n=>{let e=rE(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},iE=()=>xf()?.config,oE=n=>xf()?.[`_${n}`];var ko=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Ti(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kf(n){return(await fetch(n,{credentials:"include"})).ok}function iN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=R({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ru(JSON.stringify(t)),Ru(JSON.stringify(s)),""].join(".")}var Au={};function F$(){let n={prod:[],emulator:[]};for(let e of Object.keys(Au))Au[e]?n.emulator.push(e):n.prod.push(e);return n}function L$(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var eN=!1;function Of(n,e){if(typeof window>"u"||typeof document>"u"||!Ti(window.location.host)||Au[n]===e||Au[n]||eN)return;Au[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=F$().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{eN=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=L$(r),y=t("text"),T=document.getElementById(y)||document.createElement("span"),M=t("learnmore"),A=document.getElementById(M)||document.createElement("a"),k=t("preprendIcon"),G=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let ae=g.element;a(ae),h(A,M);let Fe=l();c(G,k),ae.append(G,T,A,Fe),document.body.appendChild(ae)}o?(T.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function V$(){let n=xf()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aN(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function cN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uN(){let n=ft();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function lN(){return!V$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nu(){try{return typeof indexedDB=="object"}catch{return!1}}function dN(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var j$="FirebaseError",rn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=j$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$n.prototype.create)}},$n=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?U$(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new rn(i,a,r)}};function U$(n,e){return n.replace(B$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var B$=/\{\$([^}]+)}/g;function hN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function cr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(tN(o)&&tN(s)){if(!cr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function tN(n){return n!==null&&typeof n=="object"}function Mu(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ra(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ia(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function fN(n,e){let t=new tE(n,e);return t.subscribe.bind(t)}var tE=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");$$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=X_),i.error===void 0&&(i.error=X_),i.complete===void 0&&(i.complete=X_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function $$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function X_(){}var ase=14400*1e3;function Ie(n){return n&&n._delegate?n._delegate:n}var jt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Oo="[DEFAULT]";var sE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ko;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(q$(e))try{this.getOrInitializeService({instanceIdentifier:Oo})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oo){return this.instances.has(e)}getOptions(e=Oo){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:H$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oo){return this.component?this.component.multipleInstances?e:Oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function H$(n){return n===Oo?void 0:n}function q$(n){return n.instantiationMode==="EAGER"}var Ff=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new sE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var z$=[],ce=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(ce||{}),G$={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},W$=ce.INFO,K$={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},Q$=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=K$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ur=class{constructor(e){this.name=e,this._logLevel=W$,this._logHandler=Q$,this._userLogHandler=null,z$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var Y$=(n,e)=>e.some(t=>n instanceof t),pN,gN;function J$(){return pN||(pN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z$(){return gN||(gN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var mN=new WeakMap,cE=new WeakMap,yN=new WeakMap,aE=new WeakMap,lE=new WeakMap;function X$(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(lr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&mN.set(t,n)}).catch(()=>{}),lE.set(e,n),e}function eH(n){if(cE.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});cE.set(n,e)}var uE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||yN.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return lr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function vN(n){uE=n(uE)}function tH(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Lf(this),e,...t);return yN.set(r,e.sort?e.sort():[e]),lr(r)}:Z$().includes(n)?function(...e){return n.apply(Lf(this),e),lr(mN.get(this))}:function(...e){return lr(n.apply(Lf(this),e))}}function nH(n){return typeof n=="function"?tH(n):(n instanceof IDBTransaction&&eH(n),Y$(n,J$())?new Proxy(n,uE):n)}function lr(n){if(n instanceof IDBRequest)return X$(n);if(aE.has(n))return aE.get(n);let e=nH(n);return e!==n&&(aE.set(n,e),lE.set(e,n)),e}var Lf=n=>lE.get(n);function EN(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=lr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(lr(s.result),c.oldVersion,c.newVersion,lr(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var rH=["get","getKey","getAll","getAllKeys","count"],iH=["put","add","delete","clear"],dE=new Map;function _N(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(dE.get(e))return dE.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=iH.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rH.includes(t)))return;let o=async function(s,...a){let c=this.transaction(s,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&c.done]))[0]};return dE.set(e,o),o}vN(n=>U(R({},n),{get:(e,t,r)=>_N(e,t)||n.get(e,t,r),has:(e,t)=>!!_N(e,t)||n.has(e,t)}));var fE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(oH(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function oH(n){return n.getComponent()?.type==="VERSION"}var pE="@firebase/app",IN="0.14.6";var Pr=new ur("@firebase/app"),sH="@firebase/app-compat",aH="@firebase/analytics-compat",cH="@firebase/analytics",uH="@firebase/app-check-compat",lH="@firebase/app-check",dH="@firebase/auth",hH="@firebase/auth-compat",fH="@firebase/database",pH="@firebase/data-connect",gH="@firebase/database-compat",mH="@firebase/functions",yH="@firebase/functions-compat",vH="@firebase/installations",_H="@firebase/installations-compat",EH="@firebase/messaging",IH="@firebase/messaging-compat",wH="@firebase/performance",DH="@firebase/performance-compat",TH="@firebase/remote-config",bH="@firebase/remote-config-compat",CH="@firebase/storage",SH="@firebase/storage-compat",AH="@firebase/firestore",RH="@firebase/ai",NH="@firebase/firestore-compat",MH="firebase",PH="12.6.0";var gE="[DEFAULT]",xH={[pE]:"fire-core",[sH]:"fire-core-compat",[cH]:"fire-analytics",[aH]:"fire-analytics-compat",[lH]:"fire-app-check",[uH]:"fire-app-check-compat",[dH]:"fire-auth",[hH]:"fire-auth-compat",[fH]:"fire-rtdb",[pH]:"fire-data-connect",[gH]:"fire-rtdb-compat",[mH]:"fire-fn",[yH]:"fire-fn-compat",[vH]:"fire-iid",[_H]:"fire-iid-compat",[EH]:"fire-fcm",[IH]:"fire-fcm-compat",[wH]:"fire-perf",[DH]:"fire-perf-compat",[TH]:"fire-rc",[bH]:"fire-rc-compat",[CH]:"fire-gcs",[SH]:"fire-gcs-compat",[AH]:"fire-fst",[NH]:"fire-fst-compat",[RH]:"fire-vertex","fire-js":"fire-js",[MH]:"fire-js-all"};var Pu=new Map,kH=new Map,mE=new Map;function wN(n,e){try{n.container.addComponent(e)}catch(t){Pr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Hn(n){let e=n.name;if(mE.has(e))return Pr.debug(`There were multiple attempts to register component ${e}.`),!1;mE.set(e,n);for(let t of Pu.values())wN(t,n);for(let t of kH.values())wN(t,n);return!0}function oa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gt(n){return n==null?!1:n.settings!==void 0}var OH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bi=new $n("app","Firebase",OH);var yE=class{constructor(e,t,r){this._isDeleted=!1,this._options=R({},e),this._config=R({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bi.create("app-deleted",{appName:this._name})}};var Ci=PH;function EE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=R({name:gE,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw bi.create("bad-app-name",{appName:String(i)});if(t||(t=iE()),!t)throw bi.create("no-options");let o=Pu.get(i);if(o){if(cr(t,o.options)&&cr(r,o.config))return o;throw bi.create("duplicate-app",{appName:i})}let s=new Ff(i);for(let c of mE.values())s.addComponent(c);let a=new yE(t,r,s);return Pu.set(i,a),a}function Fo(n=gE){let e=Pu.get(n);if(!e&&n===gE&&iE())return EE();if(!e)throw bi.create("no-app",{appName:n});return e}function Vf(){return Array.from(Pu.values())}function Ue(n,e,t){let r=xH[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pr.warn(s.join(" "));return}Hn(new jt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var FH="firebase-heartbeat-database",LH=1,xu="firebase-heartbeat-store",hE=null;function CN(){return hE||(hE=EN(FH,LH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(xu)}catch(t){console.warn(t)}}}}).catch(n=>{throw bi.create("idb-open",{originalErrorMessage:n.message})})),hE}async function VH(n){try{let t=(await CN()).transaction(xu),r=await t.objectStore(xu).get(SN(n));return await t.done,r}catch(e){if(e instanceof rn)Pr.warn(e.message);else{let t=bi.create("idb-get",{originalErrorMessage:e?.message});Pr.warn(t.message)}}}async function DN(n,e){try{let r=(await CN()).transaction(xu,"readwrite");await r.objectStore(xu).put(e,SN(n)),await r.done}catch(t){if(t instanceof rn)Pr.warn(t.message);else{let r=bi.create("idb-set",{originalErrorMessage:t?.message});Pr.warn(r.message)}}}function SN(n){return`${n.name}!${n.options.appId}`}var jH=1024,UH=30,vE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new _E(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=TN();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>UH){let i=$H(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Pr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=TN(),{heartbeatsToSend:t,unsentEntries:r}=BH(this._heartbeatsCache.heartbeats),i=Ru(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Pr.warn(e),""}}};function TN(){return new Date().toISOString().substring(0,10)}function BH(n,e=jH){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),bN(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),bN(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var _E=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nu()?dN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await VH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return DN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return DN(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function bN(n){return Ru(JSON.stringify({version:2,heartbeats:n})).length}function $H(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function HH(n){Hn(new jt("platform-logger",e=>new fE(e),"PRIVATE")),Hn(new jt("heartbeat",e=>new vE(e),"PRIVATE")),Ue(pE,IN,n),Ue(pE,IN,"esm2020"),Ue("fire-js","")}HH("");var qH="firebase",zH="12.7.0";Ue(qH,zH,"app");function AN(n){n===void 0&&(n=P(He));let e=n.get(Ms);return t=>new ne(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Si=new ri("ANGULARFIRE2_VERSION");function ku(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var aa=(n,e)=>{let t=e?[e]:Vf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},sa=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(sa||{}),RN=l_()&&typeof Zone<"u"?sa.WARN:sa.SILENT;var jf=class{zone;delegate;constructor(e,t=Dm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Ai=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=P(Pe);this.outsideAngular=t.runOutsideAngular(()=>new jf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new jf(typeof Zone>"u"?void 0:Zone.current,wm))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),NN=!1;function GH(n,e){!NN&&(RN>sa.SILENT||l_())&&(NN=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),RN>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function WH(n){let e=P(Pe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Lo(n){let e=P(Pe,{optional:!0});return e?e.run(()=>n()):n()}var KH=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),ot(t,()=>Lo(()=>n.apply(void 0,r)))),be=(n,e,t)=>(t||=e?sa.WARN:sa.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=P(Ai),s=P(Ms),a=P(Ge)}catch{return GH(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Lo(()=>s.add())),i[l]=KH(i[l],r,a));let c=WH(()=>n.apply(this,i));return e?c instanceof ne?c.pipe(ni(o.outsideAngular),ti(o.insideAngular),AN(a)):c instanceof Promise?Lo(()=>{let l=s.add();return new Promise((h,p)=>{c.then(g=>ot(a,()=>Lo(()=>h(g))),g=>ot(a,()=>Lo(()=>p(g)))).finally(l)})}):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Lo(()=>c):c instanceof ne?c.pipe(ni(o.outsideAngular),ti(o.insideAngular)):Lo(()=>c)});var xr=class{constructor(e){return e}},Vo=class{constructor(){return Vf()}};function QH(n){return n&&n.length===1?n[0]:new xr(Fo())}var IE=new B("angularfire2._apps"),YH={provide:xr,useFactory:QH,deps:[[new Xt,IE]]},JH={provide:Vo,deps:[[new Xt,IE]]};function ZH(n){return(e,t)=>{let r=t.get(bo);Ue("angularfire",Si.full,"core"),Ue("angularfire",Si.full,"app"),Ue("angular",Gm.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new xr(i)}}function eae(n,...e){return Rn([YH,JH,{provide:IE,useFactory:ZH(n),multi:!0,deps:[Pe,He,Ai,...e]}])}var tae=be(EE,!0);var XH=new Map,eq={activated:!1,tokenObservers:[]},tq={initialized:!1,enabled:!1};function qn(n){return XH.get(n)||R({},eq)}function kN(){return tq}var nq="https://content-firebaseappcheck.googleapis.com/v1";var rq="exchangeDebugToken",MN={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},lae=1440*60*1e3;var TE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new ko,this.pending.promise.catch(t=>{}),await iq(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new ko,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function iq(n){return new Promise(e=>{setTimeout(e,n)})}var oq={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ri=new $n("appCheck","AppCheck",oq);function ON(n){if(!qn(n).activated)throw Ri.create("use-before-activation",{appName:n.name})}async function FN({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(n,o)}catch(p){throw Ri.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw Ri.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw Ri.create("fetch-parse-error",{originalErrorMessage:p?.message})}let c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw Ri.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(c[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function LN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${nq}/projects/${t}/apps/${r}:${rq}?key=${i}`,body:{debug_token:e}}}var sq="firebase-app-check-database",aq=1,bE="firebase-app-check-store";var Uf=null;function cq(){return Uf||(Uf=new Promise((n,e)=>{try{let t=indexedDB.open(sq,aq);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{e(Ri.create("storage-open",{originalErrorMessage:r.target.error?.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(bE,{keyPath:"compositeKey"})}}}catch(t){e(Ri.create("storage-open",{originalErrorMessage:t?.message}))}}),Uf)}function uq(n,e){return lq(dq(n),e)}async function lq(n,e){let r=(await cq()).transaction(bE,"readwrite"),o=r.objectStore(bE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{a(Ri.create("storage-set",{originalErrorMessage:c.target.error?.message}))}})}function dq(n){return`${n.options.appId}-${n.name}`}var Ou=new ur("@firebase/app-check");function wE(n,e){return Nu()?uq(n,e).catch(t=>{Ou.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function VN(){return kN().enabled}async function jN(){let n=kN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var hq={error:"UNKNOWN_ERROR"};function fq(n){return Mf.encodeString(JSON.stringify(n),!1)}async function CE(n,e=!1,t=!1){let r=n.app;ON(r);let i=qn(r),o=i.token,s;if(o&&!Fu(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(Fu(l)?o=l:await wE(r,void 0))}if(!e&&o&&Fu(o))return{token:o.token};let a=!1;if(VN())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=FN(LN(r,await jN()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await wE(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ou.warn(l.message):t&&Ou.error(l),DE(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await qn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Ou.warn(l.message):t&&Ou.error(l),s=l}let c;return o?s?Fu(o)?c={token:o.token,internalError:s}:c=DE(s):(c={token:o.token},i.token=o,await wE(r,o)):c=DE(s),a&&yq(r,c),c}async function pq(n){let e=n.app;ON(e);let{provider:t}=qn(e);if(VN()){let r=await jN(),{token:i}=await FN(LN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function gq(n,e,t,r){let{app:i}=n,o=qn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Fu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),PN(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>PN(n))}function UN(n,e){let t=qn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function PN(n){let{app:e}=n,t=qn(e),r=t.tokenRefresher;r||(r=mq(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function mq(n){let{app:e}=n;return new TE(async()=>{let t=qn(e),r;if(t.token?r=await CE(n,!0):r=await CE(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=qn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},MN.RETRIAL_MIN_WAIT,MN.RETRIAL_MAX_WAIT)}function yq(n,e){let t=qn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Fu(n){return n.expireTimeMillis-Date.now()>0}function DE(n){return{token:fq(hq),error:n}}var SE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=qn(this.app);for(let t of e)UN(this.app,t.next);return Promise.resolve()}};function vq(n,e){return new SE(n,e)}function _q(n){return{getToken:e=>CE(n,e),getLimitedUseToken:()=>pq(n),addTokenListener:e=>gq(n,"INTERNAL",e),removeTokenListener:e=>UN(n.app,e)}}var Eq="@firebase/app-check",Iq="0.11.0";var wq="app-check",xN="app-check-internal";function Dq(){Hn(new jt(wq,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return vq(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xN).initialize()})),Hn(new jt(xN,n=>{let e=n.getProvider("app-check").getImmediate();return _q(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ue(Eq,Iq)}Dq();var Tq="app-check";var ca=class{constructor(){return aa(Tq)}};var bq=["localhost","0.0.0.0","127.0.0.1"],Dae=typeof window<"u"&&bq.includes(window.location.hostname);function nM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var rM=nM,iM=new $n("auth","Firebase",nM());var Gf=new ur("@firebase/auth");function Cq(n,...e){Gf.logLevel<=ce.WARN&&Gf.warn(`Auth (${Ci}): ${n}`,...e)}function $f(n,...e){Gf.logLevel<=ce.ERROR&&Gf.error(`Auth (${Ci}): ${n}`,...e)}function hr(n,...e){throw ZE(n,...e)}function jo(n,...e){return ZE(n,...e)}function oM(n,e,t){let r=U(R({},rM()),{[e]:t});return new $n("auth","Firebase",r).create(e,{appName:n.name})}function Fr(n){return oM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return iM.create(n,...e)}function z(n,e,...t){if(!n)throw ZE(e,...t)}function kr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw $f(e),new Error(e)}function Pi(n,e){n||kr(e)}function ME(){return typeof self<"u"&&self.location?.href||""}function Sq(){return BN()==="http:"||BN()==="https:"}function BN(){return typeof self<"u"&&self.location?.protocol||null}function Aq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Sq()||aN()||"connection"in navigator)?navigator.onLine:!0}function Rq(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Uo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pi(t>e,"Short delay should be less than long delay!"),this.isMobile=oN()||cN()}get(){return Aq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function XE(n,e){Pi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Wf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Nq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Mq=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Pq=new Uo(3e4,6e4);function Lr(n,e){return n.tenantId&&!e.tenantId?U(R({},e),{tenantId:n.tenantId}):e}async function fr(n,e,t,r,i={}){return sM(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Mu(R({key:n.config.apiKey},s)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);let l=R({method:e,headers:c},o);return sN()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&Ti(n.emulatorConfig.host)&&(l.credentials="include"),Wf.fetch()(await aM(n,n.config.apiHost,t,a),l)})}async function sM(n,e,t){n._canInitEmulator=!1;let r=R(R({},Nq),e);try{let i=new PE(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Bf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bf(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Bf(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Bf(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw oM(n,h,l);hr(n,h)}}catch(i){if(i instanceof rn)throw i;hr(n,"network-request-failed",{message:String(i)})}}async function qu(n,e,t,r,i={}){let o=await fr(n,e,t,r,i);return"mfaPendingCredential"in o&&hr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function aM(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?XE(n.config,i):`${n.config.apiScheme}://${i}`;return Mq.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function xq(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var PE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(jo(this.auth,"network-request-failed")),Pq.get())})}};function Bf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=jo(n,e,r);return i.customData._tokenResponse=t,i}function $N(n){return n!==void 0&&n.enterprise!==void 0}var xE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return xq(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function kq(n,e){return fr(n,"GET","/v2/recaptchaConfig",Lr(n,e))}async function Oq(n,e){return fr(n,"POST","/v1/accounts:delete",e)}async function Kf(n,e){return fr(n,"POST","/v1/accounts:lookup",e)}function Vu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eI(n,e=!1){let t=Ie(n),r=await t.getIdToken(e),i=tI(r);z(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Vu(AE(i.auth_time)),issuedAtTime:Vu(AE(i.iat)),expirationTime:Vu(AE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function AE(n){return Number(n)*1e3}function tI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return $f("JWT malformed, contained fewer than 3 sections"),null;try{let i=Pf(t);return i?JSON.parse(i):($f("Failed to decode base64 JWT payload"),null)}catch(i){return $f("Caught error parsing JWT payload as JSON",i?.toString()),null}}function HN(n){let e=tI(n);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ua(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof rn&&Fq(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Fq({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var kE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Uu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vu(this.lastLoginAt),this.creationTime=Vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Qf(n){let e=n.auth,t=await n.getIdToken(),r=await ua(n,Kf(e,{idToken:t}));z(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?cM(i.providerUserInfo):[],s=Lq(n.providerData,o),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,l=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Uu(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,h)}async function nI(n){let e=Ie(n);await Qf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Lq(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cM(n){return n.map(r=>{var i=r,{providerId:e}=i,t=tm(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function Vq(n,e){let t=await sM(n,{},async()=>{let r=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await aM(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Ti(n.emulatorConfig.host)&&(c.credentials="include"),Wf.fetch()(s,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function jq(n,e){return fr(n,"POST","/v2/accounts:revokeToken",Lr(n,e))}var ju=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){z(e.length!==0,"internal-error");let t=HN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await Vq(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(z(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(z(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(z(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return kr("not implemented")}};function Ni(n,e){z(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Mi=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=tm(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Uu(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await ua(this,this.stsTokenManager.getToken(this.auth,e));return z(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return eI(this,e)}reload(){return nI(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>R({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(U(R({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Qf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gt(this.auth.app))return Promise.reject(Fr(this.auth));let e=await this.getIdToken();return await ua(this,Oq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return U(R({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>R({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:T,stsTokenManager:M}=t;z(p&&M,e,"internal-error");let A=ju.fromJSON(this.name,M);z(typeof p=="string",e,"internal-error"),Ni(r,e.name),Ni(i,e.name),z(typeof g=="boolean",e,"internal-error"),z(typeof y=="boolean",e,"internal-error"),Ni(o,e.name),Ni(s,e.name),Ni(a,e.name),Ni(c,e.name),Ni(l,e.name),Ni(h,e.name);let k=new n({uid:p,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:A,createdAt:l,lastLoginAt:h});return T&&Array.isArray(T)&&(k.providerData=T.map(G=>R({},G))),c&&(k._redirectEventId=c),k}static async _fromIdTokenResponse(e,t,r=!1){let i=new ju;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Qf(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];z(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?cM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new ju;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Uu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c}};var qN=new Map;function Or(n){Pi(n instanceof Function,"Expected a class definition");let e=qN.get(n);return e?(Pi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qN.set(n,e),e)}var Uq=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),OE=Uq;function Hf(n,e,t){return`firebase:${n}:${e}:${t}`}var Yf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Hf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Hf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Kf(this.auth,{idToken:e}).catch(()=>{});return t?Mi._fromGetAccountInfoResponse(this.auth,t,e):null}return Mi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Or(OE),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Or(OE),s=Hf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await Kf(e,{idToken:h}).catch(()=>{});if(!g)break;p=await Mi._fromGetAccountInfoResponse(e,g,h)}else p=Mi._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new n(o,e,r))}};function zN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pM(e))return"Blackberry";if(gM(e))return"Webos";if(lM(e))return"Safari";if((e.includes("chrome/")||dM(e))&&!e.includes("edge/"))return"Chrome";if(fM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function uM(n=ft()){return/firefox\//i.test(n)}function lM(n=ft()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dM(n=ft()){return/crios\//i.test(n)}function hM(n=ft()){return/iemobile/i.test(n)}function fM(n=ft()){return/android/i.test(n)}function pM(n=ft()){return/blackberry/i.test(n)}function gM(n=ft()){return/webos/i.test(n)}function rI(n=ft()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Bq(n=ft()){return rI(n)&&!!window.navigator?.standalone}function $q(){return uN()&&document.documentMode===10}function mM(n=ft()){return rI(n)||fM(n)||gM(n)||pM(n)||/windows phone/i.test(n)||hM(n)}function yM(n,e=[]){let t;switch(n){case"Browser":t=zN(ft());break;case"Worker":t=`${zN(ft())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ci}/${r}`}var FE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function Hq(n,e={}){return fr(n,"GET","/v2/passwordPolicy",Lr(n,e))}var qq=6,LE=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??qq,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var VE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jf(this),this.idTokenSubscription=new Jf(this),this.beforeStateQueue=new FE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Or(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Yf.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Kf(this,{idToken:e}),r=await Mi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Gt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Rq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gt(this.app))return Promise.reject(Fr(this));let t=e?Ie(e):null;return t&&z(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gt(this.app)?Promise.reject(Fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gt(this.app)?Promise.reject(Fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Hq(this),t=new LE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $n("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await jq(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Or(e)||this._popupRedirectResolver;z(t,this,"argument-error"),this.redirectPersistenceManager=await Yf.create(this,[Or(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(z(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Gt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Cq(`Error while retrieving App Check token: ${e.error}`),e?.token}};function $o(n){return Ie(n)}var Jf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=fN(t=>this.observer=t)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ip={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zq(n){ip=n}function vM(n){return ip.loadJS(n)}function Gq(){return ip.recaptchaEnterpriseScript}function Wq(){return ip.gapiScript}function _M(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var jE=class{constructor(){this.enterprise=new UE}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},UE=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var Kq="recaptcha-enterprise",EM="NO_RECAPTCHA",BE=class{constructor(e){this.type=Kq,this.auth=$o(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{kq(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new xE(c);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(c=>{a(c)})})}function i(o,s,a){let c=window.grecaptcha;$N(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(EM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jE().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&$N(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Gq();c.length!==0&&(c+=a),vM(c).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})}};async function Lu(n,e,t,r=!1,i=!1){let o=new BE(n),s;if(i)s=EM;else try{s=await o.verify(t)}catch{s=await o.verify(t,!0)}let a=R({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function $E(n,e,t,r,i){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=await Lu(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=await Lu(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)});else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=await Lu(n,e,t);return r(n,o).catch(async s=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let a=await Lu(n,e,t,!1,!0);return r(n,a)}return Promise.reject(s)})}else{let o=await Lu(n,e,t,!1,!0);return r(n,o)}else return Promise.reject(i+" provider is not supported.")}function iI(n,e){let t=oa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(cr(o,e??{}))return i;hr(i,"already-initialized")}return t.initialize({options:e})}function Qq(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Or);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function oI(n,e,t){let r=$o(n);z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=IM(e),{host:s,port:a}=Yq(e),c=a===null?"":`:${a}`,l={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){z(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),z(cr(l,r.config.emulator)&&cr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ti(s)?(kf(`${o}//${s}${c}`),Of("Auth",!0)):i||Jq()}function IM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Yq(n){let e=IM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:GN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:GN(s)}}}function GN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function Jq(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Bu=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return kr("not implemented")}_getIdTokenResponse(e){return kr("not implemented")}_linkToIdToken(e,t){return kr("not implemented")}_getReauthenticationResolver(e){return kr("not implemented")}};async function Zq(n,e){return fr(n,"POST","/v1/accounts:update",e)}async function Xq(n,e){return fr(n,"POST","/v1/accounts:signUp",e)}async function ez(n,e){return qu(n,"POST","/v1/accounts:signInWithPassword",Lr(n,e))}async function tz(n,e){return fr(n,"POST","/v1/accounts:sendOobCode",Lr(n,e))}async function nz(n,e){return tz(n,e)}async function rz(n,e){return qu(n,"POST","/v1/accounts:signInWithEmailLink",Lr(n,e))}async function iz(n,e){return qu(n,"POST","/v1/accounts:signInWithEmailLink",Lr(n,e))}var $u=class n extends Bu{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $E(e,t,"signInWithPassword",ez,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return rz(e,{email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $E(e,r,"signUpPassword",Xq,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return iz(e,{idToken:t,email:this._email,oobCode:this._password});default:hr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function RE(n,e){return qu(n,"POST","/v1/accounts:signInWithIdp",Lr(n,e))}function oz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sz(n){let e=ra(ia(n)).link,t=e?ra(ia(e)).deep_link_id:null,r=ra(ia(n)).deep_link_id;return(r?ra(ia(r)).link:null)||r||t||e||n}var Zf=class n{constructor(e){let t=ra(ia(e)),r=t.apiKey??null,i=t.oobCode??null,o=oz(t.mode??null);z(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t=sz(e);try{return new n(t)}catch{return null}}};var op=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return $u._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Zf.parseLink(r);return z(i,"argument-error"),$u._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Xf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var HE=class extends Xf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function az(n,e){return qu(n,"POST","/v1/accounts:signUp",Lr(n,e))}var la=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await Mi._fromIdTokenResponse(e,r,i),s=WN(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=WN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function WN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var qE=class n extends rn{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function wM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?qE._fromErrorAndOperation(n,o,e,r):o})}async function cz(n,e,t=!1){let r=await ua(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return la._forOperation(n,"link",r)}async function DM(n,e,t=!1){let{auth:r}=n;if(Gt(r.app))return Promise.reject(Fr(r));let i="reauthenticate";try{let o=await ua(n,wM(r,i,e,n),t);z(o.idToken,r,"internal-error");let s=tI(o.idToken);z(s,r,"internal-error");let{sub:a}=s;return z(n.uid===a,r,"user-mismatch"),la._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&hr(r,"user-mismatch"),o}}async function TM(n,e,t=!1){if(Gt(n.app))return Promise.reject(Fr(n));let r="signIn",i=await wM(n,r,e),o=await la._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function sI(n,e){return TM($o(n),e)}async function sp(n,e){return DM(Ie(n),e)}function uz(n,e,t){z(t.url?.length>0,n,"invalid-continue-uri"),z(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),z(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(z(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(z(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}async function bM(n){let e=$o(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aI(n,e,t){if(Gt(n.app))return Promise.reject(Fr(n));let r=$o(n),s=await $E(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",az,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&bM(n),c}),a=await la._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function cI(n,e,t){return Gt(n.app)?Promise.reject(Fr(n)):sI(Ie(n),op.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&bM(n),r})}async function ap(n,e,t){let r=Ie(n),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&uz(r.auth,o,t);let{email:s}=await nz(r.auth,o);s!==n.email&&await n.reload()}function cp(n,e){return lz(Ie(n),null,e)}async function lz(n,e,t){let{auth:r}=n,o={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);let s=await ua(n,Zq(r,o));await n._updateTokensIfNecessary(s,!0)}function up(n,e,t,r){return Ie(n).onIdTokenChanged(e,t,r)}function uI(n,e,t){return Ie(n).beforeAuthStateChanged(e,t)}function lp(n,e,t,r){return Ie(n).onAuthStateChanged(e,t,r)}function lI(n){return Ie(n).signOut()}var ep="__sak";var tp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ep,"1"),this.storage.removeItem(ep),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var dz=1e3,hz=10,fz=(()=>{class n extends tp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);$q()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,hz):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},dz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),CM=fz;var pz=(()=>{class n extends tp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),dI=pz;function gz(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var mz=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(async h=>h(r.origin,s)),l=await gz(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function SM(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var zE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=SM("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function dr(){return window}function yz(n){dr().location.href=n}function AM(){return typeof dr().WorkerGlobalScope<"u"&&typeof dr().importScripts=="function"}async function vz(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _z(){return navigator?.serviceWorker?.controller||null}function Ez(){return AM()?self:null}var RM="firebaseLocalStorageDb",Iz=1,np="firebaseLocalStorage",NM="fbase_key",Bo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function dp(n,e){return n.transaction([np],e?"readwrite":"readonly").objectStore(np)}function wz(){let n=indexedDB.deleteDatabase(RM);return new Bo(n).toPromise()}function GE(){let n=indexedDB.open(RM,Iz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(np,{keyPath:NM})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(np)?e(r):(r.close(),await wz(),e(await GE()))})})}async function KN(n,e,t){let r=dp(n,!0).put({[NM]:e,value:t});return new Bo(r).toPromise()}async function Dz(n,e){let t=dp(n,!1).get(e),r=await new Bo(t).toPromise();return r===void 0?null:r.value}function QN(n,e){let t=dp(n,!0).delete(e);return new Bo(t).toPromise()}var Tz=800,bz=3,Cz=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await GE(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>bz)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return AM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mz._getInstance(Ez()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await vz(),!this.activeServiceWorker)return;this.sender=new zE(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||_z()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await GE();return await KN(t,ep,"1"),await QN(t,ep),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>KN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>Dz(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>QN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=dp(o,!1).getAll();return new Bo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Tz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),MM=Cz;var Nae=_M("rcb"),Mae=new Uo(3e4,6e4);function Sz(n,e){return e?Or(e):(z(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Hu=class extends Bu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return RE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return RE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return RE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function Az(n){return TM(n.auth,new Hu(n),n.bypassAuthState)}function Rz(n){let{auth:e,user:t}=n;return z(t,e,"internal-error"),DM(t,new Hu(n),n.bypassAuthState)}async function Nz(n){let{auth:e,user:t}=n;return z(t,e,"internal-error"),cz(t,new Hu(n),n.bypassAuthState)}var WE=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Az;case"linkViaPopup":case"linkViaRedirect":return Nz;case"reauthViaPopup":case"reauthViaRedirect":return Rz;default:hr(this.auth,"internal-error")}}resolve(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Pae=new Uo(2e3,1e4);var Mz="pendingRedirect",qf=new Map,KE=class extends WE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=qf.get(this.auth._key());if(!e){try{let r=await Pz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}qf.set(this.auth._key(),e)}return this.bypassAuthState||qf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function Pz(n,e){let t=Oz(e),r=kz(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function xz(n,e){qf.set(n._key(),e)}function kz(n){return Or(n._redirectPersistence)}function Oz(n){return Hf(Mz,n.config.apiKey,n.name)}async function Fz(n,e,t=!1){if(Gt(n.app))return Promise.reject(Fr(n));let r=$o(n),i=Sz(r,e),s=await new KE(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var Lz=600*1e3,QE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Vz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!PM(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(jo(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Lz&&this.cachedEventUids.clear(),this.cachedEventUids.has(YN(e))}saveEventToCache(e){this.cachedEventUids.add(YN(e)),this.lastProcessedEventTime=Date.now()}};function YN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function PM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Vz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PM(n);default:return!1}}async function jz(n,e={}){return fr(n,"GET","/v1/projects",e)}var Uz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bz=/^https?/;async function $z(n){if(n.config.emulator)return;let{authorizedDomains:e}=await jz(n);for(let t of e)try{if(Hz(t))return}catch{}hr(n,"unauthorized-domain")}function Hz(n){let e=ME(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!Bz.test(t))return!1;if(Uz.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var qz=new Uo(3e4,6e4);function JN(){let n=dr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function zz(n){return new Promise((e,t)=>{function r(){JN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JN(),t(jo(n,"network-request-failed"))},timeout:qz.get()})}if(dr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(dr().gapi?.load)r();else{let i=_M("iframefcb");return dr()[i]=()=>{gapi.load?r():t(jo(n,"network-request-failed"))},vM(`${Wq()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw zf=null,e})}var zf=null;function Gz(n){return zf=zf||zz(n),zf}var Wz=new Uo(5e3,15e3),Kz="__/auth/iframe",Qz="emulator/auth/iframe",Yz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Jz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zz(n){let e=n.config;z(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?XE(e,Qz):`https://${n.config.authDomain}/${Kz}`,r={apiKey:e.apiKey,appName:n.name,v:Ci},i=Jz.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Mu(r).slice(1)}`}async function Xz(n){let e=await Gz(n),t=dr().gapi;return z(t,n,"internal-error"),e.open({where:document.body,url:Zz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yz,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=jo(n,"network-request-failed"),a=dr().setTimeout(()=>{o(s)},Wz.get());function c(){dr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})}))}var e4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t4=500,n4=600,r4="_blank",i4="http://localhost",rp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function o4(n,e,t,r=t4,i=n4){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=U(R({},e4),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ft().toLowerCase();t&&(a=dM(l)?r4:t),uM(l)&&(e=e||i4,c.scrollbars="yes");let h=Object.entries(c).reduce((g,[y,T])=>`${g}${y}=${T},`,"");if(Bq(l)&&a!=="_self")return s4(e||"",a),new rp(null);let p=window.open(e||"",a,h);z(p,n,"popup-blocked");try{p.focus()}catch{}return new rp(p)}function s4(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var a4="__/auth/handler",c4="emulator/auth/handler",u4=encodeURIComponent("fac");async function ZN(n,e,t,r,i,o){z(n.config.authDomain,n,"auth-domain-config-required"),z(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ci,eventId:i};if(e instanceof Xf){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",hN(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof HE){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=await n._getAppCheckToken(),l=c?`#${u4}=${encodeURIComponent(c)}`:"";return`${l4(n)}?${Mu(a).slice(1)}${l}`}function l4({config:n}){return n.emulator?XE(n,c4):`https://${n.authDomain}/${a4}`}var NE="webStorageSupport",YE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dI,this._completeRedirectFn=Fz,this._overrideRedirectResult=xz}async _openPopup(e,t,r,i){Pi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await ZN(e,t,r,ME(),i);return o4(e,o,SM())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await ZN(e,t,r,ME(),i);return yz(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Pi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await Xz(e),r=new QE(e);return t.register("authEvent",i=>(z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(NE,{type:NE},i=>{let o=i?.[0]?.[NE];o!==void 0&&t(!!o),hr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$z(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mM()||lM()||rI()}},xM=YE;var XN="@firebase/auth",eM="1.12.0";var JE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function d4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h4(n){Hn(new jt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;z(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yM(n)},l=new VE(r,i,o,c);return Qq(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Hn(new jt("auth-internal",e=>{let t=$o(e.getProvider("auth").getImmediate());return(r=>new JE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(XN,eM,d4(n)),Ue(XN,eM,"esm2020")}var f4=300,p4=oE("authIdTokenMaxAge")||f4,tM=null,g4=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>p4)return;let i=t?.token;tM!==i&&(tM=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hI(n=Fo()){let e=oa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=iI(n,{popupRedirectResolver:xM,persistence:[MM,CM,dI]}),r=oE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=g4(o.toString());uI(t,s,()=>s(t.currentUser)),up(t,a=>s(a))}}let i=rE("auth");return i&&oI(t,`http://${i}`),t}function m4(){return document.getElementsByTagName("head")?.[0]??document}zq({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=jo("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",m4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h4("Browser");function OM(n){return new ne(function(e){var t=lp(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var FM="auth",Ho=class{constructor(e){return e}},zu=class{constructor(){return aa(FM)}};var fI=new B("angularfire2.auth-instances");function eG(n,e){let t=ku(FM,n,e);return t&&new Ho(t)}function tG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ho(r)}}var nG={provide:zu,deps:[[new Xt,fI]]},rG={provide:Ho,useFactory:eG,deps:[[new Xt,fI],xr]};function Tce(n,...e){return Ue("angularfire",Si.full,"auth"),Rn([rG,nG,{provide:fI,useFactory:tG(n),multi:!0,deps:[Pe,He,Ai,Vo,[new Xt,ca],...e]}])}var LM=be(OM,!0);var VM=be(aI,!0,2);var bce=be(hI,!0);var jM=be(cI,!0,2);var UM=be(lI,!0,2);var BM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$M={};var Vr,pI;(function(){var n;function e(w,v){function E(){}E.prototype=v.prototype,w.F=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(D,I,C){for(var _=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)_[Bt-2]=arguments[Bt];return v.prototype[I].apply(D,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);let D=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)D[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)D[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],I=w.g[2];let C=w.g[3],_;_=v+(C^E&(I^C))+D[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+D[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+D[2]+606105819&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+D[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+D[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+D[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+D[6]+2821735955&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+D[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+D[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+D[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+D[10]+4294925233&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+D[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(C^E&(I^C))+D[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(I^v&(E^I))+D[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=I+(E^C&(v^E))+D[14]+2792965006&4294967295,I=C+(_<<17&4294967295|_>>>15),_=E+(v^I&(C^v))+D[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^C&(E^I))+D[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+D[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+D[11]+643717713&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+D[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+D[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+D[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+D[15]+3634488961&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+D[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+D[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+D[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+D[3]+4107603335&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+D[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^C&(E^I))+D[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^I&(v^E))+D[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(C^v))+D[7]+1735328473&4294967295,I=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(I^C))+D[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^C)+D[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+D[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+D[11]+1839030562&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+D[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+D[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+D[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+D[7]+4139469664&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+D[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+D[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+D[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+D[3]+3572445317&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+D[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^C)+D[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^I)+D[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=I+(C^v^E)+D[15]+530742520&4294967295,I=C+(_<<16&4294967295|_>>>16),_=E+(I^C^v)+D[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~C))+D[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+D[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+D[14]+2878612391&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+D[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+D[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+D[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+D[10]+4293915773&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+D[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+D[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+D[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+D[6]+2734768916&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+D[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~C))+D[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~I))+D[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=I+(v^(C|~E))+D[2]+718787259&4294967295,I=C+(_<<15&4294967295|_>>>17),_=E+(C^(I|~v))+D[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);let E=v-this.blockSize,D=this.C,I=this.h,C=0;for(;C<v;){if(I==0)for(;C<=E;)i(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<v;)if(D[I++]=w.charCodeAt(C++),I==this.blockSize){i(this,D),I=0;break}}else for(;C<v;)if(D[I++]=w[C++],I==this.blockSize){i(this,D),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,E=0;E<4;++E)for(let D=0;D<32;D+=8)w[v++]=this.g[E]>>>D&255;return w};function o(w,v){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;let E=[],D=!0;for(let I=w.length-1;I>=0;I--){let C=w[I]|0;D&&C==v||(E[I]=C,D=!1)}this.g=E}var a={};function c(w){return-128<=w&&w<128?o(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return A(l(-w));let v=[],E=1;for(let D=0;w>=E;D++)v[D]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return A(h(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),D=p;for(let C=0;C<w.length;C+=8){var I=Math.min(8,w.length-C);let _=parseInt(w.substring(C,C+I),v);I<8?(I=l(Math.pow(v,I)),D=D.j(I).add(l(_))):(D=D.j(E),D=D.add(l(_)))}return D}var p=c(0),g=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(M(this))return-A(this).m();let w=0,v=1;for(let E=0;E<this.g.length;E++){let D=this.i(E);w+=(D>=0?D:4294967296+D)*v,v*=4294967296}return w},n.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(T(this))return"0";if(M(this))return"-"+A(this).toString(w);let v=l(Math.pow(w,6));var E=this;let D="";for(;;){let I=Fe(E,v).g;E=k(E,I.j(v));let C=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,T(E))return C+D;for(;C.length<6;)C="0"+C;D=C+D}},n.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function T(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function M(w){return w.h==-1}n.l=function(w){return w=k(this,w),M(w)?-1:T(w)?0:1};function A(w){let v=w.g.length,E=[];for(let D=0;D<v;D++)E[D]=~w.g[D];return new s(E,~w.h).add(g)}n.abs=function(){return M(this)?A(this):this},n.add=function(w){let v=Math.max(this.g.length,w.g.length),E=[],D=0;for(let I=0;I<=v;I++){let C=D+(this.i(I)&65535)+(w.i(I)&65535),_=(C>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);D=_>>>16,C&=65535,_&=65535,E[I]=_<<16|C}return new s(E,E[E.length-1]&-2147483648?-1:0)};function k(w,v){return w.add(A(v))}n.j=function(w){if(T(this)||T(w))return p;if(M(this))return M(w)?A(this).j(A(w)):A(A(this).j(w));if(M(w))return A(this.j(A(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let v=this.g.length+w.g.length,E=[];for(var D=0;D<2*v;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(let I=0;I<w.g.length;I++){let C=this.i(D)>>>16,_=this.i(D)&65535,Bt=w.i(I)>>>16,Wr=w.i(I)&65535;E[2*D+2*I]+=_*Wr,G(E,2*D+2*I),E[2*D+2*I+1]+=C*Wr,G(E,2*D+2*I+1),E[2*D+2*I+1]+=_*Bt,G(E,2*D+2*I+1),E[2*D+2*I+2]+=C*Bt,G(E,2*D+2*I+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function G(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function ae(w,v){this.g=w,this.h=v}function Fe(w,v){if(T(v))throw Error("division by zero");if(T(w))return new ae(p,p);if(M(w))return v=Fe(A(w),v),new ae(A(v.g),A(v.h));if(M(v))return v=Fe(w,A(v)),new ae(A(v.g),v.h);if(w.g.length>30){if(M(w)||M(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,D=v;D.l(w)<=0;)E=Ae(E),D=Ae(D);var I=we(E,1),C=we(D,1);for(D=we(D,2),E=we(E,2);!T(D);){var _=C.add(D);_.l(w)<=0&&(I=I.add(E),C=_),D=we(D,1),E=we(E,1)}return v=k(w,I.j(v)),new ae(I,v)}for(I=p;w.l(v)>=0;){for(E=Math.max(1,Math.floor(w.m()/v.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),C=l(E),_=C.j(v);M(_)||_.l(w)>0;)E-=D,C=l(E),_=C.j(v);T(C)&&(C=g),I=I.add(C),w=k(w,_)}return new ae(I,w)}n.B=function(w){return Fe(this,w).h},n.and=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let D=0;D<v;D++)E[D]=this.i(D)&w.i(D);return new s(E,this.h&w.h)},n.or=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let D=0;D<v;D++)E[D]=this.i(D)|w.i(D);return new s(E,this.h|w.h)},n.xor=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let D=0;D<v;D++)E[D]=this.i(D)^w.i(D);return new s(E,this.h^w.h)};function Ae(w){let v=w.g.length+1,E=[];for(let D=0;D<v;D++)E[D]=w.i(D)<<1|w.i(D-1)>>>31;return new s(E,w.h)}function we(w,v){let E=v>>5;v%=32;let D=w.g.length-E,I=[];for(let C=0;C<D;C++)I[C]=v>0?w.i(C+E)>>>v|w.i(C+E+1)<<32-v:w.i(C+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,pI=$M.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Vr=$M.Integer=s}).apply(typeof BM<"u"?BM:typeof self<"u"?self:typeof window<"u"?window:{});var hp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jr={};var gI,oG,da,mI,Gu,fp,yI,vI,_I;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof hp=="object"&&hp];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var b=u[m];if(!(b in f))break e;f=f[b]}u=u[u.length-1],m=f[u],d=d(m),d!=m&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(d){var f=[],m;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&f.push([m,d[m]]);return f}});var o=o||{},s=this||self;function a(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function c(u,d,f){return u.call.apply(u.bind,arguments)}function l(u,d,f){return l=c,l.apply(null,arguments)}function h(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function p(u,d){function f(){}f.prototype=d.prototype,u.Z=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Ob=function(m,b,S){for(var F=Array(arguments.length-2),se=2;se<arguments.length;se++)F[se-2]=arguments[se];return d.prototype[b].apply(m,F)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function y(u){let d=u.length;if(d>0){let f=Array(d);for(let m=0;m<d;m++)f[m]=u[m];return f}return[]}function T(u,d){for(let m=1;m<arguments.length;m++){let b=arguments[m];var f=typeof b;if(f=f!="object"?f:b?Array.isArray(b)?"array":f:"null",f=="array"||f=="object"&&typeof b.length=="number"){f=u.length||0;let S=b.length||0;u.length=f+S;for(let F=0;F<S;F++)u[f+F]=b[F]}else u.push(b)}}class M{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function A(u){s.setTimeout(()=>{throw u},0)}function k(){var u=w;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class G{constructor(){this.h=this.g=null}add(d,f){let m=ae.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var ae=new M(()=>new Fe,u=>u.reset());class Fe{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,we=!1,w=new G,v=()=>{let u=Promise.resolve(void 0);Ae=()=>{u.then(E)}};function E(){for(var u;u=k();){try{u.h.call(u.g)}catch(f){A(f)}var d=ae;d.j(u),d.h<100&&(d.h++,u.next=d.g,d.g=u)}we=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return u})();function _(u){return/^[\s\xa0]*$/.test(u)}function Bt(u,d){I.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,d)}p(Bt,I),Bt.prototype.init=function(u,d){let f=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget,d||(f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement)),this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Bt.Z.h.call(this)},Bt.prototype.h=function(){Bt.Z.h.call(this);let u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Wr="closure_listenable_"+(Math.random()*1e6|0),_O=0;function EO(u,d,f,m,b){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=b,this.key=++_O,this.da=this.fa=!1}function Rl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Nl(u,d,f){for(let m in u)d.call(f,u[m],m,u)}function IO(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function iT(u){let d={};for(let f in u)d[f]=u[f];return d}let oT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sT(u,d){let f,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(f in m)u[f]=m[f];for(let S=0;S<oT.length;S++)f=oT[S],Object.prototype.hasOwnProperty.call(m,f)&&(u[f]=m[f])}}function Ml(u){this.src=u,this.g={},this.h=0}Ml.prototype.add=function(u,d,f,m,b){let S=u.toString();u=this.g[S],u||(u=this.g[S]=[],this.h++);let F=Ng(u,d,m,b);return F>-1?(d=u[F],f||(d.fa=!1)):(d=new EO(d,this.src,S,!!m,b),d.fa=f,u.push(d)),d};function Rg(u,d){let f=d.type;if(f in u.g){var m=u.g[f],b=Array.prototype.indexOf.call(m,d,void 0),S;(S=b>=0)&&Array.prototype.splice.call(m,b,1),S&&(Rl(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Ng(u,d,f,m){for(let b=0;b<u.length;++b){let S=u[b];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==m)return b}return-1}var Mg="closure_lm_"+(Math.random()*1e6|0),Pg={};function aT(u,d,f,m,b){if(m&&m.once)return uT(u,d,f,m,b);if(Array.isArray(d)){for(let S=0;S<d.length;S++)aT(u,d[S],f,m,b);return null}return f=Fg(f),u&&u[Wr]?u.J(d,f,a(m)?!!m.capture:!!m,b):cT(u,d,f,!1,m,b)}function cT(u,d,f,m,b,S){if(!d)throw Error("Invalid event type");let F=a(b)?!!b.capture:!!b,se=kg(u);if(se||(u[Mg]=se=new Ml(u)),f=se.add(d,f,m,F,S),f.proxy)return f;if(m=wO(),f.proxy=m,m.src=u,m.listener=f,u.addEventListener)C||(b=F),b===void 0&&(b=!1),u.addEventListener(d.toString(),m,b);else if(u.attachEvent)u.attachEvent(dT(d.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function wO(){function u(f){return d.call(u.src,u.listener,f)}let d=DO;return u}function uT(u,d,f,m,b){if(Array.isArray(d)){for(let S=0;S<d.length;S++)uT(u,d[S],f,m,b);return null}return f=Fg(f),u&&u[Wr]?u.K(d,f,a(m)?!!m.capture:!!m,b):cT(u,d,f,!0,m,b)}function lT(u,d,f,m,b){if(Array.isArray(d))for(var S=0;S<d.length;S++)lT(u,d[S],f,m,b);else m=a(m)?!!m.capture:!!m,f=Fg(f),u&&u[Wr]?(u=u.i,S=String(d).toString(),S in u.g&&(d=u.g[S],f=Ng(d,f,m,b),f>-1&&(Rl(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete u.g[S],u.h--)))):u&&(u=kg(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Ng(d,f,m,b)),(f=u>-1?d[u]:null)&&xg(f))}function xg(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Wr])Rg(d.i,u);else{var f=u.type,m=u.proxy;d.removeEventListener?d.removeEventListener(f,m,u.capture):d.detachEvent?d.detachEvent(dT(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=kg(d))?(Rg(f,u),f.h==0&&(f.src=null,d[Mg]=null)):Rl(u)}}}function dT(u){return u in Pg?Pg[u]:Pg[u]="on"+u}function DO(u,d){if(u.da)u=!0;else{d=new Bt(d,this);let f=u.listener,m=u.ha||u.src;u.fa&&xg(u),u=f.call(m,d)}return u}function kg(u){return u=u[Mg],u instanceof Ml?u:null}var Og="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fg(u){return typeof u=="function"?u:(u[Og]||(u[Og]=function(d){return u.handleEvent(d)}),u[Og])}function Et(){D.call(this),this.i=new Ml(this),this.M=this,this.G=null}p(Et,D),Et.prototype[Wr]=!0,Et.prototype.removeEventListener=function(u,d,f,m){lT(this,u,d,f,m)};function Mt(u,d){var f,m=u.G;if(m)for(f=[];m;m=m.G)f.push(m);if(u=u.M,m=d.type||d,typeof d=="string")d=new I(d,u);else if(d instanceof I)d.target=d.target||u;else{var b=d;d=new I(m,u),sT(d,b)}b=!0;let S,F;if(f)for(F=f.length-1;F>=0;F--)S=d.g=f[F],b=Pl(S,m,!0,d)&&b;if(S=d.g=u,b=Pl(S,m,!0,d)&&b,b=Pl(S,m,!1,d)&&b,f)for(F=0;F<f.length;F++)S=d.g=f[F],b=Pl(S,m,!1,d)&&b}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var u=this.i;for(let d in u.g){let f=u.g[d];for(let m=0;m<f.length;m++)Rl(f[m]);delete u.g[d],u.h--}}this.G=null},Et.prototype.J=function(u,d,f,m){return this.i.add(String(u),d,!1,f,m)},Et.prototype.K=function(u,d,f,m){return this.i.add(String(u),d,!0,f,m)};function Pl(u,d,f,m){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();let b=!0;for(let S=0;S<d.length;++S){let F=d[S];if(F&&!F.da&&F.capture==f){let se=F.listener,nt=F.ha||F.src;F.fa&&Rg(u.i,F),b=se.call(nt,m)!==!1&&b}}return b&&!m.defaultPrevented}function TO(u,d){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=l(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(u,d||0)}function hT(u){u.g=TO(()=>{u.g=null,u.i&&(u.i=!1,hT(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class bO extends D{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:hT(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qa(u){D.call(this),this.h=u,this.g={}}p(qa,D);var fT=[];function pT(u){Nl(u.g,function(d,f){this.g.hasOwnProperty(f)&&xg(d)},u),u.g={}}qa.prototype.N=function(){qa.Z.N.call(this),pT(this)},qa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lg=s.JSON.stringify,CO=s.JSON.parse,SO=class{stringify(u){return s.JSON.stringify(u,void 0)}parse(u){return s.JSON.parse(u,void 0)}};function gT(){}function mT(){}var za={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vg(){I.call(this,"d")}p(Vg,I);function jg(){I.call(this,"c")}p(jg,I);var Zi={},yT=null;function xl(){return yT=yT||new Et}Zi.Ia="serverreachability";function vT(u){I.call(this,Zi.Ia,u)}p(vT,I);function Ga(u){let d=xl();Mt(d,new vT(d))}Zi.STAT_EVENT="statevent";function _T(u,d){I.call(this,Zi.STAT_EVENT,u),this.stat=d}p(_T,I);function Pt(u){let d=xl();Mt(d,new _T(d,u))}Zi.Ja="timingevent";function ET(u,d){I.call(this,Zi.Ja,u),this.size=d}p(ET,I);function Wa(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){u()},d)}function Ka(){this.g=!0}Ka.prototype.ua=function(){this.g=!1};function AO(u,d,f,m,b,S){u.info(function(){if(u.g)if(S){var F="",se=S.split("&");for(let De=0;De<se.length;De++){var nt=se[De].split("=");if(nt.length>1){let ct=nt[0];nt=nt[1];let Wn=ct.split("_");F=Wn.length>=2&&Wn[1]=="type"?F+(ct+"="+nt+"&"):F+(ct+"=redacted&")}}}else F=null;else F=S;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+d+`
`+f+`
`+F})}function RO(u,d,f,m,b,S,F){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+d+`
`+f+`
`+S+" "+F})}function ss(u,d,f,m){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+MO(u,f)+(m?" "+m:"")})}function NO(u,d){u.info(function(){return"TIMEOUT: "+d})}Ka.prototype.info=function(){};function MO(u,d){if(!u.g)return d;if(!d)return null;try{let S=JSON.parse(d);if(S){for(u=0;u<S.length;u++)if(Array.isArray(S[u])){var f=S[u];if(!(f.length<2)){var m=f[1];if(Array.isArray(m)&&!(m.length<1)){var b=m[0];if(b!="noop"&&b!="stop"&&b!="close")for(let F=1;F<m.length;F++)m[F]=""}}}}return Lg(S)}catch{return d}}var kl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},IT={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wT;function Ug(){}p(Ug,gT),Ug.prototype.g=function(){return new XMLHttpRequest},wT=new Ug;function Qa(u){return encodeURIComponent(String(u))}function PO(u){var d=1;u=u.split(":");let f=[];for(;d>0&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function Kr(u,d,f,m){this.j=u,this.i=d,this.l=f,this.S=m||1,this.V=new qa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new DT}function DT(){this.i=null,this.g="",this.h=!1}var TT={},Bg={};function $g(u,d,f){u.M=1,u.A=Fl(Gn(d)),u.u=f,u.R=!0,bT(u,null)}function bT(u,d){u.F=Date.now(),Ol(u),u.B=Gn(u.A);var f=u.B,m=u.S;Array.isArray(m)||(m=[String(m)]),VT(f.i,"t",m),u.C=0,f=u.j.L,u.h=new DT,u.g=nb(u.j,f?d:null,!u.u),u.P>0&&(u.O=new bO(l(u.Y,u,u.g),u.P)),d=u.V,f=u.g,m=u.ba;var b="readystatechange";Array.isArray(b)||(b&&(fT[0]=b.toString()),b=fT);for(let S=0;S<b.length;S++){let F=aT(f,b[S],m||d.handleEvent,!1,d.h||d);if(!F)break;d.g[F.key]=F}d=u.J?iT(u.J):{},u.u?(u.v||(u.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,d)):(u.v="GET",u.g.ea(u.B,u.v,null,d)),Ga(),AO(u.i,u.v,u.B,u.l,u.S,u.u)}Kr.prototype.ba=function(u){u=u.target;let d=this.O;d&&Jr(u)==3?d.j():this.Y(u)},Kr.prototype.Y=function(u){try{if(u==this.g)e:{let se=Jr(this.g),nt=this.g.ya(),De=this.g.ca();if(!(se<3)&&(se!=3||this.g&&(this.h.h||this.g.la()||zT(this.g)))){this.K||se!=4||nt==7||(nt==8||De<=0?Ga(3):Ga(2)),Hg(this);var d=this.g.ca();this.X=d;var f=xO(this);if(this.o=d==200,RO(this.i,this.v,this.B,this.l,this.S,se,d),this.o){if(this.U&&!this.L){t:{if(this.g){var m,b=this.g;if((m=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(m)){var S=m;break t}}S=null}if(u=S)ss(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qg(this,u);else{this.o=!1,this.m=3,Pt(12),Xi(this),Ya(this);break e}}if(this.R){u=!0;let ct;for(;!this.K&&this.C<f.length;)if(ct=kO(this,f),ct==Bg){se==4&&(this.m=4,Pt(14),u=!1),ss(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==TT){this.m=4,Pt(15),ss(this.i,this.l,f,"[Invalid Chunk]"),u=!1;break}else ss(this.i,this.l,ct,null),qg(this,ct);if(CT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),se!=4||f.length!=0||this.h.h||(this.m=1,Pt(16),u=!1),this.o=this.o&&u,!u)ss(this.i,this.l,f,"[Invalid Chunked Response]"),Xi(this),Ya(this);else if(f.length>0&&!this.W){this.W=!0;var F=this.j;F.g==this&&F.aa&&!F.P&&(F.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Jg(F),F.P=!0,Pt(11))}}else ss(this.i,this.l,f,null),qg(this,f);se==4&&Xi(this),this.o&&!this.K&&(se==4?ZT(this.j,this):(this.o=!1,Ol(this)))}else KO(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),Xi(this),Ya(this)}}}catch{}finally{}};function xO(u){if(!CT(u))return u.g.la();let d=zT(u.g);if(d==="")return"";let f="",m=d.length,b=Jr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Xi(u),Ya(u),"";u.h.i=new s.TextDecoder}for(let S=0;S<m;S++)u.h.h=!0,f+=u.h.i.decode(d[S],{stream:!(b&&S==m-1)});return d.length=0,u.h.g+=f,u.C=0,u.h.g}function CT(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function kO(u,d){var f=u.C,m=d.indexOf(`
`,f);return m==-1?Bg:(f=Number(d.substring(f,m)),isNaN(f)?TT:(m+=1,m+f>d.length?Bg:(d=d.slice(m,m+f),u.C=m+f,d)))}Kr.prototype.cancel=function(){this.K=!0,Xi(this)};function Ol(u){u.T=Date.now()+u.H,ST(u,u.H)}function ST(u,d){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Wa(l(u.aa,u),d)}function Hg(u){u.D&&(s.clearTimeout(u.D),u.D=null)}Kr.prototype.aa=function(){this.D=null;let u=Date.now();u-this.T>=0?(NO(this.i,this.B),this.M!=2&&(Ga(),Pt(17)),Xi(this),this.m=2,Ya(this)):ST(this,this.T-u)};function Ya(u){u.j.I==0||u.K||ZT(u.j,u)}function Xi(u){Hg(u);var d=u.O;d&&typeof d.dispose=="function"&&d.dispose(),u.O=null,pT(u.V),u.g&&(d=u.g,u.g=null,d.abort(),d.dispose())}function qg(u,d){try{var f=u.j;if(f.I!=0&&(f.g==u||zg(f.h,u))){if(!u.L&&zg(f.h,u)&&f.I==3){try{var m=f.Ba.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<u.F)$l(f),Ul(f);else break e;Yg(f),Pt(18)}}else f.xa=b[1],0<f.xa-f.K&&b[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Wa(l(f.Va,f),6e3));NT(f.h)<=1&&f.ta&&(f.ta=void 0)}else to(f,11)}else if((u.L||f.g==u)&&$l(f),!_(d))for(b=f.Ba.g.parse(d),d=0;d<b.length;d++){let De=b[d],ct=De[0];if(!(ct<=f.K))if(f.K=ct,De=De[1],f.I==2)if(De[0]=="c"){f.M=De[1],f.ba=De[2];let Wn=De[3];Wn!=null&&(f.ka=Wn,f.j.info("VER="+f.ka));let no=De[4];no!=null&&(f.za=no,f.j.info("SVER="+f.za));let Zr=De[5];Zr!=null&&typeof Zr=="number"&&Zr>0&&(m=1.5*Zr,f.O=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Xr=u.g;if(Xr){let ql=Xr.g?Xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ql){var S=m.h;S.g||ql.indexOf("spdy")==-1&&ql.indexOf("quic")==-1&&ql.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Gg(S,S.h),S.h=null))}if(m.G){let Zg=Xr.g?Xr.g.getResponseHeader("X-HTTP-Session-Id"):null;Zg&&(m.wa=Zg,Re(m.J,m.G,Zg))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-u.F,f.j.info("Handshake RTT: "+f.T+"ms")),m=f;var F=u;if(m.na=tb(m,m.L?m.ba:null,m.W),F.L){MT(m.h,F);var se=F,nt=m.O;nt&&(se.H=nt),se.D&&(Hg(se),Ol(se)),m.g=F}else YT(m);f.i.length>0&&Bl(f)}else De[0]!="stop"&&De[0]!="close"||to(f,7);else f.I==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?to(f,7):Qg(f):De[0]!="noop"&&f.l&&f.l.qa(De),f.A=0)}}Ga(4)}catch{}}var OO=class{constructor(u,d){this.g=u,this.map=d}};function AT(u){this.l=u||10,s.PerformanceNavigationTiming?(u=s.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function RT(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function NT(u){return u.h?1:u.g?u.g.size:0}function zg(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function Gg(u,d){u.g?u.g.add(d):u.h=d}function MT(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}AT.prototype.cancel=function(){if(this.i=PT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function PT(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.G);return d}return y(u.i)}var xT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FO(u,d){if(u){u=u.split("&");for(let f=0;f<u.length;f++){let m=u[f].indexOf("="),b,S=null;m>=0?(b=u[f].substring(0,m),S=u[f].substring(m+1)):b=u[f],d(b,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function Qr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;u instanceof Qr?(this.l=u.l,Ja(this,u.j),this.o=u.o,this.g=u.g,Za(this,u.u),this.h=u.h,Wg(this,jT(u.i)),this.m=u.m):u&&(d=String(u).match(xT))?(this.l=!1,Ja(this,d[1]||"",!0),this.o=Xa(d[2]||""),this.g=Xa(d[3]||"",!0),Za(this,d[4]),this.h=Xa(d[5]||"",!0),Wg(this,d[6]||"",!0),this.m=Xa(d[7]||"")):(this.l=!1,this.i=new tc(null,this.l))}Qr.prototype.toString=function(){let u=[];var d=this.j;d&&u.push(ec(d,kT,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(ec(d,kT,!0),"@"),u.push(Qa(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&u.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(ec(f,f.charAt(0)=="/"?jO:VO,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",ec(f,BO)),u.join("")},Qr.prototype.resolve=function(u){let d=Gn(this),f=!!u.j;f?Ja(d,u.j):f=!!u.o,f?d.o=u.o:f=!!u.g,f?d.g=u.g:f=u.u!=null;var m=u.h;if(f)Za(d,u.u);else if(f=!!u.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var b=d.h.lastIndexOf("/");b!=-1&&(m=d.h.slice(0,b+1)+m)}if(b=m,b==".."||b==".")m="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){m=b.lastIndexOf("/",0)==0,b=b.split("/");let S=[];for(let F=0;F<b.length;){let se=b[F++];se=="."?m&&F==b.length&&S.push(""):se==".."?((S.length>1||S.length==1&&S[0]!="")&&S.pop(),m&&F==b.length&&S.push("")):(S.push(se),m=!0)}m=S.join("/")}else m=b}return f?d.h=m:f=u.i.toString()!=="",f?Wg(d,jT(u.i)):f=!!u.m,f&&(d.m=u.m),d};function Gn(u){return new Qr(u)}function Ja(u,d,f){u.j=f?Xa(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Za(u,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);u.u=d}else u.u=null}function Wg(u,d,f){d instanceof tc?(u.i=d,$O(u.i,u.l)):(f||(d=ec(d,UO)),u.i=new tc(d,u.l))}function Re(u,d,f){u.i.set(d,f)}function Fl(u){return Re(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Xa(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ec(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,LO),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function LO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var kT=/[#\/\?@]/g,VO=/[#\?:]/g,jO=/[#\?]/g,UO=/[#\?@]/g,BO=/#/g;function tc(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function eo(u){u.g||(u.g=new Map,u.h=0,u.i&&FO(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=tc.prototype,n.add=function(u,d){eo(this),this.i=null,u=as(this,u);let f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function OT(u,d){eo(u),d=as(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function FT(u,d){return eo(u),d=as(u,d),u.g.has(d)}n.forEach=function(u,d){eo(this),this.g.forEach(function(f,m){f.forEach(function(b){u.call(d,b,m,this)},this)},this)};function LT(u,d){eo(u);let f=[];if(typeof d=="string")FT(u,d)&&(f=f.concat(u.g.get(as(u,d))));else for(u=Array.from(u.g.values()),d=0;d<u.length;d++)f=f.concat(u[d]);return f}n.set=function(u,d){return eo(this),this.i=null,u=as(this,u),FT(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=LT(this,u),u.length>0?String(u[0]):d):d};function VT(u,d,f){OT(u,d),f.length>0&&(u.i=null,u.g.set(as(u,d),y(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(let m=0;m<d.length;m++){var f=d[m];let b=Qa(f);f=LT(this,f);for(let S=0;S<f.length;S++){let F=b;f[S]!==""&&(F+="="+Qa(f[S])),u.push(F)}}return this.i=u.join("&")};function jT(u){let d=new tc;return d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),d}function as(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function $O(u,d){d&&!u.j&&(eo(u),u.i=null,u.g.forEach(function(f,m){let b=m.toLowerCase();m!=b&&(OT(this,m),VT(this,b,f))},u)),u.j=d}function HO(u,d){let f=new Ka;if(s.Image){let m=new Image;m.onload=h(Yr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=h(Yr,f,"TestLoadImage: error",!1,d,m),m.onabort=h(Yr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=h(Yr,f,"TestLoadImage: timeout",!1,d,m),s.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else d(!1)}function qO(u,d){let f=new Ka,m=new AbortController,b=setTimeout(()=>{m.abort(),Yr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:m.signal}).then(S=>{clearTimeout(b),S.ok?Yr(f,"TestPingServer: ok",!0,d):Yr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),Yr(f,"TestPingServer: error",!1,d)})}function Yr(u,d,f,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(f)}catch{}}function zO(){this.g=new SO}function Ll(u){this.i=u.Sb||null,this.h=u.ab||!1}p(Ll,gT),Ll.prototype.g=function(){return new Vl(this.i,this.h)};function Vl(u,d){Et.call(this),this.H=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Vl,Et),n=Vl.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=d,this.readyState=1,rc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(d.body=u),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,nc(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,rc(this)),this.g&&(this.readyState=3,rc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;UT(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function UT(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?nc(this):rc(this),this.readyState==3&&UT(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,nc(this))},n.Na=function(u){this.g&&(this.response=u,nc(this))},n.ga=function(){this.g&&nc(this)};function nc(u){u.readyState=4,u.l=null,u.j=null,u.B=null,rc(u)}n.setRequestHeader=function(u,d){this.A.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function rc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Vl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function BT(u){let d="";return Nl(u,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Kg(u,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=BT(f),typeof u=="string"?f!=null&&Qa(f):Re(u,d,f))}function Le(u){Et.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Le,Et);var GO=/^https?$/i,WO=["POST","PUT"];n=Le.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wT.g(),this.g.onreadystatechange=g(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(S){$T(this,S);return}if(u=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)f.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let S of m.keys())f.set(S,m.get(S));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),b=s.FormData&&u instanceof s.FormData,!(Array.prototype.indexOf.call(WO,d,void 0)>=0)||m||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,F]of f)this.g.setRequestHeader(S,F);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(S){$T(this,S)}};function $T(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.o=5,HT(u),jl(u)}function HT(u){u.A||(u.A=!0,Mt(u,"complete"),Mt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Mt(this,"complete"),Mt(this,"abort"),jl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jl(this,!0)),Le.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?qT(this):this.Xa())},n.Xa=function(){qT(this)};function qT(u){if(u.h&&typeof o<"u"){if(u.v&&Jr(u)==4)setTimeout(u.Ca.bind(u),0);else if(Mt(u,"readystatechange"),Jr(u)==4){u.h=!1;try{let S=u.ca();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=S===0){let F=String(u.D).match(xT)[1]||null;!F&&s.self&&s.self.location&&(F=s.self.location.protocol.slice(0,-1)),m=!GO.test(F?F.toLowerCase():"")}f=m}if(f)Mt(u,"complete"),Mt(u,"success");else{u.o=6;try{var b=Jr(u)>2?u.g.statusText:""}catch{b=""}u.l=b+" ["+u.ca()+"]",HT(u)}}finally{jl(u)}}}}function jl(u,d){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);let f=u.g;u.g=null,d||Mt(u,"ready");try{f.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Jr(u){return u.g?u.g.readyState:0}n.ca=function(){try{return Jr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),CO(d)}};function zT(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function KO(u){let d={};u=(u.g&&Jr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(_(u[m]))continue;var f=PO(u[m]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[b]||[];d[b]=S,S.push(f)}IO(d,function(m){return m.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ic(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function GT(u){this.za=0,this.i=[],this.j=new Ka,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ic("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ic("baseRetryDelayMs",5e3,u),this.Za=ic("retryDelaySeedMs",1e4,u),this.Ta=ic("forwardChannelMaxRetries",2,u),this.va=ic("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new AT(u&&u.concurrentRequestLimit),this.Ba=new zO,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=GT.prototype,n.ka=8,n.I=1,n.connect=function(u,d,f,m){Pt(0),this.W=u,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.J=tb(this,null,this.W),Bl(this)};function Qg(u){if(WT(u),u.I==3){var d=u.V++,f=Gn(u.J);if(Re(f,"SID",u.M),Re(f,"RID",d),Re(f,"TYPE","terminate"),oc(u,f),d=new Kr(u,u.j,d),d.M=2,d.A=Fl(Gn(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=nb(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Ol(d)}eb(u)}function Ul(u){u.g&&(Jg(u),u.g.cancel(),u.g=null)}function WT(u){Ul(u),u.v&&(s.clearTimeout(u.v),u.v=null),$l(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&s.clearTimeout(u.m),u.m=null)}function Bl(u){if(!RT(u.h)&&!u.m){u.m=!0;var d=u.Ea;Ae||v(),we||(Ae(),we=!0),w.add(d,u),u.D=0}}function QO(u,d){return NT(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=d.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Wa(l(u.Ea,u,d),XT(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;let b=new Kr(this,this.j,u),S=this.o;if(this.U&&(S?(S=iT(S),sT(S,this.U)):S=this.U),this.u!==null||this.R||(b.J=S,S=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=QT(this,b,d),f=Gn(this.J),Re(f,"RID",u),Re(f,"CVER",22),this.G&&Re(f,"X-HTTP-Session-Id",this.G),oc(this,f),S&&(this.R?d="headers="+Qa(BT(S))+"&"+d:this.u&&Kg(f,this.u,S)),Gg(this.h,b),this.Ra&&Re(f,"TYPE","init"),this.S?(Re(f,"$req",d),Re(f,"SID","null"),b.U=!0,$g(b,f,null)):$g(b,f,d),this.I=2}}else this.I==3&&(u?KT(this,u):this.i.length==0||RT(this.h)||KT(this))};function KT(u,d){var f;d?f=d.l:f=u.V++;let m=Gn(u.J);Re(m,"SID",u.M),Re(m,"RID",f),Re(m,"AID",u.K),oc(u,m),u.u&&u.o&&Kg(m,u.u,u.o),f=new Kr(u,u.j,f,u.D+1),u.u===null&&(f.J=u.o),d&&(u.i=d.G.concat(u.i)),d=QT(u,f,1e3),f.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Gg(u.h,f),$g(f,m,d)}function oc(u,d){u.H&&Nl(u.H,function(f,m){Re(d,m,f)}),u.l&&Nl({},function(f,m){Re(d,m,f)})}function QT(u,d,f){f=Math.min(u.i.length,f);let m=u.l?l(u.l.Ka,u.l,u):null;e:{var b=u.i;let se=-1;for(;;){let nt=["count="+f];se==-1?f>0?(se=b[0].g,nt.push("ofs="+se)):se=0:nt.push("ofs="+se);let De=!0;for(let ct=0;ct<f;ct++){var S=b[ct].g;let Wn=b[ct].map;if(S-=se,S<0)se=Math.max(0,b[ct].g-100),De=!1;else try{S="req"+S+"_"||"";try{var F=Wn instanceof Map?Wn:Object.entries(Wn);for(let[no,Zr]of F){let Xr=Zr;a(Zr)&&(Xr=Lg(Zr)),nt.push(S+no+"="+encodeURIComponent(Xr))}}catch(no){throw nt.push(S+"type="+encodeURIComponent("_badmap")),no}}catch{m&&m(Wn)}}if(De){F=nt.join("&");break e}}F=void 0}return u=u.i.splice(0,f),d.G=u,F}function YT(u){if(!u.g&&!u.v){u.Y=1;var d=u.Da;Ae||v(),we||(Ae(),we=!0),w.add(d,u),u.A=0}}function Yg(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Wa(l(u.Da,u),XT(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,JT(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Wa(l(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),Ul(this),JT(this))};function Jg(u){u.B!=null&&(s.clearTimeout(u.B),u.B=null)}function JT(u){u.g=new Kr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var d=Gn(u.na);Re(d,"RID","rpc"),Re(d,"SID",u.M),Re(d,"AID",u.K),Re(d,"CI",u.F?"0":"1"),!u.F&&u.ia&&Re(d,"TO",u.ia),Re(d,"TYPE","xmlhttp"),oc(u,d),u.u&&u.o&&Kg(d,u.u,u.o),u.O&&(u.g.H=u.O);var f=u.g;u=u.ba,f.M=1,f.A=Fl(Gn(d)),f.u=null,f.R=!0,bT(f,u)}n.Va=function(){this.C!=null&&(this.C=null,Ul(this),Yg(this),Pt(19))};function $l(u){u.C!=null&&(s.clearTimeout(u.C),u.C=null)}function ZT(u,d){var f=null;if(u.g==d){$l(u),Jg(u),u.g=null;var m=2}else if(zg(u.h,d))f=d.G,MT(u.h,d),m=1;else return;if(u.I!=0){if(d.o)if(m==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var b=u.D;m=xl(),Mt(m,new ET(m,f)),Bl(u)}else YT(u);else if(b=d.m,b==3||b==0&&d.X>0||!(m==1&&QO(u,d)||m==2&&Yg(u)))switch(f&&f.length>0&&(d=u.h,d.i=d.i.concat(f)),b){case 1:to(u,5);break;case 4:to(u,10);break;case 3:to(u,6);break;default:to(u,2)}}}function XT(u,d){let f=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(f*=2),f*d}function to(u,d){if(u.j.info("Error code "+d),d==2){var f=l(u.bb,u),m=u.Ua;let b=!m;m=new Qr(m||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ja(m,"https"),Fl(m),b?HO(m.toString(),f):qO(m.toString(),f)}else Pt(2);u.I=0,u.l&&u.l.pa(d),eb(u),WT(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function eb(u){if(u.I=0,u.ja=[],u.l){let d=PT(u.h);(d.length!=0||u.i.length!=0)&&(T(u.ja,d),T(u.ja,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.oa()}}function tb(u,d,f){var m=f instanceof Qr?Gn(f):new Qr(f);if(m.g!="")d&&(m.g=d+"."+m.g),Za(m,m.u);else{var b=s.location;m=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;let S=new Qr(null);m&&Ja(S,m),d&&(S.g=d),b&&Za(S,b),f&&(S.h=f),m=S}return f=u.G,d=u.wa,f&&d&&Re(m,f,d),Re(m,"VER",u.ka),oc(u,m),m}function nb(u,d,f){if(d&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Aa&&!u.ma?new Le(new Ll({ab:f})):new Le(u.ma),d.Fa(u.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function rb(){}n=rb.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Hl(){}Hl.prototype.g=function(u,d){return new Kt(u,d)};function Kt(u,d){Et.call(this),this.g=new GT(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(u?u["X-WebChannel-Client-Profile"]=d.sa:u={"X-WebChannel-Client-Profile":d.sa}),this.g.U=u,(u=d&&d.Qb)&&!_(u)&&(this.g.u=u),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new cs(this)}p(Kt,Et),Kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Qg(this.g)},Kt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.v&&(f={},f.__data__=Lg(u),u=f);d.i.push(new OO(d.Ya++,u)),d.I==3&&Bl(d)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Qg(this.g),delete this.g,Kt.Z.N.call(this)};function ib(u){Vg.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}p(ib,Vg);function ob(){jg.call(this),this.status=1}p(ob,jg);function cs(u){this.g=u}p(cs,rb),cs.prototype.ra=function(){Mt(this.g,"a")},cs.prototype.qa=function(u){Mt(this.g,new ib(u))},cs.prototype.pa=function(u){Mt(this.g,new ob)},cs.prototype.oa=function(){Mt(this.g,"b")},Hl.prototype.createWebChannel=Hl.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,_I=jr.createWebChannelTransport=function(){return new Hl},vI=jr.getStatEventTarget=function(){return xl()},yI=jr.Event=Zi,fp=jr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},kl.NO_ERROR=0,kl.TIMEOUT=8,kl.HTTP_ERROR=6,Gu=jr.ErrorCode=kl,IT.COMPLETE="complete",mI=jr.EventType=IT,mT.EventType=za,za.OPEN="a",za.CLOSE="b",za.ERROR="c",za.MESSAGE="d",Et.prototype.listen=Et.prototype.J,da=jr.WebChannel=mT,oG=jr.FetchXmlHttpFactory=Ll,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,gI=jr.XhrIo=Le}).apply(typeof hp<"u"?hp:typeof self<"u"?self:typeof window<"u"?window:{});var HM="@firebase/firestore",qM="4.9.3";var pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var xa="12.7.0";var Wo=new ur("@firebase/firestore");function ha(){return Wo.logLevel}function j(n,...e){if(Wo.logLevel<=ce.DEBUG){let t=e.map(hD);Wo.debug(`Firestore (${xa}): ${n}`,...t)}}function Br(n,...e){if(Wo.logLevel<=ce.ERROR){let t=e.map(hD);Wo.error(`Firestore (${xa}): ${n}`,...t)}}function _a(n,...e){if(Wo.logLevel<=ce.WARN){let t=e.map(hD);Wo.warn(`Firestore (${xa}): ${n}`,...t)}}function hD(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function H(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,kP(n,r,t)}function kP(n,e,t){let r=`FIRESTORE (${xa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Br(r),new Error(r)}function fe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||kP(e,i,r)}function Q(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends rn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Dn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ep=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},TI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pt.UNAUTHENTICATED))}shutdown(){}},bI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},CI=class{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){fe(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Dn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Dn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Dn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string",31837,{l:r}),new Ep(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string",2055,{h:e}),new pt(e)}},SI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},AI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new SI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ip=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},RI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){fe(this.o===void 0,3512);let r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ip(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ip(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function sG(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Xu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=sG(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ue(n,e){return n<e?-1:n>e?1:0}function NI(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return EI(i)===EI(o)?ue(i,o):EI(i)?1:-1}return ue(n.length,e.length)}var aG=55296,cG=57343;function EI(n){let e=n.charCodeAt(0);return e>=aG&&e<=cG}function Ea(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var zM="__name__",wp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&H(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&H(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ue(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):NI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vr.fromString(e.substring(4,e.length-2))}},Se=class n extends wp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},uG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,on=class n extends wp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return uG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zM}static keyField(){return new n([zM])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new O(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new O(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Se.fromString(e))}static fromName(e){return new n(Se.fromString(e).popFirst(5))}static empty(){return new n(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Se(e.slice()))}};function OP(n,e,t){if(!t)throw new O(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function lG(n,e,t,r){if(e===!0&&r===!0)throw new O(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function GM(n){if(!q.isDocumentKey(n))throw new O(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WM(n){if(q.isDocumentKey(n))throw new O(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function FP(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function tg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":H(12329,{type:typeof n})}function Rt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=tg(n);throw new O(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dG(n,e){if(e<=0)throw new O(N.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}function Ze(n,e){let t={typeString:n};return e&&(t.value=e),t}function fl(n,e){if(!FP(n))throw new O(N.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new O(N.INVALID_ARGUMENT,t);return!0}var KM=-62135596800,QM=1e6,Xe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*QM);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<KM)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/QM}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fl(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-KM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:Ze("string",Xe._jsonSchemaVersion),seconds:Ze("number"),nanoseconds:Ze("number")};var K=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Xe(0,0))}static max(){return new n(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var el=-1,MI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};MI.UNKNOWN_ID=-1;function hG(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=K.fromTimestamp(r===1e9?new Xe(t+1,0):new Xe(t,r));return new Ko(i,q.empty(),e)}function fG(n){return new Ko(n.readTime,n.key,el)}var Ko=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(K.min(),q.empty(),el)}static max(){return new n(K.max(),q.empty(),el)}};function pG(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:ue(n.largestBatchId,e.largestBatchId))}var gG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",PI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function ka(n){if(n.code!==N.FAILED_PRECONDITION||n.message!==gG)throw n;j("LocalStore","Unexpectedly lost primary lease")}var x=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&H(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function mG(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Oa(n){return n.name==="IndexedDbTransactionError"}var fD=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),pD=-1;function pl(n){return n==null}function tl(n){return n===0&&1/n==-1/0}function yG(n){return typeof n=="number"&&Number.isInteger(n)&&!tl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var LP="";function vG(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YM(e)),e=_G(n.get(t),e);return YM(e)}function _G(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case LP:t+="";break;default:t+=o}}return t}function YM(n){return n+LP+""}var EG="remoteDocuments",VP="owner";var jP="mutationQueues";var UP="mutations";var BP="documentMutations",IG="remoteDocumentsV14";var $P="remoteDocumentGlobal";var HP="targets";var qP="targetDocuments";var zP="targetGlobal",GP="collectionParents";var WP="clientMetadata";var KP="bundles";var QP="namedQueries";var wG="indexConfiguration";var DG="indexState";var TG="indexEntries";var YP="documentOverlays";var bG="globals";var CG=[jP,UP,BP,EG,HP,VP,zP,qP,WP,$P,GP,KP,QP],jce=[...CG,YP],SG=[jP,UP,BP,IG,HP,VP,zP,qP,WP,$P,GP,KP,QP,YP],AG=SG,RG=[...AG,wG,DG,TG];var Uce=[...RG,bG];function JM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function qi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function JP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Be=class n{constructor(e,t){this.comparator=e,this.root=t||pr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ma(this.root,e,this.comparator,!0)}},ma=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},pr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw H(43730,{key:this.key,value:this.value});if(this.right.isRed())throw H(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw H(27949);return e+(this.isRed()?0:1)}};pr.EMPTY=null,pr.RED=!0,pr.BLACK=!1;pr.EMPTY=new class{constructor(){this.size=0}get key(){throw H(57766)}get value(){throw H(16141)}get color(){throw H(16727)}get left(){throw H(29726)}get right(){throw H(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new pr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var mt=class n{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dp(this.data.getIterator())}getIteratorFrom(e){return new Dp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Dp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var wn=class n{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new n([])}unionWith(e){let t=new mt(on.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Tp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Nt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Tp("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Nt.EMPTY_BYTE_STRING=new Nt("");var NG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(n){if(fe(!!n,39018),typeof n=="string"){let e=0,t=NG.exec(n);if(fe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Hr(n){return typeof n=="string"?Nt.fromBase64String(n):Nt.fromUint8Array(n)}var ZP="server_timestamp",XP="__type__",ex="__previous_value__",tx="__local_write_time__";function gD(n){return(n?.mapValue?.fields||{})[XP]?.stringValue===ZP}function ng(n){let e=n.mapValue.fields[ex];return gD(e)?ng(e):e}function nl(n){let e=$r(n.mapValue.fields[tx].timestampValue);return new Xe(e.seconds,e.nanos)}var xI=class{constructor(e,t,r,i,o,s,a,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l,this.isUsingEmulator=h}},bp="(default)",Cp=class n{constructor(e,t){this.projectId=e,this.database=t||bp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===bp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var mD="__type__",nx="__max__",pp={mapValue:{fields:{__type__:{stringValue:nx}}}},yD="__vector__",Ia="value";function ji(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gD(n)?4:ix(n)?9007199254740991:rx(n)?10:11:H(28295,{value:n})}function mr(n,e){if(n===e)return!0;let t=ji(n);if(t!==ji(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nl(n).isEqual(nl(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=$r(i.timestampValue),a=$r(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Hr(i.bytesValue).isEqual(Hr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ke(i.doubleValue),a=ke(o.doubleValue);return s===a?tl(s)===tl(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Ea(n.arrayValue.values||[],e.arrayValue.values||[],mr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(JM(s)!==JM(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!mr(s[c],a[c])))return!1;return!0})(n,e);default:return H(52216,{left:n})}}function rl(n,e){return(n.values||[]).find(t=>mr(t,e))!==void 0}function wa(n,e){if(n===e)return 0;let t=ji(n),r=ji(e);if(t!==r)return ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=ke(o.integerValue||o.doubleValue),c=ke(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return ZM(n.timestampValue,e.timestampValue);case 4:return ZM(nl(n),nl(e));case 5:return NI(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Hr(o),c=Hr(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ue(a[l],c[l]);if(h!==0)return h}return ue(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ue(ke(o.latitude),ke(s.latitude));return a!==0?a:ue(ke(o.longitude),ke(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return XM(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},c=s.fields||{},l=a[Ia]?.arrayValue,h=c[Ia]?.arrayValue,p=ue(l?.values?.length||0,h?.values?.length||0);return p!==0?p:XM(l,h)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===pp.mapValue&&s===pp.mapValue)return 0;if(o===pp.mapValue)return 1;if(s===pp.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let g=NI(c[p],h[p]);if(g!==0)return g;let y=wa(a[c[p]],l[h[p]]);if(y!==0)return y}return ue(c.length,h.length)})(n.mapValue,e.mapValue);default:throw H(23264,{he:t})}}function ZM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ue(n,e);let t=$r(n),r=$r(e),i=ue(t.seconds,r.seconds);return i!==0?i:ue(t.nanos,r.nanos)}function XM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=wa(t[i],r[i]);if(o)return o}return ue(t.length,r.length)}function Da(n){return kI(n)}function kI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=$r(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Hr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return q.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=kI(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${kI(t.fields[s])}`;return i+"}"})(n.mapValue):H(61005,{value:n})}function yp(n){switch(ji(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ng(n);return e?16+yp(e):16;case 5:return 2*n.stringValue.length;case 6:return Hr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+yp(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return qi(r.fields,(o,s)=>{i+=o.length+yp(s)}),i})(n.mapValue);default:throw H(13486,{value:n})}}function eP(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function OI(n){return!!n&&"integerValue"in n}function vD(n){return!!n&&"arrayValue"in n}function tP(n){return!!n&&"nullValue"in n}function nP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vp(n){return!!n&&"mapValue"in n}function rx(n){return(n?.mapValue?.fields||{})[mD]?.stringValue===yD}function Ku(n){if(n.geoPointValue)return{geoPointValue:R({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:R({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return qi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ku(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ku(n.arrayValue.values[t]);return e}return R({},n)}function ix(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nx}var $ce={mapValue:{fields:{[mD]:{stringValue:yD},[Ia]:{arrayValue:{}}}}};var Wt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ku(t)}setAll(e){let t=on.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Ku(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());vp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];vp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){qi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Ku(this.value))}};function ox(n){let e=[];return qi(n.fields,(t,r)=>{let i=new on([t]);if(vp(r)){let o=ox(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new wn(e)}var an=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,K.min(),K.min(),K.min(),Wt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,K.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,K.min(),K.min(),Wt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,K.min(),K.min(),Wt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ta=class{constructor(e,t){this.position=e,this.inclusive=t}};function rP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),t.key):r=wa(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function iP(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mr(n.position[t],e.position[t]))return!1;return!0}var Qo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function MG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Sp=class{},Je=class n extends Sp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new LI(e,t,r):t==="array-contains"?new UI(e,r):t==="in"?new BI(e,r):t==="not-in"?new $I(e,r):t==="array-contains-any"?new HI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new VI(e,r):new jI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wa(t,this.value)):t!==null&&ji(this.value)===ji(t)&&this.matchesComparison(wa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},zn=class n extends Sp{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return sx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function sx(n){return n.op==="and"}function ax(n){return PG(n)&&sx(n)}function PG(n){for(let e of n.filters)if(e instanceof zn)return!1;return!0}function FI(n){if(n instanceof Je)return n.field.canonicalString()+n.op.toString()+Da(n.value);if(ax(n))return n.filters.map(e=>FI(e)).join(",");{let e=n.filters.map(t=>FI(t)).join(",");return`${n.op}(${e})`}}function cx(n,e){return n instanceof Je?(function(r,i){return i instanceof Je&&r.op===i.op&&r.field.isEqual(i.field)&&mr(r.value,i.value)})(n,e):n instanceof zn?(function(r,i){return i instanceof zn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&cx(s,i.filters[a]),!0):!1})(n,e):void H(19439)}function ux(n){return n instanceof Je?(function(t){return`${t.field.canonicalString()} ${t.op} ${Da(t.value)}`})(n):n instanceof zn?(function(t){return t.op.toString()+" {"+t.getFilters().map(ux).join(" ,")+"}"})(n):"Filter"}var LI=class extends Je{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},VI=class extends Je{constructor(e,t){super(e,"in",t),this.keys=lx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},jI=class extends Je{constructor(e,t){super(e,"not-in",t),this.keys=lx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function lx(n,e){return(e.arrayValue?.values||[]).map(t=>q.fromName(t.referenceValue))}var UI=class extends Je{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return vD(t)&&rl(t.arrayValue,this.value)}},BI=class extends Je{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&rl(this.value.arrayValue,t)}},$I=class extends Je{constructor(e,t){super(e,"not-in",t)}matches(e){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!rl(this.value.arrayValue,t)}},HI=class extends Je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!vD(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>rl(this.value.arrayValue,r))}};var qI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function oP(n,e=null,t=[],r=[],i=null,o=null,s=null){return new qI(n,e,t,r,i,o,s)}function _D(n){let e=Q(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>FI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),pl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Da(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Da(r)).join(",")),e.Te=t}return e.Te}function ED(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!MG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iP(n.startAt,e.startAt)&&iP(n.endAt,e.endAt)}function zI(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ui=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function xG(n,e,t,r,i,o,s,a){return new Ui(n,e,t,r,i,o,s,a)}function rg(n){return new Ui(n)}function sP(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dx(n){return n.collectionGroup!==null}function Qu(n){let e=Q(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new mt(on.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Qo(o,r))}),t.has(on.keyField().canonicalString())||e.Ie.push(new Qo(on.keyField(),r))}return e.Ie}function gr(n){let e=Q(n);return e.Ee||(e.Ee=kG(e,Qu(n))),e.Ee}function kG(n,e){if(n.limitType==="F")return oP(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Qo(i.field,o)});let t=n.endAt?new Ta(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ta(n.startAt.position,n.startAt.inclusive):null;return oP(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function GI(n,e){let t=n.filters.concat([e]);return new Ui(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ap(n,e,t){return new Ui(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ig(n,e){return ED(gr(n),gr(e))&&n.limitType===e.limitType}function hx(n){return`${_D(gr(n))}|lt:${n.limitType}`}function fa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>ux(i)).join(", ")}]`),pl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Da(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Da(i)).join(",")),`Target(${r})`})(gr(n))}; limitType=${n.limitType})`}function og(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Qu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let l=rP(s,a,c);return s.inclusive?l<=0:l<0})(r.startAt,Qu(r),i)||r.endAt&&!(function(s,a,c){let l=rP(s,a,c);return s.inclusive?l>=0:l>0})(r.endAt,Qu(r),i))})(n,e)}function OG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function fx(n){return(e,t)=>{let r=!1;for(let i of Qu(n)){let o=FG(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function FG(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?wa(c,l):H(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return H(19790,{direction:n.dir})}}var qr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return JP(this.inner)}size(){return this.innerSize}};var LG=new Be(q.comparator);function zr(){return LG}var px=new Be(q.comparator);function Wu(...n){let e=px;for(let t of n)e=e.insert(t.key,t);return e}function gx(n){let e=px;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qo(){return Yu()}function mx(){return Yu()}function Yu(){return new qr(n=>n.toString(),(n,e)=>n.isEqual(e))}var VG=new Be(q.comparator),jG=new mt(q.comparator);function le(...n){let e=jG;for(let t of n)e=e.add(t);return e}var UG=new mt(ue);function BG(){return UG}function ID(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tl(e)?"-0":e}}function yx(n){return{integerValue:""+n}}function $G(n,e){return yG(e)?yx(e):ID(n,e)}var ba=class{constructor(){this._=void 0}};function HG(n,e,t){return n instanceof Yo?(function(i,o){let s={fields:{[XP]:{stringValue:ZP},[tx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&gD(o)&&(o=ng(o)),o&&(s.fields[ex]=o),{mapValue:s}})(t,e):n instanceof Jo?_x(n,e):n instanceof Zo?Ex(n,e):(function(i,o){let s=vx(i,o),a=aP(s)+aP(i.Ae);return OI(s)&&OI(i.Ae)?yx(a):ID(i.serializer,a)})(n,e)}function qG(n,e,t){return n instanceof Jo?_x(n,e):n instanceof Zo?Ex(n,e):t}function vx(n,e){return n instanceof Ca?(function(r){return OI(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Yo=class extends ba{},Jo=class extends ba{constructor(e){super(),this.elements=e}};function _x(n,e){let t=Ix(e);for(let r of n.elements)t.some(i=>mr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Zo=class extends ba{constructor(e){super(),this.elements=e}};function Ex(n,e){let t=Ix(e);for(let r of n.elements)t=t.filter(i=>!mr(i,r));return{arrayValue:{values:t}}}var Ca=class extends ba{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function aP(n){return ke(n.integerValue||n.doubleValue)}function Ix(n){return vD(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var WI=class{constructor(e,t){this.field=e,this.transform=t}};function zG(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Jo&&i instanceof Jo||r instanceof Zo&&i instanceof Zo?Ea(r.elements,i.elements,mr):r instanceof Ca&&i instanceof Ca?mr(r.Ae,i.Ae):r instanceof Yo&&i instanceof Yo})(n.transform,e.transform)}var KI=class{constructor(e,t){this.version=e,this.transformResults=t}},gt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function _p(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Sa=class{};function wx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new es(n.key,gt.none()):new Xo(n.key,n.data,gt.none());{let t=n.data,r=Wt.empty(),i=new mt(on.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new yr(n.key,r,new wn(i.toArray()),gt.none())}}function GG(n,e,t){n instanceof Xo?(function(i,o,s){let a=i.value.clone(),c=uP(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof yr?(function(i,o,s){if(!_p(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=uP(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Dx(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Ju(n,e,t,r){return n instanceof Xo?(function(o,s,a,c){if(!_p(o.precondition,s))return a;let l=o.value.clone(),h=lP(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof yr?(function(o,s,a,c){if(!_p(o.precondition,s))return a;let l=lP(o.fieldTransforms,c,s),h=s.data;return h.setAll(Dx(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return _p(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function WG(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=vx(r.transform,i||null);o!=null&&(t===null&&(t=Wt.empty()),t.set(r.field,o))}return t||null}function cP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ea(r,i,(o,s)=>zG(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Xo=class extends Sa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},yr=class extends Sa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Dx(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function uP(n,e,t){let r=new Map;fe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,qG(s,a,t[i]))}return r}function lP(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,HG(o,s,e))}return r}var es=class extends Sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Rp=class extends Sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var QI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&GG(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ju(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ju(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=mx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=wx(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),le())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(t,r)=>cP(t,r))&&Ea(this.baseMutations,e.baseMutations,(t,r)=>cP(t,r))}},YI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return VG})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var JI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ZI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Qe,he;function Tx(n){switch(n){case N.OK:return H(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return H(15467,{code:n})}}function bx(n){if(n===void 0)return Br("GRPC error has no .code"),N.UNKNOWN;switch(n){case Qe.OK:return N.OK;case Qe.CANCELLED:return N.CANCELLED;case Qe.UNKNOWN:return N.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return N.INTERNAL;case Qe.UNAVAILABLE:return N.UNAVAILABLE;case Qe.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Qe.NOT_FOUND:return N.NOT_FOUND;case Qe.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Qe.ABORTED:return N.ABORTED;case Qe.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Qe.DATA_LOSS:return N.DATA_LOSS;default:return H(39323,{code:n})}}(he=Qe||(Qe={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var KG=null;function QG(){return new TextEncoder}var YG=new Vr([4294967295,4294967295],0);function dP(n){let e=QG().encode(n),t=new pI;return t.update(e),new Uint8Array(t.digest())}function hP(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Vr([t,r],0),new Vr([i,o],0)]}var XI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zo(`Invalid padding: ${t}`);if(r<0)throw new zo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new zo(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Vr.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Vr.fromNumber(r)));return i.compare(YG)===1&&(i=new Vr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=dP(e),[r,i]=hP(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=dP(e),[r,i]=hP(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},zo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Np=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,il.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(K.min(),i,new Be(ue),zr(),le())}},il=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,le(),le(),le())}};var ya=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Mp=class{constructor(e,t){this.targetId=e,this.Ce=t}},Pp=class{constructor(e,t,r=Nt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},xp=class{constructor(){this.ve=0,this.Fe=fP(),this.Me=Nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=le(),t=le(),r=le();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:H(38017,{changeType:o})}}),new il(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=fP()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},ew=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=zr(),this.Je=gp(),this.He=gp(),this.Ye=new Be(ue)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:H(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(zI(o))if(r===0){let s=new q(o.path);this.et(t,s,an.newNoDocument(s,K.min()))}else fe(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}KG?.lt((function(h,p,g,y,T){let M={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},A=p.unchangedNames;return A&&(M.bloomFilter={applied:T===0,hashCount:A?.hashCount??0,bitmapLength:A?.bits?.bitmap?.length??0,padding:A?.bits?.padding??0,mightContain:k=>y?.mightContain(k)??!1}),M})(s,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Hr(r).toUint8Array()}catch(c){if(c instanceof Tp)return _a("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new XI(s,i,o)}catch(c){return _a(c instanceof zo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&zI(a.target)){let c=new q(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,an.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=le();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.ot(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Np(e,t,this.Ye,this.je,r);return this.je=zr(),this.Je=gp(),this.He=gp(),this.Ye=new Be(ue),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new xp,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mt(ue),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mt(ue),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new xp),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function gp(){return new Be(q.comparator)}function fP(){return new Be(q.comparator)}var JG={asc:"ASCENDING",desc:"DESCENDING"},ZG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XG={and:"AND",or:"OR"},tw=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function nw(n,e){return n.useProto3Json||pl(e)?e:{value:e}}function kp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function e3(n,e){return kp(n,e.toTimestamp())}function sn(n){return fe(!!n,49232),K.fromTimestamp((function(t){let r=$r(t);return new Xe(r.seconds,r.nanos)})(n))}function wD(n,e){return rw(n,e).canonicalString()}function rw(n,e){let t=(function(i){return new Se(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Sx(n){let e=Se.fromString(n);return fe(xx(e),10190,{key:e.toString()}),e}function Op(n,e){return wD(n.databaseId,e.path)}function Zu(n,e){let t=Sx(e);if(t.get(1)!==n.databaseId.projectId)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(Rx(t))}function Ax(n,e){return wD(n.databaseId,e)}function t3(n){let e=Sx(n);return e.length===4?Se.emptyPath():Rx(e)}function iw(n){return new Se(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Rx(n){return fe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function pP(n,e,t){return{name:Op(n,e),fields:t.value.mapValue.fields}}function n3(n,e){return"found"in e?(function(r,i){fe(!!i.found,43571),i.found.name,i.found.updateTime;let o=Zu(r,i.found.name),s=sn(i.found.updateTime),a=i.found.createTime?sn(i.found.createTime):K.min(),c=new Wt({mapValue:{fields:i.found.fields}});return an.newFoundDocument(o,s,a,c)})(n,e):"missing"in e?(function(r,i){fe(!!i.missing,3894),fe(!!i.readTime,22933);let o=Zu(r,i.missing),s=sn(i.readTime);return an.newNoDocument(o,s)})(n,e):H(7234,{result:e})}function r3(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(fe(h===void 0||typeof h=="string",58123),Nt.fromBase64String(h||"")):(fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Nt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?N.UNKNOWN:bx(l.code);return new O(h,l.message||"")})(s);t=new Pp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Zu(n,r.document.name),o=sn(r.document.updateTime),s=r.document.createTime?sn(r.document.createTime):K.min(),a=new Wt({mapValue:{fields:r.document.fields}}),c=an.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ya(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Zu(n,r.document),o=r.readTime?sn(r.readTime):K.min(),s=an.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ya([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Zu(n,r.document),o=r.removedTargetIds||[];t=new ya([],o,i,null)}else{if(!("filter"in e))return H(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new ZI(i,o),a=r.targetId;t=new Mp(a,s)}}return t}function Nx(n,e){let t;if(e instanceof Xo)t={update:pP(n,e.key,e.value)};else if(e instanceof es)t={delete:Op(n,e.key)};else if(e instanceof yr)t={update:pP(n,e.key,e.data),updateMask:h3(e.fieldMask)};else{if(!(e instanceof Rp))return H(16599,{Vt:e.type});t={verify:Op(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Yo)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ca)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw H(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:e3(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:H(27497)})(n,e.precondition)),t}function i3(n,e){return n&&n.length>0?(fe(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?sn(i.updateTime):sn(o);return s.isEqual(K.min())&&(s=sn(o)),new KI(s,i.transformResults||[])})(t,e))):[]}function o3(n,e){return{documents:[Ax(n,e.path)]}}function s3(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Ax(n,i);let o=(function(l){if(l.length!==0)return Px(zn.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:pa(g.field),direction:u3(g.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=nw(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function a3(n){let e=t3(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){fe(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let g=Mx(p);return g instanceof zn&&ax(g)?g.getFilters():[g]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(g=>(function(T){return new Qo(ga(T.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(g))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,pl(g)?null:g})(t.limit));let c=null;t.startAt&&(c=(function(p){let g=!!p.before,y=p.values||[];return new Ta(y,g)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Ta(y,g)})(t.endAt)),xG(e,i,s,o,a,"F",c,l)}function c3(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Mx(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ga(t.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ga(t.unaryFilter.field);return Je.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ga(t.unaryFilter.field);return Je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ga(t.unaryFilter.field);return Je.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return H(61313);default:return H(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Je.create(ga(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return H(58110);default:return H(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return zn.create(t.compositeFilter.filters.map(r=>Mx(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H(1026)}})(t.compositeFilter.op))})(n):H(30097,{filter:n})}function u3(n){return JG[n]}function l3(n){return ZG[n]}function d3(n){return XG[n]}function pa(n){return{fieldPath:n.canonicalString()}}function ga(n){return on.fromServerFormat(n.fieldPath)}function Px(n){return n instanceof Je?(function(t){if(t.op==="=="){if(nP(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NAN"}};if(tP(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(nP(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NAN"}};if(tP(t.value))return{unaryFilter:{field:pa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pa(t.field),op:l3(t.op),value:t.value}}})(n):n instanceof zn?(function(t){let r=t.getFilters().map(i=>Px(i));return r.length===1?r[0]:{compositeFilter:{op:d3(t.op),filters:r}}})(n):H(54877,{filter:n})}function h3(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ol=class n{constructor(e,t,r,i,o=K.min(),s=K.min(),a=Nt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ow=class{constructor(e){this.yt=e}};function f3(n){let e=a3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ap(e,e.limit,"L"):e}var Fp=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),tl(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=$r(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Hr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?ix(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):rx(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):H(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Ia,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ke(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),q.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Fp.Kt=new Fp;var sw=class{constructor(){this.Cn=new aw}addToCollectionParentIndex(e,t){return this.Cn.add(t),x.resolve()}getCollectionParents(e,t){return x.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return x.resolve()}deleteFieldIndex(e,t){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,t){return x.resolve()}getDocumentsMatchingTarget(e,t){return x.resolve(null)}getIndexType(e,t){return x.resolve(0)}getFieldIndexes(e,t){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,t){return x.resolve(Ko.min())}getMinOffsetFromCollectionGroup(e,t){return x.resolve(Ko.min())}updateCollectionGroup(e,t,r){return x.resolve()}updateIndexEntries(e,t){return x.resolve()}},aw=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new mt(Se.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(Se.comparator)).toArray()}};var Hce=new Uint8Array(0);var gP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kx=41943040,In=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(kx,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);var sl=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var mP="LruGarbageCollector",p3=1048576;function yP([n,e],[t,r]){let i=ue(n,t);return i===0?ue(e,r):i}var cw=class{constructor(e){this.Ir=e,this.buffer=new mt(yP),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();yP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},uw=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){j(mP,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Oa(t)?j(mP,"Ignoring IndexedDB error during garbage collection: ",t):await ka(t)}await this.Vr(3e5)})}},lw=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return x.resolve(fD.ce);let r=new cw(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(gP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gP):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ha()<=ce.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function g3(n,e){return new lw(n,e)}var dw=class{constructor(){this.changes=new qr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?x.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var hw=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var fw=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ju(r.mutation,i,wn.empty(),Xe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,t,r=le()){let i=qo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Wu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=qo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,le()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=zr(),s=Yu(),a=(function(){return Yu()})();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof yr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Ju(h.mutation,l,h.mutation.getFieldMask(),Xe.now())):s.set(l.key,wn.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>a.set(l,new hw(h,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Yu(),i=new Be((s,a)=>s-a),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||wn.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||le()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=mx();h.forEach(g=>{if(!o.has(g)){let y=wx(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):x.resolve(qo()),a=el,c=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,le())).next(h=>({batchId:a,changes:gx(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=Wu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Wu();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,c=>{let l=(function(p,g){return new Ui(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,an.newInvalidDocument(h)))});let a=Wu();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&Ju(h.mutation,l,wn.empty(),Xe.now()),og(t,l)&&(a=a.insert(c,l))}),a})}};var pw=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return x.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:sn(i.createTime)}})(t)),x.resolve()}getNamedQuery(e,t){return x.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:f3(i.bundledQuery),readTime:sn(i.readTime)}})(t)),x.resolve()}};var gw=class{constructor(){this.overlays=new Be(q.comparator),this.qr=new Map}getOverlay(e,t){return x.resolve(this.overlays.get(t))}getOverlays(e,t){let r=qo();return x.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),x.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),x.resolve()}getOverlaysForCollection(e,t,r){let i=qo(),o=t.length+1,s=new q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return x.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Be((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=qo(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=qo(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new JI(t,r));let o=this.qr.get(t);o===void 0&&(o=le(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var mw=class{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,x.resolve()}};var al=class{constructor(){this.Qr=new mt(Ye.$r),this.Ur=new mt(Ye.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ye(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ye(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new q(new Se([])),r=new Ye(t,e),i=new Ye(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new q(new Se([])),r=new Ye(t,e),i=new Ye(t,e+1),o=le();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ye(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ye=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return q.comparator(e.key,t.key)||ue(e.Yr,t.Yr)}static Kr(e,t){return ue(e.Yr,t.Yr)||q.comparator(e.key,t.key)}};var yw=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mt(Ye.$r)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new QI(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new Ye(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,t){return x.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?pD:this.tr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ye(t,0),i=new Ye(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mt(ue);return t.forEach(i=>{let o=new Ye(i,0),s=new Ye(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),x.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new Ye(new q(o),0),a=new mt(ue);return this.Zr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.Yr)),!0)},s),x.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){fe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return x.forEach(t.mutations,i=>{let o=new Ye(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ye(t,0),i=this.Zr.firstAfterOrEqual(r);return x.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var vw=class{constructor(e){this.ri=e,this.docs=(function(){return new Be(q.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return x.resolve(r?r.document.mutableCopy():an.newInvalidDocument(t))}getEntries(e,t){let r=zr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():an.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=zr(),s=t.path,a=new q(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||pG(fG(h),r)<=0||(i.has(h.key)||og(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,t,r,i){H(9500)}ii(e,t){return x.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new _w(this)}getSize(e){return x.resolve(this.size)}},_w=class extends dw{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),x.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var Ew=class{constructor(e){this.persistence=e,this.si=new qr(t=>_D(t),ED),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.oi=0,this._i=new al,this.targetCount=0,this.ai=sl.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),x.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new sl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,x.resolve()}updateTargetData(e,t){return this.Pr(t),x.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return x.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),x.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),x.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return x.resolve(r)}containsKey(e,t){return x.resolve(this._i.containsKey(t))}};var Lp=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new fD(0),this.li=!1,this.li=!0,this.hi=new mw,this.referenceDelegate=e(this),this.Pi=new Ew(this),this.indexManager=new sw,this.remoteDocumentCache=(function(i){return new vw(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new ow(t),this.Ii=new pw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new yw(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new Iw(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return x.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},Iw=class extends PI{constructor(e){super(),this.currentSequenceNumber=e}},ww=class n{constructor(e){this.persistence=e,this.Ri=new al,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw H(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),x.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),x.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.fi,r=>{let i=q.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,K.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return x.or([()=>x.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Vp=class n{constructor(e,t){this.persistence=e,this.pi=new qr(r=>vG(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=g3(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return x.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return x.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?x.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,K.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),x.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),x.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yp(e.data.value)),t}br(e,t,r){return x.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Dw=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=le(),i=le();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Tw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var bw=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return lN()?8:mG(ft())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Tw;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(ha()<=ce.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),x.resolve()):(ha()<=ce.DEBUG&&j("QueryEngine","Query:",fa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ha()<=ce.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gr(t))):x.resolve())}ys(e,t){if(sP(t))return x.resolve(null);let r=gr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ap(t,null,"F"),r=gr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=le(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Ds(t,a);return this.Cs(t,l,s,c.readTime)?this.ys(e,Ap(t,null,"F")):this.vs(e,l,t,c)}))})))}ws(e,t,r,i){return sP(t)||i.isEqual(K.min())?x.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?x.resolve(null):(ha()<=ce.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fa(t)),this.vs(e,s,t,hG(i,el)).next(a=>a))})}Ds(e,t){let r=new mt(fx(e));return t.forEach((i,o)=>{og(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return ha()<=ce.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",fa(t)),this.ps.getDocumentsMatchingQuery(e,t,Ko.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var DD="LocalStore",m3=3e8,Cw=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Be(ue),this.xs=new qr(o=>_D(o),ED),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function y3(n,e,t,r){return new Cw(n,e,t,r)}async function Ox(n,e){let t=Q(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=le();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})}function v3(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,l,h){let p=l.batch,g=p.keys(),y=x.resolve();return g.forEach(T=>{y=y.next(()=>h.getEntry(c,T)).next(M=>{let A=l.docVersions.get(T);fe(A!==null,48541),M.version.compareTo(A)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Fx(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function _3(n,e){let t=Q(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Nt.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(M,A,k){return M.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=m3?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(g,y,h)&&a.push(t.Pi.updateTargetData(o,y))});let c=zr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(E3(o,s,e.documentUpdates).next(h=>{c=h.ks,l=h.qs})),!r.isEqual(K.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.Ms=i,o))}function E3(n,e,t){let r=le(),i=le();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=zr();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(K.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):j(DD,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{ks:s,qs:i}})}function I3(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=pD),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function w3(n,e){let t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new ol(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function Sw(n,e,t){let r=Q(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Oa(s))throw s;j(DD,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function vP(n,e,t){let r=Q(n),i=K.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,l,h){let p=Q(c),g=p.xs.get(h);return g!==void 0?x.resolve(p.Ms.get(g)):p.Pi.getTargetData(l,h)})(r,s,gr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:K.min(),t?o:le())).next(a=>(D3(r,OG(e),a),{documents:a,Qs:o})))}function D3(n,e,t){let r=n.Os.get(e)||K.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var jp=class{constructor(){this.activeTargetIds=BG()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Aw=class{constructor(){this.Mo=new jp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new jp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Rw=class{Oo(e){}shutdown(){}};var _P="ConnectivityMonitor",Up=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){j(_P,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){j(_P,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var mp=null;function Nw(){return mp===null?mp=(function(){return 268435456+Math.round(2147483648*Math.random())})():mp++,"0x"+mp.toString(16)}var II="RestConnection",T3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Mw=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===bp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=Nw(),a=this.zo(e,t.toUriEncodedString());j(II,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);let{host:l}=new URL(a),h=Ti(l);return this.Jo(e,a,c,r,h).then(p=>(j(II,`Received RPC '${e}' ${s}: `,p),p),p=>{throw _a(II,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=T3[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var Pw=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var At="WebChannelConnection",xw=class extends Mw{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=Nw();return new Promise((a,c)=>{let l=new gI;l.setWithCredentials(!0),l.listenOnce(mI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Gu.NO_ERROR:let p=l.getResponseJson();j(At,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Gu.TIMEOUT:j(At,`RPC '${e}' ${s} timed out`),c(new O(N.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:let g=l.getStatus();if(j(At,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let M=(function(k){let G=k.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(G)>=0?G:N.UNKNOWN})(T.status);c(new O(M,T.message))}else c(new O(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new O(N.UNAVAILABLE,"Connection failed."));break;default:H(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{j(At,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);j(At,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}T_(e,t,r){let i=Nw(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=_I(),a=vI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");j(At,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c);this.I_(p);let g=!1,y=!1,T=new Pw({Yo:A=>{y?j(At,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(j(At,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),j(At,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Zo:()=>p.close()}),M=(A,k,G)=>{A.listen(k,ae=>{try{G(ae)}catch(Fe){setTimeout(()=>{throw Fe},0)}})};return M(p,da.EventType.OPEN,()=>{y||(j(At,`RPC '${e}' stream ${i} transport opened.`),T.o_())}),M(p,da.EventType.CLOSE,()=>{y||(y=!0,j(At,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(p))}),M(p,da.EventType.ERROR,A=>{y||(y=!0,_a(At,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),T.a_(new O(N.UNAVAILABLE,"The operation could not be completed")))}),M(p,da.EventType.MESSAGE,A=>{if(!y){let k=A.data[0];fe(!!k,16349);let G=k,ae=G?.error||G[0]?.error;if(ae){j(At,`RPC '${e}' stream ${i} received error:`,ae);let Fe=ae.status,Ae=(function(v){let E=Qe[v];if(E!==void 0)return bx(E)})(Fe),we=ae.message;Ae===void 0&&(Ae=N.INTERNAL,we="Unknown error status: "+Fe+" with message "+ae.message),y=!0,T.a_(new O(Ae,we)),p.close()}else j(At,`RPC '${e}' stream ${i} received:`,k),T.u_(k)}}),M(a,yI.STAT_EVENT,A=>{A.stat===fp.PROXY?j(At,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===fp.NOPROXY&&j(At,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function wI(){return typeof document<"u"?document:null}function sg(n){return new tw(n,!0)}var cl=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var EP="PersistentStream",Bp=class{constructor(e,t,r,i,o,s,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cl(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(Br(t.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new O(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return j(EP,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(j(EP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},kw=class extends Bp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=r3(this.serializer,e),r=(function(o){if(!("targetChange"in o))return K.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?K.min():s.readTime?sn(s.readTime):K.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=iw(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=zI(c)?{documents:o3(o,c)}:{query:s3(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Cx(o,s.resumeToken);let l=nw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(K.min())>0){a.readTime=kp(o,s.snapshotVersion.toTimestamp());let l=nw(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=c3(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=iw(this.serializer),t.removeTarget=e,this.q_(t)}},Ow=class extends Bp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=i3(e.writeResults,e.commitTime),r=sn(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=iw(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Nx(this.serializer,r))};this.q_(t)}};var Fw=class{},Lw=class extends Fw{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,rw(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(N.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,rw(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(N.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Vw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Br(t),this.aa=!1):j("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var ts="RemoteStore",jw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{ns(this)&&(j(ts,"Restarting streams for network reachability change."),await(async function(c){let l=Q(c);l.Ea.add(4),await gl(l),l.Ra.set("Unknown"),l.Ea.delete(4),await ag(l)})(this))})}),this.Ra=new Vw(r,i)}};async function ag(n){if(ns(n))for(let e of n.da)await e(!0)}async function gl(n){for(let e of n.da)await e(!1)}function Lx(n,e){let t=Q(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),SD(t)?CD(t):Fa(t).O_()&&bD(t,e))}function TD(n,e){let t=Q(n),r=Fa(t);t.Ia.delete(e),r.O_()&&Vx(t,e),t.Ia.size===0&&(r.O_()?r.L_():ns(t)&&t.Ra.set("Unknown"))}function bD(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fa(n).Y_(e)}function Vx(n,e){n.Va.Ue(e),Fa(n).Z_(e)}function CD(n){n.Va=new ew({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Fa(n).start(),n.Ra.ua()}function SD(n){return ns(n)&&!Fa(n).x_()&&n.Ia.size>0}function ns(n){return Q(n).Ea.size===0}function jx(n){n.Va=void 0}async function b3(n){n.Ra.set("Online")}async function C3(n){n.Ia.forEach((e,t)=>{bD(n,e)})}async function S3(n,e){jx(n),SD(n)?(n.Ra.ha(e),CD(n)):n.Ra.set("Unknown")}async function A3(n,e,t){if(n.Ra.set("Online"),e instanceof Pp&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){j(ts,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $p(n,r)}else if(e instanceof ya?n.Va.Ze(e):e instanceof Mp?n.Va.st(e):n.Va.tt(e),!t.isEqual(K.min()))try{let r=await Fx(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ia.get(l);h&&o.Ia.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(Nt.EMPTY_BYTE_STRING,h.snapshotVersion)),Vx(o,c);let p=new ol(h.target,c,l,h.sequenceNumber);bD(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){j(ts,"Failed to raise snapshot:",r),await $p(n,r)}}async function $p(n,e,t){if(!Oa(e))throw e;n.Ea.add(1),await gl(n),n.Ra.set("Offline"),t||(t=()=>Fx(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{j(ts,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ag(n)})}function Ux(n,e){return e().catch(t=>$p(n,t,e))}async function cg(n){let e=Q(n),t=Bi(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:pD;for(;R3(e);)try{let i=await I3(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,N3(e,i)}catch(i){await $p(e,i)}Bx(e)&&$x(e)}function R3(n){return ns(n)&&n.Ta.length<10}function N3(n,e){n.Ta.push(e);let t=Bi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Bx(n){return ns(n)&&!Bi(n).x_()&&n.Ta.length>0}function $x(n){Bi(n).start()}async function M3(n){Bi(n).ra()}async function P3(n){let e=Bi(n);for(let t of n.Ta)e.ea(t.mutations)}async function x3(n,e,t){let r=n.Ta.shift(),i=YI.from(r,e,t);await Ux(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await cg(n)}async function k3(n,e){e&&Bi(n).X_&&await(async function(r,i){if((function(s){return Tx(s)&&s!==N.ABORTED})(i.code)){let o=r.Ta.shift();Bi(r).B_(),await Ux(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await cg(r)}})(n,e),Bx(n)&&$x(n)}async function IP(n,e){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),j(ts,"RemoteStore received new credentials");let r=ns(t);t.Ea.add(3),await gl(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ag(t)}async function O3(n,e){let t=Q(n);e?(t.Ea.delete(2),await ag(t)):e||(t.Ea.add(2),await gl(t),t.Ra.set("Unknown"))}function Fa(n){return n.ma||(n.ma=(function(t,r,i){let o=Q(t);return o.sa(),new kw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:b3.bind(null,n),t_:C3.bind(null,n),r_:S3.bind(null,n),H_:A3.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),SD(n)?CD(n):n.Ra.set("Unknown")):(await n.ma.stop(),jx(n))})),n.ma}function Bi(n){return n.fa||(n.fa=(function(t,r,i){let o=Q(t);return o.sa(),new Ow(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:M3.bind(null,n),r_:k3.bind(null,n),ta:P3.bind(null,n),na:x3.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await cg(n)):(await n.fa.stop(),n.Ta.length>0&&(j(ts,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var Uw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function AD(n,e){if(Br("AsyncQueue",`${e}: ${n}`),Oa(n))return new O(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Hp=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=Wu(),this.sortedSet=new Be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var qp=class{constructor(){this.ga=new Be(q.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):H(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Aa=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Hp.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ig(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Bw=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},$w=class{constructor(){this.queries=wP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Q(t),o=i.queries;i.queries=wP(),o.forEach((s,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new O(N.ABORTED,"Firestore shutting down"))}};function wP(){return new qr(n=>hx(n),ig)}async function RD(n,e){let t=Q(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Bw,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=AD(s,`Initialization of query '${fa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&MD(t)}async function ND(n,e){let t=Q(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function F3(n,e){let t=Q(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&MD(t)}function L3(n,e,t){let r=Q(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function MD(n){n.Ca.forEach(e=>{e.next()})}var Hw,DP;(DP=Hw||(Hw={})).Ma="default",DP.Cache="cache";var ul=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Aa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Hw.Cache}};var zp=class{constructor(e){this.key=e}},Gp=class{constructor(e){this.key=e}},qw=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=fx(e),this.tu=new Hp(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new qp,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=og(this.query,p)?p:null,T=!!g&&this.mutatedKeys.has(g.key),M=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;g&&y?g.data.isEqual(y.data)?T!==M&&(r.track({type:3,doc:y}),A=!0):this.su(g,y)||(r.track({type:2,doc:y}),A=!0,(c&&this.eu(y,c)>0||l&&this.eu(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(c||l)&&(a=!0)),A&&(y?(s=s.add(y),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(y,T){let M=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H(20277,{Rt:A})}};return M(y)-M(T)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,l=c!==this.Za;return this.Za=c,s.length!==0||l?{snapshot:new Aa(this.query,e.tu,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Gp(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new zp(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=le();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Aa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},PD="SyncEngine",zw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Gw=class{constructor(e){this.key=e,this.hu=!1}},Ww=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new qr(a=>hx(a),ig),this.Iu=new Map,this.Eu=new Set,this.du=new Be(q.comparator),this.Au=new Map,this.Ru=new al,this.Vu={},this.mu=new Map,this.fu=sl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function V3(n,e,t=!0){let r=Kx(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await Hx(r,e,t,!0),i}async function j3(n,e){let t=Kx(n);await Hx(t,e,!0,!1)}async function Hx(n,e,t,r){let i=await w3(n.localStore,gr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await U3(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Lx(n.remoteStore,i),a}async function U3(n,e,t,r,i){n.pu=(p,g,y)=>(async function(M,A,k,G){let ae=A.view.ru(k);ae.Cs&&(ae=await vP(M.localStore,A.query,!1).then(({documents:w})=>A.view.ru(w,ae)));let Fe=G&&G.targetChanges.get(A.targetId),Ae=G&&G.targetMismatches.get(A.targetId)!=null,we=A.view.applyChanges(ae,M.isPrimaryClient,Fe,Ae);return bP(M,A.targetId,we.au),we.snapshot})(n,p,g,y);let o=await vP(n.localStore,e,!0),s=new qw(e,o.Qs),a=s.ru(o.documents),c=il.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);bP(n,t,l.au);let h=new zw(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function B3(n,e,t){let r=Q(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!ig(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Sw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&TD(r.remoteStore,i.targetId),Kw(r,i.targetId)}).catch(ka)):(Kw(r,i.targetId),await Sw(r.localStore,i.targetId,!0))}async function $3(n,e){let t=Q(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),TD(t.remoteStore,r.targetId))}async function H3(n,e,t){let r=Y3(n);try{let i=await(function(s,a){let c=Q(s),l=Xe.now(),h=a.reduce((y,T)=>y.add(T.key),le()),p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=zr(),M=le();return c.Ns.getEntries(y,h).next(A=>{T=A,T.forEach((k,G)=>{G.isValidDocument()||(M=M.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,T)).next(A=>{p=A;let k=[];for(let G of a){let ae=WG(G,p.get(G.key).overlayedDocument);ae!=null&&k.push(new yr(G.key,ae,ox(ae.value.mapValue),gt.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,k,a)}).next(A=>{g=A;let k=A.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(y,A.batchId,k)})}).then(()=>({batchId:g.batchId,changes:gx(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let l=s.Vu[s.currentUser.toKey()];l||(l=new Be(ue)),l=l.insert(a,c),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,t),await ml(r,i.changes),await cg(r.remoteStore)}catch(i){let o=AD(i,"Failed to persist write");t.reject(o)}}async function qx(n,e){let t=Q(n);try{let r=await _3(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?fe(s.hu,14607):i.removedDocuments.size>0&&(fe(s.hu,42227),s.hu=!1))}),await ml(t,r,e)}catch(r){await ka(r)}}function TP(n,e,t){let r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=Q(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let g of p.Sa)g.va(a)&&(l=!0)}),l&&MD(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function q3(n,e,t){let r=Q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Be(q.comparator);s=s.insert(o,an.newNoDocument(o,K.min()));let a=le().add(o),c=new Np(K.min(),new Map,new Be(ue),s,a);await qx(r,c),r.du=r.du.remove(o),r.Au.delete(e),xD(r)}else await Sw(r.localStore,e,!1).then(()=>Kw(r,e,t)).catch(ka)}async function z3(n,e){let t=Q(n),r=e.batch.batchId;try{let i=await v3(t.localStore,e);Gx(t,r,null),zx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ml(t,i)}catch(i){await ka(i)}}async function G3(n,e,t){let r=Q(n);try{let i=await(function(s,a){let c=Q(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(fe(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})})(r.localStore,e);Gx(r,e,t),zx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ml(r,i)}catch(i){await ka(i)}}function zx(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function Gx(n,e,t){let r=Q(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Kw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||Wx(n,r)})}function Wx(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(TD(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),xD(n))}function bP(n,e,t){for(let r of t)r instanceof zp?(n.Ru.addReference(r.key,e),W3(n,r)):r instanceof Gp?(j(PD,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||Wx(n,r.key)):H(19791,{wu:r})}function W3(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(j(PD,"New document in limbo: "+t),n.Eu.add(r),xD(n))}function xD(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new q(Se.fromString(e)),r=n.fu.next();n.Au.set(r,new Gw(t)),n.du=n.du.insert(t,r),Lx(n.remoteStore,new ol(gr(rg(t.path)),r,"TargetPurposeLimboResolution",fD.ce))}}async function ml(n,e,t){let r=Q(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{s.push(r.pu(c,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=Dw.As(c.targetId,l);o.push(h)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(c,l){let h=Q(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,g=>x.forEach(g.Es,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>x.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Oa(p))throw p;j(DD,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Ms.get(g),T=y.snapshotVersion,M=y.withLastLimboFreeSnapshotVersion(T);h.Ms=h.Ms.insert(g,M)}}})(r.localStore,o))}async function K3(n,e){let t=Q(n);if(!t.currentUser.isEqual(e)){j(PD,"User change. New user:",e.toKey());let r=await Ox(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(c=>{c.reject(new O(N.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ml(t,r.Ls)}}function Q3(n,e){let t=Q(n),r=t.Au.get(e);if(r&&r.hu)return le().add(r.key);{let i=le(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function Kx(n){let e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=qx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q3.bind(null,e),e.Pu.H_=F3.bind(null,e.eventManager),e.Pu.yu=L3.bind(null,e.eventManager),e}function Y3(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=z3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G3.bind(null,e),e}var Qx=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=sg(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return y3(this.persistence,new bw,t.initialUser,this.serializer)}Cu(t){return new Lp(ww.mi,this.serializer)}Du(t){return new Aw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),Qw=class extends Qx{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){fe(this.persistence.referenceDelegate instanceof Vp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new uw(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new Lp(r=>Vp.mi(r,t),this.serializer)}};var J3=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>TP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=K3.bind(null,this.syncEngine),await O3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new $w})()}createDatastore(t){let r=sg(t.databaseInfo.databaseId),i=(function(s){return new xw(s)})(t.databaseInfo);return(function(s,a,c,l){return new Lw(s,a,c,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new jw(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>TP(this.syncEngine,r,0),(function(){return Up.v()?new Up:new Rw})())}createSyncEngine(t,r){return(function(o,s,a,c,l,h,p){let g=new Ww(o,s,a,c,l,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Q(r);j(ts,"RemoteStore shutting down."),i.Ea.add(5),await gl(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var ll=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Yw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new O(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await(async function(i,o){let s=Q(i),a={documents:o.map(p=>Op(s.serializer,p))},c=await s.Ho("BatchGetDocuments",s.serializer.databaseId,Se.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let g=n3(s.serializer,p);l.set(g.key.toString(),g)});let h=[];return o.forEach(p=>{let g=l.get(p.toString());fe(!!g,55234,{key:p}),h.push(g)}),h})(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new es(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=q.fromPath(r);this.mutations.push(new Rp(i,this.precondition(i)))}),await(async function(r,i){let o=Q(r),s={writes:i.map(a=>Nx(o.serializer,a))};await o.Go("Commit",o.serializer.databaseId,Se.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw H(50498,{Gu:e.constructor.name});t=K.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new O(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(K.min())?gt.exists(!1):gt.updateTime(t):gt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(K.min()))throw new O(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gt.updateTime(t)}return gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Jw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new cl(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{let e=new Yw(this.datastore),t=this.Hu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{let t=this.updateFunction(e);return!pl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Tx(t)}return!1}};var $i="FirestoreClient",Zw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=Xu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{j($i,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(j($i,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=AD(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function DI(n,e){n.asyncQueue.verifyOperationInProgress(),j($i,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Ox(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function CP(n,e){n.asyncQueue.verifyOperationInProgress();let t=await Z3(n);j($i,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>IP(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>IP(e.remoteStore,i)),n._onlineComponents=e}async function Z3(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j($i,"Using user provided OfflineComponentProvider");try{await DI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;_a("Error using user provided cache. Falling back to memory cache: "+t),await DI(n,new Qx)}}else j($i,"Using default OfflineComponentProvider"),await DI(n,new Qw(void 0));return n._offlineComponents}async function kD(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(j($i,"Using user provided OnlineComponentProvider"),await CP(n,n._uninitializedComponentsProvider._online)):(j($i,"Using default OnlineComponentProvider"),await CP(n,new J3))),n._onlineComponents}function X3(n){return kD(n).then(e=>e.syncEngine)}function e6(n){return kD(n).then(e=>e.datastore)}async function Wp(n){let e=await kD(n),t=e.eventManager;return t.onListen=V3.bind(null,e.syncEngine),t.onUnlisten=B3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=j3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$3.bind(null,e.syncEngine),t}function t6(n,e,t={}){let r=new Dn;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,c,l){let h=new ll({next:g=>{h.Nu(),s.enqueueAndForget(()=>ND(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new O(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&c&&c.source==="server"?l.reject(new O(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new ul(rg(a.path),h,{includeMetadataChanges:!0,qa:!0});return RD(o,p)})(await Wp(n),n.asyncQueue,e,t,r)),r.promise}function n6(n,e,t={}){let r=new Dn;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,c,l){let h=new ll({next:g=>{h.Nu(),s.enqueueAndForget(()=>ND(o,p)),g.fromCache&&c.source==="server"?l.reject(new O(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new ul(a,h,{includeMetadataChanges:!0,qa:!0});return RD(o,p)})(await Wp(n),n.asyncQueue,e,t,r)),r.promise}function Yx(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var SP=new Map;var Jx="firestore.googleapis.com",AP=!0,Kp=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new O(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jx,this.ssl=AP}else this.host=e.host,this.ssl=e.ssl??AP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<p3)throw new O(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yx(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ra=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new O(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new TI;switch(r.type){case"firstParty":return new AI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=SP.get(t);r&&(j("ComponentProvider","Removing Datastore"),SP.delete(t),r.terminate())})(this),Promise.resolve()}};function Zx(n,e,t,r={}){n=Rt(n,Ra);let i=Ti(e),o=n._getSettings(),s=U(R({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(kf(`https://${a}`),Of("Firestore",!0)),o.host!==Jx&&o.host!==a&&_a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=U(R({},o),{host:a,ssl:i,emulatorOptions:r});if(!cr(c,s)&&(n._setSettings(c),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=pt.MOCK_USER;else{l=iN(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new O(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new pt(p)}n._authCredentials=new bI(new Ep(l,h))}}var Gr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},et=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(fl(t,n._jsonSchema))return new n(e,r||null,new q(Se.fromString(t.referencePath)))}};et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:Ze("string",et._jsonSchemaVersion),referencePath:Ze("string")};var Oi=class n extends Gr{constructor(e,t,r){super(e,t,rg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Xx(n,e,...t){if(n=Ie(n),OP("collection","path",e),n instanceof Ra){let r=Se.fromString(e,...t);return WM(r),new Oi(n,null,r)}{if(!(n instanceof et||n instanceof Oi))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Se.fromString(e,...t));return WM(r),new Oi(n.firestore,null,r)}}function OD(n,e,...t){if(n=Ie(n),arguments.length===1&&(e=Xu.newId()),OP("doc","path",e),n instanceof Ra){let r=Se.fromString(e,...t);return GM(r),new et(n,null,new q(r))}{if(!(n instanceof et||n instanceof Oi))throw new O(N.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Se.fromString(e,...t));return GM(r),new et(n.firestore,n instanceof Oi?n.converter:null,new q(r))}}var RP="AsyncQueue",Qp=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cl(this,"async_queue_retry"),this._c=()=>{let r=wI();r&&j(RP,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=wI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=wI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Dn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Oa(e))throw e;j(RP,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Br("INTERNAL UNHANDLED ERROR: ",NP(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Uw.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&H(47125,{Pc:NP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function NP(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function MP(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var cn=class extends Ra{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Qp,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Qp(e),this._firestoreClient=void 0,await e}}};function ek(n,e){let t=typeof n=="object"?n:Fo(),r=typeof n=="string"?n:e||bp,i=oa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=rN("firestore");o&&Zx(i,...o)}return i}function La(n){if(n._terminated)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||r6(n),n._firestoreClient}function r6(n){let e=n._freezeSettings(),t=(function(i,o,s,a){return new xI(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Yx(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Zw(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var Ur=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Nt.fromBase64String(e))}catch(t){throw new O(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fl(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ur._jsonSchemaVersion="firestore/bytes/1.0",Ur._jsonSchema={type:Ze("string",Ur._jsonSchemaVersion),bytes:Ze("string")};var Hi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Na=class{constructor(e){this._methodName=e}};var Fi=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(fl(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Fi._jsonSchemaVersion="firestore/geoPoint/1.0",Fi._jsonSchema={type:Ze("string",Fi._jsonSchemaVersion),latitude:Ze("number"),longitude:Ze("number")};var Li=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fl(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new O(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:Ze("string",Li._jsonSchemaVersion),vectorValues:Ze("object")};var i6=/^__.*__$/,Xw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new yr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xo(e,this.data,t,this.fieldTransforms)}},Yp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new yr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function tk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H(40011,{Ac:n})}}var eD=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(R(R({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tk(this.Ac)&&i6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},tD=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sg(e)}Cc(e,t,r,i=!1){return new eD({Ac:e,methodName:t,Dc:r,path:on.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Va(n){let e=n._freezeSettings(),t=sg(n._databaseId);return new tD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ug(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);VD("Data must be an object, but it was:",s,r);let a=nk(r,s),c,l;if(o.merge)c=new wn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=rD(e,p,t);if(!s.contains(g))throw new O(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);ik(h,g)||h.push(g)}c=new wn(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new Xw(new Wt(a),c,l)}var Jp=class n extends Na{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var nD=class n extends Na{_toFieldTransform(e){return new WI(e.path,new Yo)}isEqual(e){return e instanceof n}};function FD(n,e,t,r){let i=n.Cc(1,e,t);VD("Data must be an object, but it was:",i,r);let o=[],s=Wt.empty();qi(r,(c,l)=>{let h=jD(e,c,t);l=Ie(l);let p=i.yc(h);if(l instanceof Jp)o.push(h);else{let g=yl(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new wn(o);return new Yp(s,a,i.fieldTransforms)}function LD(n,e,t,r,i,o){let s=n.Cc(1,e,t),a=[rD(e,r,t)],c=[i];if(o.length%2!=0)throw new O(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(rD(e,o[g])),c.push(o[g+1]);let l=[],h=Wt.empty();for(let g=a.length-1;g>=0;--g)if(!ik(l,a[g])){let y=a[g],T=c[g];T=Ie(T);let M=s.yc(y);if(T instanceof Jp)l.push(y);else{let A=yl(T,M);A!=null&&(l.push(y),h.set(y,A))}}let p=new wn(l);return new Yp(h,p,s.fieldTransforms)}function o6(n,e,t,r=!1){return yl(t,n.Cc(r?4:3,e))}function yl(n,e){if(rk(n=Ie(n)))return VD("Unsupported field value:",e,n),nk(n,e);if(n instanceof Na)return(function(r,i){if(!tk(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=yl(a,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $G(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Xe.fromDate(r);return{timestampValue:kp(i.serializer,o)}}if(r instanceof Xe){let o=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kp(i.serializer,o)}}if(r instanceof Fi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ur)return{bytesValue:Cx(i.serializer,r._byteString)};if(r instanceof et){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Li)return(function(s,a){return{mapValue:{fields:{[mD]:{stringValue:yD},[Ia]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return ID(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${tg(r)}`)})(n,e)}function nk(n,e){let t={};return JP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qi(n,(r,i)=>{let o=yl(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function rk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Xe||n instanceof Fi||n instanceof Ur||n instanceof et||n instanceof Na||n instanceof Li)}function VD(n,e,t){if(!rk(t)||!FP(t)){let r=tg(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function rD(n,e,t){if((e=Ie(e))instanceof Hi)return e._internalPath;if(typeof e=="string")return jD(n,e);throw Zp("Field path arguments must be of type string or ",n,!1,void 0,t)}var s6=new RegExp("[~\\*/\\[\\]]");function jD(n,e,t){if(e.search(s6)>=0)throw Zp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hi(...e.split("."))._internalPath}catch{throw Zp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new O(N.INVALID_ARGUMENT,a+n+c)}function ik(n,e){return n.some(t=>t.isEqual(e))}var Ma=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new iD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(lg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},iD=class extends Ma{data(){return super.data()}};function lg(n,e){return typeof e=="string"?jD(n,e):e instanceof Hi?e._internalPath:e._delegate._internalPath}function ok(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var dl=class{},hl=class extends dl{};function sk(n,e,...t){let r=[];e instanceof dl&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof oD).length,a=o.filter(c=>c instanceof Xp).length;if(s>1||s>0&&a>0)throw new O(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Xp=class n extends hl{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return lk(e._query,t),new Gr(e.firestore,e.converter,GI(e._query,t))}_parse(e){let t=Va(e.firestore);return(function(o,s,a,c,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new O(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){xP(p,h);let T=[];for(let M of p)T.push(PP(c,o,M));g={arrayValue:{values:T}}}else g=PP(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||xP(p,h),g=o6(a,s,p,h==="in"||h==="not-in");return Je.create(l,h,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function ak(n,e,t){let r=e,i=lg("where",n);return Xp._create(i,r,t)}var oD=class n extends dl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:zn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)lk(s,c),s=GI(s,c)})(e._query,t),new Gr(e.firestore,e.converter,GI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var sD=class n extends hl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qo(o,s)})(e._query,this._field,this._direction);return new Gr(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Ui(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function ck(n,e="asc"){let t=e,r=lg("orderBy",n);return sD._create(r,t)}var aD=class n extends hl{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Gr(e.firestore,e.converter,Ap(e._query,this._limit,this._limitType))}};function uk(n){return dG("limit",n),aD._create("limit",n,"F")}function PP(n,e,t){if(typeof(t=Ie(t))=="string"){if(t==="")throw new O(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dx(e)&&t.indexOf("/")!==-1)throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Se.fromString(t));if(!q.isDocumentKey(r))throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eP(n,new q(r))}if(t instanceof et)return eP(n,t._key);throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tg(t)}.`)}function xP(n,e){if(!Array.isArray(n)||n.length===0)throw new O(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lk(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var eg=class{convertValue(e,t="none"){switch(ji(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw H(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return qi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Ia].arrayValue?.values?.map(r=>ke(r.doubleValue));return new Li(t)}convertGeoPoint(e){return new Fi(ke(e.latitude),ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ng(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nl(e));default:return null}}convertTimestamp(e){let t=$r(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Se.fromString(e);fe(xx(r),9688,{name:e});let i=new Cp(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(t)||Br(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function dg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var cD=class extends eg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ur(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}};var xi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vi=class n extends Ma{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new va(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(lg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Vi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Vi._jsonSchema={type:Ze("string",Vi._jsonSchemaVersion),bundleSource:Ze("string","DocumentSnapshot"),bundleName:Ze("string"),bundle:Ze("string")};var va=class extends Vi{data(e={}){return super.data(e)}},Go=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new xi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new va(this._firestore,this._userDataWriter,r.key,r,new xi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new va(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new va(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:a6(a.type),doc:c,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function a6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H(61501,{type:n})}}function dk(n){n=Rt(n,et);let e=Rt(n.firestore,cn);return t6(La(e),n._key).then(t=>yk(e,n,t))}Go._jsonSchemaVersion="firestore/querySnapshot/1.0",Go._jsonSchema={type:Ze("string",Go._jsonSchemaVersion),bundleSource:Ze("string","QuerySnapshot"),bundleName:Ze("string"),bundle:Ze("string")};var Pa=class extends eg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ur(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}};function hk(n){n=Rt(n,Gr);let e=Rt(n.firestore,cn),t=La(e),r=new Pa(e);return ok(n._query),n6(t,n._query).then(i=>new Go(e,r,n,i))}function fk(n,e,t){n=Rt(n,et);let r=Rt(n.firestore,cn),i=dg(n.converter,e,t);return vl(r,[ug(Va(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,gt.none())])}function pk(n,e,t,...r){n=Rt(n,et);let i=Rt(n.firestore,cn),o=Va(i),s;return s=typeof(e=Ie(e))=="string"||e instanceof Hi?LD(o,"updateDoc",n._key,e,t,r):FD(o,"updateDoc",n._key,e),vl(i,[s.toMutation(n._key,gt.exists(!0))])}function gk(n){return vl(Rt(n.firestore,cn),[new es(n._key,gt.none())])}function mk(n,e){let t=Rt(n.firestore,cn),r=OD(n),i=dg(n.converter,e);return vl(t,[ug(Va(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,gt.exists(!1))]).then(()=>r)}function UD(n,...e){n=Ie(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||MP(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(MP(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let o,s,a;if(n instanceof et)s=Rt(n.firestore,cn),a=rg(n._key.path),o={next:c=>{e[r]&&e[r](yk(s,n,c))},error:e[r+1],complete:e[r+2]};else{let c=Rt(n,Gr);s=Rt(c.firestore,cn),a=c._query;let l=new Pa(s);o={next:h=>{e[r]&&e[r](new Go(s,l,c,h))},error:e[r+1],complete:e[r+2]},ok(n._query)}return(function(l,h,p,g){let y=new ll(g),T=new ul(h,y,p);return l.asyncQueue.enqueueAndForget(async()=>RD(await Wp(l),T)),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(async()=>ND(await Wp(l),T))}})(La(s),a,i,o)}function vl(n,e){return(function(r,i){let o=new Dn;return r.asyncQueue.enqueueAndForget(async()=>H3(await X3(r),i,o)),o.promise})(La(n),e)}function yk(n,e,t){let r=t.docs.get(e._key),i=new Pa(n);return new Vi(n,i,e._key,r,new xi(t.hasPendingWrites,t.fromCache),e.converter)}var c6={maxAttempts:5};var uD=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Va(e)}set(e,t,r){this._verifyNotCommitted();let i=ki(e,this._firestore),o=dg(i.converter,t,r),s=ug(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,gt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=ki(e,this._firestore),s;return s=typeof(t=Ie(t))=="string"||t instanceof Hi?LD(this._dataReader,"WriteBatch.update",o._key,t,r,i):FD(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,gt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=ki(e,this._firestore);return this._mutations=this._mutations.concat(new es(t._key,gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ki(n,e){if((n=Ie(n)).firestore!==e)throw new O(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var lD=class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Va(e)}get(e){let t=ki(e,this._firestore),r=new cD(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||i.length!==1)return H(24041);let o=i[0];if(o.isFoundDocument())return new Ma(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Ma(this._firestore,r,t._key,null,t.converter);throw H(18433,{doc:o})})}set(e,t,r){let i=ki(e,this._firestore),o=dg(i.converter,t,r),s=ug(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,t,r,...i){let o=ki(e,this._firestore),s;return s=typeof(t=Ie(t))=="string"||t instanceof Hi?LD(this._dataReader,"Transaction.update",o._key,t,r,i):FD(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,s),this}delete(e){let t=ki(e,this._firestore);return this._transaction.delete(t._key),this}};var dD=class extends lD{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=ki(e,this._firestore),r=new Pa(this._firestore);return super.get(e).then(i=>new Vi(this._firestore,r,t._key,i._document,new xi(!1,!1),t.converter))}};function vk(n,e,t){n=Rt(n,cn);let r=R(R({},c6),t);return(function(o){if(o.maxAttempts<1)throw new O(N.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let c=new Dn;return o.asyncQueue.enqueueAndForget(async()=>{let l=await e6(o);new Jw(o.asyncQueue,l,a,s,c).ju()}),c.promise})(La(n),i=>e(new dD(n,i)),r)}function ze(){return new nD("serverTimestamp")}function _k(n){return La(n=Rt(n,cn)),new uD(n,e=>vl(n,e))}(function(e,t=!0){(function(i){xa=i})(Ci),Hn(new jt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new cn(new CI(r.getProvider("auth-internal")),new RI(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cp(l.options.projectId,h)})(s,i),s);return o=R({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ue(HM,qM,e),Ue(HM,qM,"esm2020")})();var hg=function(){return hg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},hg.apply(this,arguments)};var d6={includeMetadataChanges:!1};function BD(n,e){return e===void 0&&(e=d6),new ne(function(t){var r=UD(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function Ek(n){return BD(n,{includeMetadataChanges:!0})}function Ik(n,e){return e===void 0&&(e={}),Ek(n).pipe(ee(function(t){return $D(t,e)}))}function $D(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:hg(hg({},r),(t={},t[e.idField]=n.id,t))}function wk(n){return BD(n,{includeMetadataChanges:!0}).pipe(ee(function(e){return e.docs}))}function Dk(n,e){return e===void 0&&(e={}),wk(n).pipe(ee(function(t){return t.map(function(r){return $D(r,e)})}))}var Ut=class{constructor(e){return e}},Tk="firestore",HD=class{constructor(){return aa(Tk)}};var qD=new B("angularfire2.firestore-instances");function h6(n,e){let t=ku(Tk,n,e);return t&&new Ut(t)}function f6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ut(r)}}var p6={provide:HD,deps:[[new Xt,qD]]},g6={provide:Ut,useFactory:h6,deps:[[new Xt,qD],xr]};function nle(n,...e){return Ue("angularfire",Si.full,"fst"),Rn([g6,p6,{provide:qD,useFactory:f6(n),multi:!0,deps:[Pe,He,Ai,Vo,[new Xt,zu],[new Xt,ca],...e]}])}var zi=be(Dk,!0);var fg=be(Ik,!0);var rs=be(mk,!0,2);var tt=be(Xx,!0,2);var ja=be(gk,!0,2);var $e=be(OD,!0,2);var rle=be(dk,!0);var Gi=be(hk,!0);var ile=be(ek,!0);var Tn=be(uk,!0,2);var Wi=be(ck,!0,2),un=be(sk,!0,2);var zD=be(vk,!0),bk=be(fk,!0,2);var Ki=be(pk,!0,2);var Qi=be(ak,!0,2),Ck=be(_k,!0,2);function El(n){if(!n)return"";if(typeof n=="object"&&typeof n.toDate=="function"){let t=n.toDate();return _l(t)}if(n instanceof Date)return _l(n);if(typeof n=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(n))return n;let e=new Date(n);return isNaN(e.getTime())?"":_l(e)}function _l(n){let e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`}function sle(n){if(!n)return"";let[e,t,r]=n.split("-").map(Number);return!e||!t||!r?n:new Intl.DateTimeFormat("pt-BR").format(new Date(e,t-1,r))}function Ua(n){if(!n)return null;let[e,t,r]=n.split("-").map(Number);return!e||!t||!r?null:new Date(e,t-1,r)}var pg=class n{firestore=P(Ut);list$(e){let t=tt(this.firestore,`users/${e}/categories`),r=un(t,Wi("name"),Tn(1e3));return zi(r,{idField:"id"}).pipe(ee(i=>i.map(o=>U(R({},o),{type:o.type??"expense"}))))}async add(e,t){let r=tt(this.firestore,`users/${e}/categories`);await rs(r,U(R({},t),{createdAt:ze()}))}async update(e,t,r){let i=$e(this.firestore,`users/${e}/categories/${t}`);await Ki(i,R({},r))}async delete(e,t){let r=tt(this.firestore,`users/${e}/transactions`),i=un(r,Qi("categoryId","==",t),Tn(1));if(!(await Gi(i)).empty)throw new Error("Categoria em uso em lan\xE7amentos. N\xE3o \xE9 poss\xEDvel excluir.");let s=$e(this.firestore,`users/${e}/categories/${t}`);await ja(s)}async ensureDefaultCategories(e){let t=tt(this.firestore,`users/${e}/categories`);(await Gi(un(t,Tn(1)))).empty}async ensureCategory(e,t){let r=tt(this.firestore,`users/${e}/categories`),i=un(r,Qi("name","==",t.name),Qi("type","==",t.type),Tn(1)),o=await Gi(i);return o.empty?(await rs(r,{name:t.name,type:t.type,color:t.color??"#94a3b8",createdAt:ze()})).id:o.docs[0].id}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var Sk=class n{constructor(e,t,r){this.auth=e;this.firestore=t;this.categoriesService=r;this.user$=LM(this.auth).pipe(_s({bufferSize:1,refCount:!0})),this.profile$=this.user$.pipe(qt(i=>i?fg($e(this.firestore,`users/${i.uid}`)):re(null)),ee(i=>i?.birthDate?U(R({},i),{age:this.calculateAge(i.birthDate)}):i),_s({bufferSize:1,refCount:!0}))}user$;profile$;async register(e,t,r){let i=await VM(this.auth,e,t),o=$e(this.firestore,`users/${i.user.uid}`);return await bk(o,U(R({uid:i.user.uid,email:e},r),{createdAt:ze(),updatedAt:ze()})),await this.categoriesService.ensureDefaultCategories(i.user.uid),i.user}login(e,t){return Te(jM(this.auth,e,t)).pipe(qt(r=>Te(this.categoriesService.ensureDefaultCategories(r.user.uid)).pipe(ee(()=>r.user))))}logout(){return Te(UM(this.auth))}async updateProfile(e){let t=this.auth.currentUser;if(!t)throw new Error("Usu\xE1rio n\xE3o autenticado");let r=$e(this.firestore,`users/${t.uid}`);await Ki(r,U(R({},e),{updatedAt:ze()}))}async reauthenticate(e){let t=this.auth.currentUser;if(!t)throw new Error("USER_NOT_LOGGED");let r=t.email;if(!r)throw new Error("USER_NO_EMAIL");let i=op.credential(r,e);await sp(t,i)}async requestEmailChange(e,t){let r=this.auth.currentUser;if(!r)throw new Error("USER_NOT_LOGGED");if(!e||!e.includes("@"))throw new Error("INVALID_EMAIL");await this.reauthenticate(t),await ap(r,e)}async updateUserPassword(e,t){let r=this.auth.currentUser;if(!r)throw new Error("USER_NOT_LOGGED");if(!e||e.length<6)throw new Error("WEAK_PASSWORD");await this.reauthenticate(t),await cp(r,e)}async updateEmailSecure(e,t){await this.requestEmailChange(t,e)}async updatePasswordSecure(e,t){await this.updateUserPassword(t,e)}calculateAge(e){let t=Ua(e);if(!t)return 0;let r=new Date,i=r.getFullYear()-t.getFullYear(),o=r.getMonth()-t.getMonth();return(o<0||o===0&&r.getDate()<t.getDate())&&i--,i}static \u0275fac=function(t){return new(t||n)(Y(Ho),Y(Ut),Y(pg))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var Vk=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)($(vn),$(Ct))};static \u0275dir=de({type:n})}return n})(),Sl=(()=>{class n extends Vk{static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=de({type:n,features:[qe]})}return n})(),os=new B(""),v6={provide:os,useExisting:lt(()=>_6),multi:!0},_6=(()=>{class n extends Sl{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=de({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Fn("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Lt([v6]),qe]})}return n})(),E6={provide:os,useExisting:lt(()=>jk),multi:!0};function I6(){let n=_n()?_n().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var w6=new B(""),jk=(()=>{class n extends Vk{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!I6())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)($(vn),$(Ct),$(w6,8))};static \u0275dir=de({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Fn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Lt([E6]),qe]})}return n})();function JD(n){return n==null||ZD(n)===0}function ZD(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var Ji=new B(""),Al=new B(""),D6=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ak=class{static min(e){return Uk(e)}static max(e){return Bk(e)}static required(e){return $k(e)}static requiredTrue(e){return T6(e)}static email(e){return b6(e)}static minLength(e){return C6(e)}static maxLength(e){return S6(e)}static pattern(e){return A6(e)}static nullValidator(e){return mg()}static compose(e){return Kk(e)}static composeAsync(e){return Yk(e)}};function Uk(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Bk(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function $k(n){return JD(n.value)?{required:!0}:null}function T6(n){return n.value===!0?null:{required:!0}}function b6(n){return JD(n.value)||D6.test(n.value)?null:{email:!0}}function C6(n){return e=>{let t=e.value?.length??ZD(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function S6(n){return e=>{let t=e.value?.length??ZD(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function A6(n){if(!n)return mg;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(JD(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function mg(n){return null}function Hk(n){return n!=null}function qk(n){return Ar(n)?Te(n):n}function zk(n){let e={};return n.forEach(t=>{e=t!=null?R(R({},e),t):e}),Object.keys(e).length===0?null:e}function Gk(n,e){return e.map(t=>t(n))}function R6(n){return!n.validate}function Wk(n){return n.map(e=>R6(e)?e:t=>e.validate(t))}function Kk(n){if(!n)return null;let e=n.filter(Hk);return e.length==0?null:function(t){return zk(Gk(t,e))}}function Qk(n){return n!=null?Kk(Wk(n)):null}function Yk(n){if(!n)return null;let e=n.filter(Hk);return e.length==0?null:function(t){let r=Gk(t,e).map(qk);return Cm(r).pipe(ee(zk))}}function Jk(n){return n!=null?Yk(Wk(n)):null}function Rk(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Zk(n){return n._rawValidators}function Xk(n){return n._rawAsyncValidators}function GD(n){return n?Array.isArray(n)?n:[n]:[]}function yg(n,e){return Array.isArray(n)?n.includes(e):n===e}function Nk(n,e){let t=GD(e);return GD(n).forEach(i=>{yg(t,i)||t.push(i)}),t}function Mk(n,e){return GD(e).filter(t=>!yg(n,t))}var vg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Qk(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Jk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ln=class extends vg{name;get formDirective(){return null}get path(){return null}},is=class extends vg{_parent=null;name=null;valueAccessor=null},_g=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Ble=(()=>{class n extends _g{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)($(is,2))};static \u0275dir=de({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Xc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[qe]})}return n})(),$le=(()=>{class n extends _g{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)($(ln,10))};static \u0275dir=de({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Xc("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[qe]})}return n})();var Il="VALID",gg="INVALID",Ba="PENDING",wl="DISABLED",Yi=class{},Eg=class extends Yi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Dl=class extends Yi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Tl=class extends Yi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},$a=class extends Yi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},WD=class extends Yi{source;constructor(e){super(),this.source=e}},Cl=class extends Yi{source;constructor(e){super(),this.source=e}};function XD(n){return(Tg(n)?n.validators:n)||null}function N6(n){return Array.isArray(n)?Qk(n):n||null}function eT(n,e){return(Tg(e)?e.asyncValidators:n)||null}function M6(n){return Array.isArray(n)?Jk(n):n||null}function Tg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function eO(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new L(1e3,"");if(!r[t])throw new L(1001,"")}function tO(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new L(1002,"")})}var Ha=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return je(this.statusReactive)}set status(e){je(()=>this.statusReactive.set(e))}_status=$s(()=>this.statusReactive());statusReactive=Zt(void 0);get valid(){return this.status===Il}get invalid(){return this.status===gg}get pending(){return this.status==Ba}get disabled(){return this.status===wl}get enabled(){return this.status!==wl}errors;get pristine(){return je(this.pristineReactive)}set pristine(e){je(()=>this.pristineReactive.set(e))}_pristine=$s(()=>this.pristineReactive());pristineReactive=Zt(!0);get dirty(){return!this.pristine}get touched(){return je(this.touchedReactive)}set touched(e){je(()=>this.touchedReactive.set(e))}_touched=$s(()=>this.touchedReactive());touchedReactive=Zt(!1);get untouched(){return!this.touched}_events=new Me;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Nk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Nk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Mk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Mk(e,this._rawAsyncValidators))}hasValidator(e){return yg(this._rawValidators,e)}hasAsyncValidator(e){return yg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(U(R({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Tl(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Tl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(U(R({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Dl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Dl(!0,r))}markAsPending(e={}){this.status=Ba;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new $a(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(U(R({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=wl,this.errors=null,this._forEachChild(i=>{i.disable(U(R({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Eg(this.value,r)),this._events.next(new $a(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(U(R({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Il,this._forEachChild(r=>{r.enable(U(R({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(U(R({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Il||this.status===Ba)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Eg(this.value,t)),this._events.next(new $a(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(U(R({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wl:Il}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ba,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=qk(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new $a(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ve,this.statusChanges=new Ve}_calculateStatus(){return this._allControlsDisabled()?wl:this.errors?gg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ba)?Ba:this._anyControlsHaveStatus(gg)?gg:Il}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Dl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Tl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Tg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=N6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=M6(this._rawAsyncValidators)}},Ig=class extends Ha{constructor(e,t,r){super(XD(t),eT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){tO(this,!0,e),Object.keys(e).forEach(r=>{eO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,U(R({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Cl(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var KD=class extends Ig{};var bg=new B("",{factory:()=>Cg}),Cg="always";function Sg(n,e){return[...e.path,n]}function QD(n,e,t=Cg){tT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),x6(n,e),O6(n,e),k6(n,e),P6(n,e)}function Pk(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Dg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function wg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function P6(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function tT(n,e){let t=Zk(n);e.validator!==null?n.setValidators(Rk(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Xk(n);e.asyncValidator!==null?n.setAsyncValidators(Rk(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();wg(e._rawValidators,i),wg(e._rawAsyncValidators,i)}function Dg(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=Zk(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=Xk(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return wg(e._rawValidators,r),wg(e._rawAsyncValidators,r),t}function x6(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&nO(n,e)})}function k6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&nO(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function nO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function O6(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function F6(n,e){n==null,tT(n,e)}function L6(n,e){return Dg(n,e)}function rO(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function V6(n){return Object.getPrototypeOf(n.constructor)===Sl}function j6(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function iO(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===jk?t=o:V6(o)?r=o:i=o}),i||r||t||null}function U6(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function xk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function kk(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var bl=class extends Ha{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(XD(t),eT(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(kk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Cl(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){kk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var B6=n=>n instanceof bl,$6=(()=>{class n extends ln{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Sg(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=de({type:n,standalone:!1,features:[qe]})}return n})();var H6={provide:is,useExisting:lt(()=>q6)},Ok=Promise.resolve(),q6=(()=>{class n extends is{_changeDetectorRef;callSetDisabledState;control=new bl;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ve;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=iO(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),rO(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){QD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Ok.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&_i(r);Ok.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Sg(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)($(ln,9),$(Ji,10),$(Al,10),$(os,10),$(or,8),$(bg,8))};static \u0275dir=de({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Lt([H6]),qe,yn]})}return n})();var qle=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=de({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),z6={provide:os,useExisting:lt(()=>G6),multi:!0},G6=(()=>{class n extends Sl{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=de({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Fn("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Lt([z6]),qe]})}return n})();var YD=class extends Ha{constructor(e,t,r){super(XD(t),eT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){tO(this,!1,e),e.forEach((r,i)=>{eO(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],U(R({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Cl(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var oO=(()=>{class n extends ln{callSetDisabledState;get submitted(){return je(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=$s(()=>this._submittedReactive());_submittedReactive=Zt(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(Dg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return QD(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Pk(t.control||null,t,!1),U6(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,j6(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new WD(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Pk(r||null,t),B6(i)&&(QD(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);F6(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&L6(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){tT(this.form,this),this._oldForm&&Dg(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)($(Ji,10),$(Al,10),$(bg,8))};static \u0275dir=de({type:n,features:[qe,yn]})}return n})();var sO=new B("");var W6={provide:ln,useExisting:lt(()=>aO)},aO=(()=>{class n extends $6{name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){uO(this._parent)}static \u0275fac=function(r){return new(r||n)($(ln,13),$(Ji,10),$(Al,10))};static \u0275dir=de({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[Lt([W6]),qe]})}return n})(),K6={provide:ln,useExisting:lt(()=>cO)},cO=(()=>{class n extends ln{_parent;name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){uO(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Sg(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||n)($(ln,13),$(Ji,10),$(Al,10))};static \u0275dir=de({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[Lt([K6]),qe]})}return n})();function uO(n){return!(n instanceof aO)&&!(n instanceof oO)&&!(n instanceof cO)}var Q6={provide:is,useExisting:lt(()=>Y6)},Y6=(()=>{class n extends is{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new Ve;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=iO(this,o)}ngOnChanges(t){this._added||this._setUpControl(),rO(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Sg(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)($(ln,13),$(Ji,10),$(Al,10),$(os,10),$(sO,8))};static \u0275dir=de({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Lt([Q6]),qe,yn]})}return n})();var J6={provide:ln,useExisting:lt(()=>Z6)},Z6=(()=>{class n extends oO{form=null;ngSubmit=new Ve;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=de({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Fn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Lt([J6]),qe]})}return n})(),X6={provide:os,useExisting:lt(()=>dO),multi:!0};function lO(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function eW(n){return n.split(":")[0]}var dO=(()=>{class n extends Sl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=P(yi).injector;destroyRef=P(xn);cdr=P(or);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Th({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=lO(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=eW(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=de({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Fn("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Lt([X6]),qe]})}return n})(),zle=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(lO(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)($(Ct),$(vn),$(dO,9))};static \u0275dir=de({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),tW={provide:os,useExisting:lt(()=>hO),multi:!0};function Fk(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function nW(n){return n.split(":")[0]}var hO=(()=>{class n extends Sl{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=nW(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=de({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Fn("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Lt([tW]),qe]})}return n})(),Gle=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Fk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Fk(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)($(Ct),$(vn),$(hO,9))};static \u0275dir=de({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function fO(n){return typeof n=="number"?n:parseFloat(n)}var nT=(()=>{class n{_validator=mg;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):mg,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=de({type:n,features:[yn]})}return n})(),rW={provide:Ji,useExisting:lt(()=>iW),multi:!0},iW=(()=>{class n extends nT{max;inputName="max";normalizeInput=t=>fO(t);createValidator=t=>Bk(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=de({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&vi("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[Lt([rW]),qe]})}return n})(),oW={provide:Ji,useExisting:lt(()=>sW),multi:!0},sW=(()=>{class n extends nT{min;inputName="min";normalizeInput=t=>fO(t);createValidator=t=>Uk(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=de({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&vi("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[Lt([oW]),qe]})}return n})(),aW={provide:Ji,useExisting:lt(()=>cW),multi:!0};var cW=(()=>{class n extends nT{required;inputName="required";normalizeInput=_i;createValidator=t=>$k;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=bt(n)))(i||n)}})();static \u0275dir=de({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&vi("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Lt([aW]),qe]})}return n})();var pO=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=ir({type:n});static \u0275inj=An({})}return n})();function Lk(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Wle=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return Lk(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Ig(i,o)}record(t,r=null){let i=this._reduceControls(t);return new KD(i,r)}control(t,r,i){let o={};return this.useNonNullable?(Lk(r)?o=r:(o.validators=r,o.asyncValidators=i),new bl(t,U(R({},o),{nonNullable:!0}))):new bl(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new YD(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof bl)return t;if(t instanceof Ha)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Kle=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bg,useValue:t.callSetDisabledState??Cg}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ir({type:n});static \u0275inj=An({imports:[pO]})}return n})(),Qle=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sO,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:bg,useValue:t.callSetDisabledState??Cg}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=ir({type:n});static \u0275inj=An({imports:[pO]})}return n})();var gO=class n{firestore=P(Ut);list$(e){let t=tt(this.firestore,`users/${e}/accounts`),r=un(t,Wi("name"),Tn(1e3));return zi(r,{idField:"id"}).pipe(ee(i=>i.map(o=>U(R({},o),{initialBalance:Number(o.initialBalance??0),type:o.type??"bank"}))))}async add(e,t){let r=tt(this.firestore,`users/${e}/accounts`);await rs(r,U(R({},t),{type:t.type??"bank",initialBalance:Number(t.initialBalance??0),createdAt:ze()}))}async update(e,t,r){let i=$e(this.firestore,`users/${e}/accounts/${t}`);await Ki(i,R(R({},r),r.initialBalance!==void 0?{initialBalance:Number(r.initialBalance)}:{}))}async delete(e,t){let r=tt(this.firestore,`users/${e}/transactions`),i=un(r,Qi("accountId","==",t),Tn(1));if(!(await Gi(i)).empty)throw new Error("Conta em uso em lan\xE7amentos. N\xE3o \xE9 poss\xEDvel excluir.");let s=$e(this.firestore,`users/${e}/accounts/${t}`);await ja(s)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var rT={production:!1,firebase:{apiKey:"AIzaSyBrtk-IgKjO9M01grt7g-N0Wp-vrrtBK0k",authDomain:"gestaogastos-bc99d.firebaseapp.com",projectId:"gestaogastos-bc99d",storageBucket:"gestaogastos-bc99d.firebasestorage.app",messagingSenderId:"481547974744",appId:"1:481547974744:web:8ea510a9165babbda8f22d",measurementId:"G-SSQPTQEE46"}};var Ag=class n{calculate(e,t){let r=this.getPreAppYield(e),i=this.getInitialValue(e),o=this.getStartDate(e),s=this.getReferenceDate(t),a=_l(s);if(!o||i<=0)return this.buildResult(e,r,i,i,0,0,a,this.isIndexMode(e.yieldMode),!1);let c=this.daysBetween(o,s),l=this.monthsBetween(o,s);if(c<=0)return this.buildResult(e,r,i,i,0,0,a,!1,!1);if(e.yieldMode==="manual_monthly"||e.yieldMode==="manual_yearly"){let y=this.calculateManual(i,e.yieldMode,Number(e.manualRate??0),e.compounding??"monthly",c,l),T=y-i;return this.buildResult(e,r,i,y,T,i>0?T/i*100:0,a,!1,!1)}let h=e.yieldMode==="cdi_percent"?t.cdi:t.selic,p=Number(h?.value??0);if(h&&p>0){let y=this.calculateIndex(i,e.yieldMode,e.cdiPercent??100,p,e.compounding??"daily",c,l),T=y-i;return this.buildResult(e,r,i,y,T,i>0?T/i*100:0,h.date??a,!1,!1)}let g=Number(e.manualRate??0);if(g>0){let y=this.calculateManual(i,"manual_monthly",g,e.compounding??"monthly",c,l),T=y-i;return this.buildResult(e,r,i,y,T,i>0?T/i*100:0,a,!0,!0)}return this.buildResult(e,r,i,i,0,0,null,!0,!1)}summarize(e,t){let r=e.filter(g=>g.status==="active"),i=r.map(g=>this.calculate(g,t)),o=this.sum(r.map(g=>Number(g.principalBase??0))),s=this.sum(i.map(g=>g.totalEstimated)),a=this.sum(i.map(g=>g.totalYield)),c=this.sum(r.map(g=>{let y=Number(g.totalInvestedToDate??0);if(y>0)return y;let T=this.getPreAppYield(g);return this.getPrincipalBaseForReturn(g,T)})),l=c>0?a/c*100:0,h=this.pickLatestDate(i.map(g=>g.updatedAt)),p=i.some(g=>g.indexMissing);return{totalInvested:o,totalEstimated:s,totalYield:a,totalYieldPercent:l,updatedAt:h,indexMissing:p,count:r.length}}calculateRescueIR(e){let t=Math.max(0,Number(e.rescueAmount??0)),r=Math.max(0,Number(e.currentValue??0)),i=Math.max(0,Number(e.principalBase??0)),o=Math.max(r-i,0),s=r>0?Math.min(Math.max(t/r,0),1):0,a=o>0?o*s:0,c=typeof e.investmentStartDate=="string"?Ua(e.investmentStartDate):e.investmentStartDate instanceof Date?e.investmentStartDate:null,l=e.referenceDate?new Date(e.referenceDate):new Date,h=c?this.daysBetween(c,l):0,p=o>0?this.resolveIrRate(h):0,g=Math.max(0,a*p),y=Math.max(0,t-g);return{grossAmount:t,profitPortion:a,irRate:p,irValue:g,netAmount:y}}getInitialValue(e){let t=Number(e.principalBase??0),r=this.getPreAppYield(e);return t+r}getPreAppYield(e){return e.hadBeforeApp?Number(e.preAppYield??0):0}getPrincipalBaseForReturn(e,t){return e.hadBeforeApp&&e.currentValueAtOnboarding!==null&&e.currentValueAtOnboarding!==void 0?Math.max(0,Number(e.currentValueAtOnboarding)-t):Number(e.principalBase??0)}getTotalReturnPercent(e,t,r){let i=Number(e.totalInvestedToDate??0);return i>0?t/i*100:r>0?t/r*100:0}buildResult(e,t,r,i,o,s,a,c,l){let h=t+o,p=this.getPrincipalBaseForReturn(e,t),g=this.getTotalReturnPercent(e,h,p);return{preAppYield:t,postAppYield:o,totalYield:h,totalReturnPercent:g,initialValue:r,totalEstimated:i,yieldAfter:o,yieldPercent:s,updatedAt:a,indexMissing:c,placeholderUsed:l}}getStartDate(e){let t=Ua(e.systemStartDate);return t||Ua(e.realStartDate)}getReferenceDate(e){let t=e.referenceDate?new Date(e.referenceDate):new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate())}calculateManual(e,t,r,i,o,s){let a=Math.max(0,r)/100;if(a<=0)return e;if(i==="monthly"){let l=t==="manual_yearly"?Math.pow(1+a,.08333333333333333)-1:a;return e*Math.pow(1+l,Math.max(0,s))}let c=t==="manual_yearly"?Math.pow(1+a,1/365)-1:Math.pow(1+a,1/30)-1;return e*Math.pow(1+c,Math.max(0,o))}calculateIndex(e,t,r,i,o,s,a){let c=Math.max(0,i)/100,l=t==="cdi_percent"?Math.max(0,r)/100:1,h=c*l;if(h<=0)return e;if(o==="monthly"){let p=Math.pow(1+h,30)-1;return e*Math.pow(1+p,Math.max(0,a))}return e*Math.pow(1+h,Math.max(0,s))}daysBetween(e,t){let r=new Date(e.getFullYear(),e.getMonth(),e.getDate()),o=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-r.getTime();return Math.floor(o/(1e3*60*60*24))}monthsBetween(e,t){let r=e.getFullYear()*12+e.getMonth(),o=t.getFullYear()*12+t.getMonth()-r;return t.getDate()<e.getDate()&&(o-=1),Math.max(0,o)}resolveIrRate(e){let t=Math.max(0,Math.floor(e));return t<=180?.225:t<=360?.2:t<=720?.175:.15}sum(e){return e.reduce((t,r)=>t+r,0)}pickLatestDate(e){let t=e.filter(r=>!!r);return t.length?t.sort((r,i)=>r>i?-1:1)[0]:null}isIndexMode(e){return e==="cdi_percent"||e==="selic"}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var mO=class n{firestore=P(Ut);calculator=P(Ag);list$(e){let t=tt(this.firestore,`users/${e}/investments`),r=un(t,Wi("name"));return zi(r,{idField:"id"}).pipe(ee(i=>i.map(o=>this.normalize(o))))}get$(e,t){let r=$e(this.firestore,`users/${e}/investments/${t}`);return fg(r,{idField:"id"}).pipe(ee(i=>i?this.normalize(i):null))}async add(e,t){let r=tt(this.firestore,`users/${e}/investments`);await rs(r,U(R({},t),{userId:e,createdAt:ze(),updatedAt:ze()}))}async update(e,t,r){let i=$e(this.firestore,`users/${e}/investments/${t}`);await Ki(i,U(R({},r),{updatedAt:ze()}))}async deleteInvestment(e,t){let r=$e(this.firestore,`users/${e}/investments/${t}`),i=tt(this.firestore,`users/${e}/investments/${t}/movements`),o=400;for(;;){let s=un(i,Tn(o)),a=await Gi(s);if(a.empty)break;let c=Ck(this.firestore);if(a.docs.forEach(l=>c.delete(l.ref)),await c.commit(),a.size<o)break}await ja(r)}async createDeposit(e,t){let r=$e(this.firestore,`users/${e}/investments/${t.investmentId}`);await zD(this.firestore,async i=>{let o=await i.get(r);if(!o.exists())throw new Error("Investimento nao encontrado.");let s=o.data(),a=!!t.isHistorical,c=t.accountId?t.accountId.trim():"";if(!a&&!c)throw new Error("Conta obrigatoria.");let l=c?$e(this.firestore,`users/${e}/accounts/${c}`):null,h=l?await i.get(l):null,p=h?.exists()?h.data():null,g=Number(t.amount??0);if(!Number.isFinite(g))throw new Error("Valor invalido.");let y=null,T=$e(tt(this.firestore,`users/${e}/investments/${t.investmentId}/movements`));if(!a){let A=$e(tt(this.firestore,`users/${e}/transactions`));y=A.id,i.set(A,{type:"expense",description:`Aporte em investimento: ${s.name}`,amount:g,date:t.date,categoryId:t.categoryId||null,accountId:c,accountOriginId:null,accountDestinationId:null,notes:t.notes||null,investmentId:t.investmentId,investmentAction:"deposit",source:"investment_movement",createdAt:ze()})}let M={userId:e,investmentId:t.investmentId,type:"deposit",amount:g,date:t.date,accountId:c||null,accountNameSnapshot:p?.name??null,note:t.notes||null,relatedTransactionId:y,isHistorical:a,affectsAccounts:!a,source:a?"investment_only":"ledger",createdAt:ze(),updatedAt:ze()};if(rT.production||console.log("[Investments] movement write",{path:T.path,payload:M}),i.set(T,M),!a){let k=Number(s.principalBase??0)+g;if(!Number.isFinite(k))throw new Error("Valor invalido.");i.update(r,{principalBase:k,updatedAt:ze()})}})}async createWithdraw(e,t){let r=$e(this.firestore,`users/${e}/investments/${t.investmentId}`);await zD(this.firestore,async i=>{let o=await i.get(r);if(!o.exists())throw new Error("Investimento nao encontrado.");let s=o.data(),a=!!t.isHistorical,c=t.accountId?t.accountId.trim():"";if(!a&&!c)throw new Error("Conta obrigatoria.");let l=c?$e(this.firestore,`users/${e}/accounts/${c}`):null,h=l?await i.get(l):null,p=h?.exists()?h.data():null,g=Number(t.amount??0);if(!Number.isFinite(g))throw new Error("Valor invalido.");let y=!!t.applyIr,T=Number(t.currentValue??0),M=null,A=null,k=g;if(!a&&y){let Ae=s.realStartDate||s.systemStartDate||"";if(Number.isFinite(T)&&T>0&&Ae){let we=this.calculator.calculateRescueIR({principalBase:Number(s.principalBase??0),currentValue:T,rescueAmount:g,investmentStartDate:Ae});M=we.irRate,A=we.irValue,k=we.netAmount}else M=0,A=0,k=g}else a||(A=0);let G=null,ae=$e(tt(this.firestore,`users/${e}/investments/${t.investmentId}/movements`));if(!a){let Ae=$e(tt(this.firestore,`users/${e}/transactions`));G=Ae.id;let we=A&&A>0?`Resgate de investimento: ${s.name} | IR estimado descontado: R$ ${A.toFixed(2)}`:`Resgate de investimento: ${s.name}`;i.set(Ae,{type:"income",description:we,amount:k,date:t.date,categoryId:t.categoryId||null,accountId:c,accountOriginId:null,accountDestinationId:null,notes:t.notes||null,investmentId:t.investmentId,investmentAction:"withdraw",source:"investment_movement",createdAt:ze()})}let Fe={userId:e,investmentId:t.investmentId,type:"withdraw",amount:g,grossAmount:g,netAmount:k,irEstimated:A,irRate:M,date:t.date,accountId:c||null,accountNameSnapshot:p?.name??null,note:t.notes||null,relatedTransactionId:G,isHistorical:a,affectsAccounts:!a,source:a?"investment_only":"ledger",createdAt:ze(),updatedAt:ze()};if(rT.production||console.log("[Investments] movement write",{path:ae.path,payload:Fe}),i.set(ae,Fe),!a){let Ae=Number(s.principalBase??0),we=Math.max(0,Ae-g);if(!Number.isFinite(we))throw new Error("Valor invalido.");i.update(r,{principalBase:we,updatedAt:ze()})}})}normalize(e){let t=e.yieldMode??"manual_monthly",r=e.compounding??(t==="cdi_percent"||t==="selic"?"daily":"monthly"),i=El(e.realStartDate)||"",o=El(e.systemStartDate)||i;return U(R({},e),{type:e.type??"manual",status:e.status??"active",hadBeforeApp:!!e.hadBeforeApp,realStartDate:i,systemStartDate:o,principalBase:Number(e.principalBase??0),preAppYield:Number(e.preAppYield??0),totalInvestedToDate:e.totalInvestedToDate===null||e.totalInvestedToDate===void 0?null:Number(e.totalInvestedToDate),currentValueAtOnboarding:e.currentValueAtOnboarding===null||e.currentValueAtOnboarding===void 0?null:Number(e.currentValueAtOnboarding),yieldMode:t,manualRate:e.manualRate===null||e.manualRate===void 0?null:Number(e.manualRate),cdiPercent:e.cdiPercent===null||e.cdiPercent===void 0?null:Number(e.cdiPercent),compounding:r})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var yO=class n{firestore=P(Ut);cache=new Map;latest$(e){let t=this.cache.get(e);if(t)return t;let r=tt(this.firestore,"indices"),i=un(r,Qi("type","==",e),Wi("date","desc"),Tn(1)),o=zi(i,{idField:"id"}).pipe(ee(s=>{let a=s?.[0]??null;return a?this.normalize(a,e):null}),_r(()=>re(null)),_s({bufferSize:1,refCount:!0}));return this.cache.set(e,o),o}normalize(e,t){let r=El(e.date);return U(R({},e),{type:e.type??t,date:r||"",value:Number(e.value??0)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var vO=class n{toastsSubject=new it([]);timers=new Map;toasts$=this.toastsSubject.asObservable();success(e,t){this.show("success",e,t)}error(e,t){this.show("error",e,t)}info(e,t){this.show("info",e,t)}warning(e,t){this.show("warning",e,t)}show(e,t,r){let i=`${Date.now()}-${Math.random().toString(16).slice(2)}`,o={id:i,type:e,message:t,actionLabel:r?.actionLabel,action:r?.action},s=r?.durationMs??(e==="error"?7e3:4e3);if(this.toastsSubject.next([...this.toastsSubject.value,o]),s>0){let a=setTimeout(()=>this.dismiss(i),s);this.timers.set(i,a)}}dismiss(e){let t=this.toastsSubject.value;if(!t.length)return;let r=t.filter(o=>o.id!==e);this.toastsSubject.next(r);let i=this.timers.get(e);i&&(clearTimeout(i),this.timers.delete(e))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};export{R as a,U as b,uW as c,lW as d,dW as e,Me as f,it as g,re as h,D1 as i,ee as j,bm as k,_r as l,Er as m,yc as n,qt as o,Es as p,Dt as q,V as r,Y as s,P as t,vC as u,_C as v,PC as w,at as x,Ve as y,IL as z,$v as A,PA as B,vi as C,LA as D,Wv as E,Kv as F,kh as G,Qv as H,Yv as I,VA as J,UA as K,BA as L,Cj as M,Fn as N,HA as O,Pj as P,xj as Q,zA as R,Xc as S,Qj as T,WA as U,e_ as V,KA as W,QA as X,YA as Y,e2 as Z,JA as _,i2 as $,o2 as aa,s2 as ba,a2 as ca,d2 as da,f2 as ea,p2 as fa,g2 as ga,m2 as ha,So as ia,fU as ja,B0 as ka,pU as la,yU as ma,_U as na,EU as oa,IU as pa,G0 as qa,_ie as ra,OU as sa,Mr as ta,W_ as ua,na as va,Nf as wa,w$ as xa,b$ as ya,eae as za,tae as Aa,Tce as Ba,bce as Ca,ze as Da,Ut as Ea,nle as Fa,zi as Ga,rs as Ha,tt as Ia,ja as Ja,$e as Ka,rle as La,Gi as Ma,ile as Na,Tn as Oa,Wi as Pa,un as Qa,zD as Ra,Ki as Sa,Qi as Ta,El as Ua,_l as Va,sle as Wa,Ua as Xa,pg as Ya,Sk as Za,_6 as _a,jk as $a,Ak as ab,Ble as bb,$le as cb,bl as db,q6 as eb,qle as fb,G6 as gb,cO as hb,Y6 as ib,Z6 as jb,dO as kb,zle as lb,Gle as mb,iW as nb,sW as ob,cW as pb,Wle as qb,Kle as rb,Qle as sb,gO as tb,rT as ub,Ag as vb,mO as wb,yO as xb,vO as yb};
