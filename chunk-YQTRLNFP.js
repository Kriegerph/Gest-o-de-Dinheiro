var aP=Object.create;var Hh=Object.defineProperty,cP=Object.defineProperties,uP=Object.getOwnPropertyDescriptor,lP=Object.getOwnPropertyDescriptors,dP=Object.getOwnPropertyNames,wu=Object.getOwnPropertySymbols,fP=Object.getPrototypeOf,qh=Object.prototype.hasOwnProperty,hw=Object.prototype.propertyIsEnumerable;var fw=(t,e,n)=>e in t?Hh(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x=(t,e)=>{for(var n in e||={})qh.call(e,n)&&fw(t,n,e[n]);if(wu)for(var n of wu(e))hw.call(e,n)&&fw(t,n,e[n]);return t},U=(t,e)=>cP(t,lP(e));var A4=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Gh=(t,e)=>{var n={};for(var r in t)qh.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&wu)for(var r of wu(t))e.indexOf(r)<0&&hw.call(t,r)&&(n[r]=t[r]);return n};var S4=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var hP=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of dP(e))!qh.call(t,i)&&i!==n&&Hh(t,i,{get:()=>e[i],enumerable:!(r=uP(e,i))||r.enumerable});return t};var N4=(t,e,n)=>(n=t!=null?aP(fP(t)):{},hP(e||!t||!t.__esModule?Hh(n,"default",{value:t,enumerable:!0}):n,t));var at=null,Du=!1,Qh=1,pP=null,mt=Symbol("SIGNAL");function X(t){let e=at;return at=t,e}function bu(){return at}var ta={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function na(t){if(Du)throw new Error("");if(at===null)return;at.consumerOnSignalRead(t);let e=at.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=at.recomputing;if(r&&(n=e!==void 0?e.nextProducer:at.producers,n!==void 0&&n.producer===t)){at.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===at&&(!r||mP(i,at)))return;let o=Io(at),s={producer:t,consumer:at,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};at.producersTail=s,e!==void 0?e.nextProducer=s:at.producers=s,o&&yw(t,s)}function pw(){Qh++}function Yh(t){if(!(Io(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Qh)){if(!t.producerMustRecompute(t)&&!Au(t)){Kh(t);return}t.producerRecomputeValue(t),Kh(t)}}function Jh(t){if(t.consumers===void 0)return;let e=Du;Du=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||gP(r)}}finally{Du=e}}function Zh(){return at?.consumerAllowSignalWrites!==!1}function gP(t){t.dirty=!0,Jh(t),t.consumerMarkedDirty?.(t)}function Kh(t){t.dirty=!1,t.lastCleanEpoch=Qh}function ra(t){return t&&gw(t),X(t)}function gw(t){t.producersTail=void 0,t.recomputing=!0}function Cu(t,e){X(e),t&&mw(t)}function mw(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Io(t))do n=Xh(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Au(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Yh(n),r!==n.version))return!0}return!1}function ia(t){if(Io(t)){let e=t.producers;for(;e!==void 0;)e=Xh(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function yw(t,e){let n=t.consumersTail,r=Io(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)yw(i.producer,i)}function Xh(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Io(e)){let o=e.producers;for(;o!==void 0;)o=Xh(o)}return n}function Io(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function ep(t){pP?.(t)}function mP(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function tp(t,e){return Object.is(t,e)}function Su(t,e){let n=Object.create(yP);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Yh(n),na(n),n.value===Tu)throw n.error;return n.value};return r[mt]=n,ep(n),r}var zh=Symbol("UNSET"),Wh=Symbol("COMPUTING"),Tu=Symbol("ERRORED"),yP=U(x({},ta),{value:zh,dirty:!0,error:null,equal:tp,kind:"computed",producerMustRecompute(t){return t.value===zh||t.value===Wh},producerRecomputeValue(t){if(t.value===Wh)throw new Error("");let e=t.value;t.value=Wh;let n=ra(t),r,i=!1;try{r=t.computation(),X(null),i=e!==zh&&e!==Tu&&r!==Tu&&t.equal(e,r)}catch(o){r=Tu,t.error=o}finally{Cu(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function _P(){throw new Error}var _w=_P;function vw(t){_w(t)}function np(t){_w=t}var vP=null;function rp(t,e){let n=Object.create(Nu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>Ew(n);return r[mt]=n,ep(n),[r,s=>oa(n,s),s=>Iw(n,s)]}function Ew(t){return na(t),t.value}function oa(t,e){Zh()||vw(t),t.equal(t.value,e)||(t.value=e,EP(t))}function Iw(t,e){Zh()||vw(t),oa(t,e(t.value))}var Nu=U(x({},ta),{equal:tp,value:void 0,kind:"signal"});function EP(t){t.version++,pw(),Jh(t),vP?.(t)}function ip(t){let e=X(null);try{return t()}finally{X(e)}}function J(t){return typeof t=="function"}function wo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ru=wo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function pi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var et=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(J(r))try{r()}catch(o){e=o instanceof Ru?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{ww(o)}catch(s){e=e??[],s instanceof Ru?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ru(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ww(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&pi(n,e)}remove(e){let{_finalizers:n}=this;n&&pi(n,e),e instanceof t&&e._removeParent(this)}};et.EMPTY=(()=>{let t=new et;return t.closed=!0,t})();var op=et.EMPTY;function Mu(t){return t instanceof et||t&&"closed"in t&&J(t.remove)&&J(t.add)&&J(t.unsubscribe)}function ww(t){J(t)?t():t.unsubscribe()}var rn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Do={setTimeout(t,e,...n){let{delegate:r}=Do;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Do;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Pu(t){Do.setTimeout(()=>{let{onUnhandledError:e}=rn;if(e)e(t);else throw t})}function sa(){}var Dw=sp("C",void 0,void 0);function Tw(t){return sp("E",void 0,t)}function bw(t){return sp("N",t,void 0)}function sp(t,e,n){return{kind:t,value:e,error:n}}var gi=null;function To(t){if(rn.useDeprecatedSynchronousErrorHandling){let e=!gi;if(e&&(gi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=gi;if(gi=null,n)throw r}}else t()}function Cw(t){rn.useDeprecatedSynchronousErrorHandling&&gi&&(gi.errorThrown=!0,gi.error=t)}var mi=class extends et{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Mu(e)&&e.add(this)):this.destination=DP}static create(e,n,r){return new on(e,n,r)}next(e){this.isStopped?cp(bw(e),this):this._next(e)}error(e){this.isStopped?cp(Tw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?cp(Dw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},IP=Function.prototype.bind;function ap(t,e){return IP.call(t,e)}var up=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){xu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){xu(r)}else xu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){xu(n)}}},on=class extends mi{constructor(e,n,r){super();let i;if(J(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&rn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ap(e.next,o),error:e.error&&ap(e.error,o),complete:e.complete&&ap(e.complete,o)}):i=e}this.destination=new up(i)}};function xu(t){rn.useDeprecatedSynchronousErrorHandling?Cw(t):Pu(t)}function wP(t){throw t}function cp(t,e){let{onStoppedNotification:n}=rn;n&&Do.setTimeout(()=>n(t,e))}var DP={closed:!0,next:sa,error:wP,complete:sa};var bo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function sn(t){return t}function Aw(...t){return lp(t)}function lp(t){return t.length===0?sn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ne=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=bP(n)?n:new on(n,r,i);return To(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Sw(r),new r((i,o)=>{let s=new on({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[bo](){return this}pipe(...n){return lp(n)(this)}toPromise(n){return n=Sw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Sw(t){var e;return(e=t??rn.Promise)!==null&&e!==void 0?e:Promise}function TP(t){return t&&J(t.next)&&J(t.error)&&J(t.complete)}function bP(t){return t&&t instanceof mi||TP(t)&&Mu(t)}function CP(t){return J(t?.lift)}function le(t){return e=>{if(CP(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(t,e,n,r,i){return new dp(t,e,n,r,i)}var dp=class extends mi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Nw=wo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var tt=(()=>{class t extends ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ku(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Nw}next(n){To(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){To(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){To(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?op:(this.currentObservers=null,o.push(n),new et(()=>{this.currentObservers=null,pi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ne;return n.source=this,n}}return t.create=(e,n)=>new ku(e,n),t})(),ku=class extends tt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:op}};var yi=class extends tt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var aa={now(){return(aa.delegate||Date).now()},delegate:void 0};var ca=class extends tt{constructor(e=1/0,n=1/0,r=aa){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Ou=class extends et{constructor(e,n){super()}schedule(e,n=0){return this}};var ua={setInterval(t,e,...n){let{delegate:r}=ua;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ua;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Co=class extends Ou{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ua.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ua.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,pi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ao=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ao.now=aa.now;var So=class extends Ao{constructor(e,n=Ao.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var fp=new So(Co);var Fu=class extends Co{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Lu=class extends So{};var hp=new Lu(Fu);var la=new ne(t=>t.complete());function Rw(t){return t&&J(t.schedule)}function Mw(t){return t[t.length-1]}function Vu(t){return J(Mw(t))?t.pop():void 0}function gr(t){return Rw(Mw(t))?t.pop():void 0}function xw(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Pw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _i(t){return this instanceof _i?(this.v=t,this):new _i(t)}function kw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(R){return new Promise(function(N,O){o.push([y,R,N,O])>1||u(y,R)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(R){g(o[0][3],R)}}function l(y){y.value instanceof _i?Promise.resolve(y.value.v).then(f,p):g(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function g(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Ow(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Pw=="function"?Pw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Bu=t=>t&&typeof t.length=="number"&&typeof t!="function";function ju(t){return J(t?.then)}function Uu(t){return J(t[bo])}function $u(t){return Symbol.asyncIterator&&J(t?.[Symbol.asyncIterator])}function Hu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function AP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qu=AP();function Gu(t){return J(t?.[qu])}function zu(t){return kw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield _i(n.read());if(i)return yield _i(void 0);yield yield _i(r)}}finally{n.releaseLock()}})}function Wu(t){return J(t?.getReader)}function Ce(t){if(t instanceof ne)return t;if(t!=null){if(Uu(t))return SP(t);if(Bu(t))return NP(t);if(ju(t))return RP(t);if($u(t))return Fw(t);if(Gu(t))return MP(t);if(Wu(t))return PP(t)}throw Hu(t)}function SP(t){return new ne(e=>{let n=t[bo]();if(J(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function NP(t){return new ne(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function RP(t){return new ne(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Pu)})}function MP(t){return new ne(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Fw(t){return new ne(e=>{xP(t,e).catch(n=>e.error(n))})}function PP(t){return Fw(zu(t))}function xP(t,e){var n,r,i,o;return xw(this,void 0,void 0,function*(){try{for(n=Ow(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function At(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function mr(t,e=0){return le((n,r)=>{n.subscribe(de(r,i=>At(r,t,()=>r.next(i),e),()=>At(r,t,()=>r.complete(),e),i=>At(r,t,()=>r.error(i),e)))})}function yr(t,e=0){return le((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Lw(t,e){return Ce(t).pipe(yr(e),mr(e))}function Vw(t,e){return Ce(t).pipe(yr(e),mr(e))}function Bw(t,e){return new ne(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function jw(t,e){return new ne(n=>{let r;return At(n,e,()=>{r=t[qu](),At(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}function Ku(t,e){if(!t)throw new Error("Iterable cannot be null");return new ne(n=>{At(n,e,()=>{let r=t[Symbol.asyncIterator]();At(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Uw(t,e){return Ku(zu(t),e)}function $w(t,e){if(t!=null){if(Uu(t))return Lw(t,e);if(Bu(t))return Bw(t,e);if(ju(t))return Vw(t,e);if($u(t))return Ku(t,e);if(Gu(t))return jw(t,e);if(Wu(t))return Uw(t,e)}throw Hu(t)}function ct(t,e){return e?$w(t,e):Ce(t)}function No(...t){let e=gr(t);return ct(t,e)}function kP(t,e){let n=J(t)?t:()=>t,r=i=>i.error(n());return new ne(e?i=>e.schedule(r,0,i):r)}function OP(t){return!!t&&(t instanceof ne||J(t.lift)&&J(t.subscribe))}var vi=wo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function FP(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let o=new on({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{n?r(e.defaultValue):i(new vi)}});t.subscribe(o)})}function we(t,e){return le((n,r)=>{let i=0;n.subscribe(de(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:LP}=Array;function VP(t,e){return LP(e)?t(...e):t(e)}function Qu(t){return we(e=>VP(t,e))}var{isArray:BP}=Array,{getPrototypeOf:jP,prototype:UP,keys:$P}=Object;function Yu(t){if(t.length===1){let e=t[0];if(BP(e))return{args:e,keys:null};if(HP(e)){let n=$P(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function HP(t){return t&&typeof t=="object"&&jP(t)===UP}function Ju(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function qP(...t){let e=gr(t),n=Vu(t),{args:r,keys:i}=Yu(t);if(r.length===0)return ct([],e);let o=new ne(GP(r,e,i?s=>Ju(i,s):sn));return n?o.pipe(Qu(n)):o}function GP(t,e,n=sn){return r=>{Hw(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Hw(e,()=>{let l=ct(t[u],e),f=!1;l.subscribe(de(r,p=>{o[u]=p,f||(f=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Hw(t,e,n){t?At(n,t,e):e()}function qw(t,e,n,r,i,o,s,a){let u=[],l=0,f=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?C(R):u.push(R),C=R=>{o&&e.next(R),l++;let N=!1;Ce(n(R,f++)).subscribe(de(e,O=>{i?.(O),o?y(O):e.next(O)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let O=u.shift();s?At(e,s,()=>C(O)):C(O)}g()}catch(O){e.error(O)}}))};return t.subscribe(de(e,y,()=>{p=!0,g()})),()=>{a?.()}}function Ei(t,e,n=1/0){return J(e)?Ei((r,i)=>we((o,s)=>e(r,o,i,s))(Ce(t(r,i))),n):(typeof e=="number"&&(n=e),le((r,i)=>qw(r,i,t,n)))}function pp(t=1/0){return Ei(sn,t)}function Gw(){return pp(1)}function Zu(...t){return Gw()(ct(t,gr(t)))}function zP(t){return new ne(e=>{Ce(t()).subscribe(e)})}function gp(...t){let e=Vu(t),{args:n,keys:r}=Yu(t),i=new ne(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;Ce(n[f]).subscribe(de(o,g=>{p||(p=!0,l--),a[f]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Ju(r,a):a),o.complete())}))}});return e?i.pipe(Qu(e)):i}function Xu(t,e){return le((n,r)=>{let i=0;n.subscribe(de(r,o=>t.call(e,o,i++)&&r.next(o)))})}function da(t){return le((e,n)=>{let r=null,i=!1,o;r=e.subscribe(de(n,void 0,void 0,s=>{o=Ce(t(s,da(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function WP(t,e){return J(e)?Ei(t,e,1):Ei(t,1)}function zw(t){return le((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function mp(t){return t<=0?()=>la:le((e,n)=>{let r=0;e.subscribe(de(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Ww(t=KP){return le((e,n)=>{let r=!1;e.subscribe(de(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function KP(){return new vi}function QP(t){return le((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function YP(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Xu((i,o)=>t(i,o,r)):sn,mp(1),n?zw(e):Ww(()=>new vi))}function JP(t){return t<=0?()=>la:le((e,n)=>{let r=[];e.subscribe(de(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Kw(t={}){let{connector:e=()=>new tt,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,l=0,f=!1,p=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),s=u=void 0,f=p=!1},C=()=>{let R=s;y(),R?.unsubscribe()};return le((R,N)=>{l++,!p&&!f&&g();let O=u=u??e();N.add(()=>{l--,l===0&&!p&&!f&&(a=yp(C,i))}),O.subscribe(N),!s&&l>0&&(s=new on({next:K=>O.next(K),error:K=>{p=!0,g(),a=yp(y,n,K),O.error(K)},complete:()=>{f=!0,g(),a=yp(y,r),O.complete()}}),Ce(R).subscribe(s))})(o)}}function yp(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new on({next:()=>{r.unsubscribe(),t()}});return Ce(e(...n)).subscribe(r)}function Ro(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,Kw({connector:()=>new ca(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function _p(...t){let e=gr(t);return le((n,r)=>{(e?Zu(t,n,e):Zu(t,n)).subscribe(r)})}function fa(t,e){return le((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(de(r,u=>{i?.unsubscribe();let l=0,f=o++;Ce(t(u,f)).subscribe(i=de(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Qw(t){return le((e,n)=>{Ce(t).subscribe(de(n,()=>n.complete(),sa)),!n.closed&&e.subscribe(n)})}function Yw(t,e,n){let r=J(t)||e||n?{next:t,error:e,complete:n}:t;return r?le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):sn}var vp;function el(){return vp}function vn(t){let e=vp;return vp=t,e}var Jw=Symbol("NotFound");function Mo(t){return t===Jw||t?.name==="\u0275NotFound"}var _r=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Op=new _r("21.0.6");var ol="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(e,n){super(_a(e,n)),this.code=e}};function ex(t){return`NG0${Math.abs(t)}`}function _a(t,e){return`${ex(t)}${e?": "+e:""}`}var wr=globalThis;function fe(t){for(let e in t)if(t[e]===fe)return e;throw Error("")}function nD(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Bn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Bn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Fp(t,e){return t?e?`${t} ${e}`:t:e||""}var tx=fe({__forward_ref__:fe});function Ke(t){return t.__forward_ref__=Ke,t.toString=function(){return Bn(this())},t}function nt(t){return Lp(t)?t():t}function Lp(t){return typeof t=="function"&&t.hasOwnProperty(tx)&&t.__forward_ref__===Ke}function Y(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dr(t){return{providers:t.providers||[],imports:t.imports||[]}}function va(t){return rx(t,sl)}function nx(t){return va(t)!==null}function rx(t,e){return t.hasOwnProperty(e)&&t[e]||null}function ix(t){let e=t?.[sl]??null;return e||null}function Ip(t){return t&&t.hasOwnProperty(nl)?t[nl]:null}var sl=fe({\u0275prov:fe}),nl=fe({\u0275inj:fe}),G=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Y({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Vp(t){return t&&!!t.\u0275providers}var Bp=fe({\u0275cmp:fe}),jp=fe({\u0275dir:fe}),Up=fe({\u0275pipe:fe}),$p=fe({\u0275mod:fe}),pa=fe({\u0275fac:fe}),Ci=fe({__NG_ELEMENT_ID__:fe}),Zw=fe({__NG_ENV_ID__:fe});function Hp(t){return al(t,"@NgModule"),t[$p]||null}function Tr(t){return al(t,"@Component"),t[Bp]||null}function qp(t){return al(t,"@Directive"),t[jp]||null}function rD(t){return al(t,"@Pipe"),t[Up]||null}function al(t,e){if(t==null)throw new $(-919,!1)}function En(t){return typeof t=="string"?t:t==null?"":String(t)}function iD(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():En(t)}var oD=fe({ngErrorCode:fe}),ox=fe({ngErrorMessage:fe}),sx=fe({ngTokenPath:fe});function Gp(t,e){return sD("",-200,e)}function cl(t,e){throw new $(-201,!1)}function sD(t,e,n){let r=new $(e,t);return r[oD]=e,r[ox]=t,n&&(r[sx]=n),r}function ax(t){return t[oD]}var wp;function aD(){return wp}function yt(t){let e=wp;return wp=t,e}function zp(t,e,n){let r=va(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;cl(t,"")}var cx={},Ii=cx,Dp="__NG_DI_FLAG__",Tp=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=wi(n)||0;try{return this.injector.get(e,r&8?null:Ii,r)}catch(i){if(Mo(i))return i;throw i}}};function ux(t,e=0){let n=el();if(n===void 0)throw new $(-203,!1);if(n===null)return zp(t,void 0,e);{let r=lx(e),i=n.retrieve(t,r);if(Mo(i)){if(r.optional)return null;throw i}return i}}function Re(t,e=0){return(aD()||ux)(nt(t),e)}function L(t,e){return Re(t,wi(e))}function wi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function lx(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function bp(t){let e=[];for(let n=0;n<t.length;n++){let r=nt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=dx(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(Re(i,o))}else e.push(Re(r))}return e}function cD(t,e){return t[Dp]=e,t.prototype[Dp]=e,t}function dx(t){return t[Dp]}function vr(t,e){let n=t.hasOwnProperty(pa);return n?t[pa]:null}function uD(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function lD(t){return t.flat(Number.POSITIVE_INFINITY)}function ul(t,e){t.forEach(n=>Array.isArray(n)?ul(n,e):e(n))}function Wp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ea(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function dD(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function fD(t,e,n){let r=xo(t,e);return r>=0?t[r|1]=n:(r=~r,dD(t,r,e,n)),r}function ll(t,e){let n=xo(t,e);if(n>=0)return t[n|1]}function xo(t,e){return fx(t,e,1)}function fx(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var br={},kt=[],Ia=new G(""),Kp=new G("",-1),Qp=new G(""),ga=class{get(e,n=Ii){if(n===Ii){let i=sD("",-201);throw i.name="\u0275NotFound",i}return n}};function Cr(t){return{\u0275providers:t}}function hD(...t){return{\u0275providers:Yp(!0,t),\u0275fromNgModule:!0}}function Yp(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return ul(e,s=>{let a=s;rl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&pD(i,o),n}function pD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Jp(i,o=>{e(o,r)})}}function rl(t,e,n,r){if(t=nt(t),!t)return!1;let i=null,o=Ip(t),s=!o&&Tr(t);if(!o&&!s){let u=t.ngModule;if(o=Ip(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)rl(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{ul(o.imports,f=>{rl(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&pD(l,e)}if(!a){let l=vr(i)||(()=>new i);e({provide:i,useFactory:l,deps:kt},i),e({provide:Qp,useValue:i,multi:!0},i),e({provide:Ia,useValue:()=>Re(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Jp(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Jp(t,e){for(let n of t)Vp(n)&&(n=n.\u0275providers),Array.isArray(n)?Jp(n,e):e(n)}var hx=fe({provide:String,useValue:fe});function gD(t){return t!==null&&typeof t=="object"&&hx in t}function px(t){return!!(t&&t.useExisting)}function gx(t){return!!(t&&t.useFactory)}function Di(t){return typeof t=="function"}function mD(t){return!!t.useClass}var Zp=new G(""),tl={},Xw={},Ep;function wa(){return Ep===void 0&&(Ep=new ga),Ep}var St=class{},Ti=class extends St{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Ap(e,s=>this.processProvider(s)),this.records.set(Kp,Po(void 0,this)),i.has("environment")&&this.records.set(St,Po(void 0,this));let o=this.records.get(Zp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Qp,kt,{self:!0}))}retrieve(e,n){let r=wi(n)||0;try{return this.get(e,Ii,r)}catch(i){if(Mo(i))return i;throw i}}destroy(){ha(this),this._destroyed=!0;let e=X(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),X(e)}}onDestroy(e){return ha(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ha(this);let n=vn(this),r=yt(void 0),i;try{return e()}finally{vn(n),yt(r)}}get(e,n=Ii,r){if(ha(this),e.hasOwnProperty(Zw))return e[Zw](this);let i=wi(r),o,s=vn(this),a=yt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=Ex(e)&&va(e);f&&this.injectableDefInScope(f)?l=Po(Cp(e),tl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?wa():this.parent;return n=i&8&&n===Ii?null:n,u.get(e,n)}catch(u){let l=ax(u);throw l===-200||l===-201?new $(l,null):u}finally{yt(a),vn(s)}}resolveInjectorInitializers(){let e=X(null),n=vn(this),r=yt(void 0),i;try{let o=this.get(Ia,kt,{self:!0});for(let s of o)s()}finally{vn(n),yt(r),X(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Bn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=nt(e);let n=Di(e)?e:nt(e&&e.provide),r=yx(e);if(!Di(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Po(void 0,tl,!0),i.factory=()=>bp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=X(null);try{if(n.value===Xw)throw Gp(Bn(e));return n.value===tl&&(n.value=Xw,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&vx(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{X(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=nt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Cp(t){let e=va(t),n=e!==null?e.factory:vr(t);if(n!==null)return n;if(t instanceof G)throw new $(204,!1);if(t instanceof Function)return mx(t);throw new $(204,!1)}function mx(t){if(t.length>0)throw new $(204,!1);let n=ix(t);return n!==null?()=>n.factory(t):()=>new t}function yx(t){if(gD(t))return Po(void 0,t.useValue);{let e=Xp(t);return Po(e,tl)}}function Xp(t,e,n){let r;if(Di(t)){let i=nt(t);return vr(i)||Cp(i)}else if(gD(t))r=()=>nt(t.useValue);else if(gx(t))r=()=>t.useFactory(...bp(t.deps||[]));else if(px(t))r=(i,o)=>Re(nt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=nt(t&&(t.useClass||t.provide));if(_x(t))r=()=>new i(...bp(t.deps));else return vr(i)||Cp(i)}return r}function ha(t){if(t.destroyed)throw new $(205,!1)}function Po(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function _x(t){return!!t.deps}function vx(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Ex(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Ap(t,e){for(let n of t)Array.isArray(n)?Ap(n,e):n&&Vp(n)?Ap(n.\u0275providers,e):e(n)}function Ar(t,e){let n;t instanceof Ti?(ha(t),n=t):n=new Tp(t);let r,i=vn(n),o=yt(void 0);try{return e()}finally{vn(i),yt(o)}}function yD(){return aD()!==void 0||el()!=null}var an=0,q=1,Q=2,ze=3,qt=4,Gt=5,Da=6,ko=7,ut=8,Sr=9,In=10,Te=11,Oo=12,eg=13,Ai=14,zt=15,Nr=16,Si=17,wn=18,Ta=19,tg=20,Vn=21,dl=22,ba=23,Ot=24,Ni=25,Ca=26,xe=27,_D=1;var Rr=7,Aa=8,Ri=9,vt=10;function Dn(t){return Array.isArray(t)&&typeof t[_D]=="object"}function cn(t){return Array.isArray(t)&&t[_D]===!0}function ng(t){return(t.flags&4)!==0}function Mr(t){return t.componentOffset>-1}function Fo(t){return(t.flags&1)===1}function Tn(t){return!!t.template}function Lo(t){return(t[Q]&512)!==0}function Mi(t){return(t[Q]&256)===256}var rg="svg",vD="math";function Wt(t){for(;Array.isArray(t);)t=t[an];return t}function ig(t,e){return Wt(e[t])}function un(t,e){return Wt(e[t.index])}function fl(t,e){return t.data[e]}function Sa(t,e){return t[e]}function og(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Kt(t,e){let n=e[t];return Dn(n)?n:n[an]}function ED(t){return(t[Q]&4)===4}function hl(t){return(t[Q]&128)===128}function ID(t){return cn(t[ze])}function Pi(t,e){return e==null?null:t[e]}function sg(t){t[Si]=0}function ag(t){t[Q]&1024||(t[Q]|=1024,hl(t)&&Vo(t))}function wD(t,e){for(;t>0;)e=e[Ai],t--;return e}function Na(t){return!!(t[Q]&9216||t[Ot]?.dirty)}function pl(t){t[In].changeDetectionScheduler?.notify(8),t[Q]&64&&(t[Q]|=1024),Na(t)&&Vo(t)}function Vo(t){t[In].changeDetectionScheduler?.notify(0);let e=Er(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!hl(e)));)e=Er(e)}function cg(t,e){if(Mi(t))throw new $(911,!1);t[Vn]===null&&(t[Vn]=[]),t[Vn].push(e)}function DD(t,e){if(t[Vn]===null)return;let n=t[Vn].indexOf(e);n!==-1&&t[Vn].splice(n,1)}function Er(t){let e=t[ze];return cn(e)?e[ze]:e}function ug(t){return t[ko]??=[]}function lg(t){return t.cleanup??=[]}function TD(t,e,n,r){let i=ug(e);i.push(n),t.firstCreatePass&&lg(t).push(r,i.length-1)}var ee={lFrame:BD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Sp=!1;function bD(){return ee.lFrame.elementDepthCount}function CD(){ee.lFrame.elementDepthCount++}function dg(){ee.lFrame.elementDepthCount--}function gl(){return ee.bindingsEnabled}function AD(){return ee.skipHydrationRootTNode!==null}function fg(t){return ee.skipHydrationRootTNode===t}function hg(){ee.skipHydrationRootTNode=null}function Z(){return ee.lFrame.lView}function Qe(){return ee.lFrame.tView}function SD(t){return ee.lFrame.contextLView=t,t[ut]}function ND(t){return ee.lFrame.contextLView=null,t}function He(){let t=pg();for(;t!==null&&t.type===64;)t=t.parent;return t}function pg(){return ee.lFrame.currentTNode}function RD(){let t=ee.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Bo(t,e){let n=ee.lFrame;n.currentTNode=t,n.isParent=e}function gg(){return ee.lFrame.isParent}function MD(){ee.lFrame.isParent=!1}function PD(){return ee.lFrame.contextLView}function mg(){return Sp}function yg(t){let e=Sp;return Sp=t,e}function Pr(){let t=ee.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function _g(){return ee.lFrame.bindingIndex}function xD(t){return ee.lFrame.bindingIndex=t}function Ra(){return ee.lFrame.bindingIndex++}function ml(t){let e=ee.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function kD(){return ee.lFrame.inI18n}function OD(t,e){let n=ee.lFrame;n.bindingIndex=n.bindingRootIndex=t,yl(e)}function FD(){return ee.lFrame.currentDirectiveIndex}function yl(t){ee.lFrame.currentDirectiveIndex=t}function LD(t){let e=ee.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function vg(){return ee.lFrame.currentQueryIndex}function _l(t){ee.lFrame.currentQueryIndex=t}function Ix(t){let e=t[q];return e.type===2?e.declTNode:e.type===1?t[Gt]:null}function Eg(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=Ix(o),i===null||(o=o[Ai],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ee.lFrame=VD();return r.currentTNode=e,r.lView=t,!0}function vl(t){let e=VD(),n=t[q];ee.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function VD(){let t=ee.lFrame,e=t===null?null:t.child;return e===null?BD(t):e}function BD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function jD(){let t=ee.lFrame;return ee.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Ig=jD;function El(){let t=jD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function UD(t){return(ee.lFrame.contextLView=wD(t,ee.lFrame.contextLView))[ut]}function jn(){return ee.lFrame.selectedIndex}function xr(t){ee.lFrame.selectedIndex=t}function Il(){let t=ee.lFrame;return fl(t.tView,t.selectedIndex)}function $D(){ee.lFrame.currentNamespace=rg}function HD(){return ee.lFrame.currentNamespace}var qD=!0;function wl(){return qD}function Ma(t){qD=t}function Np(t,e=null,n=null,r){let i=wg(t,e,n,r);return i.resolveInjectorInitializers(),i}function wg(t,e=null,n=null,r,i=new Set){let o=[n||kt,hD(t)];return r=r||(typeof t=="object"?void 0:Bn(t)),new Ti(o,e||wa(),r||null,i)}var We=class t{static THROW_IF_NOT_FOUND=Ii;static NULL=new ga;static create(e,n){if(Array.isArray(e))return Np({name:""},n,e,"");{let r=e.name??"";return Np({name:r},e.parent,e.providers,r)}}static \u0275prov=Y({token:t,providedIn:"any",factory:()=>Re(Kp)});static __NG_ELEMENT_ID__=-1},Un=new G(""),$n=(()=>{class t{static __NG_ELEMENT_ID__=wx;static __NG_ENV_ID__=n=>n}return t})(),Rp=class extends $n{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Mi(this._lView)}onDestroy(e){let n=this._lView;return cg(n,e),()=>DD(n,e)}};function wx(){return new Rp(Z())}var GD=!1,xi=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new yi(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ne(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Y({token:t,providedIn:"root",factory:()=>new t})}return t})(),Mp=class extends tt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,yD()&&(this.destroyRef=L($n,{optional:!0})??void 0,this.pendingTasks=L(xi,{optional:!0})??void 0)}emit(e){let n=X(null);try{super.next(e)}finally{X(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof et&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},_t=Mp;function il(...t){}function Dg(t){let e,n;function r(){t=il;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Tg(t){return queueMicrotask(()=>t()),()=>{t=il}}var bg="isAngularZone",ma=bg+"_ID",Dx=0,Pe=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new _t(!1);onMicrotaskEmpty=new _t(!1);onStable=new _t(!1);onError=new _t(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=GD}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Cx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(bg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Tx,il,il);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Tx={};function Cg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function bx(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Dg(()=>{t.callbackScheduled=!1,Pp(t),t.isCheckStableRunning=!0,Cg(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Pp(t)}function Cx(t){let e=()=>{bx(t)},n=Dx++;t._inner=t._inner.fork({name:"angular",properties:{[bg]:!0,[ma]:n,[ma+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(Ax(u))return r.invokeTask(o,s,a,u);try{return eD(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),tD(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return eD(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Sx(u)&&e(),tD(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Pp(t),Cg(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Pp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function eD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function tD(t){t._nesting--,Cg(t)}var ya=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new _t;onMicrotaskEmpty=new _t;onStable=new _t;onError=new _t;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Ax(t){return zD(t,"__ignore_ng_zone__")}function Sx(t){return zD(t,"__scheduler_tick__")}function zD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var bi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Hn=new G("",{factory:()=>{let t=L(Pe),e=L(St),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(bi),n.handleError(r))})}}}),WD={provide:Ia,useValue:()=>{let t=L(bi,{optional:!0})},multi:!0};function kr(t,e){let[n,r,i]=rp(t,e?.equal),o=n,s=o[mt];return o.set=r,o.update=i,o.asReadonly=KD.bind(o),o}function KD(){let t=this[mt];if(t.readonlyFn===void 0){let e=()=>this();e[mt]=t,t.readonlyFn=e}return t.readonlyFn}var Dl=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=Nx}return t})();function Nx(){return new Dl(Z(),He())}var Ir=class{},Pa=new G("",{factory:()=>!0});var Ag=new G(""),jo=(()=>{class t{internalPendingTasks=L(xi);scheduler=L(Ir);errorHandler=L(Hn);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=Y({token:t,providedIn:"root",factory:()=>new t})}return t})(),Sg=(()=>{class t{static \u0275prov=Y({token:t,providedIn:"root",factory:()=>new xp})}return t})(),xp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},kp=class{[mt];constructor(e){this[mt]=e}destroy(){this[mt].destroy()}};function Nt(t){return ip(t)}function Wo(t){return{toString:t}.toString()}var Tl="__parameters__";function Lx(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Vx(t,e,n){return Wo(()=>{let r=Lx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,f){let p=u.hasOwnProperty(Tl)?u[Tl]:Object.defineProperty(u,Tl,{value:[]})[Tl];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Ft=cD(Vx("Optional"),8);function Bx(t){return typeof t=="function"}function DT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Pl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Bi=(()=>{let t=()=>TT;return t.ngInherit=!0,t})();function TT(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ux),jx}function jx(){let t=CT(this),e=t?.current;if(e){let n=t.previous;if(n===br)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Ux(t,e,n,r,i){let o=this.declaredInputs[r],s=CT(t)||$x(t,{previous:br,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Pl(l&&l.currentValue,n,u===br),DT(t,e,i,n)}var bT="__ngSimpleChanges__";function CT(t){return t[bT]||null}function $x(t,e){return t[bT]=e}var QD=[];var he=function(t,e=null,n){for(let r=0;r<QD.length;r++){let i=QD[r];i(t,e,n)}},ue=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(ue||{});function Hx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=TT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function AT(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Al(t,e,n){ST(t,e,3,n)}function Sl(t,e,n,r){(t[Q]&3)===n&&ST(t,e,n,r)}function Ng(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function ST(t,e,n,r){let i=r!==void 0?t[Si]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Si]+=65536),(a<o||o==-1)&&(qx(t,n,e,u),t[Si]=(t[Si]&4294901760)+u+2),u++}function YD(t,e){he(ue.LifecycleHookStart,t,e);let n=X(null);try{e.call(t)}finally{X(n),he(ue.LifecycleHookEnd,t,e)}}function qx(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[Q]>>14<t[Si]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,YD(a,o)):YD(a,o)}var $o=-1,Oi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Gx(t){return(t.flags&8)!==0}function zx(t){return(t.flags&16)!==0}function Wx(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Kx(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function NT(t){return t===3||t===4||t===6}function Kx(t){return t.charCodeAt(0)===64}function Ho(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?JD(t,n,i,null,e[++r]):JD(t,n,i,null,null))}}return t}function JD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function RT(t){return t!==$o}function xl(t){return t&32767}function Qx(t){return t>>16}function kl(t,e){let n=Qx(t),r=e;for(;n>0;)r=r[Ai],n--;return r}var Vg=!0;function Ol(t){let e=Vg;return Vg=t,e}var Yx=256,MT=Yx-1,PT=5,Jx=0,bn={};function Zx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ci)&&(r=n[Ci]),r==null&&(r=n[Ci]=Jx++);let i=r&MT,o=1<<i;e.data[t+(i>>PT)]|=o}function Fl(t,e){let n=xT(t,e);if(n!==-1)return n;let r=e[q];r.firstCreatePass&&(t.injectorIndex=e.length,Rg(r.data,t),Rg(e,null),Rg(r.blueprint,null));let i=om(t,e),o=t.injectorIndex;if(RT(i)){let s=xl(i),a=kl(i,e),u=a[q].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Rg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function xT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function om(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=VT(i),r===null)return $o;if(n++,i=i[Ai],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return $o}function Bg(t,e,n){Zx(t,e,n)}function Xx(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(NT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function kT(t,e,n){if(n&8||t!==void 0)return t;cl(e,"NodeInjector")}function OT(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Sr],o=yt(void 0);try{return i?i.get(e,r,n&8):zp(e,r,n&8)}finally{yt(o)}}return kT(r,e,n)}function FT(t,e,n,r=0,i){if(t!==null){if(e[Q]&2048&&!(r&2)){let s=rk(t,e,n,r,bn);if(s!==bn)return s}let o=LT(t,e,n,r,bn);if(o!==bn)return o}return OT(e,n,r,i)}function LT(t,e,n,r,i){let o=tk(n);if(typeof o=="function"){if(!Eg(e,t,r))return r&1?kT(i,n,r):OT(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))cl(n);else return s}finally{Ig()}}else if(typeof o=="number"){let s=null,a=xT(t,e),u=$o,l=r&1?e[zt][Gt]:null;for((a===-1||r&4)&&(u=a===-1?om(t,e):e[a+8],u===$o||!XD(r,!1)?a=-1:(s=e[q],a=xl(u),e=kl(u,e)));a!==-1;){let f=e[q];if(ZD(o,a,f.data)){let p=ek(a,e,n,s,r,l);if(p!==bn)return p}u=e[a+8],u!==$o&&XD(r,e[q].data[a+8]===l)&&ZD(o,a,e)?(s=f,a=xl(u),e=kl(u,e)):a=-1}}return i}function ek(t,e,n,r,i,o){let s=e[q],a=s.data[t+8],u=r==null?Mr(a)&&Vg:r!=s&&(a.type&3)!==0,l=i&1&&o===a,f=Nl(a,s,n,u,l);return f!==null?La(e,s,f,a,i):bn}function Nl(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?a:a+f,g=i?a+f:l;for(let y=p;y<g;y++){let C=s[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=s[u];if(y&&Tn(y)&&y.type===n)return u}return null}function La(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Oi){let a=o;if(a.resolving){let y=iD(s[n]);throw Gp(y)}let u=Ol(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],f,p=a.injectImpl?yt(a.injectImpl):null,g=Eg(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Hx(n,s[n],e)}finally{p!==null&&yt(p),Ol(u),a.resolving=!1,Ig()}}return o}function tk(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ci)?t[Ci]:void 0;return typeof e=="number"?e>=0?e&MT:nk:e}function ZD(t,e,n){let r=1<<t;return!!(n[e+(t>>PT)]&r)}function XD(t,e){return!(t&2)&&!(t&1&&e)}var ki=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return FT(this._tNode,this._lView,e,wi(r),n)}};function nk(){return new ki(He(),Z())}function Qt(t){return Wo(()=>{let e=t.prototype.constructor,n=e[pa]||jg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[pa]||jg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function jg(t){return Lp(t)?()=>{let e=jg(nt(t));return e&&e()}:vr(t)}function rk(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Q]&2048&&!Lo(s);){let a=LT(o,s,n,r|2,bn);if(a!==bn)return a;let u=o.parent;if(!u){let l=s[tg];if(l){let f=l.get(n,bn,r);if(f!==bn)return f}u=VT(s),s=s[Ai]}o=u}return i}function VT(t){let e=t[q],n=e.type;return n===2?e.declTNode:n===1?t[Gt]:null}function sm(t){return Xx(He(),t)}function ik(){return Ko(He(),Z())}function Ko(t,e){return new Lt(un(t,e))}var Lt=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=ik}return t})();function ok(t){return t instanceof Lt?t.nativeElement:t}function sk(){return this._results[Symbol.iterator]()}var Ll=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new tt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=lD(e);(this._changesDetected=!uD(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=sk};function BT(t){return(t.flags&128)===128}var am=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(am||{}),jT=new Map,ak=0;function ck(){return ak++}function uk(t){jT.set(t[Ta],t)}function Ug(t){jT.delete(t[Ta])}var eT="__ngContext__";function qo(t,e){Dn(e)?(t[eT]=e[Ta],uk(e)):t[eT]=e}function UT(t){return HT(t[Oo])}function $T(t){return HT(t[qt])}function HT(t){for(;t!==null&&!cn(t);)t=t[qt];return t}var lk;function dk(t){lk=t}var fk=new G("",{factory:()=>hk}),hk="ng";var qT=new G(""),cm=new G("",{providedIn:"platform",factory:()=>"unknown"});var pk=new G("",{factory:()=>L(Un).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var GT=!1,zT=new G("",{factory:()=>GT});var gk=(t,e,n,r)=>{};function mk(t,e,n,r){gk(t,e,n,r)}function um(t){return(t.flags&32)===32}var yk=()=>null;function WT(t,e,n=!1){return yk(t,e,n)}function KT(t,e){let n=t.contentQueries;if(n!==null){let r=X(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];_l(o),a.contentQueries(2,e[s],s)}}}finally{X(r)}}}function $g(t,e,n){_l(0);let r=X(null);try{e(t,n)}finally{X(r)}}function lm(t,e,n){if(ng(e)){let r=X(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{X(r)}}}var Fi=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(Fi||{});var bl;function _k(){if(bl===void 0&&(bl=null,wr.trustedTypes))try{bl=wr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return bl}function tT(t){return _k()?.createScriptURL(t)||t}var Vl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ol})`}};function qa(t){return t instanceof Vl?t.changingThisBreaksApplicationSecurity:t}function dm(t,e){let n=QT(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ol})`)}return n===e}function QT(t){return t instanceof Vl&&t.getTypeName()||null}var vk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function YT(t){return t=String(t),t.match(vk)?t:"unsafe:"+t}var Ek=/^>|^->|<!--|-->|--!>|<!-$/g,Ik=/(<|>)/g,wk="\u200B$1\u200B";function Dk(t){return t.replace(Ek,e=>e.replace(Ik,wk))}function Tk(t,e){return t.createText(e)}function bk(t,e,n){t.setValue(e,n)}function Ck(t,e){return t.createComment(Dk(e))}function JT(t,e,n){return t.createElement(e,n)}function Bl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function ZT(t,e,n){t.appendChild(e,n)}function nT(t,e,n,r,i){r!==null?Bl(t,e,n,r,i):ZT(t,e,n)}function Ak(t,e,n,r){t.removeChild(null,e,n,r)}function Sk(t,e,n){t.setAttribute(e,"style",n)}function Nk(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function XT(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Wx(t,e,r),i!==null&&Nk(t,e,i),o!==null&&Sk(t,e,o)}var Ql=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Ql||{});function eb(t){let e=nb();return e?e.sanitize(Ql.URL,t)||"":dm(t,"URL")?qa(t):YT(En(t))}function tb(t){let e=nb();if(e)return tT(e.sanitize(Ql.RESOURCE_URL,t)||"");if(dm(t,"ResourceURL"))return tT(qa(t));throw new $(904,!1)}function Rk(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?tb:eb}function Mk(t,e,n){return Rk(e,n)(t)}function nb(){let t=Z();return t&&t[In].sanitizer}function rb(t){return t instanceof Function?t():t}function Pk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var ib="ng-template";function xk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Pk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(fm(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function fm(t){return t.type===4&&t.value!==ib}function kk(t,e,n){let r=t.type===4&&!n?ib:t.value;return e===r}function Ok(t,e,n){let r=4,i=t.attrs,o=i!==null?Vk(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!ln(r)&&!ln(u))return!1;if(s&&ln(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!kk(t,u,n)||u===""&&e.length===1){if(ln(r))return!1;s=!0}}else if(r&8){if(i===null||!xk(t,i,u,n)){if(ln(r))return!1;s=!0}}else{let l=e[++a],f=Fk(u,i,fm(t),n);if(f===-1){if(ln(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(ln(r))return!1;s=!0}}}}return ln(r)||s}function ln(t){return(t&1)===0}function Fk(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Bk(e,t)}function Lk(t,e,n=!1){for(let r=0;r<e.length;r++)if(Ok(t,e[r],n))return!0;return!1}function Vk(t){for(let e=0;e<t.length;e++){let n=t[e];if(NT(n))return e}return t.length}function Bk(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function rT(t,e){return t?":not("+e.trim()+")":e}function jk(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ln(s)&&(e+=rT(o,i),i=""),r=s,o=o||!ln(r);n++}return i!==""&&(e+=rT(o,i)),e}function Uk(t){return t.map(jk).join(",")}function $k(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!ln(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Vt={};function hm(t,e,n,r,i,o,s,a,u,l,f){let p=xe+r,g=p+i,y=Hk(p,g),C=typeof l=="function"?l():l;return y[q]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:f}}function Hk(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Vt);return n}function qk(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=hm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function pm(t,e,n,r,i,o,s,a,u,l,f){let p=e.blueprint.slice();return p[an]=i,p[Q]=r|4|128|8|64|1024,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),sg(p),p[ze]=p[Ai]=t,p[ut]=n,p[In]=s||t&&t[In],p[Te]=a||t&&t[Te],p[Sr]=u||t&&t[Sr]||null,p[Gt]=o,p[Ta]=ck(),p[Da]=f,p[tg]=l,p[zt]=e.type==2?t[zt]:p,p}function Gk(t,e,n){let r=un(e,t),i=qk(n),o=t[In].rendererFactory,s=gm(t,pm(t,i,null,ob(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function ob(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function sb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function gm(t,e){return t[Oo]?t[eg][qt]=e:t[Oo]=e,t[eg]=e,e}function zk(t=1){ab(Qe(),Z(),jn()+t,!1)}function ab(t,e,n,r){if(!r)if((e[Q]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Al(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Sl(e,o,0,n)}xr(n)}var Yl=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Yl||{});function Hg(t,e,n,r){let i=X(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Yl.SignalBased)!==0&&(u=e[o][mt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):DT(e,u,o,r)}finally{X(i)}}var Va=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Va||{}),Wk;function mm(t,e){return Wk(t,e)}var jl=new Set,Jl=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Jl||{}),Ga=new G(""),iT=new Set;function Zl(t){iT.has(t)||(iT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var ym=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=Y({token:t,providedIn:"root",factory:()=>new t})}return t})(),cb=[0,1,2,3],ub=(()=>{class t{ngZone=L(Pe);scheduler=L(Ir);errorHandler=L(bi,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){L(Ga,{optional:!0})}execute(){let n=this.sequences.size>0;n&&he(ue.AfterRenderHooksStart),this.executing=!0;for(let r of cb)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&he(ue.AfterRenderHooksEnd)}register(n){let{view:r}=n;r!==void 0?((r[Ni]??=[]).push(n),Vo(r),r[Q]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Jl.AFTER_NEXT_RENDER,n):n()}static \u0275prov=Y({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ul=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Ni];e&&(this.view[Ni]=e.filter(n=>n!==this))}};function _m(t,e){let n=e?.injector??L(We);return Zl("NgAfterNextRender"),Qk(t,n,e,!0)}function Kk(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function Qk(t,e,n,r){let i=e.get(ym);i.impl??=e.get(ub);let o=e.get(Ga,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get($n):null,a=e.get(Dl,null,{optional:!0}),u=new Ul(i.impl,Kk(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var Yk=new G("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:L(St)})});function lb(t,e,n){let r=t.get(Yk);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function Jk(t,e){for(let[n,r]of e)lb(t,r.animateFns)}function oT(t,e,n,r){let i=t?.[Ca]?.enter;e!==null&&i&&i.has(n.index)&&Jk(r,i)}function Uo(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;cn(i)?u=i:Dn(i)&&(l=!0,i=i[an]);let f=Wt(i);t===0&&r!==null?(oT(a,r,o,n),s==null?ZT(e,r,f):Bl(e,r,f,s||null,!0)):t===1&&r!==null?(oT(a,r,o,n),Bl(e,r,f,s||null,!0)):t===2?sT(a,o,n,p=>{Ak(e,f,l,p)}):t===3&&sT(a,o,n,()=>{e.destroyNode(f)}),u!=null&&lO(e,t,n,u,o,r,s)}}function Zk(t,e){db(t,e),e[an]=null,e[Gt]=null}function Xk(t,e,n,r,i,o){r[an]=i,r[Gt]=e,Xl(t,r,n,1,i,o)}function db(t,e){e[In].changeDetectionScheduler?.notify(9),Xl(t,e,e[Te],2,null,null)}function eO(t){let e=t[Oo];if(!e)return Mg(t[q],t);for(;e;){let n=null;if(Dn(e))n=e[Oo];else{let r=e[vt];r&&(n=r)}if(!n){for(;e&&!e[qt]&&e!==t;)Dn(e)&&Mg(e[q],e),e=e[ze];e===null&&(e=t),Dn(e)&&Mg(e[q],e),n=e&&e[qt]}e=n}}function vm(t,e){let n=t[Ri],r=n.indexOf(e);n.splice(r,1)}function fb(t,e){if(Mi(e))return;let n=e[Te];n.destroyNode&&Xl(t,e,n,3,null,null),eO(e)}function Mg(t,e){if(Mi(e))return;let n=X(null);try{e[Q]&=-129,e[Q]|=256,e[Ot]&&ia(e[Ot]),rO(t,e),nO(t,e),e[q].type===1&&e[Te].destroy();let r=e[Nr];if(r!==null&&cn(e[ze])){r!==e[ze]&&vm(r,e);let i=e[wn];i!==null&&i.detachView(t)}Ug(e)}finally{X(n)}}function sT(t,e,n,r){let i=t?.[Ca];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&jl.add(t),lb(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:f}=l();a.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),tO(t,r)}else t&&jl.delete(t),r(!1)},i)}function tO(t,e){let n=t[Ca]?.running;if(n){n.then(()=>{t[Ca].running=void 0,jl.delete(t),e(!0)});return}e(!1)}function nO(t,e){let n=t.cleanup,r=e[ko];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[ko]=null);let i=e[Vn];if(i!==null){e[Vn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[ba];if(o!==null){e[ba]=null;for(let s of o)s.destroy()}}function rO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Oi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];he(ue.LifecycleHookStart,a,u);try{u.call(a)}finally{he(ue.LifecycleHookEnd,a,u)}}else{he(ue.LifecycleHookStart,i,o);try{o.call(i)}finally{he(ue.LifecycleHookEnd,i,o)}}}}}function iO(t,e,n){return oO(t,e.parent,n)}function oO(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[an];if(Mr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Fi.None||i===Fi.Emulated)return null}return un(r,n)}function sO(t,e,n){return cO(t,e,n)}function aO(t,e,n){return t.type&40?un(t,n):null}var cO=aO,aT;function Em(t,e,n,r){let i=iO(t,r,e),o=e[Te],s=r.parent||e[Gt],a=sO(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)nT(o,i,n[u],a,!1);else nT(o,i,n,a,!1);aT!==void 0&&aT(o,r,e,n,i)}function ka(t,e){if(e!==null){let n=e.type;if(n&3)return un(e,t);if(n&4)return qg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ka(t,r);{let i=t[e.index];return cn(i)?qg(-1,i):Wt(i)}}else{if(n&128)return ka(t,e.next);if(n&32)return mm(e,t)()||Wt(t[e.index]);{let r=hb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Er(t[zt]);return ka(i,r)}else return ka(t,e.next)}}}return null}function hb(t,e){if(e!==null){let r=t[zt][Gt],i=e.projection;return r.projection[i]}return null}function qg(t,e){let n=vt+t+1;if(n<e.length){let r=e[n],i=r[q].firstChild;if(i!==null)return ka(r,i)}return e[Rr]}function Im(t,e,n,r,i,o,s){for(;n!=null;){let a=r[Sr];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&qo(Wt(u),r),n.flags|=2),!um(n))if(l&8)Im(t,e,n.child,r,i,o,!1),Uo(e,t,a,i,u,n,o,r);else if(l&32){let f=mm(n,r),p;for(;p=f();)Uo(e,t,a,i,p,n,o,r);Uo(e,t,a,i,u,n,o,r)}else l&16?uO(t,e,r,n,i,o):Uo(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function Xl(t,e,n,r,i,o){Im(n,r,t.firstChild,e,i,o,!1)}function uO(t,e,n,r,i,o){let s=n[zt],u=s[Gt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];Uo(e,t,n[Sr],i,f,r,o,n)}else{let l=u,f=s[ze];BT(r)&&(l.flags|=128),Im(t,e,l,f,i,o,!0)}}function lO(t,e,n,r,i,o,s){let a=r[Rr],u=Wt(r);a!==u&&Uo(e,t,n,o,a,i,s);for(let l=vt;l<r.length;l++){let f=r[l];Xl(f[q],f,t,e,o,a)}}function dO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Va.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Va.Important),t.setStyle(n,r,i,o))}}function pb(t,e,n,r,i){let o=jn(),s=r&2;try{xr(-1),s&&e.length>xe&&ab(t,e,xe,!1);let a=s?ue.TemplateUpdateStart:ue.TemplateCreateStart;he(a,i,n),n(r,i)}finally{xr(o);let a=s?ue.TemplateUpdateEnd:ue.TemplateCreateEnd;he(a,i,n)}}function ed(t,e,n){_O(t,e,n),(n.flags&64)===64&&vO(t,e,n)}function td(t,e,n=un){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function fO(t,e,n,r){let o=r.get(zT,GT)||n===Fi.ShadowDom||n===Fi.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return hO(s),s}function hO(t){pO(t)}var pO=()=>null;function gO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function gb(t,e,n,r,i,o){let s=e[q];if(bm(t,s,e,n,r)){Mr(t)&&yO(e,t.index);return}t.type&3&&(n=gO(n)),mO(t,e,n,r,i,o)}function mO(t,e,n,r,i,o){if(t.type&3){let s=un(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function yO(t,e){let n=Kt(e,t);n[Q]&16||(n[Q]|=64)}function _O(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Mr(n)&&Gk(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Fl(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=La(e,t,s,n);if(qo(u,e),o!==null&&DO(e,s-r,u,a,n,o),Tn(a)){let l=Kt(n.index,e);l[ut]=La(e,t,s,n)}}}function vO(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=FD();try{xr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];yl(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&EO(u,l)}}finally{xr(-1),yl(s)}}function EO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function wm(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];Lk(e,o.selectors,!1)&&(r??=[],Tn(o)?r.unshift(o):r.push(o))}return r}function IO(t,e,n,r,i,o){let s=un(t,e);wO(e[Te],s,o,t.value,n,r,i)}function wO(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?En(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function DO(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Hg(r,n,u,l)}}function Dm(t,e,n,r,i){let o=xe+n,s=e[q],a=i(s,e,t,r,n);e[o]=a,Bo(t,!0);let u=t.type===2;return u?(XT(e[Te],a,t),(bD()===0||Fo(t))&&qo(a,e),CD()):qo(a,e),wl()&&(!u||!um(t))&&Em(s,e,a,t),t}function Tm(t){let e=t;return gg()?MD():(e=e.parent,Bo(e,!1)),e}function TO(t,e){let n=t[Sr];if(!n)return;let r;try{r=n.get(Hn,null)}catch{r=null}r?.(e)}function bm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];Hg(p,n[l],f,i),a=!0}if(o)for(let u of o){let l=n[u],f=e.data[u];Hg(f,l,r,i),a=!0}return a}function bO(t,e){let n=Kt(e,t),r=n[q];CO(r,n);let i=n[an];i!==null&&n[Da]===null&&(n[Da]=WT(i,n[Sr])),he(ue.ComponentStart);try{Cm(r,n,n[ut])}finally{he(ue.ComponentEnd,n[ut])}}function CO(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Cm(t,e,n){vl(e);try{let r=t.viewQuery;r!==null&&$g(1,r,n);let i=t.template;i!==null&&pb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[wn]?.finishViewCreation(t),t.staticContentQueries&&KT(t,e),t.staticViewQueries&&$g(2,t.viewQuery,n);let o=t.components;o!==null&&AO(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,El()}}function AO(t,e){for(let n=0;n<e.length;n++)bO(t,e[n])}function SO(t,e,n,r){let i=X(null);try{let o=e.tView,a=t[Q]&4096?4096:16,u=pm(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Nr]=l;let f=t[wn];return f!==null&&(u[wn]=f.createEmbeddedView(o)),Cm(o,u,n),u}finally{X(i)}}function cT(t,e){return!e||e.firstChild===null||BT(t)}function Ba(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Wt(o)),cn(o)&&mb(o,r);let s=n.type;if(s&8)Ba(t,e,n.child,r);else if(s&32){let a=mm(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=hb(e,n);if(Array.isArray(a))r.push(...a);else{let u=Er(e[zt]);Ba(u[q],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function mb(t,e){for(let n=vt;n<t.length;n++){let r=t[n],i=r[q].firstChild;i!==null&&Ba(r[q],r,i,e)}t[Rr]!==t[an]&&e.push(t[Rr])}function yb(t){if(t[Ni]!==null){for(let e of t[Ni])e.impl.addSequence(e);t[Ni].length=0}}var _b=[];function NO(t){return t[Ot]??RO(t)}function RO(t){let e=_b.pop()??Object.create(PO);return e.lView=t,e}function MO(t){t.lView[Ot]!==t&&(t.lView=null,_b.push(t))}var PO=U(x({},ta),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Vo(t.lView)},consumerOnSignalRead(){this.lView[Ot]=this}});function xO(t){let e=t[Ot]??Object.create(kO);return e.lView=t,e}var kO=U(x({},ta),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Er(t.lView);for(;e&&!vb(e[q]);)e=Er(e);e&&ag(e)},consumerOnSignalRead(){this.lView[Ot]=this}});function vb(t){return t.type!==2}function Eb(t){if(t[ba]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[ba])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Q]&8192)}}var OO=100;function Ib(t,e=0){let r=t[In].rendererFactory,i=!1;i||r.begin?.();try{FO(t,e)}finally{i||r.end?.()}}function FO(t,e){let n=mg();try{yg(!0),Gg(t,e);let r=0;for(;Na(t);){if(r===OO)throw new $(103,!1);r++,Gg(t,1)}}finally{yg(n)}}function LO(t,e,n,r){if(Mi(e))return;let i=e[Q],o=!1,s=!1;vl(e);let a=!0,u=null,l=null;o||(vb(t)?(l=NO(e),u=ra(l)):bu()===null?(a=!1,l=xO(e),u=ra(l)):e[Ot]&&(ia(e[Ot]),e[Ot]=null));try{sg(e),xD(t.bindingStartIndex),n!==null&&pb(t,e,n,2,r);let f=(i&3)===3;if(!o)if(f){let y=t.preOrderCheckHooks;y!==null&&Al(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Sl(e,y,0,null),Ng(e,0)}if(s||VO(e),Eb(e),wb(e,0),t.contentQueries!==null&&KT(t,e),!o)if(f){let y=t.contentCheckHooks;y!==null&&Al(e,y)}else{let y=t.contentHooks;y!==null&&Sl(e,y,1),Ng(e,1)}jO(t,e);let p=t.components;p!==null&&Tb(e,p,0);let g=t.viewQuery;if(g!==null&&$g(2,g,r),!o)if(f){let y=t.viewCheckHooks;y!==null&&Al(e,y)}else{let y=t.viewHooks;y!==null&&Sl(e,y,2),Ng(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[dl]){for(let y of e[dl])y();e[dl]=null}o||(yb(e),e[Q]&=-73)}catch(f){throw o||Vo(e),f}finally{l!==null&&(Cu(l,u),a&&MO(l)),El()}}function wb(t,e){for(let n=UT(t);n!==null;n=$T(n))for(let r=vt;r<n.length;r++){let i=n[r];Db(i,e)}}function VO(t){for(let e=UT(t);e!==null;e=$T(e)){if(!(e[Q]&2))continue;let n=e[Ri];for(let r=0;r<n.length;r++){let i=n[r];ag(i)}}}function BO(t,e,n){he(ue.ComponentStart);let r=Kt(e,t);try{Db(r,n)}finally{he(ue.ComponentEnd,r[ut])}}function Db(t,e){hl(t)&&Gg(t,e)}function Gg(t,e){let r=t[q],i=t[Q],o=t[Ot],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Au(o)),s||=!1,o&&(o.dirty=!1),t[Q]&=-9217,s)LO(r,t,r.template,t[ut]);else if(i&8192){let a=X(null);try{Eb(t),wb(t,1);let u=r.components;u!==null&&Tb(t,u,1),yb(t)}finally{X(a)}}}function Tb(t,e,n){for(let r=0;r<e.length;r++)BO(t,e[r],n)}function jO(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)xr(~i);else{let o=i,s=n[++r],a=n[++r];OD(s,o);let u=e[o];he(ue.HostBindingsUpdateStart,u);try{a(2,u)}finally{he(ue.HostBindingsUpdateEnd,u)}}}}finally{xr(-1)}}function Am(t,e){let n=mg()?64:1088;for(t[In].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let r=Er(t);if(Lo(t)&&!r)return t;t=r}return null}function bb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function UO(t,e,n,r=!0){let i=e[q];if($O(i,e,t,n),r){let s=qg(n,t),a=e[Te],u=a.parentNode(t[Rr]);u!==null&&Xk(i,t[Gt],a,e,u,s)}let o=e[Da];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function zg(t,e){if(t.length<=vt)return;let n=vt+e,r=t[n];if(r){let i=r[Nr];i!==null&&i!==t&&vm(i,r),e>0&&(t[n-1][qt]=r[qt]);let o=Ea(t,vt+e);Zk(r[q],r);let s=o[wn];s!==null&&s.detachView(o[q]),r[ze]=null,r[qt]=null,r[Q]&=-129}return r}function $O(t,e,n,r){let i=vt+r,o=n.length;r>0&&(n[i-1][qt]=e),r<o-vt?(e[qt]=n[i],Wp(n,vt+r,e)):(n.push(e),e[qt]=null),e[ze]=n;let s=e[Nr];s!==null&&n!==s&&Cb(s,e);let a=e[wn];a!==null&&a.insertView(t),pl(e),e[Q]|=128}function Cb(t,e){let n=t[Ri],r=e[ze];if(Dn(r))t[Q]|=2;else{let i=r[ze][zt];e[zt]!==i&&(t[Q]|=2)}n===null?t[Ri]=[e]:n.push(e)}var Or=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[q];return Ba(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[ut]}set context(e){this._lView[ut]=e}get destroyed(){return Mi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ze];if(cn(e)){let n=e[Aa],r=n?n.indexOf(this):-1;r>-1&&(zg(e,r),Ea(n,r))}this._attachedToViewContainer=!1}fb(this._lView[q],this._lView)}onDestroy(e){cg(this._lView,e)}markForCheck(){Am(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){pl(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,Ib(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Lo(this._lView),n=this._lView[Nr];n!==null&&!e&&vm(n,this._lView),db(this._lView[q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let n=Lo(this._lView),r=this._lView[Nr];r!==null&&!n&&Cb(r,this._lView),pl(this._lView)}};var Fr=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=HO;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=SO(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Or(o)}}return t})();function HO(){return nd(He(),Z())}function nd(t,e){return t.type&4?new Fr(e,t,Ko(t,e)):null}function rd(t,e,n,r,i){let o=t.data[e];if(o===null)o=qO(t,e,n,r,i),kD()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=RD();o.injectorIndex=s===null?-1:s.injectorIndex}return Bo(o,!0),o}function qO(t,e,n,r,i){let o=pg(),s=gg(),a=s?o:o&&o.parent,u=t.data[e]=zO(t,a,n,e,r,i);return GO(t,u,o,s),u}function GO(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function zO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return AD()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var WO=()=>null;function uT(t,e){return WO(t,e)}var Ab=class{},id=class{},Wg=class{resolveComponentFactory(e){throw new $(917,!1)}},za=class{static NULL=new Wg},ja=class{},qn=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>KO()}return t})();function KO(){let t=Z(),e=He(),n=Kt(e.index,t);return(Dn(n)?n:t)[Te]}var Sb=(()=>{class t{static \u0275prov=Y({token:t,providedIn:"root",factory:()=>null})}return t})();var Rl={},Kg=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Rl,r);return i!==Rl||n===Rl?i:this.parentInjector.get(e,n,r)}};function $l(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Fp(i,a);else if(o==2){let u=a,l=e[++s];r=Fp(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function V(t,e=0){let n=Z();if(n===null)return Re(t,e);let r=He();return FT(r,n,nt(t),e)}function Nb(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,u,l]=f.resolveHostDirectives(s);break}JO(t,e,n,a,o,u,l)}o!==null&&r!==null&&QO(n,r,o)}function QO(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}function YO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function JO(t,e,n,r,i,o,s){let a=r.length,u=null;for(let g=0;g<a;g++){let y=r[g];u===null&&Tn(y)&&(u=y,YO(t,n,g)),Bg(Fl(n,e),t,y.type)}r1(n,t.data.length,a),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=sb(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(n.mergedAttrs=Ho(n.mergedAttrs,y.hostAttrs),XO(t,n,e,p,y),n1(p,y,i),s!==null&&s.has(y)){let[R,N]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,N+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!f&&(C.ngOnChanges||C.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}ZO(t,n,o)}function ZO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))lT(0,e,i,r),lT(1,e,i,r),fT(e,r,!1);else{let o=n.get(i);dT(0,e,o,r),dT(1,e,o,r),fT(e,r,!0)}}}function lT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Rb(e,o)}}function dT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Rb(e,s)}}function Rb(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function fT(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||fm(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function XO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=vr(i.type,!0)),s=new Oi(o,Tn(i),V,null);t.blueprint[r]=s,n[r]=s,e1(t,e,r,sb(t,n,i.hostVars,Vt),i)}function e1(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;t1(s)!=a&&s.push(a),s.push(n,r,o)}}function t1(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function n1(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Tn(e)&&(n[""]=t)}}function r1(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Sm(t,e,n,r,i,o,s,a){let u=e[q],l=u.consts,f=Pi(l,s),p=rd(u,t,n,r,f);return o&&Nb(u,e,p,Pi(l,a),i),p.mergedAttrs=Ho(p.mergedAttrs,p.attrs),p.attrs!==null&&$l(p,p.attrs,!1),p.mergedAttrs!==null&&$l(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function Nm(t,e){AT(t,e),ng(e)&&t.queries.elementEnd(e)}function i1(t,e,n,r,i,o){let s=e.consts,a=Pi(s,i),u=rd(e,t,n,r,a);if(u.mergedAttrs=Ho(u.mergedAttrs,u.attrs),o!=null){let l=Pi(s,o);u.localNames=[];for(let f=0;f<l.length;f+=2)u.localNames.push(l[f],-1)}return u.attrs!==null&&$l(u,u.attrs,!1),u.mergedAttrs!==null&&$l(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Rm(t){return Pb(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Mb(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Pb(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Wa(t,e,n){return t[e]=n}function Cn(t,e,n){if(n===Vt)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Ua(t,e,n,r){let i=Cn(t,e,n);return Cn(t,e+1,r)||i}function xb(t,e,n,r,i){let o=Ua(t,e,n,r);return Cn(t,e+2,i)||o}function o1(t,e,n,r,i,o){let s=Ua(t,e,n,r);return Ua(t,e+2,i,o)||s}function Ml(t,e,n){return function r(i){let o=Mr(t)?Kt(t.index,e):e;Am(o,5);let s=e[ut],a=hT(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=hT(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function hT(t,e,n,r){let i=X(null);try{return he(ue.OutputStart,e,n),n(r)!==!1}catch(o){return TO(t,o),!1}finally{he(ue.OutputEnd,e,n),X(i)}}function kb(t,e,n,r,i,o,s,a){let u=Fo(t),l=!1,f=null;if(!r&&u&&(f=a1(e,n,o,t.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=un(t,n),g=r?r(p):p;mk(n,g,o,a);let y=i.listen(g,o,a);if(!s1(o)){let C=r?R=>r(Wt(R[t.index])):t.index;Ob(C,e,n,o,a,y,!1)}}return l}function s1(t){return t.startsWith("animation")||t.startsWith("transition")}function a1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[ko],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function Ob(t,e,n,r,i,o,s){let a=e.firstCreatePass?lg(e):null,u=ug(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function pT(t,e,n,r,i,o){let s=e[n],a=e[q],l=a.data[n].outputs[r],p=s[l].subscribe(o);Ob(t.index,a,e,i,o,p,!0)}var Qg=Symbol("BINDING");var Hl=class extends za{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Tr(e);return new Go(n,this.ngModule)}};function c1(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Yl.SignalBased)!==0};return i&&(o.transform=i),o})}function u1(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function l1(t,e,n){let r=e instanceof St?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Kg(n,r):n}function d1(t){let e=t.get(ja,null);if(e===null)throw new $(407,!1);let n=t.get(Sb,null),r=t.get(Ir,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function f1(t,e){let n=Fb(t);return JT(e,n,n==="svg"?rg:n==="math"?vD:null)}function Fb(t){return(t.selectors[0][0]||"div").toLowerCase()}var Go=class extends id{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=c1(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=u1(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Uk(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){he(ue.DynamicComponentStart);let a=X(null);try{let u=this.componentDef,l=h1(r,u,s,o),f=l1(u,i||this.ngModule,e),p=d1(f),g=p.rendererFactory.createRenderer(null,u),y=r?fO(g,r,u.encapsulation,f):f1(u,g),C=s?.some(gT)||o?.some(O=>typeof O!="function"&&O.bindings.some(gT)),R=pm(null,l,null,512|ob(u),null,null,p,g,f,null,WT(y,f,!0));R[xe]=y,vl(R);let N=null;try{let O=Sm(xe,R,2,"#host",()=>l.directiveRegistry,!0,0);XT(g,y,O),qo(y,R),ed(l,R,O),lm(l,O,R),Nm(l,O),n!==void 0&&g1(O,this.ngContentSelectors,n),N=Kt(O.index,R),R[ut]=N[ut],Cm(l,R,null)}catch(O){throw N!==null&&Ug(N),Ug(R),O}finally{he(ue.DynamicComponentEnd),El()}return new ql(this.componentType,R,!!C)}finally{X(a)}}};function h1(t,e,n,r){let i=t?["ng-version","21.0.6"]:$k(e.selectors[0]),o=null,s=null,a=0;if(n)for(let f of n)a+=f[Qg].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let g of p.bindings){a+=g[Qg].requiredVars;let y=f+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,g=qp(p);u.push(g)}return hm(0,null,p1(o,s),1,a,u,null,null,null,[i],null)}function p1(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function gT(t){let e=t[Qg].kind;return e==="input"||e==="twoWay"}var ql=class extends Ab{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=fl(n[q],xe),this.location=Ko(this._tNode,n),this.instance=Kt(this._tNode.index,n)[ut],this.hostView=this.changeDetectorRef=new Or(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=bm(r,i[q],i,e,n);this.previousInputValues.set(e,n);let s=Kt(r.index,i);Am(s,1)}get injector(){return new ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function g1(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var ji=(()=>{class t{static __NG_ELEMENT_ID__=m1}return t})();function m1(){let t=He();return Vb(t,Z())}var y1=ji,Lb=class extends y1{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ko(this._hostTNode,this._hostLView)}get injector(){return new ki(this._hostTNode,this._hostLView)}get parentInjector(){let e=om(this._hostTNode,this._hostLView);if(RT(e)){let n=kl(e,this._hostLView),r=xl(e),i=n[q].data[r+8];return new ki(i,n)}else return new ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=mT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-vt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=uT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,cT(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!Bx(e),l;if(u)l=n;else{let N=n||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,a=N.bindings}let f=u?e:new Go(Tr(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let O=(u?p:this.parentInjector).get(St,null);O&&(o=O)}let g=Tr(f.componentType??{}),y=uT(this._lContainer,g?.id??null),C=y?.firstChild??null,R=f.create(p,i,C,o,s,a);return this.insertImpl(R.hostView,l,cT(this._hostTNode,y)),R}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(ID(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ze],l=new Lb(u,u[Gt],u[ze]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return UO(s,i,o,r),e.attachToViewContainerRef(),Wp(Pg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=mT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=zg(this._lContainer,n);r&&(Ea(Pg(this._lContainer),n),fb(r[q],r))}detach(e){let n=this._adjustIndex(e,-1),r=zg(this._lContainer,n);return r&&Ea(Pg(this._lContainer),n)!=null?new Or(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function mT(t){return t[Aa]}function Pg(t){return t[Aa]||(t[Aa]=[])}function Vb(t,e){let n,r=e[t.index];return cn(r)?n=r:(n=bb(r,e,null,t),e[t.index]=n,gm(e,n)),v1(n,e,t,r),new Lb(n,t,e)}function _1(t,e){let n=t[Te],r=n.createComment(""),i=un(e,t),o=n.parentNode(i);return Bl(n,o,r,n.nextSibling(i),!1),r}var v1=w1,E1=()=>!1;function I1(t,e,n){return E1(t,e,n)}function w1(t,e,n,r){if(t[Rr])return;let i;n.type&8?i=Wt(r):i=_1(e,n),t[Rr]=i}var Yg=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Jg=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Mm(e,n).matches!==null&&this.queries[n].setDirty()}},Zg=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=R1(e):this.predicate=e}},Xg=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},em=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,D1(n,o)),this.matchTNodeWithReadOption(e,n,Nl(n,e,o,!1,!1))}else r===Fr?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Nl(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Lt||i===ji||i===Fr&&n.type&4)this.addMatch(n.index,-2);else{let o=Nl(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function D1(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function T1(t,e){return t.type&11?Ko(t,e):t.type&4?nd(t,e):null}function b1(t,e,n,r){return n===-1?T1(e,t):n===-2?C1(t,e,r):La(t,t[q],n,e)}function C1(t,e,n){if(n===Lt)return Ko(e,t);if(n===Fr)return nd(e,t);if(n===ji)return Vb(e,t)}function Bb(t,e,n,r){let i=e[wn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let f=o[l];a.push(b1(e,f,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function tm(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=Bb(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],f=e[-u];for(let p=vt;p<f.length;p++){let g=f[p];g[Nr]===g[ze]&&tm(g[q],g,l,r)}if(f[Ri]!==null){let p=f[Ri];for(let g=0;g<p.length;g++){let y=p[g];tm(y[q],y,l,r)}}}}}return r}function A1(t,e){return t[wn].queries[e].queryList}function S1(t,e,n){let r=new Ll((n&4)===4);return TD(t,e,r,r.destroy),(e[wn]??=new Jg).queries.push(new Yg(r))-1}function N1(t,e,n,r){let i=Qe();if(i.firstCreatePass){let o=He();M1(i,new Zg(e,n,r),o.index),P1(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return S1(i,Z(),n)}function R1(t){return t.split(",").map(e=>e.trim())}function M1(t,e,n){t.queries===null&&(t.queries=new Xg),t.queries.track(new em(e,n))}function P1(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function Mm(t,e){return t.queries.getByIndex(e)}function x1(t,e){let n=t[q],r=Mm(n,e);return r.crossesNgTemplate?tm(n,t,e,[]):Bb(n,t,r,e)}var Li=class{},jb=class{};var Gl=class extends Li{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Hl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Hp(e);this._bootstrapComponents=rb(o.bootstrap),this._r3Injector=wg(e,n,[{provide:Li,useValue:this},{provide:za,useValue:this.componentFactoryResolver},...r],Bn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},zl=class extends jb{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Gl(this.moduleType,e,[])}};var $a=class extends Li{injector;componentFactoryResolver=new Hl(this);instance=null;constructor(e){super();let n=new Ti([...e.providers,{provide:Li,useValue:this},{provide:za,useValue:this.componentFactoryResolver}],e.parent||wa(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ub(t,e,n=null){return new $a({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var k1=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Yp(!1,n.type),i=r.length>0?Ub([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Y({token:t,providedIn:"environment",factory:()=>new t(Re(St))})}return t})();function O1(t){return Wo(()=>{let e=$b(t),n=U(x({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===am.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(k1).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Fi.Emulated,styles:t.styles||kt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Zl("NgStandalone"),Hb(n);let r=t.dependencies;return n.directiveDefs=yT(r,F1),n.pipeDefs=yT(r,rD),n.id=B1(n),n})}function F1(t){return Tr(t)||qp(t)}function Ui(t){return Wo(()=>({type:t.type,bootstrap:t.bootstrap||kt,declarations:t.declarations||kt,imports:t.imports||kt,exports:t.exports||kt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function L1(t,e){if(t==null)return br;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Yl.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function V1(t){if(t==null)return br;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function pe(t){return Wo(()=>{let e=$b(t);return Hb(e),e})}function Qo(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function $b(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||br,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||kt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:L1(t.inputs,e),outputs:V1(t.outputs),debugInfo:null}}function Hb(t){t.features?.forEach(e=>e(t))}function yT(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function B1(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function j1(t){return Object.getPrototypeOf(t.prototype).constructor}function Me(t){let e=j1(t.type),n=!0,r=[t];for(;e;){let i;if(Tn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=xg(t.inputs),s.declaredInputs=xg(t.declaredInputs),s.outputs=xg(t.outputs);let a=i.hostBindings;a&&G1(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&H1(t,u),l&&q1(t,l),U1(t,i),nD(t.outputs,i.outputs),Tn(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Me&&(n=!1)}}e=Object.getPrototypeOf(e)}$1(r)}function U1(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function $1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ho(i.hostAttrs,n=Ho(n,i.hostAttrs))}}function xg(t){return t===br?{}:t===kt?[]:t}function H1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function q1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function G1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function z1(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Ho(t.mergedAttrs,t.attrs);let f=t.tView=hm(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Bo(t,!1);let u=K1(n,e,t,r);wl()&&Em(n,e,u,t),qo(u,e);let l=bb(u,e,u,t);e[r+xe]=l,gm(e,l),I1(l,t,e)}function W1(t,e,n,r,i,o,s,a,u,l,f){let p=n+xe,g;return e.firstCreatePass?(g=rd(e,p,4,s||null,a||null),gl()&&Nb(e,t,g,Pi(e.consts,l),wm),AT(e,g)):g=e.data[p],z1(g,t,e,n,r,i,o,u),Fo(g)&&ed(e,t,g),l!=null&&td(t,g,f),g}function qb(t,e,n,r,i,o,s,a){let u=Z(),l=Qe(),f=Pi(l.consts,o);return W1(u,l,t,e,n,r,i,f,void 0,s,a),qb}var K1=Q1;function Q1(t,e,n,r){return Ma(!0),e[Te].createComment("")}var Y1=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Gb(t){return typeof t=="function"&&t[mt]!==void 0}function Pm(t){return Gb(t)&&typeof t.set=="function"}var zb=new G("");function $i(t){return!!t&&typeof t.then=="function"}function od(t){return!!t&&typeof t.subscribe=="function"}var Wb=new G("");var xm=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=L(Wb,{optional:!0})??[];injector=L(We);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Ar(this.injector,i);if($i(o))n.push(o);else if(od(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Kb=new G("");function Qb(){np(()=>{let t="";throw new $(600,t)})}function Yb(t){return t.isBoundToModule}var J1=10;var Yo=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=L(Hn);afterRenderManager=L(ym);zonelessEnabled=L(Pa);rootEffectScheduler=L(Sg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new tt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=L(xi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(we(n=>!n))}constructor(){L(Ga,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=L(St);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=We.NULL){return this._injector.get(Pe).run(()=>{he(ue.BootstrapComponentStart);let s=n instanceof id;if(!this._injector.get(xm).done){let C="";throw new $(405,C)}let u;s?u=n:u=this._injector.get(za).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=Yb(u)?void 0:this._injector.get(Li),f=r||u.selector,p=u.create(i,[],f,l),g=p.location.nativeElement,y=p.injector.get(zb,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),Oa(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),he(ue.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){he(ue.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Jl.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw he(ue.ChangeDetectionEnd),new $(101,!1);let n=X(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,X(n),this.afterTick.next(),he(ue.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ja,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<J1;){he(ue.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{he(ue.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Na(i))continue;let o=r&&!this.zonelessEnabled?0:1;Ib(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Na(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Oa(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Kb,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Oa(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new $(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Oa(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Jo(t,e,n,r){let i=Z(),o=Ra();if(Cn(i,o,e)){let s=Qe(),a=Il();IO(a,i,t,e,n,r)}return Jo}var I8=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Jb(t,e,n){let r=Z(),i=Ra();if(Cn(r,i,e)){let o=Qe(),s=Il();gb(s,r,t,e,r[Te],n)}return Jb}function _T(t,e,n,r,i){bm(e,t,n,i?"class":"style",r)}function km(t,e,n,r){let i=Z(),o=i[q],s=t+xe,a=o.firstCreatePass?Sm(s,i,2,e,wm,gl(),n,r):o.data[s];if(Dm(a,i,t,e,eC),Fo(a)){let u=i[q];ed(u,i,a),lm(u,a,i)}return r!=null&&td(i,a),km}function Om(){let t=Qe(),e=He(),n=Tm(e);return t.firstCreatePass&&Nm(t,n),fg(n)&&hg(),dg(),n.classesWithoutHost!=null&&Gx(n)&&_T(t,n,Z(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&zx(n)&&_T(t,n,Z(),n.stylesWithoutHost,!1),Om}function Zb(t,e,n,r){return km(t,e,n,r),Om(),Zb}function Fm(t,e,n,r){let i=Z(),o=i[q],s=t+xe,a=o.firstCreatePass?i1(s,o,2,e,n,r):o.data[s];return Dm(a,i,t,e,eC),r!=null&&td(i,a),Fm}function Lm(){let t=He(),e=Tm(t);return fg(e)&&hg(),dg(),Lm}function Xb(t,e,n,r){return Fm(t,e,n,r),Lm(),Xb}var eC=(t,e,n,r,i)=>(Ma(!0),JT(e[Te],r,HD()));function tC(t,e,n){let r=Z(),i=r[q],o=t+xe,s=i.firstCreatePass?Sm(o,r,8,"ng-container",wm,gl(),e,n):i.data[o];if(Dm(s,r,t,"ng-container",Z1),Fo(s)){let a=r[q];ed(a,r,s),lm(a,s,r)}return n!=null&&td(r,s),tC}function nC(){let t=Qe(),e=He(),n=Tm(e);return t.firstCreatePass&&Nm(t,n),nC}var Z1=(t,e,n,r,i)=>(Ma(!0),Ck(e[Te],""));function X1(){return Z()}var xa=void 0;function eF(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var tF=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",xa,xa,xa],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",eF],Fa={};function Vm(t,e,n){typeof e!="string"&&(n=e,e=t[De.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Fa[e]=t,n&&(Fa[e][De.ExtraData]=n)}function Et(t){let e=nF(t),n=vT(e);if(n)return n;let r=e.split("-")[0];if(n=vT(r),n)return n;if(r==="en")return tF;throw new $(701,!1)}function vT(t){return t in Fa||(Fa[t]=wr.ng&&wr.ng.common&&wr.ng.common.locales&&wr.ng.common.locales[t]),Fa[t]}var De=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(De||{});function nF(t){return t.toLowerCase().replace(/_/g,"-")}var Ka="en-US",rF="USD";var iF=Ka;function rC(t){typeof t=="string"&&(iF=t.toLowerCase().replace(/_/g,"-"))}function Gn(t,e,n){let r=Z(),i=Qe(),o=He();return oC(i,r,r[Te],o,t,e,n),Gn}function iC(t,e,n){let r=Z(),i=Qe(),o=He();return(o.type&3||n)&&kb(o,i,r,n,r[Te],t,e,Ml(o,r,e)),iC}function oC(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=Ml(r,e,o),kb(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let g=f[p],y=f[p+1];u??=Ml(r,e,o),pT(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=Ml(r,e,o),pT(r,e,p,i,i,u)}}function oF(t=1){return UD(t)}function sC(t,e,n,r){return N1(t,e,n,r),sC}function sF(t){let e=Z(),n=Qe(),r=vg();_l(r+1);let i=Mm(n,r);if(t.dirty&&ED(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=x1(e,r);t.reset(o,ok),t.notifyOnChanges()}return!0}return!1}function aF(){return A1(Z(),vg())}function cF(t){let e=PD();return Sa(e,xe+t)}function Cl(t,e){return t<<17|e<<2}function Vi(t){return t>>17&32767}function uF(t){return(t&2)==2}function lF(t,e){return t&131071|e<<17}function nm(t){return t|2}function zo(t){return(t&131068)>>2}function kg(t,e){return t&-131069|e<<2}function dF(t){return(t&1)===1}function rm(t){return t|1}function fF(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Vi(s),u=zo(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||xo(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let g=Vi(t[a+1]);t[r+1]=Cl(g,a),g!==0&&(t[g+1]=kg(t[g+1],r)),t[a+1]=lF(t[a+1],r)}else t[r+1]=Cl(a,0),a!==0&&(t[a+1]=kg(t[a+1],r)),a=r;else t[r+1]=Cl(u,0),a===0?a=r:t[u+1]=kg(t[u+1],r),u=r;l&&(t[r+1]=nm(t[r+1])),ET(t,f,r,!0),ET(t,f,r,!1),hF(e,f,t,r,o),s=Cl(a,u),o?e.classBindings=s:e.styleBindings=s}function hF(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&xo(o,e)>=0&&(n[r+1]=rm(n[r+1]))}function ET(t,e,n,r){let i=t[n+1],o=e===null,s=r?Vi(i):zo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];pF(u,e)&&(a=!0,t[s+1]=r?rm(l):nm(l)),s=r?Vi(l):zo(l)}a&&(t[n+1]=r?nm(i):rm(i))}function pF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?xo(t,e)>=0:!1}function aC(t,e,n){return cC(t,e,n,!1),aC}function Qa(t,e){return cC(t,e,null,!0),Qa}function cC(t,e,n,r){let i=Z(),o=Qe(),s=ml(2);if(o.firstUpdatePass&&mF(o,t,s,r),e!==Vt&&Cn(i,s,e)){let a=o.data[jn()];IF(o,a,i,i[Te],t,i[s+1]=wF(e,n),r,s)}}function gF(t,e){return e>=t.expandoStartIndex}function mF(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[jn()],s=gF(t,n);DF(o,r)&&e===null&&!s&&(e=!1),e=yF(i,o,e,r),fF(i,o,e,n,s,r)}}function yF(t,e,n,r){let i=LD(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Og(null,t,e,n,r),n=Ha(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Og(i,t,e,n,r),o===null){let u=_F(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Og(null,t,e,u[1],r),u=Ha(u,e.attrs,r),vF(t,e,r,u))}else o=EF(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function _F(t,e,n){let r=n?e.classBindings:e.styleBindings;if(zo(r)!==0)return t[Vi(r)]}function vF(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Vi(i)]=r}function EF(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ha(r,s,n)}return Ha(r,e.attrs,n)}function Og(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ha(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ha(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),fD(t,s,n?!0:e[++o]))}return t===void 0?null:t}function IF(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],f=dF(l)?IT(u,e,n,i,zo(l),s):void 0;if(!Wl(f)){Wl(o)||uF(l)&&(o=IT(u,null,n,i,a,s));let p=ig(jn(),n);dO(r,s,p,i,o)}}function IT(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,g=n[i+1];g===Vt&&(g=p?kt:void 0);let y=p?ll(g,r):f===r?g:void 0;if(l&&!Wl(y)&&(y=ll(u,r)),Wl(y)&&(a=y,s))return a;let C=t[i+1];i=s?Vi(C):zo(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=ll(u,r))}return a}function Wl(t){return t!==void 0}function wF(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Bn(qa(t)))),t}function DF(t,e){return(t.flags&(e?8:16))!==0}function TF(t,e=""){let n=Z(),r=Qe(),i=t+xe,o=r.firstCreatePass?rd(r,i,1,e,null):r.data[i],s=bF(r,n,o,e,t);n[i]=s,wl()&&Em(r,n,s,o),Bo(o,!1)}var bF=(t,e,n,r,i)=>(Ma(!0),Tk(e[Te],r));function CF(t,e,n,r=""){return Cn(t,Ra(),n)?e+En(n)+r:Vt}function AF(t,e,n,r,i,o=""){let s=_g(),a=Ua(t,s,n,i);return ml(2),a?e+En(n)+r+En(i)+o:Vt}function SF(t,e,n,r,i,o,s,a=""){let u=_g(),l=xb(t,u,n,i,s);return ml(3),l?e+En(n)+r+En(i)+o+En(s)+a:Vt}function uC(t){return Bm("",t),uC}function Bm(t,e,n){let r=Z(),i=CF(r,t,e,n);return i!==Vt&&jm(r,jn(),i),Bm}function lC(t,e,n,r,i){let o=Z(),s=AF(o,t,e,n,r,i);return s!==Vt&&jm(o,jn(),s),lC}function dC(t,e,n,r,i,o,s){let a=Z(),u=SF(a,t,e,n,r,i,o,s);return u!==Vt&&jm(a,jn(),u),dC}function jm(t,e,n){let r=ig(e,t);bk(t[Te],r,n)}function fC(t,e,n){Pm(e)&&(e=e());let r=Z(),i=Ra();if(Cn(r,i,e)){let o=Qe(),s=Il();gb(s,r,t,e,r[Te],n)}return fC}function NF(t,e){let n=Pm(t);return n&&t.set(e),n}function hC(t,e){let n=Z(),r=Qe(),i=He();return oC(r,n,n[Te],i,t,e),hC}function wT(t,e,n){let r=Qe();r.firstCreatePass&&pC(e,r.data,r.blueprint,Tn(t),n)}function pC(t,e,n,r,i){if(t=nt(t),Array.isArray(t))for(let o=0;o<t.length;o++)pC(t[o],e,n,r,i);else{let o=Qe(),s=Z(),a=He(),u=Di(t)?t:nt(t.provide),l=Xp(t),f=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Di(t)||!t.multi){let y=new Oi(l,i,V,null),C=Lg(u,e,i?f:f+g,p);C===-1?(Bg(Fl(a,s),o,u),Fg(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[C]=y,s[C]=y)}else{let y=Lg(u,e,f+g,p),C=Lg(u,e,f,f+g),R=y>=0&&n[y],N=C>=0&&n[C];if(i&&!N||!i&&!R){Bg(Fl(a,s),o,u);let O=PF(i?MF:RF,n.length,i,r,l,t);!i&&N&&(n[C].providerFactory=O),Fg(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),s.push(O)}else{let O=gC(n[i?C:y],l,!i&&r);Fg(o,t,y>-1?y:C,O)}!i&&r&&N&&n[C].componentProviders++}}}function Fg(t,e,n,r){let i=Di(e),o=mD(e);if(i||o){let u=(o?nt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(n);f===-1?l.push(n,[r,u]):l[f+1].push(r,u)}else l.push(n,u)}}}function gC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Lg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function RF(t,e,n,r,i){return im(this.multi,[])}function MF(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=La(r,r[q],this.providerFactory.index,i);s=u.slice(0,a),im(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],im(o,s);return s}function im(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function PF(t,e,n,r,i,o){let s=new Oi(t,n,V,null);return s.multi=[],s.index=e,s.componentProviders=0,gC(s,i,r&&!n),s}function It(t,e){return n=>{n.providersResolver=(r,i)=>wT(r,i?i(t):t,!1),e&&(n.viewProvidersResolver=(r,i)=>wT(r,i?i(e):e,!0))}}function xF(t,e,n,r){return mC(Z(),Pr(),t,e,n,r)}function kF(t,e,n,r,i){return yC(Z(),Pr(),t,e,n,r,i)}function OF(t,e,n,r,i,o){return LF(Z(),Pr(),t,e,n,r,i,o)}function FF(t,e,n,r,i,o,s){return VF(Z(),Pr(),t,e,n,r,i,o,s)}function Ya(t,e){let n=t[e];return n===Vt?void 0:n}function mC(t,e,n,r,i,o){let s=e+n;return Cn(t,s,i)?Wa(t,s+1,o?r.call(o,i):r(i)):Ya(t,s+1)}function yC(t,e,n,r,i,o,s){let a=e+n;return Ua(t,a,i,o)?Wa(t,a+2,s?r.call(s,i,o):r(i,o)):Ya(t,a+2)}function LF(t,e,n,r,i,o,s,a){let u=e+n;return xb(t,u,i,o,s)?Wa(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):Ya(t,u+3)}function VF(t,e,n,r,i,o,s,a,u){let l=e+n;return o1(t,l,i,o,s,a)?Wa(t,l+4,u?r.call(u,i,o,s,a):r(i,o,s,a)):Ya(t,l+4)}function BF(t,e,n,r,i,o){let s=e+n,a=!1;for(let u=0;u<i.length;u++)Cn(t,s++,i[u])&&(a=!0);return a?Wa(t,s,r.apply(o,i)):Ya(t,s)}function jF(t,e){let n=Qe(),r,i=t+xe;n.firstCreatePass?(r=UF(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=vr(r.type,!0)),s,a=yt(V);try{let u=Ol(!1),l=o();return Ol(u),og(n,Z(),i,l),l}finally{yt(a)}}function UF(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function $F(t,e,n){let r=t+xe,i=Z(),o=Sa(i,r);return Um(i,r)?mC(i,Pr(),e,o.transform,n,o):o.transform(n)}function HF(t,e,n,r){let i=t+xe,o=Z(),s=Sa(o,i);return Um(o,i)?yC(o,Pr(),e,s.transform,n,r,s):s.transform(n,r)}function qF(t,e,n){let r=t+xe,i=Z(),o=Sa(i,r);return Um(i,r)?BF(i,Pr(),e,o.transform,n,o):o.transform.apply(o,n)}function Um(t,e){return t[q].data[e].pure}function GF(t,e){return nd(t,e)}var Kl=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},zF=(()=>{class t{compileModuleSync(n){return new zl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Hp(n),o=rb(i.declarations).reduce((s,a)=>{let u=Tr(a);return u&&s.push(new Go(u)),s},[]);return new Kl(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var _C=(()=>{class t{applicationErrorHandler=L(Hn);appRef=L(Yo);taskService=L(xi);ngZone=L(Pe);zonelessEnabled=L(Pa);tracing=L(Ga,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new et;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ma):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(Ag,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Tg:Dg;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ma+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Tg(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vC(){return[{provide:Ir,useExisting:_C},{provide:Pe,useClass:ya},{provide:Pa,useValue:!0}]}function WF(){return typeof $localize<"u"&&$localize.locale||Ka}var Hi=new G("",{factory:()=>L(Hi,{optional:!0,skipSelf:!0})||WF()}),$m=new G("",{factory:()=>rF});function Zo(t,e){return Su(t,e?.equal)}var bC=Symbol("InputSignalNode#UNSET"),eL=U(x({},Nu),{transformFn:void 0,applyValueToInputSignal(t,e){oa(t,e)}});function CC(t,e){let n=Object.create(eL);n.value=t,n.transformFn=e?.transform;function r(){if(na(n),n.value===bC){let i=null;throw new $(-950,i)}return n.value}return r[mt]=n,r}var EC=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>sm(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function IC(t,e){return CC(t,e)}function tL(t){return CC(bC,t)}var RJ=(IC.required=tL,IC);var Hm=new G(""),nL=new G("");function Ja(t){return!t.moduleRef}function rL(t){let e=Ja(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Pe);return n.run(()=>{Ja(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Hn),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Ja(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Hm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Hm);s.add(o),t.moduleRef.onDestroy(()=>{Oa(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return oL(r,n,()=>{let o=e.get(xi),s=o.add(),a=e.get(xm);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Hi,Ka);if(rC(u||Ka),!e.get(nL,!0))return Ja(t)?e.get(Yo):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ja(t)){let f=e.get(Yo);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return iL?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var iL;function oL(t,e,n){try{let r=n();return $i(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var sd=null;function sL(t=[],e){return We.create({name:e,providers:[{provide:Zp,useValue:"platform"},{provide:Hm,useValue:new Set([()=>sd=null])},...t]})}function aL(t=[]){if(sd)return sd;let e=sL(t);return sd=e,Qb(),cL(e),e}function cL(t){let e=t.get(qT,null);Ar(t,()=>{e?.forEach(n=>n())})}function Km(){return!1}var Xo=(()=>{class t{static __NG_ELEMENT_ID__=uL}return t})();function uL(t){return lL(He(),Z(),(t&16)===16)}function lL(t,e,n){if(Mr(t)&&!n){let r=Kt(t.index,e);return new Or(r,r)}else if(t.type&175){let r=e[zt];return new Or(r,e)}return null}var qm=class{constructor(){}supports(e){return Rm(e)}create(e){return new Gm(e)}},dL=(t,e)=>e,Gm=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||dL}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<wC(r,i,o)?n:r,a=wC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,f=u-i;if(l!=f){for(let g=0;g<l;g++){let y=g<o.length?o[g]:o[g]=0,C=y+g;f<=C&&C<l&&(o[g]=y+1)}let p=s.previousIndex;o[p]=f-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Rm(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,Mb(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new zm(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new ad),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ad),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},zm=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Wm=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},ad=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Wm,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function wC(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function DC(){return new Qm([new qm])}var Qm=(()=>{class t{factories;static \u0275prov=Y({token:t,providedIn:"root",factory:DC});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=L(t,{optional:!0,skipSelf:!0});return t.create(n,r||DC())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new $(901,!1)}}return t})();function MJ(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;he(ue.BootstrapApplicationStart);try{let o=i?.injector??aL(r),s=[vC(),WD,...n||[]],a=new $a({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return rL({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{he(ue.BootstrapApplicationEnd)}}function cd(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var AC=null;function qi(){return AC}function fL(t){AC??=t}var Ym=class{},ud=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:()=>L(SC),providedIn:"platform"})}return t})();var SC=(()=>{class t extends ud{_location;_history;_doc=L(Un);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qi().getBaseHref(this._doc)}onPopState(n){let r=qi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=qi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function MC(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function NC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Lr(t){return t&&t[0]!=="?"?`?${t}`:t}var ld=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:()=>L(pL),providedIn:"root"})}return t})(),hL=new G(""),pL=(()=>{class t extends ld{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(Un).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return MC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Lr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Lr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Lr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(Re(ud),Re(hL,8))};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),PC=(()=>{class t{_subject=new tt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=yL(NC(RC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Lr(r))}normalize(n){return t.stripTrailingSlash(mL(this._basePath,RC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Lr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Lr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Lr;static joinWithSlash=MC;static stripTrailingSlash=NC;static \u0275fac=function(r){return new(r||t)(Re(ld))};static \u0275prov=Y({token:t,factory:()=>gL(),providedIn:"root"})}return t})();function gL(){return new PC(Re(ld))}function mL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function RC(t){return t.replace(/\/index.html$/,"")}function yL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var BC={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KGS:[void 0,"\u20C0"],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XCG:["Cg."],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},Ed=(function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t})(Ed||{});var lt=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(lt||{}),ge=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(ge||{}),Rt=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(Rt||{}),rt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function jC(t){return Et(t)[De.LocaleId]}function UC(t,e,n){let r=Et(t),i=[r[De.DayPeriodsFormat],r[De.DayPeriodsStandalone]],o=Jt(i,e);return Jt(o,n)}function $C(t,e,n){let r=Et(t),i=[r[De.DaysFormat],r[De.DaysStandalone]],o=Jt(i,e);return Jt(o,n)}function HC(t,e,n){let r=Et(t),i=[r[De.MonthsFormat],r[De.MonthsStandalone]],o=Jt(i,e);return Jt(o,n)}function qC(t,e){let r=Et(t)[De.Eras];return Jt(r,e)}function Za(t,e){let n=Et(t);return Jt(n[De.DateFormat],e)}function Xa(t,e){let n=Et(t);return Jt(n[De.TimeFormat],e)}function ec(t,e){let r=Et(t)[De.DateTimeFormat];return Jt(r,e)}function fn(t,e){let n=Et(t),r=n[De.NumberSymbols][e];if(typeof r>"u"){if(e===rt.CurrencyDecimal)return n[De.NumberSymbols][rt.Decimal];if(e===rt.CurrencyGroup)return n[De.NumberSymbols][rt.Group]}return r}function oy(t,e){return Et(t)[De.NumberFormats][e]}function _L(t){return Et(t)[De.Currencies]}function GC(t){if(!t[De.ExtraData])throw new $(2303,!1)}function zC(t){let e=Et(t);return GC(e),(e[De.ExtraData][2]||[]).map(r=>typeof r=="string"?Jm(r):[Jm(r[0]),Jm(r[1])])}function WC(t,e,n){let r=Et(t);GC(r);let i=[r[De.ExtraData][0],r[De.ExtraData][1]],o=Jt(i,e)||[];return Jt(o,n)||[]}function Jt(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new $(2304,!1)}function Jm(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}function KC(t,e,n="en"){let r=_L(n)[t]||BC[t]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||t}var vL=2;function QC(t){let e,n=BC[t];return n&&(e=n[2]),typeof e=="number"?e:vL}var EL=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,dd={},IL=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function YC(t,e,n,r){let i=RL(t);e=zn(n,e)||e;let s=[],a;for(;e;)if(a=IL.exec(e),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;e=f}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=ZC(r,u),i=NL(i,r));let l="";return s.forEach(f=>{let p=AL(f);l+=p?p(i,n,u):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function md(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function zn(t,e){let n=jC(t);if(dd[n]??={},dd[n][e])return dd[n][e];let r="";switch(e){case"shortDate":r=Za(t,Rt.Short);break;case"mediumDate":r=Za(t,Rt.Medium);break;case"longDate":r=Za(t,Rt.Long);break;case"fullDate":r=Za(t,Rt.Full);break;case"shortTime":r=Xa(t,Rt.Short);break;case"mediumTime":r=Xa(t,Rt.Medium);break;case"longTime":r=Xa(t,Rt.Long);break;case"fullTime":r=Xa(t,Rt.Full);break;case"short":let i=zn(t,"shortTime"),o=zn(t,"shortDate");r=fd(ec(t,Rt.Short),[i,o]);break;case"medium":let s=zn(t,"mediumTime"),a=zn(t,"mediumDate");r=fd(ec(t,Rt.Medium),[s,a]);break;case"long":let u=zn(t,"longTime"),l=zn(t,"longDate");r=fd(ec(t,Rt.Long),[u,l]);break;case"full":let f=zn(t,"fullTime"),p=zn(t,"fullDate");r=fd(ec(t,Rt.Full),[f,p]);break}return r&&(dd[n][e]=r),r}function fd(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function dn(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function wL(t,e){return dn(t,3).substring(0,e)}function ke(t,e,n=0,r=!1,i=!1){return function(o,s){let a=DL(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return wL(a,e);let u=fn(s,rt.MinusSign);return dn(a,e,u,r,i)}}function DL(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new $(2301,!1)}}function _e(t,e,n=lt.Format,r=!1){return function(i,o){return TL(i,o,t,e,n,r)}}function TL(t,e,n,r,i,o){switch(n){case 2:return HC(e,i,r)[t.getMonth()];case 1:return $C(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=zC(e),f=WC(e,i,r),p=l.findIndex(g=>{if(Array.isArray(g)){let[y,C]=g,R=s>=y.hours&&a>=y.minutes,N=s<C.hours||s===C.hours&&a<C.minutes;if(y.hours<C.hours){if(R&&N)return!0}else if(R||N)return!0}else if(g.hours===s&&g.minutes===a)return!0;return!1});if(p!==-1)return f[p]}return UC(e,i,r)[s<12?0:1];case 3:return qC(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new $(2302,!1)}}function hd(t){return function(e,n,r){let i=-1*r,o=fn(n,rt.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+dn(s,2,o)+dn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+dn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+dn(s,2,o)+":"+dn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+dn(s,2,o)+":"+dn(Math.abs(i%60),2,o);default:throw new $(2310,!1)}}}var bL=0,gd=4;function CL(t){let e=md(t,bL,1).getDay();return md(t,0,1+(e<=gd?gd:gd+7)-e)}function JC(t){let e=t.getDay(),n=e===0?-3:gd-e;return md(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Zm(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=JC(n),s=CL(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return dn(i,t,fn(r,rt.MinusSign))}}function pd(t,e=!1){return function(n,r){let o=JC(n).getFullYear();return dn(o,t,fn(r,rt.MinusSign),e)}}var Xm={};function AL(t){if(Xm[t])return Xm[t];let e;switch(t){case"G":case"GG":case"GGG":e=_e(3,ge.Abbreviated);break;case"GGGG":e=_e(3,ge.Wide);break;case"GGGGG":e=_e(3,ge.Narrow);break;case"y":e=ke(0,1,0,!1,!0);break;case"yy":e=ke(0,2,0,!0,!0);break;case"yyy":e=ke(0,3,0,!1,!0);break;case"yyyy":e=ke(0,4,0,!1,!0);break;case"Y":e=pd(1);break;case"YY":e=pd(2,!0);break;case"YYY":e=pd(3);break;case"YYYY":e=pd(4);break;case"M":case"L":e=ke(1,1,1);break;case"MM":case"LL":e=ke(1,2,1);break;case"MMM":e=_e(2,ge.Abbreviated);break;case"MMMM":e=_e(2,ge.Wide);break;case"MMMMM":e=_e(2,ge.Narrow);break;case"LLL":e=_e(2,ge.Abbreviated,lt.Standalone);break;case"LLLL":e=_e(2,ge.Wide,lt.Standalone);break;case"LLLLL":e=_e(2,ge.Narrow,lt.Standalone);break;case"w":e=Zm(1);break;case"ww":e=Zm(2);break;case"W":e=Zm(1,!0);break;case"d":e=ke(2,1);break;case"dd":e=ke(2,2);break;case"c":case"cc":e=ke(7,1);break;case"ccc":e=_e(1,ge.Abbreviated,lt.Standalone);break;case"cccc":e=_e(1,ge.Wide,lt.Standalone);break;case"ccccc":e=_e(1,ge.Narrow,lt.Standalone);break;case"cccccc":e=_e(1,ge.Short,lt.Standalone);break;case"E":case"EE":case"EEE":e=_e(1,ge.Abbreviated);break;case"EEEE":e=_e(1,ge.Wide);break;case"EEEEE":e=_e(1,ge.Narrow);break;case"EEEEEE":e=_e(1,ge.Short);break;case"a":case"aa":case"aaa":e=_e(0,ge.Abbreviated);break;case"aaaa":e=_e(0,ge.Wide);break;case"aaaaa":e=_e(0,ge.Narrow);break;case"b":case"bb":case"bbb":e=_e(0,ge.Abbreviated,lt.Standalone,!0);break;case"bbbb":e=_e(0,ge.Wide,lt.Standalone,!0);break;case"bbbbb":e=_e(0,ge.Narrow,lt.Standalone,!0);break;case"B":case"BB":case"BBB":e=_e(0,ge.Abbreviated,lt.Format,!0);break;case"BBBB":e=_e(0,ge.Wide,lt.Format,!0);break;case"BBBBB":e=_e(0,ge.Narrow,lt.Format,!0);break;case"h":e=ke(3,1,-12);break;case"hh":e=ke(3,2,-12);break;case"H":e=ke(3,1);break;case"HH":e=ke(3,2);break;case"m":e=ke(4,1);break;case"mm":e=ke(4,2);break;case"s":e=ke(5,1);break;case"ss":e=ke(5,2);break;case"S":e=ke(6,1);break;case"SS":e=ke(6,2);break;case"SSS":e=ke(6,3);break;case"Z":case"ZZ":case"ZZZ":e=hd(0);break;case"ZZZZZ":e=hd(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=hd(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=hd(2);break;default:return null}return Xm[t]=e,e}function ZC(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function SL(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function NL(t,e,n){let i=t.getTimezoneOffset(),o=ZC(e,i);return SL(t,-1*(o-i))}function RL(t){if(xC(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return md(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(EL))return ML(r)}let e=new Date(t);if(!xC(e))throw new $(2311,!1);return e}function ML(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function xC(t){return t instanceof Date&&!isNaN(t.valueOf())}var PL=/^(\d+)?\.((\d+)(-(\d+))?)?$/,kC=22,yd=".",tc="0",xL=";",kL=",",ey="#",OC="\xA4";function XC(t,e,n,r,i,o,s=!1){let a="",u=!1;if(!isFinite(t))a=fn(n,rt.Infinity);else{let l=FL(t);s&&(l=OL(l));let f=e.minInt,p=e.minFrac,g=e.maxFrac;if(o){let K=o.match(PL);if(K===null)throw new $(2306,!1);let ce=K[1],Ue=K[3],Xe=K[5];ce!=null&&(f=ty(ce)),Ue!=null&&(p=ty(Ue)),Xe!=null?g=ty(Xe):Ue!=null&&p>g&&(g=p)}LL(l,p,g);let y=l.digits,C=l.integerLen,R=l.exponent,N=[];for(u=y.every(K=>!K);C<f;C++)y.unshift(0);for(;C<0;C++)y.unshift(0);C>0?N=y.splice(C,y.length):(N=y,y=[0]);let O=[];for(y.length>=e.lgSize&&O.unshift(y.splice(-e.lgSize,y.length).join(""));y.length>e.gSize;)O.unshift(y.splice(-e.gSize,y.length).join(""));y.length&&O.unshift(y.join("")),a=O.join(fn(n,r)),N.length&&(a+=fn(n,i)+N.join("")),R&&(a+=fn(n,rt.Exponential)+"+"+R)}return t<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function eA(t,e,n,r,i){let o=oy(e,Ed.Currency),s=nA(o,fn(e,rt.MinusSign));return s.minFrac=QC(r),s.maxFrac=s.minFrac,XC(t,s,e,rt.CurrencyGroup,rt.CurrencyDecimal,i).replace(OC,n).replace(OC,"").trim()}function tA(t,e,n){let r=oy(e,Ed.Decimal),i=nA(r,fn(e,rt.MinusSign));return XC(t,i,e,rt.Group,rt.Decimal,n)}function nA(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(xL),i=r[0],o=r[1],s=i.indexOf(yd)!==-1?i.split(yd):[i.substring(0,i.lastIndexOf(tc)+1),i.substring(i.lastIndexOf(tc)+1)],a=s[0],u=s[1]||"";n.posPre=a.substring(0,a.indexOf(ey));for(let f=0;f<u.length;f++){let p=u.charAt(f);p===tc?n.minFrac=n.maxFrac=f+1:p===ey?n.maxFrac=f+1:n.posSuf+=p}let l=a.split(kL);if(n.gSize=l[1]?l[1].length:0,n.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let f=i.length-n.posPre.length-n.posSuf.length,p=o.indexOf(ey);n.negPre=o.substring(0,p).replace(/'/g,""),n.negSuf=o.slice(p+f).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function OL(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function FL(t){let e=Math.abs(t)+"",n=0,r,i,o,s,a;for((i=e.indexOf(yd))>-1&&(e=e.replace(yd,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===tc;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===tc;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>kC&&(r=r.splice(0,kC-1),n=i-1,i=1),{digits:r,exponent:n,integerLen:i}}function LL(t,e,n){if(e>n)throw new $(2307,!1);let r=t.digits,i=r.length-t.integerLen,o=Math.min(Math.max(e,i),n),s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let p=s;p<r.length;p++)r[p]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let p=1;p<s;p++)r[p]=0}if(a>=5)if(s-1<0){for(let p=0;p>s;p--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=o!==0,l=e+t.integerLen,f=r.reduceRight(function(p,g,y,C){return g=g+p,C[y]=g<10?g:g-10,u&&(C[y]===0&&y>=l?C.pop():u=!1),g>=10?1:0},0);f&&(r.unshift(f),t.integerLen++)}function ty(t){let e=parseInt(t);if(isNaN(e))throw new $(2305,!1);return e}var ny=/\s+/,FC=[],VL=(()=>{class t{_ngEl;_renderer;initialClasses=FC;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(ny):FC}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(ny):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(ny).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(V(Lt),V(qn))};static \u0275dir=pe({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var _d=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},rA=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new _d(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),LC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);LC(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(V(ji),V(Fr),V(Qm))};static \u0275dir=pe({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function LC(t,e){t.context.$implicit=e.item}var BL=(()=>{class t{_viewContainer;_context=new vd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){VC(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){VC(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(V(ji),V(Fr))};static \u0275dir=pe({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),vd=class{$implicit=null;ngIf=null};function VC(t,e){if(t&&!t.createEmbeddedView)throw new $(2020,!1)}function Id(t,e){return new $(2100,!1)}var ry=class{createSubscription(e,n,r){return Nt(()=>e.subscribe({next:n,error:r}))}dispose(e){Nt(()=>e.unsubscribe())}},iy=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},jL=new iy,UL=new ry,$L=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=L(Hn);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if($i(n))return jL;if(od(n))return UL;throw Id(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(V(Xo,16))};static \u0275pipe=Qo({name:"async",type:t,pure:!1})}return t})();var HL="mediumDate",iA=new G(""),oA=new G(""),qL=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??HL,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return YC(n,s,o||this.locale,a)}catch(s){throw Id(t,s.message)}}static \u0275fac=function(r){return new(r||t)(V(Hi,16),V(iA,24),V(oA,24))};static \u0275pipe=Qo({name:"date",type:t,pure:!0})}return t})();var GL=(()=>{class t{_locale;constructor(n){this._locale=n}transform(n,r,i){if(!sA(n))return null;i||=this._locale;try{let o=aA(n);return tA(o,i,r)}catch(o){throw Id(t,o.message)}}static \u0275fac=function(r){return new(r||t)(V(Hi,16))};static \u0275pipe=Qo({name:"number",type:t,pure:!0})}return t})();var zL=(()=>{class t{_locale;_defaultCurrencyCode;constructor(n,r="USD"){this._locale=n,this._defaultCurrencyCode=r}transform(n,r=this._defaultCurrencyCode,i="symbol",o,s){if(!sA(n))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=KC(a,i==="symbol"?"wide":"narrow",s):a=i);try{let u=aA(n);return eA(u,s,a,r,o)}catch(u){throw Id(t,u.message)}}static \u0275fac=function(r){return new(r||t)(V(Hi,16),V($m,16))};static \u0275pipe=Qo({name:"currency",type:t,pure:!0})}return t})();function sA(t){return!(t==null||t===""||t!==t)}function aA(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new $(2309,!1);return t}var WL=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ui({type:t});static \u0275inj=Dr({})}return t})();function KL(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var sy=class{};function GZ(t,e,n){return Vm(t,e,n)}var zZ="browser";var cA=()=>{};var dA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},QL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},wd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(n[f],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new cy;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},cy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},YL=function(t){let e=dA(t);return wd.encodeByteArray(e,!0)},rc=function(t){return YL(t).replace(/\./g,"")},Dd=function(t){try{return wd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ly(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var JL=()=>ly().__FIREBASE_DEFAULTS__,ZL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},XL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Dd(t[1]);return e&&JSON.parse(e)},Td=()=>{try{return cA()||JL()||ZL()||XL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dy=t=>Td()?.emulatorHosts?.[t],fA=t=>{let e=dy(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},fy=()=>Td()?.config,hy=t=>Td()?.[`_${t}`];var Gi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Vr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bd(t){return(await fetch(t,{credentials:"include"})).ok}function hA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=x({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rc(JSON.stringify(n)),rc(JSON.stringify(s)),""].join(".")}var nc={};function eV(){let t={prod:[],emulator:[]};for(let e of Object.keys(nc))nc[e]?t.emulator.push(e):t.prod.push(e);return t}function tV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var uA=!1;function Cd(t,e){if(typeof window>"u"||typeof document>"u"||!Vr(window.location.host)||nc[t]===e||nc[t]||uA)return;nc[t]=e;function n(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=eV().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{uA=!0,s()},g}function f(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=tV(r),y=n("text"),C=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),N=document.getElementById(R)||document.createElement("a"),O=n("preprendIcon"),K=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let ce=g.element;a(ce),f(N,R);let Ue=l();u(K,O),ce.append(K,C,N,Ue),document.body.appendChild(ce)}o?(C.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function nV(){let t=Td()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _A(){let t=Ye();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vA(){return!nV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ic(){try{return typeof indexedDB=="object"}catch{return!1}}function EA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var rV="FirebaseError",Bt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=rV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hn.prototype.create)}},hn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?iV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Bt(i,a,r)}};function iV(t,e){return t.replace(oV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var oV=/\{\$([^}]+)}/g;function IA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function An(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(lA(o)&&lA(s)){if(!An(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function lA(t){return t!==null&&typeof t=="object"}function oc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function es(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ts(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function wA(t,e){let n=new uy(t,e);return n.subscribe.bind(n)}var uy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ay),i.error===void 0&&(i.error=ay),i.complete===void 0&&(i.complete=ay);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function sV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ay(){}var tX=14400*1e3;function ye(t){return t&&t._delegate?t._delegate:t}var wt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var zi="[DEFAULT]";var py=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Gi;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cV(e))try{this.getOrInitializeService({instanceIdentifier:zi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zi){return this.instances.has(e)}getOptions(e=zi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zi){return this.component?this.component.multipleInstances?e:zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function aV(t){return t===zi?void 0:t}function cV(t){return t.instantiationMode==="EAGER"}var Ad=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new py(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var uV=[],re=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(re||{}),lV={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},dV=re.INFO,fV={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},hV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=fV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Sn=class{constructor(e){this.name=e,this._logLevel=dV,this._logHandler=hV,this._userLogHandler=null,uV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}};var pV=(t,e)=>e.some(n=>t instanceof n),DA,TA;function gV(){return DA||(DA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mV(){return TA||(TA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var bA=new WeakMap,my=new WeakMap,CA=new WeakMap,gy=new WeakMap,_y=new WeakMap;function yV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Nn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&bA.set(n,t)}).catch(()=>{}),_y.set(e,t),e}function _V(t){if(my.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});my.set(t,e)}var yy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return my.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AA(t){yy=t(yy)}function vV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Sd(this),e,...n);return CA.set(r,e.sort?e.sort():[e]),Nn(r)}:mV().includes(t)?function(...e){return t.apply(Sd(this),e),Nn(bA.get(this))}:function(...e){return Nn(t.apply(Sd(this),e))}}function EV(t){return typeof t=="function"?vV(t):(t instanceof IDBTransaction&&_V(t),pV(t,gV())?new Proxy(t,yy):t)}function Nn(t){if(t instanceof IDBRequest)return yV(t);if(gy.has(t))return gy.get(t);let e=EV(t);return e!==t&&(gy.set(t,e),_y.set(e,t)),e}var Sd=t=>_y.get(t);function NA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Nn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Nn(s.result),u.oldVersion,u.newVersion,Nn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var IV=["get","getKey","getAll","getAllKeys","count"],wV=["put","add","delete","clear"],vy=new Map;function SA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vy.get(e))return vy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=wV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||IV.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return vy.set(e,o),o}AA(t=>U(x({},t),{get:(e,n,r)=>SA(e,n)||t.get(e,n,r),has:(e,n)=>!!SA(e,n)||t.has(e,n)}));var Iy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function DV(t){return t.getComponent()?.type==="VERSION"}var wy="@firebase/app",RA="0.14.6";var Wn=new Sn("@firebase/app"),TV="@firebase/app-compat",bV="@firebase/analytics-compat",CV="@firebase/analytics",AV="@firebase/app-check-compat",SV="@firebase/app-check",NV="@firebase/auth",RV="@firebase/auth-compat",MV="@firebase/database",PV="@firebase/data-connect",xV="@firebase/database-compat",kV="@firebase/functions",OV="@firebase/functions-compat",FV="@firebase/installations",LV="@firebase/installations-compat",VV="@firebase/messaging",BV="@firebase/messaging-compat",jV="@firebase/performance",UV="@firebase/performance-compat",$V="@firebase/remote-config",HV="@firebase/remote-config-compat",qV="@firebase/storage",GV="@firebase/storage-compat",zV="@firebase/firestore",WV="@firebase/ai",KV="@firebase/firestore-compat",QV="firebase",YV="12.6.0";var Dy="[DEFAULT]",JV={[wy]:"fire-core",[TV]:"fire-core-compat",[CV]:"fire-analytics",[bV]:"fire-analytics-compat",[SV]:"fire-app-check",[AV]:"fire-app-check-compat",[NV]:"fire-auth",[RV]:"fire-auth-compat",[MV]:"fire-rtdb",[PV]:"fire-data-connect",[xV]:"fire-rtdb-compat",[kV]:"fire-fn",[OV]:"fire-fn-compat",[FV]:"fire-iid",[LV]:"fire-iid-compat",[VV]:"fire-fcm",[BV]:"fire-fcm-compat",[jV]:"fire-perf",[UV]:"fire-perf-compat",[$V]:"fire-rc",[HV]:"fire-rc-compat",[qV]:"fire-gcs",[GV]:"fire-gcs-compat",[zV]:"fire-fst",[KV]:"fire-fst-compat",[WV]:"fire-vertex","fire-js":"fire-js",[QV]:"fire-js-all"};var sc=new Map,ZV=new Map,Ty=new Map;function MA(t,e){try{t.container.addComponent(e)}catch(n){Wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pn(t){let e=t.name;if(Ty.has(e))return Wn.debug(`There were multiple attempts to register component ${e}.`),!1;Ty.set(e,t);for(let n of sc.values())MA(n,t);for(let n of ZV.values())MA(n,t);return!0}function ns(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mt(t){return t==null?!1:t.settings!==void 0}var XV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new hn("app","Firebase",XV);var by=class{constructor(e,n,r){this._isDeleted=!1,this._options=x({},e),this._config=x({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}};var jr=YV;function Sy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=x({name:Dy,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Br.create("bad-app-name",{appName:String(i)});if(n||(n=fy()),!n)throw Br.create("no-options");let o=sc.get(i);if(o){if(An(n,o.options)&&An(r,o.config))return o;throw Br.create("duplicate-app",{appName:i})}let s=new Ad(i);for(let u of Ty.values())s.addComponent(u);let a=new by(n,r,s);return sc.set(i,a),a}function Wi(t=Dy){let e=sc.get(t);if(!e&&t===Dy&&fy())return Sy();if(!e)throw Br.create("no-app",{appName:t});return e}function Nd(){return Array.from(sc.values())}function Se(t,e,n){let r=JV[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wn.warn(s.join(" "));return}pn(new wt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var e2="firebase-heartbeat-database",t2=1,ac="firebase-heartbeat-store",Ey=null;function OA(){return Ey||(Ey=NA(e2,t2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ac)}catch(n){console.warn(n)}}}}).catch(t=>{throw Br.create("idb-open",{originalErrorMessage:t.message})})),Ey}async function n2(t){try{let n=(await OA()).transaction(ac),r=await n.objectStore(ac).get(FA(t));return await n.done,r}catch(e){if(e instanceof Bt)Wn.warn(e.message);else{let n=Br.create("idb-get",{originalErrorMessage:e?.message});Wn.warn(n.message)}}}async function PA(t,e){try{let r=(await OA()).transaction(ac,"readwrite");await r.objectStore(ac).put(e,FA(t)),await r.done}catch(n){if(n instanceof Bt)Wn.warn(n.message);else{let r=Br.create("idb-set",{originalErrorMessage:n?.message});Wn.warn(r.message)}}}function FA(t){return`${t.name}!${t.options.appId}`}var r2=1024,i2=30,Cy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Ay(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>i2){let i=s2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Wn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=xA(),{heartbeatsToSend:n,unsentEntries:r}=o2(this._heartbeatsCache.heartbeats),i=rc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Wn.warn(e),""}}};function xA(){return new Date().toISOString().substring(0,10)}function o2(t,e=r2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),kA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Ay=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ic()?EA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await n2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return PA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return PA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function kA(t){return rc(JSON.stringify({version:2,heartbeats:t})).length}function s2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function a2(t){pn(new wt("platform-logger",e=>new Iy(e),"PRIVATE")),pn(new wt("heartbeat",e=>new Cy(e),"PRIVATE")),Se(wy,RA,t),Se(wy,RA,"esm2020"),Se("fire-js","")}a2("");var c2="firebase",u2="12.7.0";Se(c2,u2,"app");function LA(t){t===void 0&&(t=L(We));let e=t.get(jo);return n=>new ne(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Ur=new _r("ANGULARFIRE2_VERSION");function cc(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var is=(t,e)=>{let n=e?[e]:Nd(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},rs=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(rs||{}),VA=Km()&&typeof Zone<"u"?rs.WARN:rs.SILENT;var Rd=class{zone;delegate;constructor(e,n=hp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},$r=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=L(Pe);this.outsideAngular=n.runOutsideAngular(()=>new Rd(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Rd(typeof Zone>"u"?void 0:Zone.current,fp))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),BA=!1;function l2(t,e){!BA&&(VA>rs.SILENT||Km())&&(BA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),VA>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function d2(t){let e=L(Pe,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Ki(t){let e=L(Pe,{optional:!0});return e?e.run(()=>t()):t()}var f2=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),Ar(n,()=>Ki(()=>t.apply(void 0,r)))),ve=(t,e,n)=>(n||=e?rs.WARN:rs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=L($r),s=L(jo),a=L(St)}catch{return l2(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Ki(()=>s.add())),i[l]=f2(i[l],r,a));let u=d2(()=>t.apply(this,i));return e?u instanceof ne?u.pipe(yr(o.outsideAngular),mr(o.insideAngular),LA(a)):u instanceof Promise?Ki(()=>{let l=s.add();return new Promise((f,p)=>{u.then(g=>Ar(a,()=>Ki(()=>f(g))),g=>Ar(a,()=>Ki(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Ki(()=>u):u instanceof ne?u.pipe(yr(o.outsideAngular),mr(o.insideAngular)):Ki(()=>u)});var Kn=class{constructor(e){return e}},Qi=class{constructor(){return Nd()}};function h2(t){return t&&t.length===1?t[0]:new Kn(Wi())}var Ny=new G("angularfire2._apps"),p2={provide:Kn,useFactory:h2,deps:[[new Ft,Ny]]},g2={provide:Qi,deps:[[new Ft,Ny]]};function m2(t){return(e,n)=>{let r=n.get(cm);Se("angularfire",Ur.full,"core"),Se("angularfire",Ur.full,"app"),Se("angular",Op.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Kn(i)}}function KX(t,...e){return Cr([p2,g2,{provide:Ny,useFactory:m2(t),multi:!0,deps:[Pe,We,$r,...e]}])}var QX=ve(Sy,!0);var y2=new Map,_2={activated:!1,tokenObservers:[]},v2={initialized:!1,enabled:!1};function gn(t){return y2.get(t)||x({},_2)}function HA(){return v2}var E2="https://content-firebaseappcheck.googleapis.com/v1";var I2="exchangeDebugToken",jA={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},iee=1440*60*1e3;var Py=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Gi,this.pending.promise.catch(n=>{}),await w2(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Gi,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function w2(t){return new Promise(e=>{setTimeout(e,t)})}var D2={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Hr=new hn("appCheck","AppCheck",D2);function qA(t){if(!gn(t).activated)throw Hr.create("use-before-activation",{appName:t.name})}async function GA({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(p){throw Hr.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw Hr.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw Hr.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Hr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,f=Date.now();return{token:a.token,expireTimeMillis:f+l,issuedAtTimeMillis:f}}function zA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${E2}/projects/${n}/apps/${r}:${I2}?key=${i}`,body:{debug_token:e}}}var T2="firebase-app-check-database",b2=1,xy="firebase-app-check-store";var Md=null;function C2(){return Md||(Md=new Promise((t,e)=>{try{let n=indexedDB.open(T2,b2);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{e(Hr.create("storage-open",{originalErrorMessage:r.target.error?.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(xy,{keyPath:"compositeKey"})}}}catch(n){e(Hr.create("storage-open",{originalErrorMessage:n?.message}))}}),Md)}function A2(t,e){return S2(N2(t),e)}async function S2(t,e){let r=(await C2()).transaction(xy,"readwrite"),o=r.objectStore(xy).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{a(Hr.create("storage-set",{originalErrorMessage:u.target.error?.message}))}})}function N2(t){return`${t.options.appId}-${t.name}`}var uc=new Sn("@firebase/app-check");function Ry(t,e){return ic()?A2(t,e).catch(n=>{uc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function WA(){return HA().enabled}async function KA(){let t=HA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var R2={error:"UNKNOWN_ERROR"};function M2(t){return wd.encodeString(JSON.stringify(t),!1)}async function ky(t,e=!1,n=!1){let r=t.app;qA(r);let i=gn(r),o=i.token,s;if(o&&!lc(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(lc(l)?o=l:await Ry(r,void 0))}if(!e&&o&&lc(o))return{token:o.token};let a=!1;if(WA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=GA(zA(r,await KA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await Ry(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?uc.warn(l.message):n&&uc.error(l),My(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await gn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?uc.warn(l.message):n&&uc.error(l),s=l}let u;return o?s?lc(o)?u={token:o.token,internalError:s}:u=My(s):(u={token:o.token},i.token=o,await Ry(r,o)):u=My(s),a&&O2(r,u),u}async function P2(t){let e=t.app;qA(e);let{provider:n}=gn(e);if(WA()){let r=await KA(),{token:i}=await GA(zA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function x2(t,e,n,r){let{app:i}=t,o=gn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&lc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),UA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>UA(t))}function QA(t,e){let n=gn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function UA(t){let{app:e}=t,n=gn(e),r=n.tokenRefresher;r||(r=k2(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function k2(t){let{app:e}=t;return new Py(async()=>{let n=gn(e),r;if(n.token?r=await ky(t,!0):r=await ky(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=gn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},jA.RETRIAL_MIN_WAIT,jA.RETRIAL_MAX_WAIT)}function O2(t,e){let n=gn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function lc(t){return t.expireTimeMillis-Date.now()>0}function My(t){return{token:M2(R2),error:t}}var Oy=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=gn(this.app);for(let n of e)QA(this.app,n.next);return Promise.resolve()}};function F2(t,e){return new Oy(t,e)}function L2(t){return{getToken:e=>ky(t,e),getLimitedUseToken:()=>P2(t),addTokenListener:e=>x2(t,"INTERNAL",e),removeTokenListener:e=>QA(t.app,e)}}var V2="@firebase/app-check",B2="0.11.0";var j2="app-check",$A="app-check-internal";function U2(){pn(new wt(j2,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return F2(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider($A).initialize()})),pn(new wt($A,t=>{let e=t.getProvider("app-check").getImmediate();return L2(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Se(V2,B2)}U2();var $2="app-check";var os=class{constructor(){return is($2)}};var H2=["localhost","0.0.0.0","127.0.0.1"],yee=typeof window<"u"&&H2.includes(window.location.hostname);function dS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var fS=dS,hS=new hn("auth","Firebase",dS());var Ld=new Sn("@firebase/auth");function q2(t,...e){Ld.logLevel<=re.WARN&&Ld.warn(`Auth (${jr}): ${t}`,...e)}function xd(t,...e){Ld.logLevel<=re.ERROR&&Ld.error(`Auth (${jr}): ${t}`,...e)}function Mn(t,...e){throw s_(t,...e)}function Yi(t,...e){return s_(t,...e)}function pS(t,e,n){let r=U(x({},fS()),{[e]:n});return new hn("auth","Firebase",r).create(e,{appName:t.name})}function Jn(t){return pS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function s_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return hS.create(t,...e)}function H(t,e,...n){if(!t)throw s_(e,...n)}function Qn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw xd(e),new Error(e)}function zr(t,e){t||Qn(e)}function By(){return typeof self<"u"&&self.location?.href||""}function G2(){return YA()==="http:"||YA()==="https:"}function YA(){return typeof self<"u"&&self.location?.protocol||null}function z2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(G2()||mA()||"connection"in navigator)?navigator.onLine:!0}function W2(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Ji=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,zr(n>e,"Short delay should be less than long delay!"),this.isMobile=pA()||yA()}get(){return z2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function a_(t,e){zr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Vd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var K2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Q2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Y2=new Ji(3e4,6e4);function Zn(t,e){return t.tenantId&&!e.tenantId?U(x({},e),{tenantId:t.tenantId}):e}async function Pn(t,e,n,r,i={}){return gS(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=oc(x({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=x({method:e,headers:u},o);return gA()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Vr(t.emulatorConfig.host)&&(l.credentials="include"),Vd.fetch()(await mS(t,t.config.apiHost,n,a),l)})}async function gS(t,e,n){t._canInitEmulator=!1;let r=x(x({},K2),e);try{let i=new jy(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Pd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pd(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Pd(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Pd(t,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw pS(t,f,l);Mn(t,f)}}catch(i){if(i instanceof Bt)throw i;Mn(t,"network-request-failed",{message:String(i)})}}async function _c(t,e,n,r,i={}){let o=await Pn(t,e,n,r,i);return"mfaPendingCredential"in o&&Mn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function mS(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?a_(t.config,i):`${t.config.apiScheme}://${i}`;return Q2.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function J2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var jy=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Yi(this.auth,"network-request-failed")),Y2.get())})}};function Pd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Yi(t,e,r);return i.customData._tokenResponse=n,i}function JA(t){return t!==void 0&&t.enterprise!==void 0}var Uy=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return J2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function Z2(t,e){return Pn(t,"GET","/v2/recaptchaConfig",Zn(t,e))}async function X2(t,e){return Pn(t,"POST","/v1/accounts:delete",e)}async function Bd(t,e){return Pn(t,"POST","/v1/accounts:lookup",e)}function fc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function c_(t,e=!1){let n=ye(t),r=await n.getIdToken(e),i=u_(r);H(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:fc(Fy(i.auth_time)),issuedAtTime:fc(Fy(i.iat)),expirationTime:fc(Fy(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Fy(t){return Number(t)*1e3}function u_(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return xd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Dd(n);return i?JSON.parse(i):(xd("Failed to decode base64 JWT payload"),null)}catch(i){return xd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ZA(t){let e=u_(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ss(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bt&&eB(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var $y=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var pc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fc(this.lastLoginAt),this.creationTime=fc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function jd(t){let e=t.auth,n=await t.getIdToken(),r=await ss(t,Bd(e,{idToken:n}));H(r?.users.length,e,"internal-error");let i=r.users[0];t._notifyReloadListener(i);let o=i.providerUserInfo?.length?yS(i.providerUserInfo):[],s=tB(t.providerData,o),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!s?.length,l=a?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new pc(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(t,f)}async function l_(t){let e=ye(t);await jd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function yS(t){return t.map(r=>{var i=r,{providerId:e}=i,n=Gh(i,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function nB(t,e){let n=await gS(t,{},async()=>{let r=oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await mS(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Vr(t.emulatorConfig.host)&&(u.credentials="include"),Vd.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rB(t,e){return Pn(t,"POST","/v2/accounts:revokeToken",Zn(t,e))}var hc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ZA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){H(e.length!==0,"internal-error");let n=ZA(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(H(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await nB(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(H(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(H(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(H(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Qn("not implemented")}};function qr(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Gr=class t{constructor(o){var s=o,{uid:e,auth:n,stsTokenManager:r}=s,i=Gh(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $y(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new pc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let n=await ss(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return c_(this,e)}reload(){return l_(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>x({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(U(x({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await jd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mt(this.auth.app))return Promise.reject(Jn(this.auth));let e=await this.getIdToken();return await ss(this,X2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return U(x({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>x({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let r=n.displayName??void 0,i=n.email??void 0,o=n.phoneNumber??void 0,s=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,l=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:C,stsTokenManager:R}=n;H(p&&R,e,"internal-error");let N=hc.fromJSON(this.name,R);H(typeof p=="string",e,"internal-error"),qr(r,e.name),qr(i,e.name),H(typeof g=="boolean",e,"internal-error"),H(typeof y=="boolean",e,"internal-error"),qr(o,e.name),qr(s,e.name),qr(a,e.name),qr(u,e.name),qr(l,e.name),qr(f,e.name);let O=new t({uid:p,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:N,createdAt:l,lastLoginAt:f});return C&&Array.isArray(C)&&(O.providerData=C.map(K=>x({},K))),u&&(O._redirectEventId=u),O}static async _fromIdTokenResponse(e,n,r=!1){let i=new hc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await jd(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];H(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?yS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new hc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new pc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var XA=new Map;function Yn(t){zr(t instanceof Function,"Expected a class definition");let e=XA.get(t);return e?(zr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,XA.set(t,e),e)}var iB=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Hy=iB;function kd(t,e,n){return`firebase:${t}:${e}:${n}`}var Ud=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=kd(this.userKey,i.apiKey,o),this.fullPersistenceKey=kd("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Bd(this.auth,{idToken:e}).catch(()=>{});return n?Gr._fromGetAccountInfoResponse(this.auth,n,e):null}return Gr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(Yn(Hy),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Yn(Hy),s=kd(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let f=await l._get(s);if(f){let p;if(typeof f=="string"){let g=await Bd(e,{idToken:f}).catch(()=>{});if(!g)break;p=await Gr._fromGetAccountInfoResponse(e,g,f)}else p=Gr._fromJSON(e,f);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function eS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_S(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DS(e))return"Blackberry";if(TS(e))return"Webos";if(vS(e))return"Safari";if((e.includes("chrome/")||ES(e))&&!e.includes("edge/"))return"Chrome";if(wS(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function _S(t=Ye()){return/firefox\//i.test(t)}function vS(t=Ye()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ES(t=Ye()){return/crios\//i.test(t)}function IS(t=Ye()){return/iemobile/i.test(t)}function wS(t=Ye()){return/android/i.test(t)}function DS(t=Ye()){return/blackberry/i.test(t)}function TS(t=Ye()){return/webos/i.test(t)}function d_(t=Ye()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oB(t=Ye()){return d_(t)&&!!window.navigator?.standalone}function sB(){return _A()&&document.documentMode===10}function bS(t=Ye()){return d_(t)||wS(t)||TS(t)||DS(t)||/windows phone/i.test(t)||IS(t)}function CS(t,e=[]){let n;switch(t){case"Browser":n=eS(Ye());break;case"Worker":n=`${eS(Ye())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jr}/${r}`}var qy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function aB(t,e={}){return Pn(t,"GET","/v2/passwordPolicy",Zn(t,e))}var cB=6,Gy=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??cB,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var zy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $d(this),this.idTokenSubscription=new $d(this),this.beforeStateQueue=new qy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ud.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Bd(this,{idToken:e}),r=await Gr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Mt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await jd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=W2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mt(this.app))return Promise.reject(Jn(this));let n=e?ye(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mt(this.app)?Promise.reject(Jn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mt(this.app)?Promise.reject(Jn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await aB(this),n=new Gy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rB(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&Yn(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=await Ud.create(this,[Yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(H(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&q2(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Xi(t){return ye(t)}var $d=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=wA(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uB(t){Qd=t}function AS(t){return Qd.loadJS(t)}function lB(){return Qd.recaptchaEnterpriseScript}function dB(){return Qd.gapiScript}function SS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var Wy=class{constructor(){this.enterprise=new Ky}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},Ky=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var fB="recaptcha-enterprise",NS="NO_RECAPTCHA",Qy=class{constructor(e){this.type=fB,this.auth=Xi(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{Z2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new Uy(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})})}function i(o,s,a){let u=window.grecaptcha;JA(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(NS)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Wy().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&JA(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=lB();u.length!==0&&(u+=a),AS(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})}};async function dc(t,e,n,r=!1,i=!1){let o=new Qy(t),s;if(i)s=NS;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}let a=x({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Yy(t,e,n,r,i){if(i==="EMAIL_PASSWORD_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=await dc(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=await dc(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)});else if(i==="PHONE_PROVIDER")if(t._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=await dc(t,e,n);return r(t,o).catch(async s=>{if(t._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let a=await dc(t,e,n,!1,!0);return r(t,a)}return Promise.reject(s)})}else{let o=await dc(t,e,n,!1,!0);return r(t,o)}else return Promise.reject(i+" provider is not supported.")}function f_(t,e){let n=ns(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(An(o,e??{}))return i;Mn(i,"already-initialized")}return n.initialize({options:e})}function hB(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Yn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function h_(t,e,n){let r=Xi(t);H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=RS(e),{host:s,port:a}=pB(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},f=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){H(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),H(An(l,r.config.emulator)&&An(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Vr(s)?(bd(`${o}//${s}${u}`),Cd("Auth",!0)):i||gB()}function RS(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pB(t){let e=RS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:tS(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:tS(s)}}}function tS(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function gB(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var gc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}};async function mB(t,e){return Pn(t,"POST","/v1/accounts:update",e)}async function yB(t,e){return Pn(t,"POST","/v1/accounts:signUp",e)}async function _B(t,e){return _c(t,"POST","/v1/accounts:signInWithPassword",Zn(t,e))}async function vB(t,e){return Pn(t,"POST","/v1/accounts:sendOobCode",Zn(t,e))}async function EB(t,e){return vB(t,e)}async function IB(t,e){return _c(t,"POST","/v1/accounts:signInWithEmailLink",Zn(t,e))}async function wB(t,e){return _c(t,"POST","/v1/accounts:signInWithEmailLink",Zn(t,e))}var mc=class t extends gc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yy(e,n,"signInWithPassword",_B,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return IB(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yy(e,r,"signUpPassword",yB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return wB(e,{idToken:n,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function Ly(t,e){return _c(t,"POST","/v1/accounts:signInWithIdp",Zn(t,e))}function DB(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TB(t){let e=es(ts(t)).link,n=e?es(ts(e)).deep_link_id:null,r=es(ts(t)).deep_link_id;return(r?es(ts(r)).link:null)||r||n||e||t}var Hd=class t{constructor(e){let n=es(ts(e)),r=n.apiKey??null,i=n.oobCode??null,o=DB(n.mode??null);H(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){let n=TB(e);try{return new t(n)}catch{return null}}};var Yd=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return mc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Hd.parseLink(r);return H(i,"argument-error"),mc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),qd=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Jy=class extends qd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function bB(t,e){return _c(t,"POST","/v1/accounts:signUp",Zn(t,e))}var as=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await Gr._fromIdTokenResponse(e,r,i),s=nS(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=nS(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function nS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Zy=class t extends Bt{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function MS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Zy._fromErrorAndOperation(t,o,e,r):o})}async function CB(t,e,n=!1){let r=await ss(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return as._forOperation(t,"link",r)}async function PS(t,e,n=!1){let{auth:r}=t;if(Mt(r.app))return Promise.reject(Jn(r));let i="reauthenticate";try{let o=await ss(t,MS(r,i,e,t),n);H(o.idToken,r,"internal-error");let s=u_(o.idToken);H(s,r,"internal-error");let{sub:a}=s;return H(t.uid===a,r,"user-mismatch"),as._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Mn(r,"user-mismatch"),o}}async function xS(t,e,n=!1){if(Mt(t.app))return Promise.reject(Jn(t));let r="signIn",i=await MS(t,r,e),o=await as._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function p_(t,e){return xS(Xi(t),e)}async function Jd(t,e){return PS(ye(t),e)}function AB(t,e,n){H(n.url?.length>0,t,"invalid-continue-uri"),H(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),H(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(H(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(H(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function kS(t){let e=Xi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function g_(t,e,n){if(Mt(t.app))return Promise.reject(Jn(t));let r=Xi(t),s=await Yy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bB,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&kS(t),u}),a=await as._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function m_(t,e,n){return Mt(t.app)?Promise.reject(Jn(t)):p_(ye(t),Yd.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kS(t),r})}async function Zd(t,e,n){let r=ye(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&AB(r.auth,o,n);let{email:s}=await EB(r.auth,o);s!==t.email&&await t.reload()}function Xd(t,e){return SB(ye(t),null,e)}async function SB(t,e,n){let{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);let s=await ss(t,mB(r,o));await t._updateTokensIfNecessary(s,!0)}function ef(t,e,n,r){return ye(t).onIdTokenChanged(e,n,r)}function y_(t,e,n){return ye(t).beforeAuthStateChanged(e,n)}function tf(t,e,n,r){return ye(t).onAuthStateChanged(e,n,r)}function __(t){return ye(t).signOut()}var Gd="__sak";var zd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gd,"1"),this.storage.removeItem(Gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var NB=1e3,RB=10,MB=(()=>{class t extends zd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bS(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);sB()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,RB):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},NB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),OS=MB;var PB=(()=>{class t extends zd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),v_=PB;function xB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var kB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async f=>f(r.origin,s)),l=await xB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function FS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Xy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=FS("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function Rn(){return window}function OB(t){Rn().location.href=t}function LS(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}async function FB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LB(){return navigator?.serviceWorker?.controller||null}function VB(){return LS()?self:null}var VS="firebaseLocalStorageDb",BB=1,Wd="firebaseLocalStorage",BS="fbase_key",Zi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function nf(t,e){return t.transaction([Wd],e?"readwrite":"readonly").objectStore(Wd)}function jB(){let t=indexedDB.deleteDatabase(VS);return new Zi(t).toPromise()}function e_(){let t=indexedDB.open(VS,BB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Wd,{keyPath:BS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(Wd)?e(r):(r.close(),await jB(),e(await e_()))})})}async function rS(t,e,n){let r=nf(t,!0).put({[BS]:e,value:n});return new Zi(r).toPromise()}async function UB(t,e){let n=nf(t,!1).get(e),r=await new Zi(n).toPromise();return r===void 0?null:r.value}function iS(t,e){let n=nf(t,!0).delete(e);return new Zi(n).toPromise()}var $B=800,HB=3,qB=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await e_(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>HB)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kB._getInstance(VB()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await FB(),!this.activeServiceWorker)return;this.sender=new Xy(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||LB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await e_();return await rS(n,Gd,"1"),await iS(n,Gd),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>rS(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>UB(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>iS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=nf(o,!1).getAll();return new Zi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$B)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),jS=qB;var Tee=SS("rcb"),bee=new Ji(3e4,6e4);function GB(t,e){return e?Yn(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var yc=class extends gc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ly(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ly(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ly(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function zB(t){return xS(t.auth,new yc(t),t.bypassAuthState)}function WB(t){let{auth:e,user:n}=t;return H(n,e,"internal-error"),PS(n,new yc(t),t.bypassAuthState)}async function KB(t){let{auth:e,user:n}=t;return H(n,e,"internal-error"),CB(n,new yc(t),t.bypassAuthState)}var t_=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zB;case"linkViaPopup":case"linkViaRedirect":return KB;case"reauthViaPopup":case"reauthViaRedirect":return WB;default:Mn(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Cee=new Ji(2e3,1e4);var QB="pendingRedirect",Od=new Map,n_=class extends t_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Od.get(this.auth._key());if(!e){try{let r=await YB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Od.set(this.auth._key(),e)}return this.bypassAuthState||Od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function YB(t,e){let n=XB(e),r=ZB(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function JB(t,e){Od.set(t._key(),e)}function ZB(t){return Yn(t._redirectPersistence)}function XB(t){return kd(QB,t.config.apiKey,t.name)}async function ej(t,e,n=!1){if(Mt(t.app))return Promise.reject(Jn(t));let r=Xi(t),i=GB(r,e),s=await new n_(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var tj=600*1e3,r_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!US(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Yi(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tj&&this.cachedEventUids.clear(),this.cachedEventUids.has(oS(e))}saveEventToCache(e){this.cachedEventUids.add(oS(e)),this.lastProcessedEventTime=Date.now()}};function oS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function US({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function nj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return US(t);default:return!1}}async function rj(t,e={}){return Pn(t,"GET","/v1/projects",e)}var ij=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oj=/^https?/;async function sj(t){if(t.config.emulator)return;let{authorizedDomains:e}=await rj(t);for(let n of e)try{if(aj(n))return}catch{}Mn(t,"unauthorized-domain")}function aj(t){let e=By(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!oj.test(n))return!1;if(ij.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var cj=new Ji(3e4,6e4);function sS(){let t=Rn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uj(t){return new Promise((e,n)=>{function r(){sS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sS(),n(Yi(t,"network-request-failed"))},timeout:cj.get()})}if(Rn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Rn().gapi?.load)r();else{let i=SS("iframefcb");return Rn()[i]=()=>{gapi.load?r():n(Yi(t,"network-request-failed"))},AS(`${dB()}?onload=${i}`).catch(o=>n(o))}}).catch(e=>{throw Fd=null,e})}var Fd=null;function lj(t){return Fd=Fd||uj(t),Fd}var dj=new Ji(5e3,15e3),fj="__/auth/iframe",hj="emulator/auth/iframe",pj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mj(t){let e=t.config;H(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?a_(e,hj):`https://${t.config.authDomain}/${fj}`,r={apiKey:e.apiKey,appName:t.name,v:jr},i=gj.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${oc(r).slice(1)}`}async function yj(t){let e=await lj(t),n=Rn().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:mj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pj,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Yi(t,"network-request-failed"),a=Rn().setTimeout(()=>{o(s)},dj.get());function u(){Rn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var _j={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vj=500,Ej=600,Ij="_blank",wj="http://localhost",Kd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Dj(t,e,n,r=vj,i=Ej){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=U(x({},_j),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ye().toLowerCase();n&&(a=ES(l)?Ij:n),_S(l)&&(e=e||wj,u.scrollbars="yes");let f=Object.entries(u).reduce((g,[y,C])=>`${g}${y}=${C},`,"");if(oB(l)&&a!=="_self")return Tj(e||"",a),new Kd(null);let p=window.open(e||"",a,f);H(p,t,"popup-blocked");try{p.focus()}catch{}return new Kd(p)}function Tj(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var bj="__/auth/handler",Cj="emulator/auth/handler",Aj=encodeURIComponent("fac");async function aS(t,e,n,r,i,o){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:jr,eventId:i};if(e instanceof qd){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",IA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(o||{}))s[f]=p}if(e instanceof Jy){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let f of Object.keys(a))a[f]===void 0&&delete a[f];let u=await t._getAppCheckToken(),l=u?`#${Aj}=${encodeURIComponent(u)}`:"";return`${Sj(t)}?${oc(a).slice(1)}${l}`}function Sj({config:t}){return t.emulator?a_(t,Cj):`https://${t.authDomain}/${bj}`}var Vy="webStorageSupport",i_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=v_,this._completeRedirectFn=ej,this._overrideRedirectResult=JB}async _openPopup(e,n,r,i){zr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await aS(e,n,r,By(),i);return Dj(e,o,FS())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await aS(e,n,r,By(),i);return OB(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(zr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await yj(e),r=new r_(e);return n.register("authEvent",i=>(H(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vy,{type:Vy},i=>{let o=i?.[0]?.[Vy];o!==void 0&&n(!!o),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bS()||vS()||d_()}},$S=i_;var cS="@firebase/auth",uS="1.12.0";var o_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Nj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Rj(t){pn(new wt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;H(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CS(t)},l=new zy(r,i,o,u);return hB(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),pn(new wt("auth-internal",e=>{let n=Xi(e.getProvider("auth").getImmediate());return(r=>new o_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(cS,uS,Nj(t)),Se(cS,uS,"esm2020")}var Mj=300,Pj=hy("authIdTokenMaxAge")||Mj,lS=null,xj=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Pj)return;let i=n?.token;lS!==i&&(lS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function E_(t=Wi()){let e=ns(t,"auth");if(e.isInitialized())return e.getImmediate();let n=f_(t,{popupRedirectResolver:$S,persistence:[jS,OS,v_]}),r=hy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=xj(o.toString());y_(n,s,()=>s(n.currentUser)),ef(n,a=>s(a))}}let i=dy("auth");return i&&h_(n,`http://${i}`),n}function kj(){return document.getElementsByTagName("head")?.[0]??document}uB({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Yi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",kj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Rj("Browser");function qS(t){return new ne(function(e){var n=tf(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var GS="auth",eo=class{constructor(e){return e}},vc=class{constructor(){return is(GS)}};var I_=new G("angularfire2.auth-instances");function _U(t,e){let n=cc(GS,t,e);return n&&new eo(n)}function vU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new eo(r)}}var EU={provide:vc,deps:[[new Ft,I_]]},IU={provide:eo,useFactory:_U,deps:[[new Ft,I_],Kn]};function _te(t,...e){return Se("angularfire",Ur.full,"auth"),Cr([IU,EU,{provide:I_,useFactory:vU(t),multi:!0,deps:[Pe,We,$r,Qi,[new Ft,os],...e]}])}var zS=ve(qS,!0);var WS=ve(g_,!0,2);var vte=ve(E_,!0);var KS=ve(m_,!0,2);var QS=ve(__,!0,2);var YS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},JS={};var Xn,w_;(function(){var t;function e(w,_){function E(){}E.prototype=_.prototype,w.F=_.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(D,I,b){for(var v=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)v[Ct-2]=arguments[Ct];return _.prototype[I].apply(D,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,_,E){E||(E=0);let D=Array(16);if(typeof _=="string")for(var I=0;I<16;++I)D[I]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(I=0;I<16;++I)D[I]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=w.g[0],E=w.g[1],I=w.g[2];let b=w.g[3],v;v=_+(b^E&(I^b))+D[0]+3614090360&4294967295,_=E+(v<<7&4294967295|v>>>25),v=b+(I^_&(E^I))+D[1]+3905402710&4294967295,b=_+(v<<12&4294967295|v>>>20),v=I+(E^b&(_^E))+D[2]+606105819&4294967295,I=b+(v<<17&4294967295|v>>>15),v=E+(_^I&(b^_))+D[3]+3250441966&4294967295,E=I+(v<<22&4294967295|v>>>10),v=_+(b^E&(I^b))+D[4]+4118548399&4294967295,_=E+(v<<7&4294967295|v>>>25),v=b+(I^_&(E^I))+D[5]+1200080426&4294967295,b=_+(v<<12&4294967295|v>>>20),v=I+(E^b&(_^E))+D[6]+2821735955&4294967295,I=b+(v<<17&4294967295|v>>>15),v=E+(_^I&(b^_))+D[7]+4249261313&4294967295,E=I+(v<<22&4294967295|v>>>10),v=_+(b^E&(I^b))+D[8]+1770035416&4294967295,_=E+(v<<7&4294967295|v>>>25),v=b+(I^_&(E^I))+D[9]+2336552879&4294967295,b=_+(v<<12&4294967295|v>>>20),v=I+(E^b&(_^E))+D[10]+4294925233&4294967295,I=b+(v<<17&4294967295|v>>>15),v=E+(_^I&(b^_))+D[11]+2304563134&4294967295,E=I+(v<<22&4294967295|v>>>10),v=_+(b^E&(I^b))+D[12]+1804603682&4294967295,_=E+(v<<7&4294967295|v>>>25),v=b+(I^_&(E^I))+D[13]+4254626195&4294967295,b=_+(v<<12&4294967295|v>>>20),v=I+(E^b&(_^E))+D[14]+2792965006&4294967295,I=b+(v<<17&4294967295|v>>>15),v=E+(_^I&(b^_))+D[15]+1236535329&4294967295,E=I+(v<<22&4294967295|v>>>10),v=_+(I^b&(E^I))+D[1]+4129170786&4294967295,_=E+(v<<5&4294967295|v>>>27),v=b+(E^I&(_^E))+D[6]+3225465664&4294967295,b=_+(v<<9&4294967295|v>>>23),v=I+(_^E&(b^_))+D[11]+643717713&4294967295,I=b+(v<<14&4294967295|v>>>18),v=E+(b^_&(I^b))+D[0]+3921069994&4294967295,E=I+(v<<20&4294967295|v>>>12),v=_+(I^b&(E^I))+D[5]+3593408605&4294967295,_=E+(v<<5&4294967295|v>>>27),v=b+(E^I&(_^E))+D[10]+38016083&4294967295,b=_+(v<<9&4294967295|v>>>23),v=I+(_^E&(b^_))+D[15]+3634488961&4294967295,I=b+(v<<14&4294967295|v>>>18),v=E+(b^_&(I^b))+D[4]+3889429448&4294967295,E=I+(v<<20&4294967295|v>>>12),v=_+(I^b&(E^I))+D[9]+568446438&4294967295,_=E+(v<<5&4294967295|v>>>27),v=b+(E^I&(_^E))+D[14]+3275163606&4294967295,b=_+(v<<9&4294967295|v>>>23),v=I+(_^E&(b^_))+D[3]+4107603335&4294967295,I=b+(v<<14&4294967295|v>>>18),v=E+(b^_&(I^b))+D[8]+1163531501&4294967295,E=I+(v<<20&4294967295|v>>>12),v=_+(I^b&(E^I))+D[13]+2850285829&4294967295,_=E+(v<<5&4294967295|v>>>27),v=b+(E^I&(_^E))+D[2]+4243563512&4294967295,b=_+(v<<9&4294967295|v>>>23),v=I+(_^E&(b^_))+D[7]+1735328473&4294967295,I=b+(v<<14&4294967295|v>>>18),v=E+(b^_&(I^b))+D[12]+2368359562&4294967295,E=I+(v<<20&4294967295|v>>>12),v=_+(E^I^b)+D[5]+4294588738&4294967295,_=E+(v<<4&4294967295|v>>>28),v=b+(_^E^I)+D[8]+2272392833&4294967295,b=_+(v<<11&4294967295|v>>>21),v=I+(b^_^E)+D[11]+1839030562&4294967295,I=b+(v<<16&4294967295|v>>>16),v=E+(I^b^_)+D[14]+4259657740&4294967295,E=I+(v<<23&4294967295|v>>>9),v=_+(E^I^b)+D[1]+2763975236&4294967295,_=E+(v<<4&4294967295|v>>>28),v=b+(_^E^I)+D[4]+1272893353&4294967295,b=_+(v<<11&4294967295|v>>>21),v=I+(b^_^E)+D[7]+4139469664&4294967295,I=b+(v<<16&4294967295|v>>>16),v=E+(I^b^_)+D[10]+3200236656&4294967295,E=I+(v<<23&4294967295|v>>>9),v=_+(E^I^b)+D[13]+681279174&4294967295,_=E+(v<<4&4294967295|v>>>28),v=b+(_^E^I)+D[0]+3936430074&4294967295,b=_+(v<<11&4294967295|v>>>21),v=I+(b^_^E)+D[3]+3572445317&4294967295,I=b+(v<<16&4294967295|v>>>16),v=E+(I^b^_)+D[6]+76029189&4294967295,E=I+(v<<23&4294967295|v>>>9),v=_+(E^I^b)+D[9]+3654602809&4294967295,_=E+(v<<4&4294967295|v>>>28),v=b+(_^E^I)+D[12]+3873151461&4294967295,b=_+(v<<11&4294967295|v>>>21),v=I+(b^_^E)+D[15]+530742520&4294967295,I=b+(v<<16&4294967295|v>>>16),v=E+(I^b^_)+D[2]+3299628645&4294967295,E=I+(v<<23&4294967295|v>>>9),v=_+(I^(E|~b))+D[0]+4096336452&4294967295,_=E+(v<<6&4294967295|v>>>26),v=b+(E^(_|~I))+D[7]+1126891415&4294967295,b=_+(v<<10&4294967295|v>>>22),v=I+(_^(b|~E))+D[14]+2878612391&4294967295,I=b+(v<<15&4294967295|v>>>17),v=E+(b^(I|~_))+D[5]+4237533241&4294967295,E=I+(v<<21&4294967295|v>>>11),v=_+(I^(E|~b))+D[12]+1700485571&4294967295,_=E+(v<<6&4294967295|v>>>26),v=b+(E^(_|~I))+D[3]+2399980690&4294967295,b=_+(v<<10&4294967295|v>>>22),v=I+(_^(b|~E))+D[10]+4293915773&4294967295,I=b+(v<<15&4294967295|v>>>17),v=E+(b^(I|~_))+D[1]+2240044497&4294967295,E=I+(v<<21&4294967295|v>>>11),v=_+(I^(E|~b))+D[8]+1873313359&4294967295,_=E+(v<<6&4294967295|v>>>26),v=b+(E^(_|~I))+D[15]+4264355552&4294967295,b=_+(v<<10&4294967295|v>>>22),v=I+(_^(b|~E))+D[6]+2734768916&4294967295,I=b+(v<<15&4294967295|v>>>17),v=E+(b^(I|~_))+D[13]+1309151649&4294967295,E=I+(v<<21&4294967295|v>>>11),v=_+(I^(E|~b))+D[4]+4149444226&4294967295,_=E+(v<<6&4294967295|v>>>26),v=b+(E^(_|~I))+D[11]+3174756917&4294967295,b=_+(v<<10&4294967295|v>>>22),v=I+(_^(b|~E))+D[2]+718787259&4294967295,I=b+(v<<15&4294967295|v>>>17),v=E+(b^(I|~_))+D[9]+3951481745&4294967295,w.g[0]=w.g[0]+_&4294967295,w.g[1]=w.g[1]+(I+(v<<21&4294967295|v>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.v=function(w,_){_===void 0&&(_=w.length);let E=_-this.blockSize,D=this.C,I=this.h,b=0;for(;b<_;){if(I==0)for(;b<=E;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<_;)if(D[I++]=w.charCodeAt(b++),I==this.blockSize){i(this,D),I=0;break}}else for(;b<_;)if(D[I++]=w[b++],I==this.blockSize){i(this,D),I=0;break}}this.h=I,this.o+=_},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var _=1;_<w.length-8;++_)w[_]=0;_=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=_&255,_/=256;for(this.v(w),w=Array(16),_=0,E=0;E<4;++E)for(let D=0;D<32;D+=8)w[_++]=this.g[E]>>>D&255;return w};function o(w,_){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=_(w)}function s(w,_){this.h=_;let E=[],D=!0;for(let I=w.length-1;I>=0;I--){let b=w[I]|0;D&&b==_||(E[I]=b,D=!1)}this.g=E}var a={};function u(w){return-128<=w&&w<128?o(w,function(_){return new s([_|0],_<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return N(l(-w));let _=[],E=1;for(let D=0;w>=E;D++)_[D]=w/E|0,E*=4294967296;return new s(_,0)}function f(w,_){if(w.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(w.charAt(0)=="-")return N(f(w.substring(1),_));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(_,8)),D=p;for(let b=0;b<w.length;b+=8){var I=Math.min(8,w.length-b);let v=parseInt(w.substring(b,b+I),_);I<8?(I=l(Math.pow(_,I)),D=D.j(I).add(l(v))):(D=D.j(E),D=D.add(l(v)))}return D}var p=u(0),g=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-N(this).m();let w=0,_=1;for(let E=0;E<this.g.length;E++){let D=this.i(E);w+=(D>=0?D:4294967296+D)*_,_*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(C(this))return"0";if(R(this))return"-"+N(this).toString(w);let _=l(Math.pow(w,6));var E=this;let D="";for(;;){let I=Ue(E,_).g;E=O(E,I.j(_));let b=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,C(E))return b+D;for(;b.length<6;)b="0"+b;D=b+D}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function C(w){if(w.h!=0)return!1;for(let _=0;_<w.g.length;_++)if(w.g[_]!=0)return!1;return!0}function R(w){return w.h==-1}t.l=function(w){return w=O(this,w),R(w)?-1:C(w)?0:1};function N(w){let _=w.g.length,E=[];for(let D=0;D<_;D++)E[D]=~w.g[D];return new s(E,~w.h).add(g)}t.abs=function(){return R(this)?N(this):this},t.add=function(w){let _=Math.max(this.g.length,w.g.length),E=[],D=0;for(let I=0;I<=_;I++){let b=D+(this.i(I)&65535)+(w.i(I)&65535),v=(b>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);D=v>>>16,b&=65535,v&=65535,E[I]=v<<16|b}return new s(E,E[E.length-1]&-2147483648?-1:0)};function O(w,_){return w.add(N(_))}t.j=function(w){if(C(this)||C(w))return p;if(R(this))return R(w)?N(this).j(N(w)):N(N(this).j(w));if(R(w))return N(this.j(N(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let _=this.g.length+w.g.length,E=[];for(var D=0;D<2*_;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(let I=0;I<w.g.length;I++){let b=this.i(D)>>>16,v=this.i(D)&65535,Ct=w.i(I)>>>16,cr=w.i(I)&65535;E[2*D+2*I]+=v*cr,K(E,2*D+2*I),E[2*D+2*I+1]+=b*cr,K(E,2*D+2*I+1),E[2*D+2*I+1]+=v*Ct,K(E,2*D+2*I+1),E[2*D+2*I+2]+=b*Ct,K(E,2*D+2*I+2)}for(w=0;w<_;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=_;w<2*_;w++)E[w]=0;return new s(E,0)};function K(w,_){for(;(w[_]&65535)!=w[_];)w[_+1]+=w[_]>>>16,w[_]&=65535,_++}function ce(w,_){this.g=w,this.h=_}function Ue(w,_){if(C(_))throw Error("division by zero");if(C(w))return new ce(p,p);if(R(w))return _=Ue(N(w),_),new ce(N(_.g),N(_.h));if(R(_))return _=Ue(w,N(_)),new ce(N(_.g),_.h);if(w.g.length>30){if(R(w)||R(_))throw Error("slowDivide_ only works with positive integers.");for(var E=g,D=_;D.l(w)<=0;)E=Xe(E),D=Xe(D);var I=qe(E,1),b=qe(D,1);for(D=qe(D,2),E=qe(E,2);!C(D);){var v=b.add(D);v.l(w)<=0&&(I=I.add(E),b=v),D=qe(D,1),E=qe(E,1)}return _=O(w,I.j(_)),new ce(I,_)}for(I=p;w.l(_)>=0;){for(E=Math.max(1,Math.floor(w.m()/_.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),b=l(E),v=b.j(_);R(v)||v.l(w)>0;)E-=D,b=l(E),v=b.j(_);C(b)&&(b=g),I=I.add(b),w=O(w,v)}return new ce(I,w)}t.B=function(w){return Ue(this,w).h},t.and=function(w){let _=Math.max(this.g.length,w.g.length),E=[];for(let D=0;D<_;D++)E[D]=this.i(D)&w.i(D);return new s(E,this.h&w.h)},t.or=function(w){let _=Math.max(this.g.length,w.g.length),E=[];for(let D=0;D<_;D++)E[D]=this.i(D)|w.i(D);return new s(E,this.h|w.h)},t.xor=function(w){let _=Math.max(this.g.length,w.g.length),E=[];for(let D=0;D<_;D++)E[D]=this.i(D)^w.i(D);return new s(E,this.h^w.h)};function Xe(w){let _=w.g.length+1,E=[];for(let D=0;D<_;D++)E[D]=w.i(D)<<1|w.i(D-1)>>>31;return new s(E,w.h)}function qe(w,_){let E=_>>5;_%=32;let D=w.g.length-E,I=[];for(let b=0;b<D;b++)I[b]=_>0?w.i(b+E)>>>_|w.i(b+E+1)<<32-_:w.i(b+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,w_=JS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,Xn=JS.Integer=s}).apply(typeof YS<"u"?YS:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},er={};var D_,DU,cs,T_,Ec,of,b_,C_,A_;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var T=c[m];if(!(T in h))break e;h=h[T]}c=c[c.length-1],m=h[c],d=d(m),d!=m&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var h=[],m;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&h.push([m,d[m]]);return h}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function u(c,d,h){return c.call.apply(c.bind,arguments)}function l(c,d,h){return l=u,l.apply(null,arguments)}function f(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function p(c,d){function h(){}h.prototype=d.prototype,c.Z=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Ob=function(m,T,A){for(var P=Array(arguments.length-2),te=2;te<arguments.length;te++)P[te-2]=arguments[te];return d.prototype[T].apply(m,P)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){let d=c.length;if(d>0){let h=Array(d);for(let m=0;m<d;m++)h[m]=c[m];return h}return[]}function C(c,d){for(let m=1;m<arguments.length;m++){let T=arguments[m];var h=typeof T;if(h=h!="object"?h:T?Array.isArray(T)?"array":h:"null",h=="array"||h=="object"&&typeof T.length=="number"){h=c.length||0;let A=T.length||0;c.length=h+A;for(let P=0;P<A;P++)c[h+P]=T[P]}else c.push(T)}}class R{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function N(c){s.setTimeout(()=>{throw c},0)}function O(){var c=w;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class K{constructor(){this.h=this.g=null}add(d,h){let m=ce.get();m.set(d,h),this.h?this.h.next=m:this.g=m,this.h=m}}var ce=new R(()=>new Ue,c=>c.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Xe,qe=!1,w=new K,_=()=>{let c=Promise.resolve(void 0);Xe=()=>{c.then(E)}};function E(){for(var c;c=O();){try{c.h.call(c.g)}catch(h){N(h)}var d=ce;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}qe=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};s.addEventListener("test",h,d),s.removeEventListener("test",h,d)}catch{}return c})();function v(c){return/^[\s\xa0]*$/.test(c)}function Ct(c,d){I.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}p(Ct,I),Ct.prototype.init=function(c,d){let h=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ct.Z.h.call(this)},Ct.prototype.h=function(){Ct.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var cr="closure_listenable_"+(Math.random()*1e6|0),RM=0;function MM(c,d,h,m,T){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!m,this.ha=T,this.key=++RM,this.da=this.fa=!1}function su(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function au(c,d,h){for(let m in c)d.call(h,c[m],m,c)}function PM(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function lI(c){let d={};for(let h in c)d[h]=c[h];return d}let dI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fI(c,d){let h,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(h in m)c[h]=m[h];for(let A=0;A<dI.length;A++)h=dI[A],Object.prototype.hasOwnProperty.call(m,h)&&(c[h]=m[h])}}function cu(c){this.src=c,this.g={},this.h=0}cu.prototype.add=function(c,d,h,m,T){let A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);let P=Eh(c,d,m,T);return P>-1?(d=c[P],h||(d.fa=!1)):(d=new MM(d,this.src,A,!!m,T),d.fa=h,c.push(d)),d};function vh(c,d){let h=d.type;if(h in c.g){var m=c.g[h],T=Array.prototype.indexOf.call(m,d,void 0),A;(A=T>=0)&&Array.prototype.splice.call(m,T,1),A&&(su(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function Eh(c,d,h,m){for(let T=0;T<c.length;++T){let A=c[T];if(!A.da&&A.listener==d&&A.capture==!!h&&A.ha==m)return T}return-1}var Ih="closure_lm_"+(Math.random()*1e6|0),wh={};function hI(c,d,h,m,T){if(m&&m.once)return gI(c,d,h,m,T);if(Array.isArray(d)){for(let A=0;A<d.length;A++)hI(c,d[A],h,m,T);return null}return h=Ch(h),c&&c[cr]?c.J(d,h,a(m)?!!m.capture:!!m,T):pI(c,d,h,!1,m,T)}function pI(c,d,h,m,T,A){if(!d)throw Error("Invalid event type");let P=a(T)?!!T.capture:!!T,te=Th(c);if(te||(c[Ih]=te=new cu(c)),h=te.add(d,h,m,P,A),h.proxy)return h;if(m=xM(),h.proxy=m,m.src=c,m.listener=h,c.addEventListener)b||(T=P),T===void 0&&(T=!1),c.addEventListener(d.toString(),m,T);else if(c.attachEvent)c.attachEvent(yI(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function xM(){function c(h){return d.call(c.src,c.listener,h)}let d=kM;return c}function gI(c,d,h,m,T){if(Array.isArray(d)){for(let A=0;A<d.length;A++)gI(c,d[A],h,m,T);return null}return h=Ch(h),c&&c[cr]?c.K(d,h,a(m)?!!m.capture:!!m,T):pI(c,d,h,!0,m,T)}function mI(c,d,h,m,T){if(Array.isArray(d))for(var A=0;A<d.length;A++)mI(c,d[A],h,m,T);else m=a(m)?!!m.capture:!!m,h=Ch(h),c&&c[cr]?(c=c.i,A=String(d).toString(),A in c.g&&(d=c.g[A],h=Eh(d,h,m,T),h>-1&&(su(d[h]),Array.prototype.splice.call(d,h,1),d.length==0&&(delete c.g[A],c.h--)))):c&&(c=Th(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Eh(d,h,m,T)),(h=c>-1?d[c]:null)&&Dh(h))}function Dh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[cr])vh(d.i,c);else{var h=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(h,m,c.capture):d.detachEvent?d.detachEvent(yI(h),m):d.addListener&&d.removeListener&&d.removeListener(m),(h=Th(d))?(vh(h,c),h.h==0&&(h.src=null,d[Ih]=null)):su(c)}}}function yI(c){return c in wh?wh[c]:wh[c]="on"+c}function kM(c,d){if(c.da)c=!0;else{d=new Ct(d,this);let h=c.listener,m=c.ha||c.src;c.fa&&Dh(c),c=h.call(m,d)}return c}function Th(c){return c=c[Ih],c instanceof cu?c:null}var bh="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ch(c){return typeof c=="function"?c:(c[bh]||(c[bh]=function(d){return c.handleEvent(d)}),c[bh])}function st(){D.call(this),this.i=new cu(this),this.M=this,this.G=null}p(st,D),st.prototype[cr]=!0,st.prototype.removeEventListener=function(c,d,h,m){mI(this,c,d,h,m)};function pt(c,d){var h,m=c.G;if(m)for(h=[];m;m=m.G)h.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new I(d,c);else if(d instanceof I)d.target=d.target||c;else{var T=d;d=new I(m,c),fI(d,T)}T=!0;let A,P;if(h)for(P=h.length-1;P>=0;P--)A=d.g=h[P],T=uu(A,m,!0,d)&&T;if(A=d.g=c,T=uu(A,m,!0,d)&&T,T=uu(A,m,!1,d)&&T,h)for(P=0;P<h.length;P++)A=d.g=h[P],T=uu(A,m,!1,d)&&T}st.prototype.N=function(){if(st.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let h=c.g[d];for(let m=0;m<h.length;m++)su(h[m]);delete c.g[d],c.h--}}this.G=null},st.prototype.J=function(c,d,h,m){return this.i.add(String(c),d,!1,h,m)},st.prototype.K=function(c,d,h,m){return this.i.add(String(c),d,!0,h,m)};function uu(c,d,h,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let T=!0;for(let A=0;A<d.length;++A){let P=d[A];if(P&&!P.da&&P.capture==h){let te=P.listener,$e=P.ha||P.src;P.fa&&vh(c.i,P),T=te.call($e,m)!==!1&&T}}return T&&!m.defaultPrevented}function OM(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=l(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function _I(c){c.g=OM(()=>{c.g=null,c.i&&(c.i=!1,_I(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class FM extends D{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:_I(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bs(c){D.call(this),this.h=c,this.g={}}p(Bs,D);var vI=[];function EI(c){au(c.g,function(d,h){this.g.hasOwnProperty(h)&&Dh(d)},c),c.g={}}Bs.prototype.N=function(){Bs.Z.N.call(this),EI(this)},Bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ah=s.JSON.stringify,LM=s.JSON.parse,VM=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function II(){}function wI(){}var js={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sh(){I.call(this,"d")}p(Sh,I);function Nh(){I.call(this,"c")}p(Nh,I);var ui={},DI=null;function lu(){return DI=DI||new st}ui.Ia="serverreachability";function TI(c){I.call(this,ui.Ia,c)}p(TI,I);function Us(c){let d=lu();pt(d,new TI(d))}ui.STAT_EVENT="statevent";function bI(c,d){I.call(this,ui.STAT_EVENT,c),this.stat=d}p(bI,I);function gt(c){let d=lu();pt(d,new bI(d,c))}ui.Ja="timingevent";function CI(c,d){I.call(this,ui.Ja,c),this.size=d}p(CI,I);function $s(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function Hs(){this.g=!0}Hs.prototype.ua=function(){this.g=!1};function BM(c,d,h,m,T,A){c.info(function(){if(c.g)if(A){var P="",te=A.split("&");for(let me=0;me<te.length;me++){var $e=te[me].split("=");if($e.length>1){let Ge=$e[0];$e=$e[1];let _n=Ge.split("_");P=_n.length>=2&&_n[1]=="type"?P+(Ge+"="+$e+"&"):P+(Ge+"=redacted&")}}}else P=null;else P=A;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+d+`
`+h+`
`+P})}function jM(c,d,h,m,T,A,P){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+d+`
`+h+`
`+A+" "+P})}function _o(c,d,h,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+$M(c,h)+(m?" "+m:"")})}function UM(c,d){c.info(function(){return"TIMEOUT: "+d})}Hs.prototype.info=function(){};function $M(c,d){if(!c.g)return d;if(!d)return null;try{let A=JSON.parse(d);if(A){for(c=0;c<A.length;c++)if(Array.isArray(A[c])){var h=A[c];if(!(h.length<2)){var m=h[1];if(Array.isArray(m)&&!(m.length<1)){var T=m[0];if(T!="noop"&&T!="stop"&&T!="close")for(let P=1;P<m.length;P++)m[P]=""}}}}return Ah(A)}catch{return d}}var du={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},AI={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},SI;function Rh(){}p(Rh,II),Rh.prototype.g=function(){return new XMLHttpRequest},SI=new Rh;function qs(c){return encodeURIComponent(String(c))}function HM(c){var d=1;c=c.split(":");let h=[];for(;d>0&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function ur(c,d,h,m){this.j=c,this.i=d,this.l=h,this.S=m||1,this.V=new Bs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new NI}function NI(){this.i=null,this.g="",this.h=!1}var RI={},Mh={};function Ph(c,d,h){c.M=1,c.A=hu(yn(d)),c.u=h,c.R=!0,MI(c,null)}function MI(c,d){c.F=Date.now(),fu(c),c.B=yn(c.A);var h=c.B,m=c.S;Array.isArray(m)||(m=[String(m)]),qI(h.i,"t",m),c.C=0,h=c.j.L,c.h=new NI,c.g=cw(c.j,h?d:null,!c.u),c.P>0&&(c.O=new FM(l(c.Y,c,c.g),c.P)),d=c.V,h=c.g,m=c.ba;var T="readystatechange";Array.isArray(T)||(T&&(vI[0]=T.toString()),T=vI);for(let A=0;A<T.length;A++){let P=hI(h,T[A],m||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=c.J?lI(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),Us(),BM(c.i,c.v,c.B,c.l,c.S,c.u)}ur.prototype.ba=function(c){c=c.target;let d=this.O;d&&fr(c)==3?d.j():this.Y(c)},ur.prototype.Y=function(c){try{if(c==this.g)e:{let te=fr(this.g),$e=this.g.ya(),me=this.g.ca();if(!(te<3)&&(te!=3||this.g&&(this.h.h||this.g.la()||JI(this.g)))){this.K||te!=4||$e==7||($e==8||me<=0?Us(3):Us(2)),xh(this);var d=this.g.ca();this.X=d;var h=qM(this);if(this.o=d==200,jM(this.i,this.v,this.B,this.l,this.S,te,d),this.o){if(this.U&&!this.L){t:{if(this.g){var m,T=this.g;if((m=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(m)){var A=m;break t}}A=null}if(c=A)_o(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,kh(this,c);else{this.o=!1,this.m=3,gt(12),li(this),Gs(this);break e}}if(this.R){c=!0;let Ge;for(;!this.K&&this.C<h.length;)if(Ge=GM(this,h),Ge==Mh){te==4&&(this.m=4,gt(14),c=!1),_o(this.i,this.l,null,"[Incomplete Response]");break}else if(Ge==RI){this.m=4,gt(15),_o(this.i,this.l,h,"[Invalid Chunk]"),c=!1;break}else _o(this.i,this.l,Ge,null),kh(this,Ge);if(PI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||h.length!=0||this.h.h||(this.m=1,gt(16),c=!1),this.o=this.o&&c,!c)_o(this.i,this.l,h,"[Invalid Chunked Response]"),li(this),Gs(this);else if(h.length>0&&!this.W){this.W=!0;var P=this.j;P.g==this&&P.aa&&!P.P&&(P.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),Uh(P),P.P=!0,gt(11))}}else _o(this.i,this.l,h,null),kh(this,h);te==4&&li(this),this.o&&!this.K&&(te==4?iw(this.j,this):(this.o=!1,fu(this)))}else oP(this.g),d==400&&h.indexOf("Unknown SID")>0?(this.m=3,gt(12)):(this.m=0,gt(13)),li(this),Gs(this)}}}catch{}finally{}};function qM(c){if(!PI(c))return c.g.la();let d=JI(c.g);if(d==="")return"";let h="",m=d.length,T=fr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return li(c),Gs(c),"";c.h.i=new s.TextDecoder}for(let A=0;A<m;A++)c.h.h=!0,h+=c.h.i.decode(d[A],{stream:!(T&&A==m-1)});return d.length=0,c.h.g+=h,c.C=0,c.h.g}function PI(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function GM(c,d){var h=c.C,m=d.indexOf(`
`,h);return m==-1?Mh:(h=Number(d.substring(h,m)),isNaN(h)?RI:(m+=1,m+h>d.length?Mh:(d=d.slice(m,m+h),c.C=m+h,d)))}ur.prototype.cancel=function(){this.K=!0,li(this)};function fu(c){c.T=Date.now()+c.H,xI(c,c.H)}function xI(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=$s(l(c.aa,c),d)}function xh(c){c.D&&(s.clearTimeout(c.D),c.D=null)}ur.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(UM(this.i,this.B),this.M!=2&&(Us(),gt(17)),li(this),this.m=2,Gs(this)):xI(this,this.T-c)};function Gs(c){c.j.I==0||c.K||iw(c.j,c)}function li(c){xh(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,EI(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function kh(c,d){try{var h=c.j;if(h.I!=0&&(h.g==c||Oh(h.h,c))){if(!c.L&&Oh(h.h,c)&&h.I==3){try{var m=h.Ba.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<c.F)vu(h),yu(h);else break e;jh(h),gt(18)}}else h.xa=T[1],0<h.xa-h.K&&T[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=$s(l(h.Va,h),6e3));FI(h.h)<=1&&h.ta&&(h.ta=void 0)}else fi(h,11)}else if((c.L||h.g==c)&&vu(h),!v(d))for(T=h.Ba.g.parse(d),d=0;d<T.length;d++){let me=T[d],Ge=me[0];if(!(Ge<=h.K))if(h.K=Ge,me=me[1],h.I==2)if(me[0]=="c"){h.M=me[1],h.ba=me[2];let _n=me[3];_n!=null&&(h.ka=_n,h.j.info("VER="+h.ka));let hi=me[4];hi!=null&&(h.za=hi,h.j.info("SVER="+h.za));let hr=me[5];hr!=null&&typeof hr=="number"&&hr>0&&(m=1.5*hr,h.O=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let pr=c.g;if(pr){let Iu=pr.g?pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Iu){var A=m.h;A.g||Iu.indexOf("spdy")==-1&&Iu.indexOf("quic")==-1&&Iu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Fh(A,A.h),A.h=null))}if(m.G){let $h=pr.g?pr.g.getResponseHeader("X-HTTP-Session-Id"):null;$h&&(m.wa=$h,Ie(m.J,m.G,$h))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-c.F,h.j.info("Handshake RTT: "+h.T+"ms")),m=h;var P=c;if(m.na=aw(m,m.L?m.ba:null,m.W),P.L){LI(m.h,P);var te=P,$e=m.O;$e&&(te.H=$e),te.D&&(xh(te),fu(te)),m.g=P}else nw(m);h.i.length>0&&_u(h)}else me[0]!="stop"&&me[0]!="close"||fi(h,7);else h.I==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?fi(h,7):Bh(h):me[0]!="noop"&&h.l&&h.l.qa(me),h.A=0)}}Us(4)}catch{}}var zM=class{constructor(c,d){this.g=c,this.map=d}};function kI(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function OI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function FI(c){return c.h?1:c.g?c.g.size:0}function Oh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Fh(c,d){c.g?c.g.add(d):c.h=d}function LI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}kI.prototype.cancel=function(){if(this.i=VI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function VI(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.G);return d}return y(c.i)}var BI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WM(c,d){if(c){c=c.split("&");for(let h=0;h<c.length;h++){let m=c[h].indexOf("="),T,A=null;m>=0?(T=c[h].substring(0,m),A=c[h].substring(m+1)):T=c[h],d(T,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function lr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof lr?(this.l=c.l,zs(this,c.j),this.o=c.o,this.g=c.g,Ws(this,c.u),this.h=c.h,Lh(this,GI(c.i)),this.m=c.m):c&&(d=String(c).match(BI))?(this.l=!1,zs(this,d[1]||"",!0),this.o=Ks(d[2]||""),this.g=Ks(d[3]||"",!0),Ws(this,d[4]),this.h=Ks(d[5]||"",!0),Lh(this,d[6]||"",!0),this.m=Ks(d[7]||"")):(this.l=!1,this.i=new Ys(null,this.l))}lr.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(Qs(d,jI,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Qs(d,jI,!0),"@"),c.push(qs(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&c.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(Qs(h,h.charAt(0)=="/"?YM:QM,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",Qs(h,ZM)),c.join("")},lr.prototype.resolve=function(c){let d=yn(this),h=!!c.j;h?zs(d,c.j):h=!!c.o,h?d.o=c.o:h=!!c.g,h?d.g=c.g:h=c.u!=null;var m=c.h;if(h)Ws(d,c.u);else if(h=!!c.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var T=d.h.lastIndexOf("/");T!=-1&&(m=d.h.slice(0,T+1)+m)}if(T=m,T==".."||T==".")m="";else if(T.indexOf("./")!=-1||T.indexOf("/.")!=-1){m=T.lastIndexOf("/",0)==0,T=T.split("/");let A=[];for(let P=0;P<T.length;){let te=T[P++];te=="."?m&&P==T.length&&A.push(""):te==".."?((A.length>1||A.length==1&&A[0]!="")&&A.pop(),m&&P==T.length&&A.push("")):(A.push(te),m=!0)}m=A.join("/")}else m=T}return h?d.h=m:h=c.i.toString()!=="",h?Lh(d,GI(c.i)):h=!!c.m,h&&(d.m=c.m),d};function yn(c){return new lr(c)}function zs(c,d,h){c.j=h?Ks(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Ws(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function Lh(c,d,h){d instanceof Ys?(c.i=d,XM(c.i,c.l)):(h||(d=Qs(d,JM)),c.i=new Ys(d,c.l))}function Ie(c,d,h){c.i.set(d,h)}function hu(c){return Ie(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ks(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Qs(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,KM),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function KM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var jI=/[#\/\?@]/g,QM=/[#\?:]/g,YM=/[#\?]/g,JM=/[#\?@]/g,ZM=/#/g;function Ys(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function di(c){c.g||(c.g=new Map,c.h=0,c.i&&WM(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=Ys.prototype,t.add=function(c,d){di(this),this.i=null,c=vo(this,c);let h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function UI(c,d){di(c),d=vo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function $I(c,d){return di(c),d=vo(c,d),c.g.has(d)}t.forEach=function(c,d){di(this),this.g.forEach(function(h,m){h.forEach(function(T){c.call(d,T,m,this)},this)},this)};function HI(c,d){di(c);let h=[];if(typeof d=="string")$I(c,d)&&(h=h.concat(c.g.get(vo(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)h=h.concat(c[d]);return h}t.set=function(c,d){return di(this),this.i=null,c=vo(this,c),$I(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=HI(this,c),c.length>0?String(c[0]):d):d};function qI(c,d,h){UI(c,d),h.length>0&&(c.i=null,c.g.set(vo(c,d),y(h)),c.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let m=0;m<d.length;m++){var h=d[m];let T=qs(h);h=HI(this,h);for(let A=0;A<h.length;A++){let P=T;h[A]!==""&&(P+="="+qs(h[A])),c.push(P)}}return this.i=c.join("&")};function GI(c){let d=new Ys;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function vo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function XM(c,d){d&&!c.j&&(di(c),c.i=null,c.g.forEach(function(h,m){let T=m.toLowerCase();m!=T&&(UI(this,m),qI(this,T,h))},c)),c.j=d}function eP(c,d){let h=new Hs;if(s.Image){let m=new Image;m.onload=f(dr,h,"TestLoadImage: loaded",!0,d,m),m.onerror=f(dr,h,"TestLoadImage: error",!1,d,m),m.onabort=f(dr,h,"TestLoadImage: abort",!1,d,m),m.ontimeout=f(dr,h,"TestLoadImage: timeout",!1,d,m),s.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function tP(c,d){let h=new Hs,m=new AbortController,T=setTimeout(()=>{m.abort(),dr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(A=>{clearTimeout(T),A.ok?dr(h,"TestPingServer: ok",!0,d):dr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),dr(h,"TestPingServer: error",!1,d)})}function dr(c,d,h,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(h)}catch{}}function nP(){this.g=new VM}function pu(c){this.i=c.Sb||null,this.h=c.ab||!1}p(pu,II),pu.prototype.g=function(){return new gu(this.i,this.h)};function gu(c,d){st.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(gu,st),t=gu.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,Zs(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Js(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Zs(this)),this.g&&(this.readyState=3,Zs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;zI(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function zI(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Js(this):Zs(this),this.readyState==3&&zI(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Js(this))},t.Na=function(c){this.g&&(this.response=c,Js(this))},t.ga=function(){this.g&&Js(this)};function Js(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Zs(c)}t.setRequestHeader=function(c,d){this.A.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function Zs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(gu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function WI(c){let d="";return au(c,function(h,m){d+=m,d+=":",d+=h,d+=`\r
`}),d}function Vh(c,d,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=WI(h),typeof c=="string"?h!=null&&qs(h):Ie(c,d,h))}function Ae(c){st.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ae,st);var rP=/^https?$/i,iP=["POST","PUT"];t=Ae.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,d,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():SI.g(),this.g.onreadystatechange=g(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){KI(this,A);return}if(c=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)h.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let A of m.keys())h.set(A,m.get(A));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),T=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(iP,d,void 0)>=0)||m||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of h)this.g.setRequestHeader(A,P);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(A){KI(this,A)}};function KI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,QI(c),mu(c)}function QI(c){c.A||(c.A=!0,pt(c,"complete"),pt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,pt(this,"complete"),pt(this,"abort"),mu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mu(this,!0)),Ae.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?YI(this):this.Xa())},t.Xa=function(){YI(this)};function YI(c){if(c.h&&typeof o<"u"){if(c.v&&fr(c)==4)setTimeout(c.Ca.bind(c),0);else if(pt(c,"readystatechange"),fr(c)==4){c.h=!1;try{let A=c.ca();e:switch(A){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var m;if(m=A===0){let P=String(c.D).match(BI)[1]||null;!P&&s.self&&s.self.location&&(P=s.self.location.protocol.slice(0,-1)),m=!rP.test(P?P.toLowerCase():"")}h=m}if(h)pt(c,"complete"),pt(c,"success");else{c.o=6;try{var T=fr(c)>2?c.g.statusText:""}catch{T=""}c.l=T+" ["+c.ca()+"]",QI(c)}}finally{mu(c)}}}}function mu(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let h=c.g;c.g=null,d||pt(c,"ready");try{h.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function fr(c){return c.g?c.g.readyState:0}t.ca=function(){try{return fr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),LM(d)}};function JI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function oP(c){let d={};c=(c.g&&fr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(v(c[m]))continue;var h=HM(c[m]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=d[T]||[];d[T]=A,A.push(h)}PM(d,function(m){return m.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xs(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function ZI(c){this.za=0,this.i=[],this.j=new Hs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xs("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xs("baseRetryDelayMs",5e3,c),this.Za=Xs("retryDelaySeedMs",1e4,c),this.Ta=Xs("forwardChannelMaxRetries",2,c),this.va=Xs("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new kI(c&&c.concurrentRequestLimit),this.Ba=new nP,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ZI.prototype,t.ka=8,t.I=1,t.connect=function(c,d,h,m){gt(0),this.W=c,this.H=d||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.J=aw(this,null,this.W),_u(this)};function Bh(c){if(XI(c),c.I==3){var d=c.V++,h=yn(c.J);if(Ie(h,"SID",c.M),Ie(h,"RID",d),Ie(h,"TYPE","terminate"),ea(c,h),d=new ur(c,c.j,d),d.M=2,d.A=hu(yn(h)),h=!1,s.navigator&&s.navigator.sendBeacon)try{h=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!h&&s.Image&&(new Image().src=d.A,h=!0),h||(d.g=cw(d.j,null),d.g.ea(d.A)),d.F=Date.now(),fu(d)}sw(c)}function yu(c){c.g&&(Uh(c),c.g.cancel(),c.g=null)}function XI(c){yu(c),c.v&&(s.clearTimeout(c.v),c.v=null),vu(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function _u(c){if(!OI(c.h)&&!c.m){c.m=!0;var d=c.Ea;Xe||_(),qe||(Xe(),qe=!0),w.add(d,c),c.D=0}}function sP(c,d){return FI(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=$s(l(c.Ea,c,d),ow(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let T=new ur(this,this.j,c),A=this.o;if(this.U&&(A?(A=lI(A),fI(A,this.U)):A=this.U),this.u!==null||this.R||(T.J=A,A=null),this.S)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,d>4096){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=tw(this,T,d),h=yn(this.J),Ie(h,"RID",c),Ie(h,"CVER",22),this.G&&Ie(h,"X-HTTP-Session-Id",this.G),ea(this,h),A&&(this.R?d="headers="+qs(WI(A))+"&"+d:this.u&&Vh(h,this.u,A)),Fh(this.h,T),this.Ra&&Ie(h,"TYPE","init"),this.S?(Ie(h,"$req",d),Ie(h,"SID","null"),T.U=!0,Ph(T,h,null)):Ph(T,h,d),this.I=2}}else this.I==3&&(c?ew(this,c):this.i.length==0||OI(this.h)||ew(this))};function ew(c,d){var h;d?h=d.l:h=c.V++;let m=yn(c.J);Ie(m,"SID",c.M),Ie(m,"RID",h),Ie(m,"AID",c.K),ea(c,m),c.u&&c.o&&Vh(m,c.u,c.o),h=new ur(c,c.j,h,c.D+1),c.u===null&&(h.J=c.o),d&&(c.i=d.G.concat(c.i)),d=tw(c,h,1e3),h.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Fh(c.h,h),Ph(h,m,d)}function ea(c,d){c.H&&au(c.H,function(h,m){Ie(d,m,h)}),c.l&&au({},function(h,m){Ie(d,m,h)})}function tw(c,d,h){h=Math.min(c.i.length,h);let m=c.l?l(c.l.Ka,c.l,c):null;e:{var T=c.i;let te=-1;for(;;){let $e=["count="+h];te==-1?h>0?(te=T[0].g,$e.push("ofs="+te)):te=0:$e.push("ofs="+te);let me=!0;for(let Ge=0;Ge<h;Ge++){var A=T[Ge].g;let _n=T[Ge].map;if(A-=te,A<0)te=Math.max(0,T[Ge].g-100),me=!1;else try{A="req"+A+"_"||"";try{var P=_n instanceof Map?_n:Object.entries(_n);for(let[hi,hr]of P){let pr=hr;a(hr)&&(pr=Ah(hr)),$e.push(A+hi+"="+encodeURIComponent(pr))}}catch(hi){throw $e.push(A+"type="+encodeURIComponent("_badmap")),hi}}catch{m&&m(_n)}}if(me){P=$e.join("&");break e}}P=void 0}return c=c.i.splice(0,h),d.G=c,P}function nw(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;Xe||_(),qe||(Xe(),qe=!0),w.add(d,c),c.A=0}}function jh(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=$s(l(c.Da,c),ow(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,rw(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=$s(l(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,gt(10),yu(this),rw(this))};function Uh(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function rw(c){c.g=new ur(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=yn(c.na);Ie(d,"RID","rpc"),Ie(d,"SID",c.M),Ie(d,"AID",c.K),Ie(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ie(d,"TO",c.ia),Ie(d,"TYPE","xmlhttp"),ea(c,d),c.u&&c.o&&Vh(d,c.u,c.o),c.O&&(c.g.H=c.O);var h=c.g;c=c.ba,h.M=1,h.A=hu(yn(d)),h.u=null,h.R=!0,MI(h,c)}t.Va=function(){this.C!=null&&(this.C=null,yu(this),jh(this),gt(19))};function vu(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function iw(c,d){var h=null;if(c.g==d){vu(c),Uh(c),c.g=null;var m=2}else if(Oh(c.h,d))h=d.G,LI(c.h,d),m=1;else return;if(c.I!=0){if(d.o)if(m==1){h=d.u?d.u.length:0,d=Date.now()-d.F;var T=c.D;m=lu(),pt(m,new CI(m,h)),_u(c)}else nw(c);else if(T=d.m,T==3||T==0&&d.X>0||!(m==1&&sP(c,d)||m==2&&jh(c)))switch(h&&h.length>0&&(d=c.h,d.i=d.i.concat(h)),T){case 1:fi(c,5);break;case 4:fi(c,10);break;case 3:fi(c,6);break;default:fi(c,2)}}}function ow(c,d){let h=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(h*=2),h*d}function fi(c,d){if(c.j.info("Error code "+d),d==2){var h=l(c.bb,c),m=c.Ua;let T=!m;m=new lr(m||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||zs(m,"https"),hu(m),T?eP(m.toString(),h):tP(m.toString(),h)}else gt(2);c.I=0,c.l&&c.l.pa(d),sw(c),XI(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function sw(c){if(c.I=0,c.ja=[],c.l){let d=VI(c.h);(d.length!=0||c.i.length!=0)&&(C(c.ja,d),C(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function aw(c,d,h){var m=h instanceof lr?yn(h):new lr(h);if(m.g!="")d&&(m.g=d+"."+m.g),Ws(m,m.u);else{var T=s.location;m=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;let A=new lr(null);m&&zs(A,m),d&&(A.g=d),T&&Ws(A,T),h&&(A.h=h),m=A}return h=c.G,d=c.wa,h&&d&&Ie(m,h,d),Ie(m,"VER",c.ka),ea(c,m),m}function cw(c,d,h){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new Ae(new pu({ab:h})):new Ae(c.ma),d.Fa(c.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function uw(){}t=uw.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Eu(){}Eu.prototype.g=function(c,d){return new xt(c,d)};function xt(c,d){st.call(this),this.g=new ZI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!v(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!v(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Eo(this)}p(xt,st),xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){Bh(this.g)},xt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.v&&(h={},h.__data__=Ah(c),c=h);d.i.push(new zM(d.Ya++,c)),d.I==3&&_u(d)},xt.prototype.N=function(){this.g.l=null,delete this.j,Bh(this.g),delete this.g,xt.Z.N.call(this)};function lw(c){Sh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}p(lw,Sh);function dw(){Nh.call(this),this.status=1}p(dw,Nh);function Eo(c){this.g=c}p(Eo,uw),Eo.prototype.ra=function(){pt(this.g,"a")},Eo.prototype.qa=function(c){pt(this.g,new lw(c))},Eo.prototype.pa=function(c){pt(this.g,new dw)},Eo.prototype.oa=function(){pt(this.g,"b")},Eu.prototype.createWebChannel=Eu.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,A_=er.createWebChannelTransport=function(){return new Eu},C_=er.getStatEventTarget=function(){return lu()},b_=er.Event=ui,of=er.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},du.NO_ERROR=0,du.TIMEOUT=8,du.HTTP_ERROR=6,Ec=er.ErrorCode=du,AI.COMPLETE="complete",T_=er.EventType=AI,wI.EventType=js,js.OPEN="a",js.CLOSE="b",js.ERROR="c",js.MESSAGE="d",st.prototype.listen=st.prototype.J,cs=er.WebChannel=wI,DU=er.FetchXmlHttpFactory=pu,Ae.prototype.listenOnce=Ae.prototype.K,Ae.prototype.getLastError=Ae.prototype.Ha,Ae.prototype.getLastErrorCode=Ae.prototype.ya,Ae.prototype.getStatus=Ae.prototype.ca,Ae.prototype.getResponseJson=Ae.prototype.La,Ae.prototype.getResponseText=Ae.prototype.la,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Fa,D_=er.XhrIo=Ae}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});var ZS="@firebase/firestore",XS="4.9.3";var Je=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");var Ms="12.7.0";var io=new Sn("@firebase/firestore");function us(){return io.logLevel}function F(t,...e){if(io.logLevel<=re.DEBUG){let n=e.map(vE);io.debug(`Firestore (${Ms}): ${t}`,...n)}}function nr(t,...e){if(io.logLevel<=re.ERROR){let n=e.map(vE);io.error(`Firestore (${Ms}): ${t}`,...n)}}function ms(t,...e){if(io.logLevel<=re.WARN){let n=e.map(vE);io.warn(`Firestore (${Ms}): ${t}`,...n)}}function vE(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function B(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,H0(t,r,n)}function H0(t,e,n){let r=`FIRESTORE (${Ms}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw nr(r),new Error(r)}function ae(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||H0(e,i,r)}function W(t,e){return t}var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends Bt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var en=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var ff=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},P_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Je.UNAUTHENTICATED))}shutdown(){}},x_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},k_=class{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ae(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new en;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new en,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new en)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string",31837,{l:r}),new ff(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string",2055,{h:e}),new Je(e)}},O_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},F_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new O_(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Je.FIRST_PARTY))}shutdown(){}invalidateToken(){}},hf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},L_=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ae(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new hf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function TU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Sc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=TU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ie(t,e){return t<e?-1:t>e?1:0}function V_(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return S_(i)===S_(o)?ie(i,o):S_(i)?1:-1}return ie(t.length,e.length)}var bU=55296,CU=57343;function S_(t){let e=t.charCodeAt(0);return e>=bU&&e<=CU}function ys(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var e0="__name__",pf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&B(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&B(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ie(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):V_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xn.fromString(e.substring(4,e.length-2))}},Ee=class t extends pf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(S.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},AU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,jt=class t extends pf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return AU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e0}static keyField(){return new t([e0])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new k(S.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var j=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ee.fromString(e))}static fromName(e){return new t(Ee.fromString(e).popFirst(5))}static empty(){return new t(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ee(e.slice()))}};function q0(t,e,n){if(!n)throw new k(S.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SU(t,e,n,r){if(e===!0&&r===!0)throw new k(S.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function t0(t){if(!j.isDocumentKey(t))throw new k(S.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function n0(t){if(j.isDocumentKey(t))throw new k(S.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function G0(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Wf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B(12329,{type:typeof t})}function Tt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new k(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Wf(t);throw new k(S.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function NU(t,e){if(e<=0)throw new k(S.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function Ve(t,e){let n={typeString:t};return e&&(n.value=e),n}function $c(t,e){if(!G0(t))throw new k(S.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new k(S.INVALID_ARGUMENT,n);return!0}var r0=-62135596800,i0=1e6,Be=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*i0);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new k(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new k(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<r0)throw new k(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i0}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if($c(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-r0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:Ve("string",Be._jsonSchemaVersion),seconds:Ve("number"),nanoseconds:Ve("number")};var z=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Be(0,0))}static max(){return new t(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Nc=-1,B_=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};B_.UNKNOWN_ID=-1;function RU(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=z.fromTimestamp(r===1e9?new Be(n+1,0):new Be(n,r));return new oo(i,j.empty(),e)}function MU(t){return new oo(t.readTime,t.key,Nc)}var oo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(z.min(),j.empty(),Nc)}static max(){return new t(z.max(),j.empty(),Nc)}};function PU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=j.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}var xU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",j_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Ps(t){if(t.code!==S.FAILED_PRECONDITION||t.message!==xU)throw t;F("LocalStore","Unexpectedly lost primary lease")}var M=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(f=>{s[l]=f,++a,a===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function kU(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xs(t){return t.name==="IndexedDbTransactionError"}var EE=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),IE=-1;function Hc(t){return t==null}function Rc(t){return t===0&&1/t==-1/0}function OU(t){return typeof t=="number"&&Number.isInteger(t)&&!Rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var z0="";function FU(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=o0(e)),e=LU(t.get(n),e);return o0(e)}function LU(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case z0:n+="";break;default:n+=o}}return n}function o0(t){return t+z0+""}var VU="remoteDocuments",W0="owner";var K0="mutationQueues";var Q0="mutations";var Y0="documentMutations",BU="remoteDocumentsV14";var J0="remoteDocumentGlobal";var Z0="targets";var X0="targetDocuments";var eN="targetGlobal",tN="collectionParents";var nN="clientMetadata";var rN="bundles";var iN="namedQueries";var jU="indexConfiguration";var UU="indexState";var $U="indexEntries";var oN="documentOverlays";var HU="globals";var qU=[K0,Q0,Y0,VU,Z0,W0,eN,X0,nN,J0,tN,rN,iN],xte=[...qU,oN],GU=[K0,Q0,Y0,BU,Z0,W0,eN,X0,nN,J0,tN,rN,iN,oN],zU=GU,WU=[...zU,jU,UU,$U];var kte=[...WU,HU];function s0(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ni(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ne=class t{constructor(e,n){this.comparator=e,this.root=n||xn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hs(this.root,e,this.comparator,!1)}getReverseIterator(){return new hs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hs(this.root,e,this.comparator,!0)}},hs=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},xn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw B(43730,{key:this.key,value:this.value});if(this.right.isRed())throw B(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw B(27949);return e+(this.isRed()?0:1)}};xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw B(57766)}get value(){throw B(16141)}get color(){throw B(16727)}get left(){throw B(29726)}get right(){throw B(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new xn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ze=class t{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gf(this.data.getIterator())}getIteratorFrom(e){return new gf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},gf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Xt=class t{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ze(jt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ys(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var mf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ft=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new mf("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ft.EMPTY_BYTE_STRING=new ft("");var KU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rr(t){if(ae(!!t,39018),typeof t=="string"){let e=0,n=KU.exec(t);if(ae(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ir(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}var aN="server_timestamp",cN="__type__",uN="__previous_value__",lN="__local_write_time__";function wE(t){return(t?.mapValue?.fields||{})[cN]?.stringValue===aN}function Kf(t){let e=t.mapValue.fields[uN];return wE(e)?Kf(e):e}function Mc(t){let e=rr(t.mapValue.fields[lN].timestampValue);return new Be(e.seconds,e.nanos)}var U_=class{constructor(e,n,r,i,o,s,a,u,l,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},yf="(default)",_f=class t{constructor(e,n){this.projectId=e,this.database=n||yf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===yf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var DE="__type__",dN="__max__",sf={mapValue:{fields:{__type__:{stringValue:dN}}}},TE="__vector__",_s="value";function Zr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wE(t)?4:hN(t)?9007199254740991:fN(t)?10:11:B(28295,{value:t})}function On(t,e){if(t===e)return!0;let n=Zr(t);if(n!==Zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Mc(t).isEqual(Mc(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=rr(i.timestampValue),a=rr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return ir(i.bytesValue).isEqual(ir(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return be(i.geoPointValue.latitude)===be(o.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return be(i.integerValue)===be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=be(i.doubleValue),a=be(o.doubleValue);return s===a?Rc(s)===Rc(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return ys(t.arrayValue.values||[],e.arrayValue.values||[],On);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(s0(s)!==s0(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!On(s[u],a[u])))return!1;return!0})(t,e);default:return B(52216,{left:t})}}function Pc(t,e){return(t.values||[]).find(n=>On(n,e))!==void 0}function vs(t,e){if(t===e)return 0;let n=Zr(t),r=Zr(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=be(o.integerValue||o.doubleValue),u=be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return a0(t.timestampValue,e.timestampValue);case 4:return a0(Mc(t),Mc(e));case 5:return V_(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=ir(o),u=ir(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let f=ie(a[l],u[l]);if(f!==0)return f}return ie(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ie(be(o.latitude),be(s.latitude));return a!==0?a:ie(be(o.longitude),be(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return c0(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},u=s.fields||{},l=a[_s]?.arrayValue,f=u[_s]?.arrayValue,p=ie(l?.values?.length||0,f?.values?.length||0);return p!==0?p:c0(l,f)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===sf.mapValue&&s===sf.mapValue)return 0;if(o===sf.mapValue)return 1;if(s===sf.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let g=V_(u[p],f[p]);if(g!==0)return g;let y=vs(a[u[p]],l[f[p]]);if(y!==0)return y}return ie(u.length,f.length)})(t.mapValue,e.mapValue);default:throw B(23264,{he:n})}}function a0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);let n=rr(t),r=rr(e),i=ie(n.seconds,r.seconds);return i!==0?i:ie(n.nanos,r.nanos)}function c0(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=vs(n[i],r[i]);if(o)return o}return ie(n.length,r.length)}function Es(t){return $_(t)}function $_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=rr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ir(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return j.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=$_(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${$_(n.fields[s])}`;return i+"}"})(t.mapValue):B(61005,{value:t})}function uf(t){switch(Zr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Kf(t);return e?16+uf(e):16;case 5:return 2*t.stringValue.length;case 6:return ir(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+uf(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return ni(r.fields,(o,s)=>{i+=o.length+uf(s)}),i})(t.mapValue);default:throw B(13486,{value:t})}}function u0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function H_(t){return!!t&&"integerValue"in t}function bE(t){return!!t&&"arrayValue"in t}function l0(t){return!!t&&"nullValue"in t}function d0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lf(t){return!!t&&"mapValue"in t}function fN(t){return(t?.mapValue?.fields||{})[DE]?.stringValue===TE}function Dc(t){if(t.geoPointValue)return{geoPointValue:x({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:x({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ni(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Dc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dc(t.arrayValue.values[n]);return e}return x({},t)}function hN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===dN}var Fte={mapValue:{fields:{[DE]:{stringValue:TE},[_s]:{arrayValue:{}}}}};var Pt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(n)}setAll(e){let n=jt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Dc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());lf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];lf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ni(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Dc(this.value))}};function pN(t){let e=[];return ni(t.fields,(n,r)=>{let i=new jt([n]);if(lf(r)){let o=pN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Xt(e)}var $t=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,z.min(),z.min(),z.min(),Pt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,z.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,z.min(),z.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,z.min(),z.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Is=class{constructor(e,n){this.position=e,this.inclusive=n}};function f0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=j.comparator(j.fromName(s.referenceValue),n.key):r=vs(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function h0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!On(t.position[n],e.position[n]))return!1;return!0}var so=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function QU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var vf=class{},Le=class t extends vf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new G_(e,n,r):n==="array-contains"?new K_(e,r):n==="in"?new Q_(e,r):n==="not-in"?new Y_(e,r):n==="array-contains-any"?new J_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new z_(e,r):new W_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(vs(n,this.value)):n!==null&&Zr(this.value)===Zr(n)&&this.matchesComparison(vs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},mn=class t extends vf{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return gN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function gN(t){return t.op==="and"}function mN(t){return YU(t)&&gN(t)}function YU(t){for(let e of t.filters)if(e instanceof mn)return!1;return!0}function q_(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+Es(t.value);if(mN(t))return t.filters.map(e=>q_(e)).join(",");{let e=t.filters.map(n=>q_(n)).join(",");return`${t.op}(${e})`}}function yN(t,e){return t instanceof Le?(function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&On(r.value,i.value)})(t,e):t instanceof mn?(function(r,i){return i instanceof mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&yN(s,i.filters[a]),!0):!1})(t,e):void B(19439)}function _N(t){return t instanceof Le?(function(n){return`${n.field.canonicalString()} ${n.op} ${Es(n.value)}`})(t):t instanceof mn?(function(n){return n.op.toString()+" {"+n.getFilters().map(_N).join(" ,")+"}"})(t):"Filter"}var G_=class extends Le{constructor(e,n,r){super(e,n,r),this.key=j.fromName(r.referenceValue)}matches(e){let n=j.comparator(e.key,this.key);return this.matchesComparison(n)}},z_=class extends Le{constructor(e,n){super(e,"in",n),this.keys=vN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},W_=class extends Le{constructor(e,n){super(e,"not-in",n),this.keys=vN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function vN(t,e){return(e.arrayValue?.values||[]).map(n=>j.fromName(n.referenceValue))}var K_=class extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return bE(n)&&Pc(n.arrayValue,this.value)}},Q_=class extends Le{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Pc(this.value.arrayValue,n)}},Y_=class extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pc(this.value.arrayValue,n)}},J_=class extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!bE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pc(this.value.arrayValue,r))}};var Z_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function p0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Z_(t,e,n,r,i,o,s)}function CE(t){let e=W(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>q_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Hc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Es(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Es(r)).join(",")),e.Te=n}return e.Te}function AE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!QU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!yN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!h0(t.startAt,e.startAt)&&h0(t.endAt,e.endAt)}function X_(t){return j.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Xr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function JU(t,e,n,r,i,o,s,a){return new Xr(t,e,n,r,i,o,s,a)}function Qf(t){return new Xr(t)}function g0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EN(t){return t.collectionGroup!==null}function Tc(t){let e=W(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ze(jt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new so(o,r))}),n.has(jt.keyField().canonicalString())||e.Ie.push(new so(jt.keyField(),r))}return e.Ie}function kn(t){let e=W(t);return e.Ee||(e.Ee=ZU(e,Tc(t))),e.Ee}function ZU(t,e){if(t.limitType==="F")return p0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new so(i.field,o)});let n=t.endAt?new Is(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Is(t.startAt.position,t.startAt.inclusive):null;return p0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ev(t,e){let n=t.filters.concat([e]);return new Xr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ef(t,e,n){return new Xr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yf(t,e){return AE(kn(t),kn(e))&&t.limitType===e.limitType}function IN(t){return`${CE(kn(t))}|lt:${t.limitType}`}function ls(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>_N(i)).join(", ")}]`),Hc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Es(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Es(i)).join(",")),`Target(${r})`})(kn(t))}; limitType=${t.limitType})`}function Jf(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):j.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of Tc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=f0(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,Tc(r),i)||r.endAt&&!(function(s,a,u){let l=f0(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,Tc(r),i))})(t,e)}function XU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wN(t){return(e,n)=>{let r=!1;for(let i of Tc(t)){let o=e$(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function e$(t,e,n){let r=t.field.isKeyField()?j.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?vs(u,l):B(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return B(19790,{direction:t.dir})}}var or=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ni(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return sN(this.inner)}size(){return this.innerSize}};var t$=new Ne(j.comparator);function sr(){return t$}var DN=new Ne(j.comparator);function Ic(...t){let e=DN;for(let n of t)e=e.insert(n.key,n);return e}function TN(t){let e=DN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function to(){return bc()}function bN(){return bc()}function bc(){return new or(t=>t.toString(),(t,e)=>t.isEqual(e))}var n$=new Ne(j.comparator),r$=new Ze(j.comparator);function oe(...t){let e=r$;for(let n of t)e=e.add(n);return e}var i$=new Ze(ie);function o$(){return i$}function SE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rc(e)?"-0":e}}function CN(t){return{integerValue:""+t}}function s$(t,e){return OU(e)?CN(e):SE(t,e)}var ws=class{constructor(){this._=void 0}};function a$(t,e,n){return t instanceof ao?(function(i,o){let s={fields:{[cN]:{stringValue:aN},[lN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&wE(o)&&(o=Kf(o)),o&&(s.fields[uN]=o),{mapValue:s}})(n,e):t instanceof co?SN(t,e):t instanceof uo?NN(t,e):(function(i,o){let s=AN(i,o),a=m0(s)+m0(i.Ae);return H_(s)&&H_(i.Ae)?CN(a):SE(i.serializer,a)})(t,e)}function c$(t,e,n){return t instanceof co?SN(t,e):t instanceof uo?NN(t,e):n}function AN(t,e){return t instanceof Ds?(function(r){return H_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var ao=class extends ws{},co=class extends ws{constructor(e){super(),this.elements=e}};function SN(t,e){let n=RN(e);for(let r of t.elements)n.some(i=>On(i,r))||n.push(r);return{arrayValue:{values:n}}}var uo=class extends ws{constructor(e){super(),this.elements=e}};function NN(t,e){let n=RN(e);for(let r of t.elements)n=n.filter(i=>!On(i,r));return{arrayValue:{values:n}}}var Ds=class extends ws{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function m0(t){return be(t.integerValue||t.doubleValue)}function RN(t){return bE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var tv=class{constructor(e,n){this.field=e,this.transform=n}};function u$(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof co&&i instanceof co||r instanceof uo&&i instanceof uo?ys(r.elements,i.elements,On):r instanceof Ds&&i instanceof Ds?On(r.Ae,i.Ae):r instanceof ao&&i instanceof ao})(t.transform,e.transform)}var nv=class{constructor(e,n){this.version=e,this.transformResults=n}},Dt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function df(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ts=class{};function MN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bs(t.key,Dt.none()):new lo(t.key,t.data,Dt.none());{let n=t.data,r=Pt.empty(),i=new Ze(jt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Fn(t.key,r,new Xt(i.toArray()),Dt.none())}}function l$(t,e,n){t instanceof lo?(function(i,o,s){let a=i.value.clone(),u=_0(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Fn?(function(i,o,s){if(!df(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=_0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(PN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Cc(t,e,n,r){return t instanceof lo?(function(o,s,a,u){if(!df(o.precondition,s))return a;let l=o.value.clone(),f=v0(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof Fn?(function(o,s,a,u){if(!df(o.precondition,s))return a;let l=v0(o.fieldTransforms,u,s),f=s.data;return f.setAll(PN(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return df(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function d$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=AN(r.transform,i||null);o!=null&&(n===null&&(n=Pt.empty()),n.set(r.field,o))}return n||null}function y0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ys(r,i,(o,s)=>u$(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var lo=class extends Ts{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Fn=class extends Ts{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function PN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function _0(t,e,n){let r=new Map;ae(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,c$(s,a,n[i]))}return r}function v0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,a$(o,s,e))}return r}var bs=class extends Ts{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},If=class extends Ts{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var rv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&l$(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Cc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Cc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=bN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=MN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&ys(this.mutations,e.mutations,(n,r)=>y0(n,r))&&ys(this.baseMutations,e.baseMutations,(n,r)=>y0(n,r))}},iv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return n$})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var ov=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var sv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Oe,se;function xN(t){switch(t){case S.OK:return B(64938);case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0;default:return B(15467,{code:t})}}function kN(t){if(t===void 0)return nr("GRPC error has no .code"),S.UNKNOWN;switch(t){case Oe.OK:return S.OK;case Oe.CANCELLED:return S.CANCELLED;case Oe.UNKNOWN:return S.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return S.INTERNAL;case Oe.UNAVAILABLE:return S.UNAVAILABLE;case Oe.UNAUTHENTICATED:return S.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case Oe.NOT_FOUND:return S.NOT_FOUND;case Oe.ALREADY_EXISTS:return S.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return S.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case Oe.ABORTED:return S.ABORTED;case Oe.OUT_OF_RANGE:return S.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return S.UNIMPLEMENTED;case Oe.DATA_LOSS:return S.DATA_LOSS;default:return B(39323,{code:t})}}(se=Oe||(Oe={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";var f$=null;function h$(){return new TextEncoder}var p$=new Xn([4294967295,4294967295],0);function E0(t){let e=h$().encode(t),n=new w_;return n.update(e),new Uint8Array(n.digest())}function I0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Xn([n,r],0),new Xn([i,o],0)]}var av=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new no(`Invalid padding: ${n}`);if(r<0)throw new no(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new no(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new no(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Xn.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Xn.fromNumber(r)));return i.compare(p$)===1&&(i=new Xn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=E0(e),[r,i]=I0(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let n=E0(e),[r,i]=I0(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},no=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var wf=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(z.min(),i,new Ne(ie),sr(),oe())}},xc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,oe(),oe(),oe())}};var ps=class{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}},Df=class{constructor(e,n){this.targetId=e,this.Ce=n}},Tf=class{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},bf=class{constructor(){this.ve=0,this.Fe=w0(),this.Me=ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=oe(),n=oe(),r=oe();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:B(38017,{changeType:o})}}),new xc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=w0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},cv=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=sr(),this.Je=af(),this.He=af(),this.Ye=new Ne(ie)}Ze(e){for(let n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:B(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(X_(o))if(r===0){let s=new j(o.path);this.et(n,s,$t.newNoDocument(s,z.min()))}else ae(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}f$?.lt((function(f,p,g,y,C){let R={localCacheCount:f,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},N=p.unchangedNames;return N&&(R.bloomFilter={applied:C===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:O=>y?.mightContain(O)??!1}),R})(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=ir(r).toUint8Array()}catch(u){if(u instanceof mf)return ms("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new av(s,i,o)}catch(u){return ms(u instanceof no?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&X_(a.target)){let u=new j(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,$t.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=oe();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new wf(e,n,this.Ye,this.je,r);return this.je=sr(),this.Je=af(),this.He=af(),this.Ye=new Ne(ie),i}Xe(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new bf,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ze(ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ze(ie),this.Je=this.Je.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bf),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function af(){return new Ne(j.comparator)}function w0(){return new Ne(j.comparator)}var g$={asc:"ASCENDING",desc:"DESCENDING"},m$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y$={and:"AND",or:"OR"},uv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function lv(t,e){return t.useProto3Json||Hc(e)?e:{value:e}}function Cf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ON(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _$(t,e){return Cf(t,e.toTimestamp())}function Ut(t){return ae(!!t,49232),z.fromTimestamp((function(n){let r=rr(n);return new Be(r.seconds,r.nanos)})(t))}function NE(t,e){return dv(t,e).canonicalString()}function dv(t,e){let n=(function(i){return new Ee(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function FN(t){let e=Ee.fromString(t);return ae($N(e),10190,{key:e.toString()}),e}function Af(t,e){return NE(t.databaseId,e.path)}function Ac(t,e){let n=FN(e);if(n.get(1)!==t.databaseId.projectId)throw new k(S.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new k(S.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new j(VN(n))}function LN(t,e){return NE(t.databaseId,e)}function v$(t){let e=FN(t);return e.length===4?Ee.emptyPath():VN(e)}function fv(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VN(t){return ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function D0(t,e,n){return{name:Af(t,e),fields:n.value.mapValue.fields}}function E$(t,e){return"found"in e?(function(r,i){ae(!!i.found,43571),i.found.name,i.found.updateTime;let o=Ac(r,i.found.name),s=Ut(i.found.updateTime),a=i.found.createTime?Ut(i.found.createTime):z.min(),u=new Pt({mapValue:{fields:i.found.fields}});return $t.newFoundDocument(o,s,a,u)})(t,e):"missing"in e?(function(r,i){ae(!!i.missing,3894),ae(!!i.readTime,22933);let o=Ac(r,i.missing),s=Ut(i.readTime);return $t.newNoDocument(o,s)})(t,e):B(7234,{result:e})}function I$(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,f){return l.useProto3Json?(ae(f===void 0||typeof f=="string",58123),ft.fromBase64String(f||"")):(ae(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ft.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let f=l.code===void 0?S.UNKNOWN:kN(l.code);return new k(f,l.message||"")})(s);n=new Tf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Ac(t,r.document.name),o=Ut(r.document.updateTime),s=r.document.createTime?Ut(r.document.createTime):z.min(),a=new Pt({mapValue:{fields:r.document.fields}}),u=$t.newFoundDocument(i,o,s,a),l=r.targetIds||[],f=r.removedTargetIds||[];n=new ps(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Ac(t,r.document),o=r.readTime?Ut(r.readTime):z.min(),s=$t.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ps([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Ac(t,r.document),o=r.removedTargetIds||[];n=new ps([],o,i,null)}else{if(!("filter"in e))return B(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new sv(i,o),a=r.targetId;n=new Df(a,s)}}return n}function BN(t,e){let n;if(e instanceof lo)n={update:D0(t,e.key,e.value)};else if(e instanceof bs)n={delete:Af(t,e.key)};else if(e instanceof Fn)n={update:D0(t,e.key,e.data),updateMask:R$(e.fieldMask)};else{if(!(e instanceof If))return B(16599,{Vt:e.type});n={verify:Af(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof ao)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof co)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof uo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ds)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw B(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:_$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:B(27497)})(t,e.precondition)),n}function w$(t,e){return t&&t.length>0?(ae(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Ut(i.updateTime):Ut(o);return s.isEqual(z.min())&&(s=Ut(o)),new nv(s,i.transformResults||[])})(n,e))):[]}function D$(t,e){return{documents:[LN(t,e.path)]}}function T$(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LN(t,i);let o=(function(l){if(l.length!==0)return UN(mn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(f=>(function(g){return{field:ds(g.field),direction:A$(g.dir)}})(f))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=lv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:i}}function b$(t){let e=v$(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ae(r===1,65062);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=(function(p){let g=jN(p);return g instanceof mn&&mN(g)?g.getFilters():[g]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(g=>(function(C){return new so(fs(C.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(g))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,Hc(g)?null:g})(n.limit));let u=null;n.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new Is(y,g)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Is(y,g)})(n.endAt)),JU(e,i,s,o,a,"F",u,l)}function C$(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=fs(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=fs(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=fs(n.unaryFilter.field);return Le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=fs(n.unaryFilter.field);return Le.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return B(61313);default:return B(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Le.create(fs(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return B(58110);default:return B(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return mn.create(n.compositeFilter.filters.map(r=>jN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B(1026)}})(n.compositeFilter.op))})(t):B(30097,{filter:t})}function A$(t){return g$[t]}function S$(t){return m$[t]}function N$(t){return y$[t]}function ds(t){return{fieldPath:t.canonicalString()}}function fs(t){return jt.fromServerFormat(t.fieldPath)}function UN(t){return t instanceof Le?(function(n){if(n.op==="=="){if(d0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NAN"}};if(l0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(d0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NAN"}};if(l0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ds(n.field),op:S$(n.op),value:n.value}}})(t):t instanceof mn?(function(n){let r=n.getFilters().map(i=>UN(i));return r.length===1?r[0]:{compositeFilter:{op:N$(n.op),filters:r}}})(t):B(54877,{filter:t})}function R$(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $N(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var kc=class t{constructor(e,n,r,i,o=z.min(),s=z.min(),a=ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var hv=class{constructor(e){this.yt=e}};function M$(t){let e=b$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ef(e,e.limit,"L"):e}var Sf=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Rc(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=rr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(ir(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?hN(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):fN(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):B(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=_s,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(be(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),j.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};Sf.Kt=new Sf;var pv=class{constructor(){this.Cn=new gv}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(oo.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(oo.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}},gv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ze(Ee.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(Ee.comparator)).toArray()}};var Lte=new Uint8Array(0);var T0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HN=41943040,Zt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(HN,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);var Oc=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var b0="LruGarbageCollector",P$=1048576;function C0([t,e],[n,r]){let i=ie(t,n);return i===0?ie(e,r):i}var mv=class{constructor(e){this.Ir=e,this.buffer=new Ze(C0),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();C0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},yv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){F(b0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){xs(n)?F(b0,"Ignoring IndexedDB error during garbage collection: ",n):await Ps(n)}await this.Vr(3e5)})}},_v=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(EE.ce);let r=new mv(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(T0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,a,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),us()<=re.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function x$(t,e){return new _v(t,e)}var vv=class{constructor(){this.changes=new or(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ev=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Iv=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Cc(r.mutation,i,Xt.empty(),Be.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){let i=to();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Ic();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=to();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=sr(),s=bc(),a=(function(){return bc()})();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof Fn)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),Cc(f.mutation,l,f.mutation.getFieldMask(),Be.now())):s.set(l.key,Xt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>a.set(l,new Ev(f,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,n){let r=bc(),i=new Ne((s,a)=>s-a),o=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||Xt.empty();f=a.applyToLocalView(l,f),r.set(u,f);let p=(i.get(a.batchId)||oe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,f=u.value,p=bN();f.forEach(g=>{if(!o.has(g)){let y=MN(n.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return M.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return j.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):EN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):M.resolve(to()),a=Nc,u=o;return s.next(l=>M.forEach(l,(f,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,oe())).next(f=>({batchId:a,changes:TN(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new j(n)).next(r=>{let i=Ic();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Ic();return this.indexManager.getCollectionParents(e,o).next(a=>M.forEach(a,u=>{let l=(function(p,g){return new Xr(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,$t.newInvalidDocument(f)))});let a=Ic();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&Cc(f.mutation,l,Xt.empty(),Be.now()),Jf(n,l)&&(a=a.insert(u,l))}),a})}};var wv=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ut(i.createTime)}})(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:M$(i.bundledQuery),readTime:Ut(i.readTime)}})(n)),M.resolve()}};var Dv=class{constructor(){this.overlays=new Ne(j.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){let r=to();return M.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),M.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){let i=to(),o=n.length+1,s=new j(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ne((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=to(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let a=to(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>a.set(l,f)),!(a.size()>=i)););return M.resolve(a)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new ov(n,r));let o=this.qr.get(n);o===void 0&&(o=oe(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}};var Tv=class{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}};var Fc=class{constructor(){this.Qr=new Ze(Fe.$r),this.Ur=new Ze(Fe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let r=new Fe(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Fe(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){let n=new j(new Ee([])),r=new Fe(n,e),i=new Fe(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new j(new Ee([])),r=new Fe(n,e),i=new Fe(n,e+1),o=oe();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Fe(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Fe=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return j.comparator(e.key,n.key)||ie(e.Yr,n.Yr)}static Kr(e,n){return ie(e.Yr,n.Yr)||j.comparator(e.key,n.key)}};var bv=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(Fe.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new rv(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new Fe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(s)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ei(r),o=i<0?0:i;return M.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?IE:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Fe(n,0),i=new Fe(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),M.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(ie);return n.forEach(i=>{let o=new Fe(i,0),s=new Fe(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;j.isDocumentKey(o)||(o=o.child(""));let s=new Fe(new j(o),0),a=new Ze(ie);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),M.resolve(this.ti(a))}ti(e){let n=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ae(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,i=>{let o=new Fe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){let r=new Fe(n,0),i=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Cv=class{constructor(e){this.ri=e,this.docs=(function(){return new Ne(j.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=sr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():$t.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=sr(),s=n.path,a=new j(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||PU(MU(f),r)<=0||(i.has(f.key)||Jf(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return M.resolve(o)}getAllFromCollectionGroup(e,n,r,i){B(9500)}ii(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Av(this)}getSize(e){return M.resolve(this.size)}},Av=class extends vv{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var Sv=class{constructor(e){this.persistence=e,this.si=new or(n=>CE(n),AE),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.oi=0,this._i=new Fc,this.targetCount=0,this.ai=Oc.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new Oc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(o).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){let r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),M.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){let r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}};var Nf=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new EE(0),this.li=!1,this.li=!0,this.hi=new Tv,this.referenceDelegate=e(this),this.Pi=new Sv(this),this.indexManager=new pv,this.remoteDocumentCache=(function(i){return new Cv(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new hv(n),this.Ii=new wv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Dv,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new bv(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new Nv(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return M.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}},Nv=class extends j_{constructor(e){super(),this.currentSequenceNumber=e}},Rv=class t{constructor(e){this.persistence=e,this.Ri=new Fc,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw B(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,r=>{let i=j.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,z.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},Rf=class t{constructor(e,n){this.persistence=e,this.pi=new or(r=>FU(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=x$(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return M.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(a=>{a||(r++,o.removeEntry(s,z.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=uf(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.pi.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Mv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=oe(),i=oe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var Pv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var xv=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return vA()?8:kU(Ye())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Pv;return this.Ss(e,n,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,n,s,a.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(us()<=re.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(us()<=re.DEBUG&&F("QueryEngine","Query:",ls(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(us()<=re.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):M.resolve())}ys(e,n){if(g0(n))return M.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ef(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=oe(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(n,a);return this.Cs(n,l,s,u.readTime)?this.ys(e,Ef(n,null,"F")):this.vs(e,l,n,u)}))})))}ws(e,n,r,i){return g0(n)||i.isEqual(z.min())?M.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(n,o);return this.Cs(n,s,r,i)?M.resolve(null):(us()<=re.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ls(n)),this.vs(e,s,n,RU(i,Nc)).next(a=>a))})}Ds(e,n){let r=new Ze(wN(e));return n.forEach((i,o)=>{Jf(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return us()<=re.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",ls(n)),this.ps.getDocumentsMatchingQuery(e,n,oo.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var RE="LocalStore",k$=3e8,kv=class{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ne(ie),this.xs=new or(o=>CE(o),AE),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Iv(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}};function O$(t,e,n,r){return new kv(t,e,n,r)}async function qN(t,e){let n=W(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=oe();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){a.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})}function F$(t,e){let n=W(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,f){let p=l.batch,g=p.keys(),y=M.resolve();return g.forEach(C=>{y=y.next(()=>f.getEntry(u,C)).next(R=>{let N=l.docVersions.get(C);ae(N!==null,48541),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),f.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=oe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function GN(t){let e=W(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function L$(t,e){let n=W(t),r=e.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let a=[];e.targetChanges.forEach((f,p)=>{let g=i.get(p);if(!g)return;a.push(n.Pi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,f.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ft.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),(function(R,N,O){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=k$?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(g,y,f)&&a.push(n.Pi.updateTargetData(o,y))});let u=sr(),l=oe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),a.push(V$(o,s,e.documentUpdates).next(f=>{u=f.ks,l=f.qs})),!r.isEqual(z.min())){let f=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(f)}return M.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ms=i,o))}function V$(t,e,n){let r=oe(),i=oe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=sr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(z.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):F(RE,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function B$(t,e){let n=W(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=IE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function j$(t,e){let n=W(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,M.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new kc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Ov(t,e,n){let r=W(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!xs(s))throw s;F(RE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function A0(t,e,n){let r=W(t),i=z.min(),o=oe();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,f){let p=W(u),g=p.xs.get(f);return g!==void 0?M.resolve(p.Ms.get(g)):p.Pi.getTargetData(l,f)})(r,s,kn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:z.min(),n?o:oe())).next(a=>(U$(r,XU(e),a),{documents:a,Qs:o})))}function U$(t,e,n){let r=t.Os.get(e)||z.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}var Mf=class{constructor(){this.activeTargetIds=o$()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Fv=class{constructor(){this.Mo=new Mf,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Lv=class{Oo(e){}shutdown(){}};var S0="ConnectivityMonitor",Pf=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(S0,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){F(S0,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var cf=null;function Vv(){return cf===null?cf=(function(){return 268435456+Math.round(2147483648*Math.random())})():cf++,"0x"+cf.toString(16)}var N_="RestConnection",$$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Bv=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===yf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){let s=Vv(),a=this.zo(e,n.toUriEncodedString());F(N_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),f=Vr(l);return this.Jo(e,a,u,r,f).then(p=>(F(N_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ms(N_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ms})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){let r=$$[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}};var jv=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var dt="WebChannelConnection",Uv=class extends Bv{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=Vv();return new Promise((a,u)=>{let l=new D_;l.setWithCredentials(!0),l.listenOnce(T_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ec.NO_ERROR:let p=l.getResponseJson();F(dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ec.TIMEOUT:F(dt,`RPC '${e}' ${s} timed out`),u(new k(S.DEADLINE_EXCEEDED,"Request time out"));break;case Ec.HTTP_ERROR:let g=l.getStatus();if(F(dt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let R=(function(O){let K=O.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf(K)>=0?K:S.UNKNOWN})(C.status);u(new k(R,C.message))}else u(new k(S.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new k(S.UNAVAILABLE,"Connection failed."));break;default:B(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{F(dt,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);F(dt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",f,r,15)})}T_(e,n,r){let i=Vv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=A_(),a=C_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=o.join("");F(dt,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.I_(p);let g=!1,y=!1,C=new jv({Yo:N=>{y?F(dt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(F(dt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),F(dt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Zo:()=>p.close()}),R=(N,O,K)=>{N.listen(O,ce=>{try{K(ce)}catch(Ue){setTimeout(()=>{throw Ue},0)}})};return R(p,cs.EventType.OPEN,()=>{y||(F(dt,`RPC '${e}' stream ${i} transport opened.`),C.o_())}),R(p,cs.EventType.CLOSE,()=>{y||(y=!0,F(dt,`RPC '${e}' stream ${i} transport closed`),C.a_(),this.E_(p))}),R(p,cs.EventType.ERROR,N=>{y||(y=!0,ms(dt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),C.a_(new k(S.UNAVAILABLE,"The operation could not be completed")))}),R(p,cs.EventType.MESSAGE,N=>{if(!y){let O=N.data[0];ae(!!O,16349);let K=O,ce=K?.error||K[0]?.error;if(ce){F(dt,`RPC '${e}' stream ${i} received error:`,ce);let Ue=ce.status,Xe=(function(_){let E=Oe[_];if(E!==void 0)return kN(E)})(Ue),qe=ce.message;Xe===void 0&&(Xe=S.INTERNAL,qe="Unknown error status: "+Ue+" with message "+ce.message),y=!0,C.a_(new k(Xe,qe)),p.close()}else F(dt,`RPC '${e}' stream ${i} received:`,O),C.u_(O)}}),R(a,b_.STAT_EVENT,N=>{N.stat===of.PROXY?F(dt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===of.NOPROXY&&F(dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.__()},0),C}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}};function R_(){return typeof document<"u"?document:null}function Zf(t){return new uv(t,!0)}var Lc=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var N0="PersistentStream",xf=class{constructor(e,n,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Lc(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===S.RESOURCE_EXHAUSTED?(nr(n.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===S.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new k(S.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return F(N0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(F(N0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},$v=class extends xf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=I$(this.serializer,e),r=(function(o){if(!("targetChange"in o))return z.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?z.min():s.readTime?Ut(s.readTime):z.min()})(e);return this.listener.H_(n,r)}Y_(e){let n={};n.database=fv(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=X_(u)?{documents:D$(o,u)}:{query:T$(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=ON(o,s.resumeToken);let l=lv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(z.min())>0){a.readTime=Cf(o,s.snapshotVersion.toTimestamp());let l=lv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=C$(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){let n={};n.database=fv(this.serializer),n.removeTarget=e,this.q_(n)}},Hv=class extends xf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=w$(e.writeResults,e.commitTime),r=Ut(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=fv(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>BN(this.serializer,r))};this.q_(n)}};var qv=class{},Gv=class extends qv{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new k(S.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,dv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(S.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,dv(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(S.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},zv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nr(n),this.aa=!1):F("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var fo="RemoteStore",Wv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{po(this)&&(F(fo,"Restarting streams for network reachability change."),await(async function(u){let l=W(u);l.Ea.add(4),await qc(l),l.Ra.set("Unknown"),l.Ea.delete(4),await Xf(l)})(this))})}),this.Ra=new zv(r,i)}};async function Xf(t){if(po(t))for(let e of t.da)await e(!0)}async function qc(t){for(let e of t.da)await e(!1)}function zN(t,e){let n=W(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),kE(n)?xE(n):ks(n).O_()&&PE(n,e))}function ME(t,e){let n=W(t),r=ks(n);n.Ia.delete(e),r.O_()&&WN(n,e),n.Ia.size===0&&(r.O_()?r.L_():po(n)&&n.Ra.set("Unknown"))}function PE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(z.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ks(t).Y_(e)}function WN(t,e){t.Va.Ue(e),ks(t).Z_(e)}function xE(t){t.Va=new cv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ks(t).start(),t.Ra.ua()}function kE(t){return po(t)&&!ks(t).x_()&&t.Ia.size>0}function po(t){return W(t).Ea.size===0}function KN(t){t.Va=void 0}async function H$(t){t.Ra.set("Online")}async function q$(t){t.Ia.forEach((e,n)=>{PE(t,e)})}async function G$(t,e){KN(t),kE(t)?(t.Ra.ha(e),xE(t)):t.Ra.set("Unknown")}async function z$(t,e,n){if(t.Ra.set("Online"),e instanceof Tf&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){F(fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kf(t,r)}else if(e instanceof ps?t.Va.Ze(e):e instanceof Df?t.Va.st(e):t.Va.tt(e),!n.isEqual(z.min()))try{let r=await GN(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ia.get(l);f&&o.Ia.set(l,f.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(ft.EMPTY_BYTE_STRING,f.snapshotVersion)),WN(o,u);let p=new kc(f.target,u,l,f.sequenceNumber);PE(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){F(fo,"Failed to raise snapshot:",r),await kf(t,r)}}async function kf(t,e,n){if(!xs(e))throw e;t.Ea.add(1),await qc(t),t.Ra.set("Offline"),n||(n=()=>GN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F(fo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Xf(t)})}function QN(t,e){return e().catch(n=>kf(t,n,e))}async function eh(t){let e=W(t),n=ei(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:IE;for(;W$(e);)try{let i=await B$(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,K$(e,i)}catch(i){await kf(e,i)}YN(e)&&JN(e)}function W$(t){return po(t)&&t.Ta.length<10}function K$(t,e){t.Ta.push(e);let n=ei(t);n.O_()&&n.X_&&n.ea(e.mutations)}function YN(t){return po(t)&&!ei(t).x_()&&t.Ta.length>0}function JN(t){ei(t).start()}async function Q$(t){ei(t).ra()}async function Y$(t){let e=ei(t);for(let n of t.Ta)e.ea(n.mutations)}async function J$(t,e,n){let r=t.Ta.shift(),i=iv.from(r,e,n);await QN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await eh(t)}async function Z$(t,e){e&&ei(t).X_&&await(async function(r,i){if((function(s){return xN(s)&&s!==S.ABORTED})(i.code)){let o=r.Ta.shift();ei(r).B_(),await QN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await eh(r)}})(t,e),YN(t)&&JN(t)}async function R0(t,e){let n=W(t);n.asyncQueue.verifyOperationInProgress(),F(fo,"RemoteStore received new credentials");let r=po(n);n.Ea.add(3),await qc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Xf(n)}async function X$(t,e){let n=W(t);e?(n.Ea.delete(2),await Xf(n)):e||(n.Ea.add(2),await qc(n),n.Ra.set("Unknown"))}function ks(t){return t.ma||(t.ma=(function(n,r,i){let o=W(n);return o.sa(),new $v(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:H$.bind(null,t),t_:q$.bind(null,t),r_:G$.bind(null,t),H_:z$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),kE(t)?xE(t):t.Ra.set("Unknown")):(await t.ma.stop(),KN(t))})),t.ma}function ei(t){return t.fa||(t.fa=(function(n,r,i){let o=W(n);return o.sa(),new Hv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Q$.bind(null,t),r_:Z$.bind(null,t),ta:Y$.bind(null,t),na:J$.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await eh(t)):(await t.fa.stop(),t.Ta.length>0&&(F(fo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var Kv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new en,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function OE(t,e){if(nr("AsyncQueue",`${e}: ${t}`),xs(t))return new k(S.UNAVAILABLE,`${e}: ${t}`);throw t}var Of=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||j.comparator(n.key,r.key):(n,r)=>j.comparator(n.key,r.key),this.keyedMap=Ic(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ff=class{constructor(){this.ga=new Ne(j.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):B(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},Cs=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Of.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Qv=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},Yv=class{constructor(){this.queries=M0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=W(n),o=i.queries;i.queries=M0(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new k(S.ABORTED,"Firestore shutting down"))}};function M0(){return new or(t=>IN(t),Yf)}async function FE(t,e){let n=W(t),r=3,i=e.query,o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Qv,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=OE(s,`Initialization of query '${ls(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&VE(n)}async function LE(t,e){let n=W(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function eH(t,e){let n=W(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&VE(n)}function tH(t,e,n){let r=W(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function VE(t){t.Ca.forEach(e=>{e.next()})}var Jv,P0;(P0=Jv||(Jv={})).Ma="default",P0.Cache="cache";var Vc=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Cs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Cs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jv.Cache}};var Lf=class{constructor(e){this.key=e}},Vf=class{constructor(e){this.key=e}},Zv=class{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=oe(),this.mutatedKeys=oe(),this.eu=wN(e),this.tu=new Of(this.eu)}get nu(){return this.Ya}ru(e,n){let r=n?n.iu:new Ff,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let g=i.get(f),y=Jf(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;g&&y?g.data.isEqual(y.data)?C!==R&&(r.track({type:3,doc:y}),N=!0):this.su(g,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),N=!0):g&&!y&&(r.track({type:1,doc:g}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=R?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((f,p)=>(function(y,C){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B(20277,{Rt:N})}};return R(y)-R(C)})(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;let a=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new Cs(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ff,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Vf(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Lf(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=oe();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Cs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},BE="SyncEngine",Xv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},eE=class{constructor(e){this.key=e,this.hu=!1}},tE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new or(a=>IN(a),Yf),this.Iu=new Map,this.Eu=new Set,this.du=new Ne(j.comparator),this.Au=new Map,this.Ru=new Fc,this.Vu={},this.mu=new Map,this.fu=Oc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function nH(t,e,n=!0){let r=rR(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await ZN(r,e,n,!0),i}async function rH(t,e){let n=rR(t);await ZN(n,e,!0,!1)}async function ZN(t,e,n,r){let i=await j$(t.localStore,kn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await iH(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&zN(t.remoteStore,i),a}async function iH(t,e,n,r,i){t.pu=(p,g,y)=>(async function(R,N,O,K){let ce=N.view.ru(O);ce.Cs&&(ce=await A0(R.localStore,N.query,!1).then(({documents:w})=>N.view.ru(w,ce)));let Ue=K&&K.targetChanges.get(N.targetId),Xe=K&&K.targetMismatches.get(N.targetId)!=null,qe=N.view.applyChanges(ce,R.isPrimaryClient,Ue,Xe);return k0(R,N.targetId,qe.au),qe.snapshot})(t,p,g,y);let o=await A0(t.localStore,e,!0),s=new Zv(e,o.Qs),a=s.ru(o.documents),u=xc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);k0(t,n,l.au);let f=new Xv(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function oH(t,e,n){let r=W(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Yf(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ov(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ME(r.remoteStore,i.targetId),nE(r,i.targetId)}).catch(Ps)):(nE(r,i.targetId),await Ov(r.localStore,i.targetId,!0))}async function sH(t,e){let n=W(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ME(n.remoteStore,r.targetId))}async function aH(t,e,n){let r=pH(t);try{let i=await(function(s,a){let u=W(s),l=Be.now(),f=a.reduce((y,C)=>y.add(C.key),oe()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=sr(),R=oe();return u.Ns.getEntries(y,f).next(N=>{C=N,C.forEach((O,K)=>{K.isValidDocument()||(R=R.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(N=>{p=N;let O=[];for(let K of a){let ce=d$(K,p.get(K.key).overlayedDocument);ce!=null&&O.push(new Fn(K.key,ce,pN(ce.value.mapValue),Dt.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,a)}).next(N=>{g=N;let O=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,N.batchId,O)})}).then(()=>({batchId:g.batchId,changes:TN(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Ne(ie)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,n),await Gc(r,i.changes),await eh(r.remoteStore)}catch(i){let o=OE(i,"Failed to persist write");n.reject(o)}}async function XN(t,e){let n=W(t);try{let r=await L$(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?ae(s.hu,14607):i.removedDocuments.size>0&&(ae(s.hu,42227),s.hu=!1))}),await Gc(n,r,e)}catch(r){await Ps(r)}}function x0(t,e,n){let r=W(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=W(s);u.onlineState=a;let l=!1;u.queries.forEach((f,p)=>{for(let g of p.Sa)g.va(a)&&(l=!0)}),l&&VE(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cH(t,e,n){let r=W(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ne(j.comparator);s=s.insert(o,$t.newNoDocument(o,z.min()));let a=oe().add(o),u=new wf(z.min(),new Map,new Ne(ie),s,a);await XN(r,u),r.du=r.du.remove(o),r.Au.delete(e),jE(r)}else await Ov(r.localStore,e,!1).then(()=>nE(r,e,n)).catch(Ps)}async function uH(t,e){let n=W(t),r=e.batch.batchId;try{let i=await F$(n.localStore,e);tR(n,r,null),eR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gc(n,i)}catch(i){await Ps(i)}}async function lH(t,e,n){let r=W(t);try{let i=await(function(s,a){let u=W(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ae(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})})(r.localStore,e);tR(r,e,n),eR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gc(r,i)}catch(i){await Ps(i)}}function eR(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function tR(t,e,n){let r=W(t),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function nE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||nR(t,r)})}function nR(t,e){t.Eu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(ME(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),jE(t))}function k0(t,e,n){for(let r of n)r instanceof Lf?(t.Ru.addReference(r.key,e),dH(t,r)):r instanceof Vf?(F(BE,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||nR(t,r.key)):B(19791,{wu:r})}function dH(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(F(BE,"New document in limbo: "+n),t.Eu.add(r),jE(t))}function jE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new j(Ee.fromString(e)),r=t.fu.next();t.Au.set(r,new eE(n)),t.du=t.du.insert(n,r),zN(t.remoteStore,new kc(kn(Qf(n.path)),r,"TargetPurposeLimboResolution",EE.ce))}}async function Gc(t,e,n){let r=W(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Mv.As(u.targetId,l);o.push(f)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,l){let f=W(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(l,g=>M.forEach(g.Es,y=>f.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>M.forEach(g.ds,y=>f.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!xs(p))throw p;F(RE,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=f.Ms.get(g),C=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(C);f.Ms=f.Ms.insert(g,R)}}})(r.localStore,o))}async function fH(t,e){let n=W(t);if(!n.currentUser.isEqual(e)){F(BE,"User change. New user:",e.toKey());let r=await qN(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new k(S.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gc(n,r.Ls)}}function hH(t,e){let n=W(t),r=n.Au.get(e);if(r&&r.hu)return oe().add(r.key);{let i=oe(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let a=n.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function rR(t){let e=W(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=XN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cH.bind(null,e),e.Pu.H_=eH.bind(null,e.eventManager),e.Pu.yu=tH.bind(null,e.eventManager),e}function pH(t){let e=W(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lH.bind(null,e),e}var iR=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=Zf(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return O$(this.persistence,new xv,n.initialUser,this.serializer)}Cu(n){return new Nf(Rv.mi,this.serializer)}Du(n){return new Fv}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),rE=class extends iR{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ae(this.persistence.referenceDelegate instanceof Rf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new yv(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new Nf(r=>Rf.mi(r,n),this.serializer)}};var gH=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>x0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fH.bind(null,this.syncEngine),await X$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new Yv})()}createDatastore(n){let r=Zf(n.databaseInfo.databaseId),i=(function(s){return new Uv(s)})(n.databaseInfo);return(function(s,a,u,l){return new Gv(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new Wv(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>x0(this.syncEngine,r,0),(function(){return Pf.v()?new Pf:new Lv})())}createSyncEngine(n,r){return(function(o,s,a,u,l,f,p){let g=new tE(o,s,a,u,l,f);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=W(r);F(fo,"RemoteStore shutting down."),i.Ea.add(5),await qc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var Bc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var iE=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(S.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=await(async function(i,o){let s=W(i),a={documents:o.map(p=>Af(s.serializer,p))},u=await s.Ho("BatchGetDocuments",s.serializer.databaseId,Ee.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let g=E$(s.serializer,p);l.set(g.key.toString(),g)});let f=[];return o.forEach(p=>{let g=l.get(p.toString());ae(!!g,55234,{key:p}),f.push(g)}),f})(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new bs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=j.fromPath(r);this.mutations.push(new If(i,this.precondition(i)))}),await(async function(r,i){let o=W(r),s={writes:i.map(a=>BN(o.serializer,a))};await o.Go("Commit",o.serializer.databaseId,Ee.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw B(50498,{Gu:e.constructor.name});n=z.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new k(S.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(z.min())?Dt.exists(!1):Dt.updateTime(n):Dt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(z.min()))throw new k(S.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dt.updateTime(n)}return Dt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var oE=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new Lc(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{let e=new iE(this.datastore),n=this.Hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Yu(i)}))}).catch(r=>{this.Yu(r)})})}Hu(e){try{let n=this.updateFunction(e);return!Hc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!xN(n)}return!1}};var ti="FirestoreClient",sE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Je.UNAUTHENTICATED,this.clientId=Sc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{F(ti,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(F(ti,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new en;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=OE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function M_(t,e){t.asyncQueue.verifyOperationInProgress(),F(ti,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await qN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function O0(t,e){t.asyncQueue.verifyOperationInProgress();let n=await mH(t);F(ti,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>R0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>R0(e.remoteStore,i)),t._onlineComponents=e}async function mH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(ti,"Using user provided OfflineComponentProvider");try{await M_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===S.FAILED_PRECONDITION||i.code===S.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;ms("Error using user provided cache. Falling back to memory cache: "+n),await M_(t,new iR)}}else F(ti,"Using default OfflineComponentProvider"),await M_(t,new rE(void 0));return t._offlineComponents}async function UE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(ti,"Using user provided OnlineComponentProvider"),await O0(t,t._uninitializedComponentsProvider._online)):(F(ti,"Using default OnlineComponentProvider"),await O0(t,new gH))),t._onlineComponents}function yH(t){return UE(t).then(e=>e.syncEngine)}function _H(t){return UE(t).then(e=>e.datastore)}async function Bf(t){let e=await UE(t),n=e.eventManager;return n.onListen=nH.bind(null,e.syncEngine),n.onUnlisten=oH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sH.bind(null,e.syncEngine),n}function vH(t,e,n={}){let r=new en;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let f=new Bc({next:g=>{f.Nu(),s.enqueueAndForget(()=>LE(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new k(S.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new k(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Vc(Qf(a.path),f,{includeMetadataChanges:!0,qa:!0});return FE(o,p)})(await Bf(t),t.asyncQueue,e,n,r)),r.promise}function EH(t,e,n={}){let r=new en;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let f=new Bc({next:g=>{f.Nu(),s.enqueueAndForget(()=>LE(o,p)),g.fromCache&&u.source==="server"?l.reject(new k(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Vc(a,f,{includeMetadataChanges:!0,qa:!0});return FE(o,p)})(await Bf(t),t.asyncQueue,e,n,r)),r.promise}function oR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var F0=new Map;var sR="firestore.googleapis.com",L0=!0,jf=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new k(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sR,this.ssl=L0}else this.host=e.host,this.ssl=e.ssl??L0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<P$)throw new k(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oR(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new k(S.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new k(S.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new k(S.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},As=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new P_;switch(r.type){case"firstParty":return new F_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(S.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=F0.get(n);r&&(F("ComponentProvider","Removing Datastore"),F0.delete(n),r.terminate())})(this),Promise.resolve()}};function aR(t,e,n,r={}){t=Tt(t,As);let i=Vr(e),o=t._getSettings(),s=U(x({},o),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;i&&(bd(`https://${a}`),Cd("Firestore",!0)),o.host!==sR&&o.host!==a&&ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=U(x({},o),{host:a,ssl:i,emulatorOptions:r});if(!An(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=Je.MOCK_USER;else{l=hA(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new k(S.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Je(p)}t._authCredentials=new x_(new ff(l,f))}}var ar=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},je=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if($c(n,t._jsonSchema))return new t(e,r||null,new j(Ee.fromString(n.referencePath)))}};je._jsonSchemaVersion="firestore/documentReference/1.0",je._jsonSchema={type:Ve("string",je._jsonSchemaVersion),referencePath:Ve("string")};var Kr=class t extends ar{constructor(e,n,r){super(e,n,Qf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new je(this.firestore,null,new j(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function cR(t,e,...n){if(t=ye(t),q0("collection","path",e),t instanceof As){let r=Ee.fromString(e,...n);return n0(r),new Kr(t,null,r)}{if(!(t instanceof je||t instanceof Kr))throw new k(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ee.fromString(e,...n));return n0(r),new Kr(t.firestore,null,r)}}function $E(t,e,...n){if(t=ye(t),arguments.length===1&&(e=Sc.newId()),q0("doc","path",e),t instanceof As){let r=Ee.fromString(e,...n);return t0(r),new je(t,null,new j(r))}{if(!(t instanceof je||t instanceof Kr))throw new k(S.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ee.fromString(e,...n));return t0(r),new je(t.firestore,t instanceof Kr?t.converter:null,new j(r))}}var V0="AsyncQueue",Uf=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Lc(this,"async_queue_retry"),this._c=()=>{let r=R_();r&&F(V0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=R_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=R_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new en;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!xs(e))throw e;F(V0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,nr("INTERNAL UNHANDLED ERROR: ",B0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=Kv.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&B(47125,{Pc:B0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function B0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function j0(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(t,["next","error","complete"])}var tn=class extends As{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Uf,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Uf(e),this._firestoreClient=void 0,await e}}};function uR(t,e){let n=typeof t=="object"?t:Wi(),r=typeof t=="string"?t:e||yf,i=ns(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=fA("firestore");o&&aR(i,...o)}return i}function zc(t){if(t._terminated)throw new k(S.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||IH(t),t._firestoreClient}function IH(t){let e=t._freezeSettings(),n=(function(i,o,s,a){return new U_(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,oR(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new sE(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var tr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ft.fromBase64String(e))}catch(n){throw new k(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if($c(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};tr._jsonSchemaVersion="firestore/bytes/1.0",tr._jsonSchema={type:Ve("string",tr._jsonSchemaVersion),bytes:Ve("string")};var ho=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new k(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ss=class{constructor(e){this._methodName=e}};var Qr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new k(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new k(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if($c(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Qr._jsonSchemaVersion="firestore/geoPoint/1.0",Qr._jsonSchema={type:Ve("string",Qr._jsonSchemaVersion),latitude:Ve("number"),longitude:Ve("number")};var Yr=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if($c(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new k(S.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Yr._jsonSchemaVersion="firestore/vectorValue/1.0",Yr._jsonSchema={type:Ve("string",Yr._jsonSchemaVersion),vectorValues:Ve("object")};var wH=/^__.*__$/,aE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fn(e,this.data,this.fieldMask,n,this.fieldTransforms):new lo(e,this.data,n,this.fieldTransforms)}},$f=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function lR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B(40011,{Ac:t})}}var cE=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t(x(x({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return qf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(lR(this.Ac)&&wH.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},uE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zf(e)}Cc(e,n,r,i=!1){return new cE({Ac:e,methodName:n,Dc:r,path:jt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Wc(t){let e=t._freezeSettings(),n=Zf(t._databaseId);return new uE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HE(t,e,n,r,i,o={}){let s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);qE("Data must be an object, but it was:",s,r);let a=hR(r,s),u,l;if(o.merge)u=new Xt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let g=dE(e,p,n);if(!s.contains(g))throw new k(S.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);gR(f,g)||f.push(g)}u=new Xt(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new aE(new Pt(a),u,l)}var Hf=class t extends Ss{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};var lE=class t extends Ss{_toFieldTransform(e){return new tv(e.path,new ao)}isEqual(e){return e instanceof t}};function dR(t,e,n,r){let i=t.Cc(1,e,n);qE("Data must be an object, but it was:",i,r);let o=[],s=Pt.empty();ni(r,(u,l)=>{let f=GE(e,u,n);l=ye(l);let p=i.yc(f);if(l instanceof Hf)o.push(f);else{let g=Kc(l,p);g!=null&&(o.push(f),s.set(f,g))}});let a=new Xt(o);return new $f(s,a,i.fieldTransforms)}function fR(t,e,n,r,i,o){let s=t.Cc(1,e,n),a=[dE(e,r,n)],u=[i];if(o.length%2!=0)throw new k(S.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(dE(e,o[g])),u.push(o[g+1]);let l=[],f=Pt.empty();for(let g=a.length-1;g>=0;--g)if(!gR(l,a[g])){let y=a[g],C=u[g];C=ye(C);let R=s.yc(y);if(C instanceof Hf)l.push(y);else{let N=Kc(C,R);N!=null&&(l.push(y),f.set(y,N))}}let p=new Xt(l);return new $f(f,p,s.fieldTransforms)}function DH(t,e,n,r=!1){return Kc(n,t.Cc(r?4:3,e))}function Kc(t,e){if(pR(t=ye(t)))return qE("Unsupported field value:",e,t),hR(t,e);if(t instanceof Ss)return(function(r,i){if(!lR(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=Kc(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return s$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Be.fromDate(r);return{timestampValue:Cf(i.serializer,o)}}if(r instanceof Be){let o=new Be(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cf(i.serializer,o)}}if(r instanceof Qr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof tr)return{bytesValue:ON(i.serializer,r._byteString)};if(r instanceof je){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:NE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Yr)return(function(s,a){return{mapValue:{fields:{[DE]:{stringValue:TE},[_s]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return SE(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Wf(r)}`)})(t,e)}function hR(t,e){let n={};return sN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ni(t,(r,i)=>{let o=Kc(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function pR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof Qr||t instanceof tr||t instanceof je||t instanceof Ss||t instanceof Yr)}function qE(t,e,n){if(!pR(n)||!G0(n)){let r=Wf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function dE(t,e,n){if((e=ye(e))instanceof ho)return e._internalPath;if(typeof e=="string")return GE(t,e);throw qf("Field path arguments must be of type string or ",t,!1,void 0,n)}var TH=new RegExp("[~\\*/\\[\\]]");function GE(t,e,n){if(e.search(TH)>=0)throw qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ho(...e.split("."))._internalPath}catch{throw qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(S.INVALID_ARGUMENT,a+t+u)}function gR(t,e){return t.some(n=>n.isEqual(e))}var Ns=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new fE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(th("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},fE=class extends Ns{data(){return super.data()}};function th(t,e){return typeof e=="string"?GE(t,e):e instanceof ho?e._internalPath:e._delegate._internalPath}function mR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new k(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var jc=class{},Uc=class extends jc{};function yR(t,e,...n){let r=[];e instanceof jc&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof hE).length,a=o.filter(u=>u instanceof Gf).length;if(s>1||s>0&&a>0)throw new k(S.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var Gf=class t extends Uc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return IR(e._query,n),new ar(e.firestore,e.converter,ev(e._query,n))}_parse(e){let n=Wc(e.firestore);return(function(o,s,a,u,l,f,p){let g;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new k(S.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){$0(p,f);let C=[];for(let R of p)C.push(U0(u,o,R));g={arrayValue:{values:C}}}else g=U0(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||$0(p,f),g=DH(a,s,p,f==="in"||f==="not-in");return Le.create(l,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function _R(t,e,n){let r=e,i=th("where",t);return Gf._create(i,r,n)}var hE=class t extends jc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:mn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)IR(s,u),s=ev(s,u)})(e._query,n),new ar(e.firestore,e.converter,ev(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var pE=class t extends Uc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new k(S.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(S.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new so(o,s)})(e._query,this._field,this._direction);return new ar(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Xr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function vR(t,e="asc"){let n=e,r=th("orderBy",t);return pE._create(r,n)}var gE=class t extends Uc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new ar(e.firestore,e.converter,Ef(e._query,this._limit,this._limitType))}};function ER(t){return NU("limit",t),gE._create("limit",t,"F")}function U0(t,e,n){if(typeof(n=ye(n))=="string"){if(n==="")throw new k(S.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EN(e)&&n.indexOf("/")!==-1)throw new k(S.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ee.fromString(n));if(!j.isDocumentKey(r))throw new k(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return u0(t,new j(r))}if(n instanceof je)return u0(t,n._key);throw new k(S.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wf(n)}.`)}function $0(t,e){if(!Array.isArray(t)||t.length===0)throw new k(S.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IR(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new k(S.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(S.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var zf=class{convertValue(e,n="none"){switch(Zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw B(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ni(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[_s].arrayValue?.values?.map(r=>be(r.doubleValue));return new Yr(n)}convertGeoPoint(e){return new Qr(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Kf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Mc(e));default:return null}}convertTimestamp(e){let n=rr(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ee.fromString(e);ae($N(r),9688,{name:e});let i=new _f(r.get(1),r.get(3)),o=new j(r.popFirst(5));return i.isEqual(n)||nr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function zE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var mE=class extends zf{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,n)}};var Wr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Jr=class t extends Ns{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new gs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(th("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new k(S.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Jr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Jr._jsonSchema={type:Ve("string",Jr._jsonSchemaVersion),bundleSource:Ve("string","DocumentSnapshot"),bundleName:Ve("string"),bundle:Ve("string")};var gs=class extends Jr{data(e={}){return super.data(e)}},ro=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Wr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new gs(this._firestore,this._userDataWriter,r.key,r,new Wr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new k(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new gs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new gs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),f=s.indexOf(a.doc.key)),{type:bH(a.type),doc:u,oldIndex:l,newIndex:f}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new k(S.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function bH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B(61501,{type:t})}}function wR(t){t=Tt(t,je);let e=Tt(t.firestore,tn);return vH(zc(e),t._key).then(n=>SR(e,t,n))}ro._jsonSchemaVersion="firestore/querySnapshot/1.0",ro._jsonSchema={type:Ve("string",ro._jsonSchemaVersion),bundleSource:Ve("string","QuerySnapshot"),bundleName:Ve("string"),bundle:Ve("string")};var Rs=class extends zf{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,n)}};function DR(t){t=Tt(t,ar);let e=Tt(t.firestore,tn),n=zc(e),r=new Rs(e);return mR(t._query),EH(n,t._query).then(i=>new ro(e,r,t,i))}function TR(t,e,n){t=Tt(t,je);let r=Tt(t.firestore,tn),i=zE(t.converter,e,n);return nh(r,[HE(Wc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Dt.none())])}function bR(t,e,n,...r){t=Tt(t,je);let i=Tt(t.firestore,tn),o=Wc(i),s;return s=typeof(e=ye(e))=="string"||e instanceof ho?fR(o,"updateDoc",t._key,e,n,r):dR(o,"updateDoc",t._key,e),nh(i,[s.toMutation(t._key,Dt.exists(!0))])}function CR(t){return nh(Tt(t.firestore,tn),[new bs(t._key,Dt.none())])}function AR(t,e){let n=Tt(t.firestore,tn),r=$E(t),i=zE(t.converter,e);return nh(n,[HE(Wc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Dt.exists(!1))]).then(()=>r)}function WE(t,...e){t=ye(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||j0(e[r])||(n=e[r++]);let i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(j0(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,a;if(t instanceof je)s=Tt(t.firestore,tn),a=Qf(t._key.path),o={next:u=>{e[r]&&e[r](SR(s,t,u))},error:e[r+1],complete:e[r+2]};else{let u=Tt(t,ar);s=Tt(u.firestore,tn),a=u._query;let l=new Rs(s);o={next:f=>{e[r]&&e[r](new ro(s,l,u,f))},error:e[r+1],complete:e[r+2]},mR(t._query)}return(function(l,f,p,g){let y=new Bc(g),C=new Vc(f,y,p);return l.asyncQueue.enqueueAndForget(async()=>FE(await Bf(l),C)),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(async()=>LE(await Bf(l),C))}})(zc(s),a,i,o)}function nh(t,e){return(function(r,i){let o=new en;return r.asyncQueue.enqueueAndForget(async()=>aH(await yH(r),i,o)),o.promise})(zc(t),e)}function SR(t,e,n){let r=n.docs.get(e._key),i=new Rs(t);return new Jr(t,i,e._key,r,new Wr(n.hasPendingWrites,n.fromCache),e.converter)}var CH={maxAttempts:5};function wc(t,e){if((t=ye(t)).firestore!==e)throw new k(S.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var yE=class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Wc(e)}get(e){let n=wc(e,this._firestore),r=new mE(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||i.length!==1)return B(24041);let o=i[0];if(o.isFoundDocument())return new Ns(this._firestore,r,o.key,o,n.converter);if(o.isNoDocument())return new Ns(this._firestore,r,n._key,null,n.converter);throw B(18433,{doc:o})})}set(e,n,r){let i=wc(e,this._firestore),o=zE(i.converter,n,r),s=HE(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){let o=wc(e,this._firestore),s;return s=typeof(n=ye(n))=="string"||n instanceof ho?fR(this._dataReader,"Transaction.update",o._key,n,r,i):dR(this._dataReader,"Transaction.update",o._key,n),this._transaction.update(o._key,s),this}delete(e){let n=wc(e,this._firestore);return this._transaction.delete(n._key),this}};var _E=class extends yE{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=wc(e,this._firestore),r=new Rs(this._firestore);return super.get(e).then(i=>new Jr(this._firestore,r,n._key,i._document,new Wr(!1,!1),n.converter))}};function NR(t,e,n){t=Tt(t,tn);let r=x(x({},CH),n);return(function(o){if(o.maxAttempts<1)throw new k(S.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(o,s,a){let u=new en;return o.asyncQueue.enqueueAndForget(async()=>{let l=await _H(o);new oE(o.asyncQueue,l,a,s,u).ju()}),u.promise})(zc(t),i=>e(new _E(t,i)),r)}function it(){return new lE("serverTimestamp")}(function(e,n=!0){(function(i){Ms=i})(jr),pn(new wt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new tn(new k_(r.getProvider("auth-internal")),new L_(s,r.getProvider("app-check-internal")),(function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _f(l.options.projectId,f)})(s,i),s);return o=x({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Se(ZS,XS,e),Se(ZS,XS,"esm2020")})();var rh=function(){return rh=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},rh.apply(this,arguments)};var NH={includeMetadataChanges:!1};function KE(t,e){return e===void 0&&(e=NH),new ne(function(n){var r=WE(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function RR(t){return KE(t,{includeMetadataChanges:!0})}function MR(t,e){return e===void 0&&(e={}),RR(t).pipe(we(function(n){return QE(n,e)}))}function QE(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:rh(rh({},r),(n={},n[e.idField]=t.id,n))}function PR(t){return KE(t,{includeMetadataChanges:!0}).pipe(we(function(e){return e.docs}))}function xR(t,e){return e===void 0&&(e={}),PR(t).pipe(we(function(n){return n.map(function(r){return QE(r,e)})}))}var bt=class{constructor(e){return e}},kR="firestore",YE=class{constructor(){return is(kR)}};var JE=new G("angularfire2.firestore-instances");function RH(t,e){let n=cc(kR,t,e);return n&&new bt(n)}function MH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new bt(r)}}var PH={provide:YE,deps:[[new Ft,JE]]},xH={provide:bt,useFactory:RH,deps:[[new Ft,JE],Kn]};function Zne(t,...e){return Se("angularfire",Ur.full,"fst"),Cr([xH,PH,{provide:JE,useFactory:MH(t),multi:!0,deps:[Pe,We,$r,Qi,[new Ft,vc],[new Ft,os],...e]}])}var ri=ve(xR,!0);var OR=ve(MR,!0);var go=ve(AR,!0,2);var ot=ve(cR,!0,2);var ih=ve(CR,!0,2);var ht=ve($E,!0,2);var Xne=ve(wR,!0);var Os=ve(DR,!0);var ere=ve(uR,!0);var Ln=ve(ER,!0,2);var ii=ve(vR,!0,2),nn=ve(yR,!0,2);var ZE=ve(NR,!0),FR=ve(TR,!0,2);var oi=ve(bR,!0,2);var si=ve(_R,!0,2);function Yc(t){if(!t)return"";if(typeof t=="object"&&typeof t.toDate=="function"){let n=t.toDate();return Qc(n)}if(t instanceof Date)return Qc(t);if(typeof t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t))return t;let e=new Date(t);return isNaN(e.getTime())?"":Qc(e)}function Qc(t){let e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`}function nre(t){if(!t)return"";let[e,n,r]=t.split("-").map(Number);return!e||!n||!r?t:new Intl.DateTimeFormat("pt-BR").format(new Date(e,n-1,r))}function Jc(t){if(!t)return null;let[e,n,r]=t.split("-").map(Number);return!e||!n||!r?null:new Date(e,n-1,r)}var oh=class t{firestore=L(bt);list$(e){let n=ot(this.firestore,`users/${e}/categories`),r=nn(n,ii("name"),Ln(1e3));return ri(r,{idField:"id"}).pipe(we(i=>i.map(o=>U(x({},o),{type:o.type??"expense"}))))}async add(e,n){let r=ot(this.firestore,`users/${e}/categories`);await go(r,U(x({},n),{createdAt:it()}))}async update(e,n,r){let i=ht(this.firestore,`users/${e}/categories/${n}`);await oi(i,x({},r))}async delete(e,n){let r=ot(this.firestore,`users/${e}/transactions`),i=nn(r,si("categoryId","==",n),Ln(1));if(!(await Os(i)).empty)throw new Error("Categoria em uso em lan\xE7amentos. N\xE3o \xE9 poss\xEDvel excluir.");let s=ht(this.firestore,`users/${e}/categories/${n}`);await ih(s)}async ensureDefaultCategories(e){let n=ot(this.firestore,`users/${e}/categories`);(await Os(nn(n,Ln(1)))).empty}async ensureCategory(e,n){let r=ot(this.firestore,`users/${e}/categories`),i=nn(r,si("name","==",n.name),si("type","==",n.type),Ln(1)),o=await Os(i);return o.empty?(await go(r,{name:n.name,type:n.type,color:n.color??"#94a3b8",createdAt:it()})).id:o.docs[0].id}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};var LR=class t{constructor(e,n,r){this.auth=e;this.firestore=n;this.categoriesService=r;this.user$=zS(this.auth).pipe(Ro({bufferSize:1,refCount:!0})),this.profile$=this.user$.pipe(fa(i=>i?OR(ht(this.firestore,`users/${i.uid}`)):No(null)),we(i=>i?.birthDate?U(x({},i),{age:this.calculateAge(i.birthDate)}):i),Ro({bufferSize:1,refCount:!0}))}user$;profile$;async register(e,n,r){let i=await WS(this.auth,e,n),o=ht(this.firestore,`users/${i.user.uid}`);return await FR(o,U(x({uid:i.user.uid,email:e},r),{createdAt:it(),updatedAt:it()})),await this.categoriesService.ensureDefaultCategories(i.user.uid),i.user}login(e,n){return ct(KS(this.auth,e,n)).pipe(fa(r=>ct(this.categoriesService.ensureDefaultCategories(r.user.uid)).pipe(we(()=>r.user))))}logout(){return ct(QS(this.auth))}async updateProfile(e){let n=this.auth.currentUser;if(!n)throw new Error("Usu\xE1rio n\xE3o autenticado");let r=ht(this.firestore,`users/${n.uid}`);await oi(r,U(x({},e),{updatedAt:it()}))}async reauthenticate(e){let n=this.auth.currentUser;if(!n)throw new Error("USER_NOT_LOGGED");let r=n.email;if(!r)throw new Error("USER_NO_EMAIL");let i=Yd.credential(r,e);await Jd(n,i)}async requestEmailChange(e,n){let r=this.auth.currentUser;if(!r)throw new Error("USER_NOT_LOGGED");if(!e||!e.includes("@"))throw new Error("INVALID_EMAIL");await this.reauthenticate(n),await Zd(r,e)}async updateUserPassword(e,n){let r=this.auth.currentUser;if(!r)throw new Error("USER_NOT_LOGGED");if(!e||e.length<6)throw new Error("WEAK_PASSWORD");await this.reauthenticate(n),await Xd(r,e)}async updateEmailSecure(e,n){await this.requestEmailChange(n,e)}async updatePasswordSecure(e,n){await this.updateUserPassword(n,e)}calculateAge(e){let n=Jc(e);if(!n)return 0;let r=new Date,i=r.getFullYear()-n.getFullYear(),o=r.getMonth()-n.getMonth();return(o<0||o===0&&r.getDate()<n.getDate())&&i--,i}static \u0275fac=function(n){return new(n||t)(Re(eo),Re(bt),Re(oh))};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};var KR=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(V(qn),V(Lt))};static \u0275dir=pe({type:t})}return t})(),iu=(()=>{class t extends KR{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qt(t)))(i||t)}})();static \u0275dir=pe({type:t,features:[Me]})}return t})(),yo=new G(""),FH={provide:yo,useExisting:Ke(()=>LH),multi:!0},LH=(()=>{class t extends iu{writeValue(n){this.setProperty("checked",n)}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qt(t)))(i||t)}})();static \u0275dir=pe({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Gn("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[It([FH]),Me]})}return t})(),VH={provide:yo,useExisting:Ke(()=>QR),multi:!0};function BH(){let t=qi()?qi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var jH=new G(""),QR=(()=>{class t extends KR{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!BH())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(V(qn),V(Lt),V(jH,8))};static \u0275dir=pe({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Gn("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[It([VH]),Me]})}return t})();function iI(t){return t==null||oI(t)===0}function oI(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var ci=new G(""),ou=new G(""),UH=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,VR=class{static min(e){return YR(e)}static max(e){return JR(e)}static required(e){return ZR(e)}static requiredTrue(e){return $H(e)}static email(e){return HH(e)}static minLength(e){return qH(e)}static maxLength(e){return GH(e)}static pattern(e){return zH(e)}static nullValidator(e){return ah()}static compose(e){return iM(e)}static composeAsync(e){return sM(e)}};function YR(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function JR(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function ZR(t){return iI(t.value)?{required:!0}:null}function $H(t){return t.value===!0?null:{required:!0}}function HH(t){return iI(t.value)||UH.test(t.value)?null:{email:!0}}function qH(t){return e=>{let n=e.value?.length??oI(e.value);return n===null||n===0?null:n<t?{minlength:{requiredLength:t,actualLength:n}}:null}}function GH(t){return e=>{let n=e.value?.length??oI(e.value);return n!==null&&n>t?{maxlength:{requiredLength:t,actualLength:n}}:null}}function zH(t){if(!t)return ah;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(iI(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function ah(t){return null}function XR(t){return t!=null}function eM(t){return $i(t)?ct(t):t}function tM(t){let e={};return t.forEach(n=>{e=n!=null?x(x({},e),n):e}),Object.keys(e).length===0?null:e}function nM(t,e){return e.map(n=>n(t))}function WH(t){return!t.validate}function rM(t){return t.map(e=>WH(e)?e:n=>e.validate(n))}function iM(t){if(!t)return null;let e=t.filter(XR);return e.length==0?null:function(n){return tM(nM(n,e))}}function oM(t){return t!=null?iM(rM(t)):null}function sM(t){if(!t)return null;let e=t.filter(XR);return e.length==0?null:function(n){let r=nM(n,e).map(eM);return gp(r).pipe(we(tM))}}function aM(t){return t!=null?sM(rM(t)):null}function BR(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function cM(t){return t._rawValidators}function uM(t){return t._rawAsyncValidators}function XE(t){return t?Array.isArray(t)?t:[t]:[]}function ch(t,e){return Array.isArray(t)?t.includes(e):t===e}function jR(t,e){let n=XE(e);return XE(t).forEach(i=>{ch(n,i)||n.push(i)}),n}function UR(t,e){return XE(e).filter(n=>!ch(t,n))}var uh=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=oM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=aM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ht=class extends uh{name;get formDirective(){return null}get path(){return null}},mo=class extends uh{_parent=null;name=null;valueAccessor=null},lh=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Lre=(()=>{class t extends lh{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(V(mo,2))};static \u0275dir=pe({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Qa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Me]})}return t})(),Vre=(()=>{class t extends lh{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(V(Ht,10))};static \u0275dir=pe({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Qa("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Me]})}return t})();var Zc="VALID",sh="INVALID",Fs="PENDING",Xc="DISABLED",ai=class{},dh=class extends ai{value;source;constructor(e,n){super(),this.value=e,this.source=n}},eu=class extends ai{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},tu=class extends ai{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},Ls=class extends ai{status;source;constructor(e,n){super(),this.status=e,this.source=n}},eI=class extends ai{source;constructor(e){super(),this.source=e}},ru=class extends ai{source;constructor(e){super(),this.source=e}};function sI(t){return(gh(t)?t.validators:t)||null}function KH(t){return Array.isArray(t)?oM(t):t||null}function aI(t,e){return(gh(e)?e.asyncValidators:t)||null}function QH(t){return Array.isArray(t)?aM(t):t||null}function gh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function lM(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[n])throw new $(1001,"")}function dM(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new $(1002,"")})}var Vs=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Nt(this.statusReactive)}set status(e){Nt(()=>this.statusReactive.set(e))}_status=Zo(()=>this.statusReactive());statusReactive=kr(void 0);get valid(){return this.status===Zc}get invalid(){return this.status===sh}get pending(){return this.status==Fs}get disabled(){return this.status===Xc}get enabled(){return this.status!==Xc}errors;get pristine(){return Nt(this.pristineReactive)}set pristine(e){Nt(()=>this.pristineReactive.set(e))}_pristine=Zo(()=>this.pristineReactive());pristineReactive=kr(!0);get dirty(){return!this.pristine}get touched(){return Nt(this.touchedReactive)}set touched(e){Nt(()=>this.touchedReactive.set(e))}_touched=Zo(()=>this.touchedReactive());touchedReactive=kr(!1);get untouched(){return!this.touched}_events=new tt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(jR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(jR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(UR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(UR(e,this._rawAsyncValidators))}hasValidator(e){return ch(this._rawValidators,e)}hasAsyncValidator(e){return ch(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(U(x({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new tu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new tu(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(U(x({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new eu(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new eu(!0,r))}markAsPending(e={}){this.status=Fs;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ls(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(U(x({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Xc,this.errors=null,this._forEachChild(i=>{i.disable(U(x({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dh(this.value,r)),this._events.next(new Ls(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(U(x({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Zc,this._forEachChild(r=>{r.enable(U(x({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(U(x({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zc||this.status===Fs)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dh(this.value,n)),this._events.next(new Ls(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(U(x({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xc:Zc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Fs,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=eM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ls(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new _t,this.statusChanges=new _t}_calculateStatus(){return this._allControlsDisabled()?Xc:this.errors?sh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fs)?Fs:this._anyControlsHaveStatus(sh)?sh:Zc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new eu(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new tu(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){gh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=KH(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=QH(this._rawAsyncValidators)}},fh=class extends Vs{constructor(e,n,r){super(sI(n),aI(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){dM(this,!0,e),Object.keys(e).forEach(r=>{lM(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,U(x({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new ru(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var tI=class extends fh{};var mh=new G("",{factory:()=>yh}),yh="always";function _h(t,e){return[...e.path,t]}function nI(t,e,n=yh){cI(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),JH(t,e),XH(t,e),ZH(t,e),YH(t,e)}function $R(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ph(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function hh(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function YH(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function cI(t,e){let n=cM(t);e.validator!==null?t.setValidators(BR(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=uM(t);e.asyncValidator!==null?t.setAsyncValidators(BR(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();hh(e._rawValidators,i),hh(e._rawAsyncValidators,i)}function ph(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=cM(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let i=uM(t);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(n=!0,t.setAsyncValidators(o))}}}let r=()=>{};return hh(e._rawValidators,r),hh(e._rawAsyncValidators,r),n}function JH(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&fM(t,e)})}function ZH(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&fM(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function fM(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function XH(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function e4(t,e){t==null,cI(t,e)}function t4(t,e){return ph(t,e)}function hM(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function n4(t){return Object.getPrototypeOf(t.constructor)===iu}function r4(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function pM(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===QR?n=o:n4(o)?r=o:i=o}),i||r||n||null}function i4(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function HR(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function qR(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var nu=class extends Vs{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(sI(n),aI(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(qR(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new ru(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){HR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){HR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){qR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var o4=t=>t instanceof nu,s4=(()=>{class t extends Ht{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return _h(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qt(t)))(i||t)}})();static \u0275dir=pe({type:t,standalone:!1,features:[Me]})}return t})();var a4={provide:mo,useExisting:Ke(()=>c4)},GR=Promise.resolve(),c4=(()=>{class t extends mo{_changeDetectorRef;callSetDisabledState;control=new nu;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new _t;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=pM(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),hM(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){nI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){GR.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&cd(r);GR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?_h(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(V(Ht,9),V(ci,10),V(ou,10),V(yo,10),V(Xo,8),V(mh,8))};static \u0275dir=pe({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[It([a4]),Me,Bi]})}return t})();var jre=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=pe({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})(),u4={provide:yo,useExisting:Ke(()=>l4),multi:!0},l4=(()=>{class t extends iu{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qt(t)))(i||t)}})();static \u0275dir=pe({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Gn("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[It([u4]),Me]})}return t})();var rI=class extends Vs{constructor(e,n,r){super(sI(n),aI(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){dM(this,!1,e),e.forEach((r,i)=>{lM(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],U(x({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new ru(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var gM=(()=>{class t extends Ht{callSetDisabledState;get submitted(){return Nt(this._submittedReactive)}set submitted(n){this._submittedReactive.set(n)}_submitted=Zo(()=>this._submittedReactive());_submittedReactive=kr(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(n,r,i){super(),this.callSetDisabledState=i,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this.onChanges(n)}ngOnDestroy(){this.onDestroy()}onChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(ph(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(n){let r=this.form.get(n.path);return nI(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){$R(n.control||null,n,!1),i4(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}getFormArray(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}updateModel(n,r){this.form.get(n.path).setValue(r)}onReset(){this.resetForm()}resetForm(n=void 0,r={}){this.form.reset(n,r),this._submittedReactive.set(!1)}onSubmit(n){return this.submitted=!0,r4(this.form,this.directives),this.ngSubmit.emit(n),this.form._events.next(new eI(this.control)),n?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(n=>{let r=n.control,i=this.form.get(n.path);r!==i&&($R(r||null,n),o4(i)&&(nI(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let r=this.form.get(n.path);e4(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let r=this.form.get(n.path);r&&t4(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){cI(this.form,this),this._oldForm&&ph(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||t)(V(ci,10),V(ou,10),V(mh,8))};static \u0275dir=pe({type:t,features:[Me,Bi]})}return t})();var mM=new G("");var d4={provide:Ht,useExisting:Ke(()=>yM)},yM=(()=>{class t extends s4{name=null;constructor(n,r,i){super(),this._parent=n,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){vM(this._parent)}static \u0275fac=function(r){return new(r||t)(V(Ht,13),V(ci,10),V(ou,10))};static \u0275dir=pe({type:t,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[It([d4]),Me]})}return t})(),f4={provide:Ht,useExisting:Ke(()=>_M)},_M=(()=>{class t extends Ht{_parent;name=null;constructor(n,r,i){super(),this._parent=n,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){vM(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return _h(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||t)(V(Ht,13),V(ci,10),V(ou,10))};static \u0275dir=pe({type:t,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[It([f4]),Me]})}return t})();function vM(t){return!(t instanceof yM)&&!(t instanceof gM)&&!(t instanceof _M)}var h4={provide:mo,useExisting:Ke(()=>p4)},p4=(()=>{class t extends mo{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(n){}model;update=new _t;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=pM(this,o)}ngOnChanges(n){this._added||this._setUpControl(),hM(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return _h(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||t)(V(Ht,13),V(ci,10),V(ou,10),V(yo,10),V(mM,8))};static \u0275dir=pe({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[It([h4]),Me,Bi]})}return t})();var g4={provide:Ht,useExisting:Ke(()=>m4)},m4=(()=>{class t extends gM{form=null;ngSubmit=new _t;get control(){return this.form}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qt(t)))(i||t)}})();static \u0275dir=pe({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&Gn("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[It([g4]),Me]})}return t})(),y4={provide:yo,useExisting:Ke(()=>IM),multi:!0};function EM(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function _4(t){return t.split(":")[0]}var IM=(()=>{class t extends iu{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=L(Yo).injector;destroyRef=L($n);cdr=L(Xo);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,_m({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=EM(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=_4(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qt(t)))(i||t)}})();static \u0275dir=pe({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Gn("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[It([y4]),Me]})}return t})(),Ure=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(EM(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(V(Lt),V(qn),V(IM,9))};static \u0275dir=pe({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),v4={provide:yo,useExisting:Ke(()=>wM),multi:!0};function zR(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function E4(t){return t.split(":")[0]}var wM=(()=>{class t extends iu{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=E4(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qt(t)))(i||t)}})();static \u0275dir=pe({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Gn("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[It([v4]),Me]})}return t})(),$re=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(zR(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(zR(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(V(Lt),V(qn),V(wM,9))};static \u0275dir=pe({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();function DM(t){return typeof t=="number"?t:parseFloat(t)}var uI=(()=>{class t{_validator=ah;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ah,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=pe({type:t,features:[Bi]})}return t})(),I4={provide:ci,useExisting:Ke(()=>w4),multi:!0},w4=(()=>{class t extends uI{max;inputName="max";normalizeInput=n=>DM(n);createValidator=n=>JR(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qt(t)))(i||t)}})();static \u0275dir=pe({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Jo("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[It([I4]),Me]})}return t})(),D4={provide:ci,useExisting:Ke(()=>T4),multi:!0},T4=(()=>{class t extends uI{min;inputName="min";normalizeInput=n=>DM(n);createValidator=n=>YR(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qt(t)))(i||t)}})();static \u0275dir=pe({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Jo("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[It([D4]),Me]})}return t})(),b4={provide:ci,useExisting:Ke(()=>C4),multi:!0};var C4=(()=>{class t extends uI{required;inputName="required";normalizeInput=cd;createValidator=n=>ZR;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qt(t)))(i||t)}})();static \u0275dir=pe({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Jo("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[It([b4]),Me]})}return t})();var TM=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ui({type:t});static \u0275inj=Dr({})}return t})();function WR(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Hre=(()=>{class t{useNonNullable=!1;get nonNullable(){let n=new t;return n.useNonNullable=!0,n}group(n,r=null){let i=this._reduceControls(n),o={};return WR(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new fh(i,o)}record(n,r=null){let i=this._reduceControls(n);return new tI(i,r)}control(n,r,i){let o={};return this.useNonNullable?(WR(r)?o=r:(o.validators=r,o.asyncValidators=i),new nu(n,U(x({},o),{nonNullable:!0}))):new nu(n,r,i)}array(n,r,i){let o=n.map(s=>this._createControl(s));return new rI(o,r,i)}_reduceControls(n){let r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){if(n instanceof nu)return n;if(n instanceof Vs)return n;if(Array.isArray(n)){let r=n[0],i=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(r,i,o)}else return this.control(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var qre=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:mh,useValue:n.callSetDisabledState??yh}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ui({type:t});static \u0275inj=Dr({imports:[TM]})}return t})(),Gre=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:mM,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:mh,useValue:n.callSetDisabledState??yh}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ui({type:t});static \u0275inj=Dr({imports:[TM]})}return t})();var bM=class t{firestore=L(bt);list$(e){let n=ot(this.firestore,`users/${e}/accounts`),r=nn(n,ii("name"),Ln(1e3));return ri(r,{idField:"id"}).pipe(we(i=>i.map(o=>U(x({},o),{initialBalance:Number(o.initialBalance??0),type:o.type??"bank"}))))}async add(e,n){let r=ot(this.firestore,`users/${e}/accounts`);await go(r,U(x({},n),{type:n.type??"bank",initialBalance:Number(n.initialBalance??0),createdAt:it()}))}async update(e,n,r){let i=ht(this.firestore,`users/${e}/accounts/${n}`);await oi(i,x(x({},r),r.initialBalance!==void 0?{initialBalance:Number(r.initialBalance)}:{}))}async delete(e,n){let r=ot(this.firestore,`users/${e}/transactions`),i=nn(r,si("accountId","==",n),Ln(1));if(!(await Os(i)).empty)throw new Error("Conta em uso em lan\xE7amentos. N\xE3o \xE9 poss\xEDvel excluir.");let s=ht(this.firestore,`users/${e}/accounts/${n}`);await ih(s)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};var CM=class t{firestore=L(bt);list$(e){let n=ot(this.firestore,`users/${e}/investments`),r=nn(n,ii("name"));return ri(r,{idField:"id"}).pipe(we(i=>i.map(o=>this.normalize(o))))}async add(e,n){let r=ot(this.firestore,`users/${e}/investments`);await go(r,U(x({},n),{userId:e,createdAt:it(),updatedAt:it()}))}async update(e,n,r){let i=ht(this.firestore,`users/${e}/investments/${n}`);await oi(i,U(x({},r),{updatedAt:it()}))}async createDeposit(e,n){let r=ht(this.firestore,`users/${e}/investments/${n.investmentId}`);await ZE(this.firestore,async i=>{let o=await i.get(r);if(!o.exists())throw new Error("Investimento nao encontrado.");let s=o.data(),u=Number(s.principalBase??0)+Number(n.amount??0);if(!Number.isFinite(u))throw new Error("Valor invalido.");let l=ht(ot(this.firestore,`users/${e}/transactions`));i.set(l,{type:"expense",description:`Aporte em investimento: ${s.name}`,amount:Number(n.amount??0),date:n.date,categoryId:n.categoryId,accountId:n.accountId,accountOriginId:null,accountDestinationId:null,notes:n.notes||null,investmentId:n.investmentId,investmentAction:"deposit",source:"investment_movement",createdAt:it()}),i.update(r,{principalBase:u,updatedAt:it()})})}async createWithdraw(e,n){let r=ht(this.firestore,`users/${e}/investments/${n.investmentId}`);await ZE(this.firestore,async i=>{let o=await i.get(r);if(!o.exists())throw new Error("Investimento n\xE3o encontrado.");let s=o.data(),a=Number(s.principalBase??0),u=Math.max(0,a-Number(n.amount??0));if(!Number.isFinite(u))throw new Error("Valor inv\xE1lido.");let l=ht(ot(this.firestore,`users/${e}/transactions`));i.set(l,{type:"income",description:`Resgate de investimento: ${s.name}`,amount:Number(n.amount??0),date:n.date,categoryId:n.categoryId,accountId:n.accountId,accountOriginId:null,accountDestinationId:null,notes:n.notes||null,investmentId:n.investmentId,investmentAction:"withdraw",source:"investment_movement",createdAt:it()}),i.update(r,{principalBase:u,updatedAt:it()})})}normalize(e){let n=e.yieldMode??"manual_monthly",r=e.compounding??(n==="cdi_percent"||n==="selic"?"daily":"monthly"),i=Yc(e.realStartDate)||"",o=Yc(e.systemStartDate)||i;return U(x({},e),{type:e.type??"manual",status:e.status??"active",hadBeforeApp:!!e.hadBeforeApp,realStartDate:i,systemStartDate:o,principalBase:Number(e.principalBase??0),preAppYield:Number(e.preAppYield??0),totalInvestedToDate:e.totalInvestedToDate===null||e.totalInvestedToDate===void 0?null:Number(e.totalInvestedToDate),currentValueAtOnboarding:e.currentValueAtOnboarding===null||e.currentValueAtOnboarding===void 0?null:Number(e.currentValueAtOnboarding),yieldMode:n,manualRate:e.manualRate===null||e.manualRate===void 0?null:Number(e.manualRate),cdiPercent:e.cdiPercent===null||e.cdiPercent===void 0?null:Number(e.cdiPercent),compounding:r})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};var AM=class t{calculate(e,n){let r=this.getPreAppYield(e),i=this.getInitialValue(e),o=this.getStartDate(e),s=this.getReferenceDate(n),a=Qc(s);if(!o||i<=0)return this.buildResult(e,r,i,i,0,0,a,this.isIndexMode(e.yieldMode),!1);let u=this.daysBetween(o,s),l=this.monthsBetween(o,s);if(u<=0)return this.buildResult(e,r,i,i,0,0,a,!1,!1);if(e.yieldMode==="manual_monthly"||e.yieldMode==="manual_yearly"){let y=this.calculateManual(i,e.yieldMode,Number(e.manualRate??0),e.compounding??"monthly",u,l),C=y-i;return this.buildResult(e,r,i,y,C,i>0?C/i*100:0,a,!1,!1)}let f=e.yieldMode==="cdi_percent"?n.cdi:n.selic,p=Number(f?.value??0);if(f&&p>0){let y=this.calculateIndex(i,e.yieldMode,e.cdiPercent??100,p,e.compounding??"daily",u,l),C=y-i;return this.buildResult(e,r,i,y,C,i>0?C/i*100:0,f.date??a,!1,!1)}let g=Number(e.manualRate??0);if(g>0){let y=this.calculateManual(i,"manual_monthly",g,e.compounding??"monthly",u,l),C=y-i;return this.buildResult(e,r,i,y,C,i>0?C/i*100:0,a,!0,!0)}return this.buildResult(e,r,i,i,0,0,null,!0,!1)}summarize(e,n){let r=e.filter(g=>g.status==="active"),i=r.map(g=>this.calculate(g,n)),o=this.sum(r.map(g=>Number(g.principalBase??0))),s=this.sum(i.map(g=>g.totalEstimated)),a=this.sum(i.map(g=>g.totalYield)),u=this.sum(r.map(g=>{let y=Number(g.totalInvestedToDate??0);if(y>0)return y;let C=this.getPreAppYield(g);return this.getPrincipalBaseForReturn(g,C)})),l=u>0?a/u*100:0,f=this.pickLatestDate(i.map(g=>g.updatedAt)),p=i.some(g=>g.indexMissing);return{totalInvested:o,totalEstimated:s,totalYield:a,totalYieldPercent:l,updatedAt:f,indexMissing:p,count:r.length}}getInitialValue(e){let n=Number(e.principalBase??0),r=this.getPreAppYield(e);return n+r}getPreAppYield(e){return e.hadBeforeApp?Number(e.preAppYield??0):0}getPrincipalBaseForReturn(e,n){return e.hadBeforeApp&&e.currentValueAtOnboarding!==null&&e.currentValueAtOnboarding!==void 0?Math.max(0,Number(e.currentValueAtOnboarding)-n):Number(e.principalBase??0)}getTotalReturnPercent(e,n,r){let i=Number(e.totalInvestedToDate??0);return i>0?n/i*100:r>0?n/r*100:0}buildResult(e,n,r,i,o,s,a,u,l){let f=n+o,p=this.getPrincipalBaseForReturn(e,n),g=this.getTotalReturnPercent(e,f,p);return{preAppYield:n,postAppYield:o,totalYield:f,totalReturnPercent:g,initialValue:r,totalEstimated:i,yieldAfter:o,yieldPercent:s,updatedAt:a,indexMissing:u,placeholderUsed:l}}getStartDate(e){let n=Jc(e.systemStartDate);return n||Jc(e.realStartDate)}getReferenceDate(e){let n=e.referenceDate?new Date(e.referenceDate):new Date;return new Date(n.getFullYear(),n.getMonth(),n.getDate())}calculateManual(e,n,r,i,o,s){let a=Math.max(0,r)/100;if(a<=0)return e;if(i==="monthly"){let l=n==="manual_yearly"?Math.pow(1+a,.08333333333333333)-1:a;return e*Math.pow(1+l,Math.max(0,s))}let u=n==="manual_yearly"?Math.pow(1+a,1/365)-1:Math.pow(1+a,1/30)-1;return e*Math.pow(1+u,Math.max(0,o))}calculateIndex(e,n,r,i,o,s,a){let u=Math.max(0,i)/100,l=n==="cdi_percent"?Math.max(0,r)/100:1,f=u*l;if(f<=0)return e;if(o==="monthly"){let p=Math.pow(1+f,30)-1;return e*Math.pow(1+p,Math.max(0,a))}return e*Math.pow(1+f,Math.max(0,s))}daysBetween(e,n){let r=new Date(e.getFullYear(),e.getMonth(),e.getDate()),o=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()-r.getTime();return Math.floor(o/(1e3*60*60*24))}monthsBetween(e,n){let r=e.getFullYear()*12+e.getMonth(),o=n.getFullYear()*12+n.getMonth()-r;return n.getDate()<e.getDate()&&(o-=1),Math.max(0,o)}sum(e){return e.reduce((n,r)=>n+r,0)}pickLatestDate(e){let n=e.filter(r=>!!r);return n.length?n.sort((r,i)=>r>i?-1:1)[0]:null}isIndexMode(e){return e==="cdi_percent"||e==="selic"}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};var SM=class t{firestore=L(bt);cache=new Map;latest$(e){let n=this.cache.get(e);if(n)return n;let r=ot(this.firestore,"indices"),i=nn(r,si("type","==",e),ii("date","desc"),Ln(1)),o=ri(i,{idField:"id"}).pipe(we(s=>{let a=s?.[0]??null;return a?this.normalize(a,e):null}),da(()=>No(null)),Ro({bufferSize:1,refCount:!0}));return this.cache.set(e,o),o}normalize(e,n){let r=Yc(e.date);return U(x({},e),{type:e.type??n,date:r||"",value:Number(e.value??0)})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};var NM=class t{toastsSubject=new yi([]);timers=new Map;toasts$=this.toastsSubject.asObservable();success(e,n){this.show("success",e,n)}error(e,n){this.show("error",e,n)}info(e,n){this.show("info",e,n)}warning(e,n){this.show("warning",e,n)}show(e,n,r){let i=`${Date.now()}-${Math.random().toString(16).slice(2)}`,o={id:i,type:e,message:n,actionLabel:r?.actionLabel,action:r?.action},s=r?.durationMs??(e==="error"?7e3:4e3);if(this.toastsSubject.next([...this.toastsSubject.value,o]),s>0){let a=setTimeout(()=>this.dismiss(i),s);this.timers.set(i,a)}}dismiss(e){let n=this.toastsSubject.value;if(!n.length)return;let r=n.filter(o=>o.id!==e);this.toastsSubject.next(r);let i=this.timers.get(e);i&&(clearTimeout(i),this.timers.delete(e))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};export{x as a,U as b,A4 as c,S4 as d,N4 as e,et as f,Aw as g,ne as h,tt as i,yi as j,la as k,ct as l,No as m,kP as n,OP as o,vi as p,FP as q,we as r,qP as s,Ei as t,pp as u,Zu as v,zP as w,Xu as x,da as y,WP as z,mp as A,QP as B,YP as C,JP as D,_p as E,fa as F,Qw as G,Yw as H,$ as I,_a as J,Y as K,nx as L,G as M,Re as N,L as O,Cr as P,Zp as Q,St as R,Ar as S,SD as T,ND as U,$D as V,We as W,Un as X,$n as Y,xi as Z,_t as _,Pe as $,bi as aa,Hn as ba,kr as ca,Nt as da,Bi as ea,Qt as fa,sm as ga,Lt as ha,dk as ia,fk as ja,qT as ka,cm as la,pk as ma,Fi as na,Mk as oa,zk as pa,Va as qa,jl as ra,Ga as sa,ja as ta,qn as ua,V as va,ji as wa,jb as xa,Ub as ya,O1 as za,pe as Aa,qb as Ba,Y1 as Ca,$i as Da,Kb as Ea,Yo as Fa,Jo as Ga,Jb as Ha,km as Ia,Om as Ja,Zb as Ka,Fm as La,Lm as Ma,Xb as Na,tC as Oa,nC as Pa,X1 as Qa,Gn as Ra,iC as Sa,oF as Ta,sC as Ua,sF as Va,aF as Wa,cF as Xa,aC as Ya,Qa as Za,TF as _a,uC as $a,Bm as ab,lC as bb,dC as cb,fC as db,NF as eb,hC as fb,xF as gb,kF as hb,OF as ib,FF as jb,jF as kb,$F as lb,HF as mb,qF as nb,GF as ob,zF as pb,Hi as qb,EC as rb,RJ as sb,Xo as tb,MJ as ub,cd as vb,qi as wb,fL as xb,Ym as yb,ld as zb,PC as Ab,VL as Bb,rA as Cb,BL as Db,$L as Eb,qL as Fb,GL as Gb,zL as Hb,WL as Ib,KL as Jb,sy as Kb,GZ as Lb,zZ as Mb,KX as Nb,QX as Ob,_te as Pb,vte as Qb,it as Rb,bt as Sb,Zne as Tb,ri as Ub,go as Vb,ot as Wb,ih as Xb,ht as Yb,Xne as Zb,Os as _b,ere as $b,Ln as ac,ii as bc,nn as cc,ZE as dc,oi as ec,si as fc,Yc as gc,Qc as hc,nre as ic,Jc as jc,oh as kc,LR as lc,LH as mc,QR as nc,VR as oc,Lre as pc,Vre as qc,nu as rc,c4 as sc,jre as tc,l4 as uc,_M as vc,p4 as wc,m4 as xc,IM as yc,Ure as zc,$re as Ac,w4 as Bc,T4 as Cc,C4 as Dc,Hre as Ec,qre as Fc,Gre as Gc,bM as Hc,CM as Ic,AM as Jc,SM as Kc,NM as Lc};
